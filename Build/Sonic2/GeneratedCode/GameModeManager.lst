/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : .\Sonic2\GeneratedCode\GameModeManager.asm
 * Fichier destination : .\Sonic2\GeneratedCode\TMP.BIN
 * Contenu :
 *     Main     0:GAMEMODE.ASM 1579
 *     Include  0:CONSTANT.ASM 5768
 *     Include  0:GLOBALS.ASM  6596
 *     Include  0:GMLOADER.ASM 2210
 *     Include  0:GMDATA.ASM   4360
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
    105                                   INCLUD CONSTANT
    106                           * --------------------------------------->>
    107                           * Constants
    108                           *
    109                           * Naming convention
    110                           * -----------------
    111                           * - lower case
    112                           * - underscore-separated names
    113                           *
    114                           * --------------------------------------->>
    115
    116                           * =======================================>>
    117                           * TO8 Registers
    118                           * =======================================>>
    119
    120                  6049     dk_lecteur                    equ $6049
    121                  604A     dk_piste                      equ $604A
    122                  604B     dk_pisteL                     equ $604B
    123                  604C     dk_secteur                    equ $604C
    124                  604F     dk_destination                equ $604F
    125
    126                           * =======================================>>
    127                           * Display Constants
    128                           * =======================================>>
    129
    130                  00A0     screen_width                  equ 160 ; s>>
    131                  001C     screen_top                    equ 28 ; in>>
    132                  00E3     screen_bottom                 equ 28+199 >>
    133                  0030     screen_left                   equ 48 ; in>>
    134                  00CF     screen_right                  equ 48+159 >>
    135                  0008     nb_priority_levels            equ 8   ; n>>
    136
    137                           * =======================================>>
    138                           * Physics Constants
    139                           * =======================================>>
    140
    141                  0038     gravity                       equ $38 ; G>>
    142
    143                           * =======================================>>
    144                           * Animation Constants
    145                           * =======================================>>
    146
    147                  00FF     _resetAnim                    equ $FF
    148                  00FE     _goBackNFrames                equ $FE
    149                  00FD     _goToAnimation                equ $FD
    150                  00FC     _nextRoutine                  equ $FC
    151                  00FB     _resetAnimAndSubRoutine       equ $FB
    152                  00FA     _nextSubRoutine               equ $FA
    153
    154                           * =======================================>>
    155                           * Images Constants
    156                           * =======================================>>
    157
    158                  0004     image_x_size                  equ 4
    159                  0005     image_y_size                  equ 5
    160                  0006     image_center_offset           equ 6
    161
    162                  0004     image_subset_x1_offset        equ 4
    163                  0005     image_subset_y1_offset        equ 5
    164
    165                  0000     page_draw_routine             equ 0
    166                  0001     draw_routine                  equ 1
    167                  0003     page_erase_routine            equ 3
    168                  0004     erase_routine                 equ 4
    169                  0006     erase_nb_cell                 equ 6
    170
    171                           * =======================================>>
    172                           * Sound Constants
    173                           * =======================================>>
    174
    175                  0000     pcm_page        equ 0
    176                  0001     pcm_start_addr  equ 1
    177                  0003     pcm_end_addr    equ 3
    178                  0005     pcm_meta_size   equ 5
    179
    180                           * =======================================>>
    181                           * Object Constants
    182                           * =======================================>>
    183
    184                  0002     nb_reserved_objects           equ 2
    185                  001B     nb_dynamic_objects            equ 27
    186                  0003     nb_level_objects              equ 3
    187                  0020     nb_objects                    equ 32 * ma>>
    188
    189                           * --------------------------------------->>
    190                           * Object Status Table offsets
    191                           * --------------------------------------->>
    192
    193                  005A     object_size                   equ 90 ; th>>
    194                  005A     next_object                   equ object_>>
    195
    196                  0000     id                            equ 0      >>
    197                  0001     subtype                       equ 1      >>
    198                  0002     render_flags                  equ 2
    199
    200                           * --- render_flags bitfield variables --->>
    201                  0001     render_xmirror_mask           equ $01 ; (>>
    202                  0002     render_ymirror_mask           equ $02 ; (>>
    203                  0004     render_overlay_mask           equ $04 ; (>>
    204                  0008     render_motionless_mask        equ $08 ; (>>
    205                  0010     render_playfieldcoord_mask    equ $10 ; (>>
    206                  0020     render_hide_mask              equ $20 ; (>>
    207                  0040     render_todelete_mask          equ $40 ; (>>
    208                  0080     render_xloop_mask             equ $80 ; (>>
    209                            
    210                  0003     priority                      equ 3      >>
    211                  0004     anim                          equ 4  ; an>>
    212                  0006     prev_anim                     equ 6  ; an>>
    213                  0008     anim_frame                    equ 8      >>
    214                  0009     anim_frame_duration           equ 9      >>
    215                  000A     image_set                     equ 10 ; an>>
    216                  000C     x_pos                         equ 12 ; an>>
    217                  000E     x_sub                         equ 14     >>
    218                  000F     y_pos                         equ 15 ; an>>
    219                  0011     y_sub                         equ 17     >>
    220                  0012     xy_pixel                      equ 18     >>
    221                  0012     x_pixel                       equ 18     >>
    222                  0013     y_pixel                       equ 19     >>
    223                  0014     x_vel                         equ 20 ; an>>
    224                  0016     y_vel                         equ 22 ; an>>
    225                  0018     routine                       equ 24     >>
    226                  0019     routine_secondary             equ 25     >>
    227                  001A     status                        equ 26
    228
    229                           * --- status bitfield variables for objec>>
    230                  0001     status_x_orientation          equ   $01 ;>>
    231                  0002     status_y_orientation          equ   $02 ;>>
    232                  0004     status_bit2                   equ   $04 ;>>
    233                  0008     status_mainchar_standing      equ   $08 ;>>
    234                  0010     status_sidekick_standing      equ   $10 ;>>
    235                  0020     status_mainchar_pushing       equ   $20 ;>>
    236                  0040     status_sidekick_pushing       equ   $40 ;>>
    237                  0080     status_bit7                   equ   $80 ;>>
    238
    239                           * --- status bitfield variables for Main >>
    240                  0002     status_inair                  equ   $02 ;>>
    241                  0004     status_jumporroll             equ   $04 ;>>
    242                  0008     status_norgroundnorfall       equ   $08 ;>>
    243                  0010     status_jumpingafterrolling    equ   $10 ;>>
    244                  0020     status_pushing                equ   $20 ;>>
    245                  0040     status_underwater             equ   $40 ;>>
    246
    247                  001B     ext_variables                 equ 27 ; to>>
    248
    249                           * --------------------------------------->>
    250                           * reserved variables (engine)
    251
    252                  0029     rsv_render_flags              equ 41
    253
    254                           * --- rsv_render_flags bitfield variables>>
    255                  0001     rsv_render_checkrefresh_mask  equ $01 ; (>>
    256                  0002     rsv_render_erasesprite_mask   equ $02 ; (>>
    257                  0004     rsv_render_displaysprite_mask equ $04 ; (>>
    258                  0008     rsv_render_outofrange_mask    equ $08 ; (>>
    259
    260                  002A     rsv_prev_anim                 equ 42 ; an>>
    261                  002C     rsv_image_center_offset       equ 44 ; 0 >>
    262                           * ne sert plus                       ; an>>
    263                  002E     rsv_image_subset              equ 46 ; an>>
    264                  0030     rsv_mapping_frame             equ 48 ; an>>
    265                  0032     rsv_xy1_pixel                 equ 50     >>
    266                  0032     rsv_x1_pixel                  equ 50     >>
    267                  0033     rsv_y1_pixel                  equ 51     >>
    268                  0034     rsv_xy2_pixel                 equ 52     >>
    269                  0034     rsv_x2_pixel                  equ 52     >>
    270                  0035     rsv_y2_pixel                  equ 53     >>
    271
    272                           * --------------------------------------->>
    273                           * reserved variables (engine) - buffer sp>>
    274
    275                  0036     rsv_buffer_0                  equ 54 ; St>>
    276                  0036     rsv_priority_0                equ 54 ; in>>
    277                  0037     rsv_priority_prev_obj_0       equ 55 ; an>>
    278                  0039     rsv_priority_next_obj_0       equ 57 ; an>>
    279                           *rsv_prev_image_subset_0       equ 59 ; a>>
    280                  003D     rsv_prev_mapping_frame_0      equ 61 ; an>>
    281                  003F     rsv_bgdata_0                  equ 63 ; an>>
    282                  0041     rsv_prev_xy_pixel_0           equ 65 ;
    283                  0041     rsv_prev_x_pixel_0            equ 65 ; pr>>
    284                  0042     rsv_prev_y_pixel_0            equ 66 ; pr>>
    285                  0043     rsv_prev_xy1_pixel_0          equ 67 ;
    286                  0043     rsv_prev_x1_pixel_0           equ 67 ; pr>>
    287                  0044     rsv_prev_y1_pixel_0           equ 68 ; pr>>
    288                  0045     rsv_prev_xy2_pixel_0          equ 69 ;
    289                  0045     rsv_prev_x2_pixel_0           equ 69 ; pr>>
    290                  0046     rsv_prev_y2_pixel_0           equ 70 ; pr>>
    291                  0047     rsv_prev_render_flags_0       equ 71 ;
    292                           * --- rsv_prev_render_flags_0 bitfield va>>
    293                  0001     rsv_prev_render_overlay_mask  equ $01 ; (>>
    294                  0080     rsv_prev_render_onscreen_mask equ $80 ; (>>
    295
    296                  0048     rsv_buffer_1                  equ 72 ; St>>
    297                  0048     rsv_priority_1                equ 72 ; in>>
    298                  0049     rsv_priority_prev_obj_1       equ 73 ; an>>
    299                  004B     rsv_priority_next_obj_1       equ 75 ; an>>
    300                           *rsv_prev_image_subset_1       equ 77 ; a>>
    301                  004F     rsv_prev_mapping_frame_1      equ 79 ; an>>
    302                  0051     rsv_bgdata_1                  equ 81 ; an>>
    303                  0053     rsv_prev_xy_pixel_1           equ 83 ;
    304                  0053     rsv_prev_x_pixel_1            equ 83 ; pr>>
    305                  0054     rsv_prev_y_pixel_1            equ 84 ; pr>>
    306                  0055     rsv_prev_xy1_pixel_1          equ 85 ;
    307                  0055     rsv_prev_x1_pixel_1           equ 85 ; pr>>
    308                  0056     rsv_prev_y1_pixel_1           equ 86 ; pr>>
    309                  0057     rsv_prev_xy2_pixel_1          equ 87 ;
    310                  0057     rsv_prev_x2_pixel_1           equ 87 ; pr>>
    311                  0058     rsv_prev_y2_pixel_1           equ 88 ; pr>>
    312                  0059     rsv_prev_render_flags_1       equ 89 ;
    313
    314                  0000     buf_priority                  equ 0  ; of>>
    315                  0001     buf_priority_prev_obj         equ 1  ;
    316                  0003     buf_priority_next_obj         equ 3  ;
    317                           *buf_prev_image_subset         equ 5  ;
    318                  0007     buf_prev_mapping_frame        equ 7  ;
    319                  0009     buf_bgdata                    equ 9  ;
    320                  000B     buf_prev_xy_pixel             equ 11 ;
    321                  000B     buf_prev_x_pixel              equ 11 ;
    322                  000C     buf_prev_y_pixel              equ 12 ;
    323                  000D     buf_prev_xy1_pixel            equ 13 ;
    324                  000D     buf_prev_x1_pixel             equ 13 ;
    325                  000E     buf_prev_y1_pixel             equ 14 ;
    326                  000F     buf_prev_xy2_pixel            equ 15 ;
    327                  000F     buf_prev_x2_pixel             equ 15 ;
    328                  0010     buf_prev_y2_pixel             equ 16 ;
    329                  0011     buf_prev_render_flags         equ 17 ;
    330
    331                                   INCLUD GLOBALS
    332                           * Generated Code
    333
    334                  414F     GameModeLoader equ $414F
    335                  41C7     current_game_mode_data equ $41C7
    336                  0001     ObjID_SonicAndTailsIn equ 1
    337                  0002     ObjID_SEGA equ 2
    338                  0003     ObjID_PaletteHandler equ 3
    339                  0004     ObjID_TitleScreen equ 4
    340                  613F     Glb_Sprite_Screen_Pos_Part1 equ $613F
    341                  6141     Glb_Sprite_Screen_Pos_Part2 equ $6141
    342                  662D     Object_RAM equ $662D
    343                  7188     screen_border_color equ $7188
    344                  71A5     Vint_runcount equ $71A5
    345                  0001     c1_button_up_mask equ $0001
    346                  0002     c1_button_down_mask equ $0002
    347                  0004     c1_button_left_mask equ $0004
    348                  0008     c1_button_right_mask equ $0008
    349                  0010     c2_button_up_mask equ $0010
    350                  0020     c2_button_down_mask equ $0020
    351                  0040     c2_button_left_mask equ $0040
    352                  0080     c2_button_right_mask equ $0080
    353                  0040     c1_button_A_mask equ $0040
    354                  0080     c2_button_A_mask equ $0080
    355                  71A9     Joypads_Held equ $71A9
    356                  71A9     Dpad_Held equ $71A9
    357                  71AA     Fire_Held equ $71AA
    358                  71AB     Joypads_Press equ $71AB
    359                  71AB     Dpad_Press equ $71AB
    360                  71AC     Fire_Press equ $71AC
    361                  7216     MarkObjGone equ $7216
    362                  7218     DisplaySprite_x equ $7218
    363                  721E     DisplaySprite equ $721E
    364                  7297     AnimateSprite equ $7297
    365                  735C     DeleteObject_x equ $735C
    366                  7362     DeleteObject equ $7362
    367                  7424     ClearObj equ $7424
    368                  7CD4     ClearCartMem equ $7CD4
    369                  7D0F     Refresh_palette equ $7D0F
    370                  7D10     Cur_palette equ $7D10
    371                  7D12     Dyn_palette equ $7D12
    372                  7D32     Black_palette equ $7D32
    373                  7D52     White_palette equ $7D52
    374                  7D72     UpdatePalette equ $7D72
    375                  7D9A     PlayPCM equ $7D9A
    376                  7DF1     PSGInit equ $7DF1
    377                  7E03     PSGPlayNoRepeat equ $7E03
    378                  7E31     PSGStop equ $7E31
    379                  7E5A     PSGResume equ $7E5A
    380                  7EA5     PSGCancelLoop equ $7EA5
    381                  7EA9     PSGGetStatus equ $7EA9
    382                  7EAD     PSGSetMusicVolumeAttenuation equ $7EAD
    383                  7F0C     PSGSilenceChannels equ $7F0C
    384                  7F21     PSGRestoreVolumes equ $7F21
    385                  7F95     PSGSFXPlayLoop equ $7F95
    386                  7FE1     PSGSFXStop equ $7FE1
    387                  8057     PSGSFXCancelLoop equ $8057
    388                  805B     PSGSFXGetStatus equ $805B
    389                  805F     PSGFrame equ $805F
    390                  8119     _sendVolume2PSG equ $8119
    391                  816C     PSGSFXFrame equ $816C
    392                  81C9     _SFXsetLoopPoint equ $81C9
    393                  8215     Img_SonicAndTailsIn equ $8215
    394                  8225     Img_SegaLogo_2 equ $8225
    395                  8235     Img_SegaLogo_1 equ $8235
    396                  8245     Img_SegaTrails_1 equ $8245
    397                  825E     Img_SegaSonic_12 equ $825E
    398                  827F     Img_SegaSonic_23 equ $827F
    399                  82A0     Img_SegaSonic_13 equ $82A0
    400                  82C1     Img_SegaSonic_32 equ $82C1
    401                  82E2     Img_SegaSonic_21 equ $82E2
    402                  8303     Img_SegaSonic_43 equ $8303
    403                  8324     Img_SegaSonic_11 equ $8324
    404                  8345     Img_SegaSonic_33 equ $8345
    405                  8366     Img_SegaSonic_22 equ $8366
    406                  8387     Img_SegaSonic_41 equ $8387
    407                  83A8     Img_SegaSonic_31 equ $83A8
    408                  83C9     Img_SegaSonic_42 equ $83C9
    409                  83EA     Img_SegaTrails_6 equ $83EA
    410                  83FA     Img_SegaTrails_5 equ $83FA
    411                  840A     Img_SegaTrails_4 equ $840A
    412                  841A     Img_SegaTrails_3 equ $841A
    413                  842A     Img_SegaTrails_2 equ $842A
    414                  8443     Img_star_4 equ $8443
    415                  8457     Img_star_3 equ $8457
    416                  846B     Img_sonicHand equ $846B
    417                  8482     Img_star_2 equ $8482
    418                  849D     Img_star_1 equ $849D
    419                  84B8     Img_emblemBack08 equ $84B8
    420                  84C8     Img_emblemBack07 equ $84C8
    421                  84D8     Img_emblemBack09 equ $84D8
    422                  84E8     Img_emblemBack04 equ $84E8
    423                  84F8     Img_emblemBack03 equ $84F8
    424                  8508     Img_emblemBack06 equ $8508
    425                  8518     Img_emblemBack05 equ $8518
    426                  8528     Img_tails_5 equ $8528
    427                  853F     Img_tails_4 equ $853F
    428                  8553     Img_tails_3 equ $8553
    429                  8567     Img_tails_2 equ $8567
    430                  857B     Img_tails_1 equ $857B
    431                  858F     Img_tailsHand equ $858F
    432                  85A6     Img_sonic_1 equ $85A6
    433                  85BA     Img_sonic_2 equ $85BA
    434                  85CE     Img_emblemBack02 equ $85CE
    435                  85DE     Img_emblemBack01 equ $85DE
    436                  85EE     Img_sonic_5 equ $85EE
    437                  8605     Img_sonic_3 equ $8605
    438                  8619     Img_sonic_4 equ $8619
    439                  862D     Img_emblemFront07 equ $862D
    440                  863D     Img_emblemFront08 equ $863D
    441                  864D     Img_emblemFront05 equ $864D
    442                  865D     Img_emblemFront06 equ $865D
    443                  866D     Img_emblemFront03 equ $866D
    444                  867D     Img_emblemFront04 equ $867D
    445                  868D     Img_emblemFront01 equ $868D
    446                  869D     Img_emblemFront02 equ $869D
    447                  86AE     Ani_SegaSonic_3 equ $86AE
    448                  86B8     Ani_SegaSonic_2 equ $86B8
    449                  86C2     Ani_SegaSonic_1 equ $86C2
    450                  86CC     Ani_smallStar equ $86CC
    451                  86D2     Ani_largeStar equ $86D2
    452                  86DE     Ani_tails equ $86DE
    453                  86EA     Ani_sonic equ $86EA
    454                  613F     Glb_Sprite_Screen_Pos_Part1 equ $613F
    455                  6141     Glb_Sprite_Screen_Pos_Part2 equ $6141
    456                  662D     Object_RAM equ $662D
    457                  7188     screen_border_color equ $7188
    458                  71A5     Vint_runcount equ $71A5
    459                  0001     c1_button_up_mask equ $0001
    460                  0002     c1_button_down_mask equ $0002
    461                  0004     c1_button_left_mask equ $0004
    462                  0008     c1_button_right_mask equ $0008
    463                  0010     c2_button_up_mask equ $0010
    464                  0020     c2_button_down_mask equ $0020
    465                  0040     c2_button_left_mask equ $0040
    466                  0080     c2_button_right_mask equ $0080
    467                  0040     c1_button_A_mask equ $0040
    468                  0080     c2_button_A_mask equ $0080
    469                  71A9     Joypads_Held equ $71A9
    470                  71A9     Dpad_Held equ $71A9
    471                  71AA     Fire_Held equ $71AA
    472                  71AB     Joypads_Press equ $71AB
    473                  71AB     Dpad_Press equ $71AB
    474                  71AC     Fire_Press equ $71AC
    475                  7216     MarkObjGone equ $7216
    476                  7218     DisplaySprite_x equ $7218
    477                  721E     DisplaySprite equ $721E
    478                  7297     AnimateSprite equ $7297
    479                  735C     DeleteObject_x equ $735C
    480                  7362     DeleteObject equ $7362
    481                  7424     ClearObj equ $7424
    482                  7CD4     ClearCartMem equ $7CD4
    483                  7D0F     Refresh_palette equ $7D0F
    484                  7D10     Cur_palette equ $7D10
    485                  7D12     Dyn_palette equ $7D12
    486                  7D32     Black_palette equ $7D32
    487                  7D52     White_palette equ $7D52
    488                  7D72     UpdatePalette equ $7D72
    489                  7D9A     PlayPCM equ $7D9A
    490                  7DF1     PSGInit equ $7DF1
    491                  7E03     PSGPlayNoRepeat equ $7E03
    492                  7E31     PSGStop equ $7E31
    493                  7E5A     PSGResume equ $7E5A
    494                  7EA5     PSGCancelLoop equ $7EA5
    495                  7EA9     PSGGetStatus equ $7EA9
    496                  7EAD     PSGSetMusicVolumeAttenuation equ $7EAD
    497                  7F0C     PSGSilenceChannels equ $7F0C
    498                  7F21     PSGRestoreVolumes equ $7F21
    499                  7F95     PSGSFXPlayLoop equ $7F95
    500                  7FE1     PSGSFXStop equ $7FE1
    501                  8057     PSGSFXCancelLoop equ $8057
    502                  805B     PSGSFXGetStatus equ $805B
    503                  805F     PSGFrame equ $805F
    504                  8119     _sendVolume2PSG equ $8119
    505                  816C     PSGSFXFrame equ $816C
    506                  81C9     _SFXsetLoopPoint equ $81C9
    507                  8215     Img_SonicAndTailsIn equ $8215
    508                  8225     Img_SegaLogo_2 equ $8225
    509                  8235     Img_SegaLogo_1 equ $8235
    510                  8245     Img_SegaTrails_1 equ $8245
    511                  825E     Img_SegaSonic_12 equ $825E
    512                  827F     Img_SegaSonic_23 equ $827F
    513                  82A0     Img_SegaSonic_13 equ $82A0
    514                  82C1     Img_SegaSonic_32 equ $82C1
    515                  82E2     Img_SegaSonic_21 equ $82E2
    516                  8303     Img_SegaSonic_43 equ $8303
    517                  8324     Img_SegaSonic_11 equ $8324
    518                  8345     Img_SegaSonic_33 equ $8345
    519                  8366     Img_SegaSonic_22 equ $8366
    520                  8387     Img_SegaSonic_41 equ $8387
    521                  83A8     Img_SegaSonic_31 equ $83A8
    522                  83C9     Img_SegaSonic_42 equ $83C9
    523                  83EA     Img_SegaTrails_6 equ $83EA
    524                  83FA     Img_SegaTrails_5 equ $83FA
    525                  840A     Img_SegaTrails_4 equ $840A
    526                  841A     Img_SegaTrails_3 equ $841A
    527                  842A     Img_SegaTrails_2 equ $842A
    528                  8443     Img_star_4 equ $8443
    529                  8457     Img_star_3 equ $8457
    530                  846B     Img_sonicHand equ $846B
    531                  8482     Img_star_2 equ $8482
    532                  849D     Img_star_1 equ $849D
    533                  84B8     Img_emblemBack08 equ $84B8
    534                  84C8     Img_emblemBack07 equ $84C8
    535                  84D8     Img_emblemBack09 equ $84D8
    536                  84E8     Img_emblemBack04 equ $84E8
    537                  84F8     Img_emblemBack03 equ $84F8
    538                  8508     Img_emblemBack06 equ $8508
    539                  8518     Img_emblemBack05 equ $8518
    540                  8528     Img_tails_5 equ $8528
    541                  853F     Img_tails_4 equ $853F
    542                  8553     Img_tails_3 equ $8553
    543                  8567     Img_tails_2 equ $8567
    544                  857B     Img_tails_1 equ $857B
    545                  858F     Img_tailsHand equ $858F
    546                  85A6     Img_sonic_1 equ $85A6
    547                  85BA     Img_sonic_2 equ $85BA
    548                  85CE     Img_emblemBack02 equ $85CE
    549                  85DE     Img_emblemBack01 equ $85DE
    550                  85EE     Img_sonic_5 equ $85EE
    551                  8605     Img_sonic_3 equ $8605
    552                  8619     Img_sonic_4 equ $8619
    553                  862D     Img_emblemFront07 equ $862D
    554                  863D     Img_emblemFront08 equ $863D
    555                  864D     Img_emblemFront05 equ $864D
    556                  865D     Img_emblemFront06 equ $865D
    557                  866D     Img_emblemFront03 equ $866D
    558                  867D     Img_emblemFront04 equ $867D
    559                  868D     Img_emblemFront01 equ $868D
    560                  869D     Img_emblemFront02 equ $869D
    561                  86AE     Ani_SegaSonic_3 equ $86AE
    562                  86B8     Ani_SegaSonic_2 equ $86B8
    563                  86C2     Ani_SegaSonic_1 equ $86C2
    564                  86CC     Ani_smallStar equ $86CC
    565                  86D2     Ani_largeStar equ $86D2
    566                  86DE     Ani_tails equ $86DE
    567                  86EA     Ani_sonic equ $86EA
    568                  89F3     Pcm_SEGA equ $89F3
    569                  89FE     Psg_TitleScreen equ $89FE
    570                  8A38     Pal_SEGA equ $8A38
    571                  8A58     Pal_TitleScreen equ $8A58
    572                  8A78     Pal_SEGAMid equ $8A78
    573                  8A98     Pal_SonicAndTailsIn equ $8A98
    574                  8AB8     Pal_SEGAEnd equ $8AB8
    575
     35        A000                       org $A000
     36
     37        A000               GameModeManager
     38
     39                           * Positionnement de la page 3 a l'ecran
     40                           *****************************************>>
     41        A000               WaitVBL
     42  7     A000 7D   E7E7             tst   $E7E7                    * >>
     43  3     A003 2A   FB               bpl   WaitVBL                  * >>
     44        A005               WaitVBL_01
     45  7     A005 7D   E7E7             tst   $E7E7                    * >>
     46  3     A008 2B   FB               bmi   WaitVBL_01               * >>
     47        A00A               SwapVideoPage
     48  2     A00A C6   C0               ldb   #$C0                     * >>
     49  5     A00C F7   E7DD             stb   $E7DD                    * >>
     50                            
     51                           * Positionnement de la page 2 en zone 000>>
     52                           *****************************************>>
     53  2     A00F C6   62               ldb   #$62                     * >>
     54  5     A011 F7   E7E6             stb   $E7E6                    * >>
     55                            
     56                           * Positionnement de la page 0a en zone 40>>
     57                           *****************************************>>
     58  5     A014 F6   E7C3             ldb   $E7C3                    * >>
     59  2     A017 C4   FE               andb  #$FE                     * >>
     60  5     A019 F7   E7C3             stb   $E7C3                    * >>
     61
     62                           * Copie en page 0a des donnees du mode a >>
     63                           * les groupes de 7 octets sont recopiees >>
     64                           * si on souhaite implanter le debut du mo>>
     65                           * il faut le charger en dernier (car ecra>>
     66                           * la fin des donnees est marquee par un o>>
     67                           *****************************************>>
     68  7     A01C 10FF A03D             sts   CopyCode3+2              ; >>
     69  6+1   A020 10EE 5E               lds   -2,u                     ; >>
     70  2     A023 86   FF               lda   #$FF                     ; >>
     71  5+1   A025 34   02               pshs  a                        ; >>
     72        A027               CopyData1
     73  5+7   A027 37   3E               pulu  d,x,y,dp                 ; >>
     74  5+7   A029 34   3E               pshs  d,x,y,dp                 ; >>
     75        A02B               CopyData2
     76  2     A02B 4D                    tsta                           ; >>
     77  3     A02C 2A   F9               bpl   CopyData1                ; >>
     78
     79                           * Copie en page 0a du code Game Mode Engi>>
     80                           * les groupes de 7 octets sont recopiees >>
     81                           * les donnees a l'avance on gagne un leas>>
     82                           *****************************************>>
     83  3     A02E CE   A042             ldu   #GameModeLoaderBin       * >>
     84        A031               CopyCode1
     85  5+7   A031 37   3E               pulu  d,x,y,dp                 ; >>
     86  5+7   A033 34   3E               pshs  d,x,y,dp                 ; >>
     87        A035               CopyCode2
     88  5     A035 118C 4000             cmps  #$4000                   ; >>
     89  3     A039 26   F6               bne   CopyCode1                ; >>
     90        A03B               CopyCode3
     91  4     A03B 10CE 0000             lds   #0                       ; >>
     92                            
     93                           * Execution du Game Mode Engine en page 0>>
     94                           *****************************************>>
     95  4     A03F 7E   414F             jmp   GameModeLoader
     96
     97                           * =======================================>>
     98                           * GameModeEngine
     99                           * =======================================>>
    100        A042               GameModeLoaderBin
    576                                   INCLUD GMLOADER
    577
    578        A042 00 35 40 20           fcb   $00,$35,$40,$20,$8F,$00,$00>>
               A046 8F 00 00
    579        A049 86 00 B7 E7           fcb   $86,$00,$B7,$E7,$E5,$BD,$40>>
               A04D E5 BD 40
    580        A050 C9 01 00 33           fcb   $C9,$01,$00,$33,$C9,$FE,$00>>
               A054 C9 FE 00
    581        A057 DB B6 41 B8           fcb   $DB,$B6,$41,$B8,$27,$08,$33>>
               A05B 27 08 33
    582        A05E DE 4F 11 83           fcb   $DE,$4F,$11,$83,$00,$00,$23>>
               A062 00 00 23
    583        A065 04 0F 4B 0C           fcb   $04,$0F,$4B,$0C,$49,$0C,$4F>>
               A069 49 0C 4F
    584        A06C 0C 4B 96 4B           fcb   $0C,$4B,$96,$4B,$81,$4F,$23>>
               A070 81 4F 23
    585        A073 10 23 10 86           fcb   $10,$23,$10,$86,$01,$97,$4C>>
               A077 01 97 4C
    586        A07A E8 2A 0C 4C           fcb   $E8,$2A,$0C,$4C,$96,$4C,$81>>
               A07E 96 4C 81
    587        A081 34 40 86 02           fcb   $34,$40,$86,$02,$97,$48,$BD>>
               A085 97 48 BD
    588        A088 26 B7 41 B8           fcb   $26,$B7,$41,$B8,$F7,$41,$BA>>
               A08C F7 41 BA
    589        A08F DD 4A C6 00           fcb   $DD,$4A,$C6,$00,$DD,$4F,$37>>
               A093 DD 4F 37
    590        A096 01 C4 7F 97           fcb   $01,$C4,$7F,$97,$49,$86,$00>>
               A09A 49 86 00
    591        A09D F7 41 A8 E6           fcb   $F7,$41,$A8,$E6,$C0,$1D,$84>>
               A0A1 C0 1D 84
    592        A0A4 9F FF 7E 61           fcb   $9F,$FF,$7E,$61,$00,$97,$4C>>
               A0A8 00 97 4C
    593        A0AB 8B EC C1 2A           fcb   $8B,$EC,$C1,$2A,$07,$10,$CE>>
               A0AF 07 10 CE
    594        A0B2 41 CE 34 40           fcb   $41,$CE,$34,$40,$86,$60,$1F>>
               A0B6 86 60 1F
    595        A0B9 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$CE>>
               A0BD 00 00 CE
    596        A0C0 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A0C4 00 00 00
    597        A0C7 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A0CB 00 00 00
    598        A0CE 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A0D2 00 00 00
    599        A0D5 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A0D9 00 00 00
    600        A0DC 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A0E0 00 00 00
    601        A0E3 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A0E7 00 00 00
    602        A0EA 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A0EE 00 00 00
    603        A0F1 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A0F5 00 00 00
    604        A0F8 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A0FC 00 00 00
    605        A0FF 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A103 00 00 00
    606        A106 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A10A 00 00 00
    607        A10D 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A111 00 00 00
    608        A114 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A118 00 00 00
    609        A11B 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A11F 00 00 00
    610        A122 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A126 00 00 00
    611        A129 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A12D 00 00 00
    612        A130 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A134 00 00 00
    613        A137 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A13B 00 00 00
    614        A13E 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A142 00 00 00
    615        A145 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A149 00 00 00
    616        A14C 00 00 00 00           fcb   $00,$00,$00,$00,$00,$00,$00>>
               A150 00 00 00
    617        A153 04 10 30 20           fcb   $04,$10,$30,$20,$00,$00,$00>>
               A157 00 00 00
    618        A15A 8D DC E3 01           fcb   $8D,$DC,$E3,$01,$39,$04,$02>>
               A15E 39 04 02
    619        A161 30 8D 00 0E           fcb   $30,$8D,$00,$0E,$3A,$58,$3A>>
               A165 3A 58 3A
    620        A168 2A F6 97 8D           fcb   $2A,$F6,$97,$8D,$EC,$E1,$39>>
               A16C EC E1 39
    621        A16F 27 FB 69 61           fcb   $27,$FB,$69,$61,$69,$E4,$5A>>
               A173 69 E4 5A
    622        A176 86 12 20 09           fcb   $86,$12,$20,$09,$A6,$C2,$46>>
               A17A A6 C2 46
    623        A17D FF E6 84 6F           fcb   $FF,$E6,$84,$6F,$E2,$6F,$E2>>
               A181 E2 6F E2
    624        A184 F4 20 B3 10           fcb   $F4,$20,$B3,$10,$AF,$66,$35>>
               A188 AF 66 35
    625        A18B 12 34 A7 A4           fcb   $12,$34,$A7,$A4,$30,$1F,$26>>
               A18F 30 1F 26
    626        A192 77 35 10 31           fcb   $77,$35,$10,$31,$3F,$A6,$A9>>
               A196 3F A6 A9
    627        A199 8D 1B EB 03           fcb   $8D,$1B,$EB,$03,$8D,$32,$DD>>
               A19D 8D 32 DD
    628        A1A0 10 83 00 03           fcb   $10,$83,$00,$03,$24,$01,$3A>>
               A1A4 24 01 3A
    629        A1A7 8D 44 34 06           fcb   $8D,$44,$34,$06,$30,$8C,$4B>>
               A1AB 30 8C 4B
    630        A1AE A2 30 1F 26           fcb   $A2,$30,$1F,$26,$F8,$20,$D9>>
               A1B2 F8 20 D9
    631        A1B5 8D 39 1F 01           fcb   $8D,$39,$1F,$01,$A6,$C2,$A7>>
               A1B9 A6 C2 A7
    632        A1BC C1 10 27 37           fcb   $C1,$10,$27,$37,$25,$0F,$5A>>
               A1C0 25 0F 5A
    633        A1C3 5C 8D 46 27           fcb   $5C,$8D,$46,$27,$F9,$C6,$00>>
               A1C7 F9 C6 00
    634        A1CA 26 15 D7 45           fcb   $26,$15,$D7,$45,$8C,$0C,$45>>
               A1CE 8C 0C 45
    635        A1D1 10 AE 66 C6           fcb   $10,$AE,$66,$C6,$01,$8D,$50>>
               A1D5 01 8D 50
    636        A1D8 35 06 5C C1           fcb   $35,$06,$5C,$C1,$34,$26,$DC>>
               A1DC 34 26 DC
    637        A1DF FA E6 E4 AF           fcb   $FA,$E6,$E4,$AF,$A1,$30,$8B>>
               A1E3 A1 30 8B
    638        A1E6 A0 53 69 E4           fcb   $A0,$53,$69,$E4,$49,$5C,$2B>>
               A1EA 49 5C 2B
    639        A1ED 00 01 C6 04           fcb   $00,$01,$C6,$04,$8D,$6D,$E7>>
               A1F1 8D 6D E7
    640        A1F4 34 06 C5 0F           fcb   $34,$06,$C5,$0F,$26,$03,$8E>>
               A1F8 26 03 8E
    641        A1FB 8D 00 A9 5F           fcb   $8D,$00,$A9,$5F,$D7,$8D,$4F>>
               A1FF D7 8D 4F
    642        A202 34 7F 1F 50           fcb   $34,$7F,$1F,$50,$1F,$8B,$31>>
               A206 1F 8B 31
    643
    644                                   INCLUD GMDATA
    645                           * Generated Code
    646
    647                           * structure: sector, nb sector, drive (bi>>
    648        A209               gm_TITLESCR
    649        A209 4533                  fdb   current_game_mode_data+876
    650        A20B               gmboot * @globals
    651        A20B 07 06 00 2C           fcb   $07,$06,$00,$2C,$0A,$DE,$E1>>
               A20F 0A DE E1
    652        A212 0D 00 00 D3           fcb   $0D,$00,$00,$D3,$05,$DF,$FC>>
               A216 05 DF FC
    653        A219 0B 08 01 B5           fcb   $0B,$08,$01,$B5,$0D,$DB,$3B>>
               A21D 0D DB 3B
    654        A220 03 05 02 61           fcb   $03,$05,$02,$61,$09,$DD,$C8>>
               A224 09 DD C8
    655        A227 08 00 02 E6           fcb   $08,$00,$02,$E6,$05,$DD,$BB>>
               A22B 05 DD BB
    656        A22E 08 01 02 7F           fcb   $08,$01,$02,$7F,$05,$DF,$32>>
               A232 05 DF 32
    657        A235 09 03 02 DC           fcb   $09,$03,$02,$DC,$09,$D1,$3B>>
               A239 09 D1 3B
    658        A23C 0C 01 02 EB           fcb   $0C,$01,$02,$EB,$06,$DF,$F9>>
               A240 06 DF F9
    659        A243 0D 04 02 65           fcb   $0D,$04,$02,$65,$08,$DF,$AC>>
               A247 08 DF AC
    660        A24A 01 01 03 8F           fcb   $01,$01,$03,$8F,$05,$DC,$44>>
               A24E 05 DC 44
    661        A251 02 01 03 B5           fcb   $02,$01,$03,$B5,$05,$D6,$61>>
               A255 05 D6 61
    662        A258 03 01 03 3F           fcb   $03,$01,$03,$3F,$05,$D4,$12>>
               A25C 05 D4 12
    663        A25F 04 01 03 75           fcb   $04,$01,$03,$75,$05,$D9,$94>>
               A263 05 D9 94
    664        A266 05 01 03 05           fcb   $05,$01,$03,$05,$05,$D7,$47>>
               A26A 05 D7 47
    665        A26D 06 01 03 84           fcb   $06,$01,$03,$84,$06,$DA,$89>>
               A271 06 DA 89
    666        A274 07 01 03 29           fcb   $07,$01,$03,$29,$05,$D2,$1C>>
               A278 05 D2 1C
    667        A27B 08 01 03 C6           fcb   $08,$01,$03,$C6,$06,$DD,$53>>
               A27F 06 DD 53
    668        A282 09 01 03 7D           fcb   $09,$01,$03,$7D,$05,$D3,$2C>>
               A286 05 D3 2C
    669        A289 0A 04 03 37           fcb   $0A,$04,$03,$37,$09,$C1,$1C>>
               A28D 09 C1 1C
    670        A290 0E 01 03 89           fcb   $0E,$01,$03,$89,$06,$D4,$CF>>
               A294 06 D4 CF
    671        A297 0F 04 03 82           fcb   $0F,$04,$03,$82,$09,$C9,$76>>
               A29B 09 C9 76
    672        A29E 03 01 04 DF           fcb   $03,$01,$04,$DF,$06,$D7,$BD>>
               A2A2 06 D7 BD
    673        A2A5 04 03 04 32           fcb   $04,$03,$04,$32,$07,$DF,$DD>>
               A2A9 07 DF DD
    674        A2AC 07 01 04 0C           fcb   $07,$01,$04,$0C,$05,$CF,$3F>>
               A2B0 05 CF 3F
    675        A2B3 08 02 04 38           fcb   $08,$02,$04,$38,$06,$D1,$DE>>
               A2B7 06 D1 DE
    676        A2BA 0A 01 04 13           fcb   $0A,$01,$04,$13,$05,$D1,$0D>>
               A2BE 05 D1 0D
    677        A2C1 0B 01 04 2F           fcb   $0B,$01,$04,$2F,$06,$CD,$3B>>
               A2C5 06 CD 3B
    678        A2C8 0C 00 04 B7           fcb   $0C,$00,$04,$B7,$05,$CA,$3B>>
               A2CC 05 CA 3B
    679        A2CF 0C 01 04 DD           fcb   $0C,$01,$04,$DD,$05,$CD,$70>>
               A2D3 05 CD 70
    680        A2D6 0D 01 04 6B           fcb   $0D,$01,$04,$6B,$05,$CB,$23>>
               A2DA 05 CB 23
    681        A2DD 0E 02 04 BE           fcb   $0E,$02,$04,$BE,$08,$D3,$09>>
               A2E1 08 D3 09
    682        A2E4 10 01 04 C0           fcb   $10,$01,$04,$C0,$05,$C7,$59>>
               A2E8 05 C7 59
    683        A2EB 01 02 05 FB           fcb   $01,$02,$05,$FB,$08,$D7,$DD>>
               A2EF 08 D7 DD
    684        A2F2 03 01 05 F4           fcb   $03,$01,$05,$F4,$05,$C9,$53>>
               A2F6 05 C9 53
    685        A2F9 04 02 05 2C           fcb   $04,$02,$05,$2C,$05,$C2,$39>>
               A2FD 05 C2 39
    686        A300 06 00 05 BD           fcb   $06,$00,$05,$BD,$05,$C0,$03>>
               A304 05 C0 03
    687        A307 06 02 05 0E           fcb   $06,$02,$05,$0E,$05,$C5,$5E>>
               A30B 05 C5 5E
    688        A30E 08 00 05 A1           fcb   $08,$00,$05,$A1,$05,$C3,$28>>
               A312 05 C3 28
    689        A315 08 03 05 F3           fcb   $08,$03,$05,$F3,$09,$B0,$95>>
               A319 09 B0 95
    690        A31C 0B 01 05 FF           fcb   $0B,$01,$05,$FF,$06,$C8,$30>>
               A320 06 C8 30
    691        A323 0C 04 05 92           fcb   $0C,$04,$05,$92,$09,$B8,$BC>>
               A327 09 B8 BC
    692        A32A 10 01 05 B9           fcb   $10,$01,$05,$B9,$06,$CA,$EE>>
               A32E 06 CA EE
    693        A331 01 03 06 0C           fcb   $01,$03,$06,$0C,$07,$D6,$C3>>
               A335 07 D6 C3
    694        A338 04 00 06 E7           fcb   $04,$00,$06,$E7,$05,$BD,$55>>
               A33C 05 BD 55
    695        A33F 04 03 06 08           fcb   $04,$03,$06,$08,$07,$DB,$3E>>
               A343 07 DB 3E
    696        A346 07 00 06 E7           fcb   $07,$00,$06,$E7,$05,$BF,$14>>
               A34A 05 BF 14
    697        A34D 07 03 06 0D           fcb   $07,$03,$06,$0D,$08,$C9,$60>>
               A351 08 C9 60
    698        A354 0A 00 06 E8           fcb   $0A,$00,$06,$E8,$05,$B9,$A9>>
               A358 05 B9 A9
    699        A35B 0A 02 06 F2           fcb   $0A,$02,$06,$F2,$08,$CE,$35>>
               A35F 08 CE 35
    700        A362 0C 01 06 BD           fcb   $0C,$01,$06,$BD,$05,$BB,$96>>
               A366 05 BB 96
    701        A369 0D 04 06 54           fcb   $0D,$04,$06,$54,$0A,$D0,$04>>
               A36D 0A D0 04
    702        A370 01 01 07 71           fcb   $01,$01,$07,$71,$06,$C2,$A7>>
               A374 06 C2 A7
    703        A377 02 04 07 29           fcb   $02,$04,$07,$29,$09,$A8,$56>>
               A37B 09 A8 56
    704        A37E 06 01 07 5B           fcb   $06,$01,$07,$5B,$06,$C5,$74>>
               A382 06 C5 74
    705        A385 07 00 07 94           fcb   $07,$00,$07,$94,$05,$B7,$BC>>
               A389 05 B7 BC
    706        A38C 07 00 07 CD           fcb   $07,$00,$07,$CD,$05,$B6,$46>>
               A390 05 B6 46
    707        A393 07 01 07 06           fcb   $07,$01,$07,$06,$05,$B4,$D0>>
               A397 05 B4 D0
    708        A39A 08 00 07 3F           fcb   $08,$00,$07,$3F,$05,$B3,$5A>>
               A39E 05 B3 5A
    709        A3A1 08 00 07 BC           fcb   $08,$00,$07,$BC,$05,$B0,$12>>
               A3A5 05 B0 12
    710        A3A8 08 01 07 4B           fcb   $08,$01,$07,$4B,$05,$B1,$E4>>
               A3AC 05 B1 E4
    711        A3AF 09 32 07 C0           fcb   $09,$32,$07,$C0,$0E,$DF,$F6>>
               A3B3 0E DF F6
    712        A3B6 0B 1C 0A 65           fcb   $0B,$1C,$0A,$65,$0D,$C1,$7E>>
               A3BA 0D C1 7E
    713        A3BD 07 02 0C 05           fcb   $07,$02,$0C,$05,$06,$BF,$DC>>
               A3C1 06 BF DC
    714        A3C4 07 00 0D E9           fcb   $07,$00,$0D,$E9,$05,$AE,$38>>
               A3C8 05 AE 38
    715        A3CB 05 01 0E F7           fcb   $05,$01,$0E,$F7,$05,$AD,$4A>>
               A3CF 05 AD 4A
    716        A3D2 06 01 0E 6D           fcb   $06,$01,$0E,$6D,$05,$AB,$97>>
               A3D6 05 AB 97
    717        A3D9 07 01 0E 20           fcb   $07,$01,$0E,$20,$05,$AB,$02>>
               A3DD 05 AB 02
    718        A3E0 08 00 0E 75           fcb   $08,$00,$0E,$75,$05,$AA,$00>>
               A3E4 05 AA 00
    719        A3E7 08 02 0E 8B           fcb   $08,$02,$0E,$8B,$06,$BC,$F8>>
               A3EB 06 BC F8
    720        A3EE 0A 03 0E 40           fcb   $0A,$03,$0E,$40,$08,$C4,$8D>>
               A3F2 08 C4 8D
    721        A3F5 0D 01 0E 53           fcb   $0D,$01,$0E,$53,$05,$A9,$A2>>
               A3F9 05 A9 A2
    722        A3FC 0E 00 0E BB           fcb   $0E,$00,$0E,$BB,$05,$A7,$32>>
               A400 05 A7 32
    723        A403 0E 00 0E FD           fcb   $0E,$00,$0E,$FD,$05,$A6,$C3>>
               A407 05 A6 C3
    724        A40A 0E 01 0E 66           fcb   $0E,$01,$0E,$66,$05,$A7,$D1>>
               A40E 05 A7 D1
    725        A411 0F 00 0E A8           fcb   $0F,$00,$0E,$A8,$05,$A7,$60>>
               A415 05 A7 60
    726        A418 0F 00 0E F5           fcb   $0F,$00,$0E,$F5,$05,$A6,$1E>>
               A41C 05 A6 1E
    727        A41F 0F 01 0E 31           fcb   $0F,$01,$0E,$31,$05,$A5,$CD>>
               A423 05 A5 CD
    728        A426 10 00 0E 80           fcb   $10,$00,$0E,$80,$05,$A6,$95>>
               A42A 05 A6 95
    729        A42D 10 00 0E BC           fcb   $10,$00,$0E,$BC,$05,$A6,$42>>
               A431 05 A6 42
    730        A434 10 02 0E 99           fcb   $10,$02,$0E,$99,$07,$D2,$46>>
               A438 07 D2 46
    731        A43B 02 02 0F 43           fcb   $02,$02,$0F,$43,$06,$B9,$51>>
               A43F 06 B9 51
    732        A442 04 01 0F 00           fcb   $04,$01,$0F,$00,$06,$B5,$B9>>
               A446 06 B5 B9
    733        A449 06 01 0F 1D           fcb   $06,$01,$0F,$1D,$05,$A5,$A9>>
               A44D 05 A5 A9
    734        A450 07 01 0F E6           fcb   $07,$01,$0F,$E6,$06,$B2,$4C>>
               A454 06 B2 4C
    735        A457 08 01 0F 33           fcb   $08,$01,$0F,$33,$05,$A4,$0E>>
               A45B 05 A4 0E
    736        A45E 09 01 0F BF           fcb   $09,$01,$0F,$BF,$06,$AE,$6E>>
               A462 06 AE 6E
    737        A465 0A 06 0F 8E           fcb   $0A,$06,$0F,$8E,$0A,$B8,$B4>>
               A469 0A B8 B4
    738        A46C 10 07 0F A8           fcb   $10,$07,$0F,$A8,$0A,$C7,$A0>>
               A470 0A C7 A0
    739        A473 07 02 10 61           fcb   $07,$02,$10,$61,$07,$CD,$BA>>
               A477 07 CD BA
    740        A47A 09 07 10 0B           fcb   $09,$07,$10,$0B,$0A,$AE,$41>>
               A47E 0A AE 41
    741        A481 10 01 10 BD           fcb   $10,$01,$10,$BD,$07,$C9,$42>>
               A485 07 C9 42
    742        A488 01 07 11 3C           fcb   $01,$07,$11,$3C,$0B,$DE,$24>>
               A48C 0B DE 24
    743        A48F 08 01 11 F4           fcb   $08,$01,$11,$F4,$07,$C5,$03>>
               A493 07 C5 03
    744        A496 09 06 11 D2           fcb   $09,$06,$11,$D2,$0B,$CF,$C7>>
               A49A 0B CF C7
    745        A49D 0F 02 11 2B           fcb   $0F,$02,$11,$2B,$06,$AA,$B8>>
               A4A1 06 AA B8
    746        A4A4 01 04 12 FF           fcb   $01,$04,$12,$FF,$0B,$C3,$61>>
               A4A8 0B C3 61
    747        A4AB 05 02 12 11           fcb   $05,$02,$12,$11,$06,$A7,$07>>
               A4AF 06 A7 07
    748        A4B2 07 00 12 DE           fcb   $07,$00,$12,$DE,$05,$A1,$B1>>
               A4B6 05 A1 B1
    749        A4B9 07 02 12 0E           fcb   $07,$02,$12,$0E,$06,$A3,$99>>
               A4BD 06 A3 99
    750        A4C0 09 00 12 8E           fcb   $09,$00,$12,$8E,$05,$A2,$53>>
               A4C4 05 A2 53
    751        A4C7 09 04 12 34           fcb   $09,$04,$12,$34,$0B,$B7,$ED>>
               A4CB 0B B7 ED
    752        A4CE 0D 01 12 2D           fcb   $0D,$01,$12,$2D,$07,$C0,$97>>
               A4D2 07 C0 97
    753        A4D5 0E 05 12 74           fcb   $0E,$05,$12,$74,$0C,$DE,$10>>
               A4D9 0C DE 10
    754        A4DC 03 01 13 A6           fcb   $03,$01,$13,$A6,$07,$BC,$68>>
               A4E0 07 BC 68
    755        A4E3 04 02 13 7C           fcb   $04,$02,$13,$7C,$07,$B7,$BB>>
               A4E7 07 B7 BB
    756        A4EA 06 02 13 45           fcb   $06,$02,$13,$45,$07,$B4,$1D>>
               A4EE 07 B4 1D
    757        A4F1 08 04 13 4D           fcb   $08,$04,$13,$4D,$0B,$A9,$52>>
               A4F5 0B A9 52
    758        A4F8 0C 04 13 C7           fcb   $0C,$04,$13,$C7,$0C,$CD,$86>>
               A4FC 0C CD 86
    759        A4FF 10 01 13 CB           fcb   $10,$01,$13,$CB,$07,$B0,$B9>>
               A503 07 B0 B9
    760        A506 01 05 14 68           fcb   $01,$05,$14,$68,$0C,$BE,$6F>>
               A50A 0C BE 6F
    761        A50D 06 01 14 62           fcb   $06,$01,$14,$62,$08,$BF,$38>>
               A511 08 BF 38
    762        A514 07 04 14 C7           fcb   $07,$04,$14,$C7,$0C,$AE,$DF>>
               A518 0C AE DF
    763        A51B 0B 01 14 C6           fcb   $0B,$01,$14,$C6,$07,$AC,$72>>
               A51F 07 AC 72
    764        A522 0C 01 14 7F           fcb   $0C,$01,$14,$7F,$06,$A2,$05>>
               A526 06 A2 05
    765        A529 0D 02 14 BF           fcb   $0D,$02,$14,$BF,$08,$BA,$D4>>
               A52D 08 BA D4
    766        A530 0F 02 14 F0           fcb   $0F,$02,$14,$F0,$08,$B6,$2B>>
               A534 08 B6 2B
    767        A537 01 03 15 15           fcb   $01,$03,$15,$15,$07,$A8,$3D>>
               A53B 07 A8 3D
    768        A53E 04 01 15 D1           fcb   $04,$01,$15,$D1,$07,$A4,$06>>
               A542 07 A4 06
    769        A545 05 02 15 61           fcb   $05,$02,$15,$61,$08,$B1,$66>>
               A549 08 B1 66
    770        A54C 07 00 15 E4           fcb   $07,$00,$15,$E4,$05,$A0,$AE>>
               A550 05 A0 AE
    771        A553 07 02 15 61           fcb   $07,$02,$15,$61,$08,$AE,$51>>
               A557 08 AE 51
    772        A55A 09 03 15 68           fcb   $09,$03,$15,$68,$08,$AB,$5B>>
               A55E 08 AB 5B
    773        A561 0C 03 15 9E           fcb   $0C,$03,$15,$9E,$08,$A5,$53>>
               A565 08 A5 53
    774        A568 0F 0E 15 A7           fcb   $0F,$0E,$15,$A7,$01,$8A,$D8>>
               A56C 01 8A D8
    775        A56F FF                    fcb   $FF
    103
    104

000000 Total Errors

000285 Total Symbols
     0x          Equ   0004 anim
     0x          Equ   7297 AnimateSprite
     0x          Equ   0008 anim_frame
     0x          Equ   0009 anim_frame_duration
     0x          Equ   86D2 Ani_largeStar
     0x          Equ   86C2 Ani_SegaSonic_1
     0x          Equ   86B8 Ani_SegaSonic_2
     0x          Equ   86AE Ani_SegaSonic_3
     0x          Equ   86CC Ani_smallStar
     0x          Equ   86EA Ani_sonic
     0x          Equ   86DE Ani_tails
     0x          Equ   7D32 Black_palette
     0x          Equ   0009 buf_bgdata
     0x          Equ   0007 buf_prev_mapping_frame
     0x          Equ   0011 buf_prev_render_flags
     0x          Equ   000D buf_prev_x1_pixel
     0x          Equ   000F buf_prev_x2_pixel
     0x          Equ   000D buf_prev_xy1_pixel
     0x          Equ   000F buf_prev_xy2_pixel
     0x          Equ   000B buf_prev_xy_pixel
     0x          Equ   000B buf_prev_x_pixel
     0x          Equ   000E buf_prev_y1_pixel
     0x          Equ   0010 buf_prev_y2_pixel
     0x          Equ   000C buf_prev_y_pixel
     0x          Equ   0000 buf_priority
     0x          Equ   0003 buf_priority_next_obj
     0x          Equ   0001 buf_priority_prev_obj
     0x          Equ   0040 c1_button_A_mask
     0x          Equ   0002 c1_button_down_mask
     0x          Equ   0004 c1_button_left_mask
     0x          Equ   0008 c1_button_right_mask
     0x          Equ   0001 c1_button_up_mask
     0x          Equ   0080 c2_button_A_mask
     0x          Equ   0020 c2_button_down_mask
     0x          Equ   0040 c2_button_left_mask
     0x          Equ   0080 c2_button_right_mask
     0x          Equ   0010 c2_button_up_mask
     0x          Equ   7CD4 ClearCartMem
     0x          Equ   7424 ClearObj
     1x          Label A031 CopyCode1
     0x          Label A035 CopyCode2
     1x          Label A03B CopyCode3
     1x          Label A027 CopyData1
     0x          Label A02B CopyData2
     1x          Equ   41C7 current_game_mode_data
     0x          Equ   7D10 Cur_palette
     0x          Equ   7362 DeleteObject
     0x          Equ   735C DeleteObject_x
     0x          Equ   721E DisplaySprite
     0x          Equ   7218 DisplaySprite_x
     0x          Equ   604F dk_destination
     0x          Equ   6049 dk_lecteur
     0x          Equ   604A dk_piste
     0x          Equ   604B dk_pisteL
     0x          Equ   604C dk_secteur
     0x          Equ   71A9 Dpad_Held
     0x          Equ   71AB Dpad_Press
     0x          Equ   0001 draw_routine
     0x          Equ   7D12 Dyn_palette
     0x          Equ   0006 erase_nb_cell
     0x          Equ   0004 erase_routine
     0x          Equ   001B ext_variables
     0x          Equ   71AA Fire_Held
     0x          Equ   71AC Fire_Press
     1x          Equ   414F GameModeLoader
     1x          Label A042 GameModeLoaderBin
     0x          Label A000 GameModeManager
     0x          Equ   613F Glb_Sprite_Screen_Pos_Part1
     0x          Equ   6141 Glb_Sprite_Screen_Pos_Part2
     0x          Label A20B gmboot
     0x          Label A209 gm_TITLESCR
     0x          Equ   0038 gravity
     0x          Equ   0000 id
     0x          Equ   0006 image_center_offset
     0x          Equ   000A image_set
     0x          Equ   0004 image_subset_x1_offset
     0x          Equ   0005 image_subset_y1_offset
     0x          Equ   0004 image_x_size
     0x          Equ   0005 image_y_size
     0x          Equ   85DE Img_emblemBack01
     0x          Equ   85CE Img_emblemBack02
     0x          Equ   84F8 Img_emblemBack03
     0x          Equ   84E8 Img_emblemBack04
     0x          Equ   8518 Img_emblemBack05
     0x          Equ   8508 Img_emblemBack06
     0x          Equ   84C8 Img_emblemBack07
     0x          Equ   84B8 Img_emblemBack08
     0x          Equ   84D8 Img_emblemBack09
     0x          Equ   868D Img_emblemFront01
     0x          Equ   869D Img_emblemFront02
     0x          Equ   866D Img_emblemFront03
     0x          Equ   867D Img_emblemFront04
     0x          Equ   864D Img_emblemFront05
     0x          Equ   865D Img_emblemFront06
     0x          Equ   862D Img_emblemFront07
     0x          Equ   863D Img_emblemFront08
     0x          Equ   8235 Img_SegaLogo_1
     0x          Equ   8225 Img_SegaLogo_2
     0x          Equ   8324 Img_SegaSonic_11
     0x          Equ   825E Img_SegaSonic_12
     0x          Equ   82A0 Img_SegaSonic_13
     0x          Equ   82E2 Img_SegaSonic_21
     0x          Equ   8366 Img_SegaSonic_22
     0x          Equ   827F Img_SegaSonic_23
     0x          Equ   83A8 Img_SegaSonic_31
     0x          Equ   82C1 Img_SegaSonic_32
     0x          Equ   8345 Img_SegaSonic_33
     0x          Equ   8387 Img_SegaSonic_41
     0x          Equ   83C9 Img_SegaSonic_42
     0x          Equ   8303 Img_SegaSonic_43
     0x          Equ   8245 Img_SegaTrails_1
     0x          Equ   842A Img_SegaTrails_2
     0x          Equ   841A Img_SegaTrails_3
     0x          Equ   840A Img_SegaTrails_4
     0x          Equ   83FA Img_SegaTrails_5
     0x          Equ   83EA Img_SegaTrails_6
     0x          Equ   8215 Img_SonicAndTailsIn
     0x          Equ   846B Img_sonicHand
     0x          Equ   85A6 Img_sonic_1
     0x          Equ   85BA Img_sonic_2
     0x          Equ   8605 Img_sonic_3
     0x          Equ   8619 Img_sonic_4
     0x          Equ   85EE Img_sonic_5
     0x          Equ   849D Img_star_1
     0x          Equ   8482 Img_star_2
     0x          Equ   8457 Img_star_3
     0x          Equ   8443 Img_star_4
     0x          Equ   858F Img_tailsHand
     0x          Equ   857B Img_tails_1
     0x          Equ   8567 Img_tails_2
     0x          Equ   8553 Img_tails_3
     0x          Equ   853F Img_tails_4
     0x          Equ   8528 Img_tails_5
     0x          Equ   71A9 Joypads_Held
     0x          Equ   71AB Joypads_Press
     0x          Equ   7216 MarkObjGone
     0x          Equ   001B nb_dynamic_objects
     0x          Equ   0003 nb_level_objects
     0x          Equ   0020 nb_objects
     0x          Equ   0008 nb_priority_levels
     0x          Equ   0002 nb_reserved_objects
     0x          Equ   005A next_object
     0x          Equ   662D Object_RAM
     1x          Equ   005A object_size
     0x          Equ   0003 ObjID_PaletteHandler
     0x          Equ   0002 ObjID_SEGA
     0x          Equ   0001 ObjID_SonicAndTailsIn
     0x          Equ   0004 ObjID_TitleScreen
     0x          Equ   0000 page_draw_routine
     0x          Equ   0003 page_erase_routine
     0x          Equ   8A38 Pal_SEGA
     0x          Equ   8AB8 Pal_SEGAEnd
     0x          Equ   8A78 Pal_SEGAMid
     0x          Equ   8A98 Pal_SonicAndTailsIn
     0x          Equ   8A58 Pal_TitleScreen
     0x          Equ   0003 pcm_end_addr
     0x          Equ   0005 pcm_meta_size
     0x          Equ   0000 pcm_page
     0x          Equ   89F3 Pcm_SEGA
     0x          Equ   0001 pcm_start_addr
     0x          Equ   7D9A PlayPCM
     0x          Equ   0006 prev_anim
     0x          Equ   0003 priority
     0x          Equ   7EA5 PSGCancelLoop
     0x          Equ   805F PSGFrame
     0x          Equ   7EA9 PSGGetStatus
     0x          Equ   7DF1 PSGInit
     0x          Equ   7E03 PSGPlayNoRepeat
     0x          Equ   7F21 PSGRestoreVolumes
     0x          Equ   7E5A PSGResume
     0x          Equ   7EAD PSGSetMusicVolumeAttenuation
     0x          Equ   8057 PSGSFXCancelLoop
     0x          Equ   816C PSGSFXFrame
     0x          Equ   805B PSGSFXGetStatus
     0x          Equ   7F95 PSGSFXPlayLoop
     0x          Equ   7FE1 PSGSFXStop
     0x          Equ   7F0C PSGSilenceChannels
     0x          Equ   7E31 PSGStop
     0x          Equ   89FE Psg_TitleScreen
     0x          Equ   7D0F Refresh_palette
     0x          Equ   0002 render_flags
     0x          Equ   0020 render_hide_mask
     0x          Equ   0008 render_motionless_mask
     0x          Equ   0004 render_overlay_mask
     0x          Equ   0010 render_playfieldcoord_mask
     0x          Equ   0040 render_todelete_mask
     0x          Equ   0080 render_xloop_mask
     0x          Equ   0001 render_xmirror_mask
     0x          Equ   0002 render_ymirror_mask
     0x          Equ   0018 routine
     0x          Equ   0019 routine_secondary
     0x          Equ   003F rsv_bgdata_0
     0x          Equ   0051 rsv_bgdata_1
     0x          Equ   0036 rsv_buffer_0
     0x          Equ   0048 rsv_buffer_1
     0x          Equ   002C rsv_image_center_offset
     0x          Equ   002E rsv_image_subset
     0x          Equ   0030 rsv_mapping_frame
     0x          Equ   002A rsv_prev_anim
     0x          Equ   003D rsv_prev_mapping_frame_0
     0x          Equ   004F rsv_prev_mapping_frame_1
     0x          Equ   0047 rsv_prev_render_flags_0
     0x          Equ   0059 rsv_prev_render_flags_1
     0x          Equ   0080 rsv_prev_render_onscreen_mask
     0x          Equ   0001 rsv_prev_render_overlay_mask
     0x          Equ   0043 rsv_prev_x1_pixel_0
     0x          Equ   0055 rsv_prev_x1_pixel_1
     0x          Equ   0045 rsv_prev_x2_pixel_0
     0x          Equ   0057 rsv_prev_x2_pixel_1
     0x          Equ   0043 rsv_prev_xy1_pixel_0
     0x          Equ   0055 rsv_prev_xy1_pixel_1
     0x          Equ   0045 rsv_prev_xy2_pixel_0
     0x          Equ   0057 rsv_prev_xy2_pixel_1
     0x          Equ   0041 rsv_prev_xy_pixel_0
     0x          Equ   0053 rsv_prev_xy_pixel_1
     0x          Equ   0041 rsv_prev_x_pixel_0
     0x          Equ   0053 rsv_prev_x_pixel_1
     0x          Equ   0044 rsv_prev_y1_pixel_0
     0x          Equ   0056 rsv_prev_y1_pixel_1
     0x          Equ   0046 rsv_prev_y2_pixel_0
     0x          Equ   0058 rsv_prev_y2_pixel_1
     0x          Equ   0042 rsv_prev_y_pixel_0
     0x          Equ   0054 rsv_prev_y_pixel_1
     0x          Equ   0036 rsv_priority_0
     0x          Equ   0048 rsv_priority_1
     0x          Equ   0039 rsv_priority_next_obj_0
     0x          Equ   004B rsv_priority_next_obj_1
     0x          Equ   0037 rsv_priority_prev_obj_0
     0x          Equ   0049 rsv_priority_prev_obj_1
     0x          Equ   0001 rsv_render_checkrefresh_mask
     0x          Equ   0004 rsv_render_displaysprite_mask
     0x          Equ   0002 rsv_render_erasesprite_mask
     0x          Equ   0029 rsv_render_flags
     0x          Equ   0008 rsv_render_outofrange_mask
     0x          Equ   0032 rsv_x1_pixel
     0x          Equ   0034 rsv_x2_pixel
     0x          Equ   0032 rsv_xy1_pixel
     0x          Equ   0034 rsv_xy2_pixel
     0x          Equ   0033 rsv_y1_pixel
     0x          Equ   0035 rsv_y2_pixel
     0x          Equ   7188 screen_border_color
     0x          Equ   00E3 screen_bottom
     0x          Equ   0030 screen_left
     0x          Equ   00CF screen_right
     0x          Equ   001C screen_top
     0x          Equ   00A0 screen_width
     0x          Equ   001A status
     0x          Equ   0004 status_bit2
     0x          Equ   0080 status_bit7
     0x          Equ   0002 status_inair
     0x          Equ   0010 status_jumpingafterrolling
     0x          Equ   0004 status_jumporroll
     0x          Equ   0020 status_mainchar_pushing
     0x          Equ   0008 status_mainchar_standing
     0x          Equ   0008 status_norgroundnorfall
     0x          Equ   0020 status_pushing
     0x          Equ   0040 status_sidekick_pushing
     0x          Equ   0010 status_sidekick_standing
     0x          Equ   0040 status_underwater
     0x          Equ   0001 status_x_orientation
     0x          Equ   0002 status_y_orientation
     0x          Equ   0001 subtype
     0x          Label A00A SwapVideoPage
     0x          Equ   7D72 UpdatePalette
     0x          Equ   71A5 Vint_runcount
     1x          Label A000 WaitVBL
     1x          Label A005 WaitVBL_01
     0x          Equ   7D52 White_palette
     0x          Equ   0012 xy_pixel
     0x          Equ   0012 x_pixel
     0x          Equ   000C x_pos
     0x          Equ   000E x_sub
     0x          Equ   0014 x_vel
     0x          Equ   0013 y_pixel
     0x          Equ   000F y_pos
     0x          Equ   0011 y_sub
     0x          Equ   0016 y_vel
     0x          Equ   00FE _goBackNFrames
     0x          Equ   00FD _goToAnimation
     0x          Equ   00FC _nextRoutine
     0x          Equ   00FA _nextSubRoutine
     0x          Equ   00FF _resetAnim
     0x          Equ   00FB _resetAnimAndSubRoutine
     0x          Equ   8119 _sendVolume2PSG
     0x          Equ   81C9 _SFXsetLoopPoint

