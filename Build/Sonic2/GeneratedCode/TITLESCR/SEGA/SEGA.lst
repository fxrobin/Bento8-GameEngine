/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : .\Sonic2\GeneratedCode\TITLESCR\SEGA\SEGA.asm
 * Fichier destination : .\Sonic2\GeneratedCode\TMP.BIN
 * Contenu :
 *     Main     0:SEGA.ASM     7068
 *     Include  0:GLOBALS.ASM  7162
 *     Include  0:CONSTANT.ASM 5768
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
    427                                   INCLUD GLOBALS
    428                           * Generated Code
    429
    430                  414F     GameModeLoader equ $414F
    431                  41C7     current_game_mode_data equ $41C7
    432                  0001     ObjID_SonicAndTailsIn equ 1
    433                  0002     ObjID_SEGA equ 2
    434                  0003     ObjID_PaletteHandler equ 3
    435                  0004     ObjID_TitleScreen equ 4
    436                  6122     Glb_Sprite_Screen_Pos_Part1 equ $6122
    437                  6124     Glb_Sprite_Screen_Pos_Part2 equ $6124
    438                  6610     Object_RAM equ $6610
    439                  7162     screen_border_color equ $7162
    440                  7188     Vint_runcount equ $7188
    441                  0001     c1_button_up_mask equ $0001
    442                  0002     c1_button_down_mask equ $0002
    443                  0004     c1_button_left_mask equ $0004
    444                  0008     c1_button_right_mask equ $0008
    445                  0010     c2_button_up_mask equ $0010
    446                  0020     c2_button_down_mask equ $0020
    447                  0040     c2_button_left_mask equ $0040
    448                  0080     c2_button_right_mask equ $0080
    449                  0040     c1_button_A_mask equ $0040
    450                  0080     c2_button_A_mask equ $0080
    451                  718C     Joypads_Held equ $718C
    452                  718C     Dpad_Held equ $718C
    453                  718D     Fire_Held equ $718D
    454                  718E     Joypads_Press equ $718E
    455                  718E     Dpad_Press equ $718E
    456                  718F     Fire_Press equ $718F
    457                  71F9     MarkObjGone equ $71F9
    458                  71FB     DisplaySprite_x equ $71FB
    459                  7201     DisplaySprite equ $7201
    460                  727A     AnimateSprite equ $727A
    461                  733F     DeleteObject_x equ $733F
    462                  7345     DeleteObject equ $7345
    463                  7407     ClearObj equ $7407
    464                  7CB7     ClearCartMem equ $7CB7
    465                  7CF1     Refresh_palette equ $7CF1
    466                  7CF2     Cur_palette equ $7CF2
    467                  7CF4     Dyn_palette equ $7CF4
    468                  7D14     Black_palette equ $7D14
    469                  7D34     White_palette equ $7D34
    470                  7D54     UpdatePalette equ $7D54
    471                  7D7C     PlayPCM equ $7D7C
    472                  7DD3     PSGInit equ $7DD3
    473                  7DE5     PSGPlayNoRepeat equ $7DE5
    474                  7E13     PSGStop equ $7E13
    475                  7E3C     PSGResume equ $7E3C
    476                  7E87     PSGCancelLoop equ $7E87
    477                  7E8B     PSGGetStatus equ $7E8B
    478                  7E8F     PSGSetMusicVolumeAttenuation equ $7E8F
    479                  7EEE     PSGSilenceChannels equ $7EEE
    480                  7F03     PSGRestoreVolumes equ $7F03
    481                  7F77     PSGSFXPlayLoop equ $7F77
    482                  7FC3     PSGSFXStop equ $7FC3
    483                  8039     PSGSFXCancelLoop equ $8039
    484                  803D     PSGSFXGetStatus equ $803D
    485                  8041     PSGFrame equ $8041
    486                  80FB     _sendVolume2PSG equ $80FB
    487                  814E     PSGSFXFrame equ $814E
    488                  81AB     _SFXsetLoopPoint equ $81AB
    489                  6027     irq_routine equ $6027
    490                  E7C5     irq_timer_ctrl equ $E7C5
    491                  E7C6     irq_timer equ $E7C6
    492                  4DFF     irq_one_frame equ $4DFF
    493                  81F7     Irq_Raster_Page equ $81F7
    494                  81F9     Irq_Raster_Start equ $81F9
    495                  81FB     Irq_Raster_End equ $81FB
    496                  81FD     IrqOn equ $81FD
    497                  8208     IrqOff equ $8208
    498                  8213     IrqSync equ $8213
    499                  8232     IrqPsg equ $8232
    500                  8241     IrqPsgRaster equ $8241
    501                  8278     Img_SonicAndTailsIn equ $8278
    502                  8288     Img_SegaLogo_2 equ $8288
    503                  8298     Img_SegaLogo_1 equ $8298
    504                  82A8     Img_SegaTrails_1 equ $82A8
    505                  82C1     Img_SegaSonic_12 equ $82C1
    506                  82E2     Img_SegaSonic_23 equ $82E2
    507                  8303     Img_SegaSonic_13 equ $8303
    508                  8324     Img_SegaSonic_32 equ $8324
    509                  8345     Img_SegaSonic_21 equ $8345
    510                  8366     Img_SegaSonic_43 equ $8366
    511                  8387     Img_SegaSonic_11 equ $8387
    512                  83A8     Img_SegaSonic_33 equ $83A8
    513                  83C9     Img_SegaSonic_22 equ $83C9
    514                  83EA     Img_SegaSonic_41 equ $83EA
    515                  840B     Img_SegaSonic_31 equ $840B
    516                  842C     Img_SegaSonic_42 equ $842C
    517                  844D     Img_SegaTrails_6 equ $844D
    518                  845D     Img_SegaTrails_5 equ $845D
    519                  846D     Img_SegaTrails_4 equ $846D
    520                  847D     Img_SegaTrails_3 equ $847D
    521                  848D     Img_SegaTrails_2 equ $848D
    522                  84A6     Img_star_4 equ $84A6
    523                  84BA     Img_star_3 equ $84BA
    524                  84CE     Img_sonicHand equ $84CE
    525                  84E5     Img_star_2 equ $84E5
    526                  8500     Img_star_1 equ $8500
    527                  851B     Img_emblemBack08 equ $851B
    528                  852B     Img_emblemBack07 equ $852B
    529                  853B     Img_emblemBack09 equ $853B
    530                  854B     Img_emblemBack04 equ $854B
    531                  855B     Img_emblemBack03 equ $855B
    532                  856B     Img_emblemBack06 equ $856B
    533                  857B     Img_emblemBack05 equ $857B
    534                  858B     Img_tails_5 equ $858B
    535                  85A2     Img_tails_4 equ $85A2
    536                  85B6     Img_tails_3 equ $85B6
    537                  85CA     Img_tails_2 equ $85CA
    538                  85DE     Img_tails_1 equ $85DE
    539                  85F2     Img_tailsHand equ $85F2
    540                  8609     Img_island equ $8609
    541                  861D     Img_sonic_1 equ $861D
    542                  8631     Img_sonic_2 equ $8631
    543                  8645     Img_emblemBack02 equ $8645
    544                  8655     Img_emblemBack01 equ $8655
    545                  8665     Img_sonic_3 equ $8665
    546                  8679     Img_sonic_4 equ $8679
    547                  8690     Img_emblemFront07 equ $8690
    548                  86A0     Img_emblemFront08 equ $86A0
    549                  86B0     Img_emblemFront05 equ $86B0
    550                  86C0     Img_emblemFront06 equ $86C0
    551                  86D0     Img_emblemFront03 equ $86D0
    552                  86E0     Img_emblemFront04 equ $86E0
    553                  86F0     Img_emblemFront01 equ $86F0
    554                  8700     Img_emblemFront02 equ $8700
    555                  8711     Ani_SegaSonic_3 equ $8711
    556                  871B     Ani_SegaSonic_2 equ $871B
    557                  8725     Ani_SegaSonic_1 equ $8725
    558                  872F     Ani_smallStar equ $872F
    559                  8735     Ani_largeStar equ $8735
    560                  8741     Ani_tails equ $8741
    561                  874D     Ani_sonic equ $874D
    562                  6122     Glb_Sprite_Screen_Pos_Part1 equ $6122
    563                  6124     Glb_Sprite_Screen_Pos_Part2 equ $6124
    564                  6610     Object_RAM equ $6610
    565                  7162     screen_border_color equ $7162
    566                  7188     Vint_runcount equ $7188
    567                  0001     c1_button_up_mask equ $0001
    568                  0002     c1_button_down_mask equ $0002
    569                  0004     c1_button_left_mask equ $0004
    570                  0008     c1_button_right_mask equ $0008
    571                  0010     c2_button_up_mask equ $0010
    572                  0020     c2_button_down_mask equ $0020
    573                  0040     c2_button_left_mask equ $0040
    574                  0080     c2_button_right_mask equ $0080
    575                  0040     c1_button_A_mask equ $0040
    576                  0080     c2_button_A_mask equ $0080
    577                  718C     Joypads_Held equ $718C
    578                  718C     Dpad_Held equ $718C
    579                  718D     Fire_Held equ $718D
    580                  718E     Joypads_Press equ $718E
    581                  718E     Dpad_Press equ $718E
    582                  718F     Fire_Press equ $718F
    583                  71F9     MarkObjGone equ $71F9
    584                  71FB     DisplaySprite_x equ $71FB
    585                  7201     DisplaySprite equ $7201
    586                  727A     AnimateSprite equ $727A
    587                  733F     DeleteObject_x equ $733F
    588                  7345     DeleteObject equ $7345
    589                  7407     ClearObj equ $7407
    590                  7CB7     ClearCartMem equ $7CB7
    591                  7CF1     Refresh_palette equ $7CF1
    592                  7CF2     Cur_palette equ $7CF2
    593                  7CF4     Dyn_palette equ $7CF4
    594                  7D14     Black_palette equ $7D14
    595                  7D34     White_palette equ $7D34
    596                  7D54     UpdatePalette equ $7D54
    597                  7D7C     PlayPCM equ $7D7C
    598                  7DD3     PSGInit equ $7DD3
    599                  7DE5     PSGPlayNoRepeat equ $7DE5
    600                  7E13     PSGStop equ $7E13
    601                  7E3C     PSGResume equ $7E3C
    602                  7E87     PSGCancelLoop equ $7E87
    603                  7E8B     PSGGetStatus equ $7E8B
    604                  7E8F     PSGSetMusicVolumeAttenuation equ $7E8F
    605                  7EEE     PSGSilenceChannels equ $7EEE
    606                  7F03     PSGRestoreVolumes equ $7F03
    607                  7F77     PSGSFXPlayLoop equ $7F77
    608                  7FC3     PSGSFXStop equ $7FC3
    609                  8039     PSGSFXCancelLoop equ $8039
    610                  803D     PSGSFXGetStatus equ $803D
    611                  8041     PSGFrame equ $8041
    612                  80FB     _sendVolume2PSG equ $80FB
    613                  814E     PSGSFXFrame equ $814E
    614                  81AB     _SFXsetLoopPoint equ $81AB
    615                  6027     irq_routine equ $6027
    616                  E7C5     irq_timer_ctrl equ $E7C5
    617                  E7C6     irq_timer equ $E7C6
    618                  4DFF     irq_one_frame equ $4DFF
    619                  81F7     Irq_Raster_Page equ $81F7
    620                  81F9     Irq_Raster_Start equ $81F9
    621                  81FB     Irq_Raster_End equ $81FB
    622                  81FD     IrqOn equ $81FD
    623                  8208     IrqOff equ $8208
    624                  8213     IrqSync equ $8213
    625                  8232     IrqPsg equ $8232
    626                  8241     IrqPsgRaster equ $8241
    627                  8278     Img_SonicAndTailsIn equ $8278
    628                  8288     Img_SegaLogo_2 equ $8288
    629                  8298     Img_SegaLogo_1 equ $8298
    630                  82A8     Img_SegaTrails_1 equ $82A8
    631                  82C1     Img_SegaSonic_12 equ $82C1
    632                  82E2     Img_SegaSonic_23 equ $82E2
    633                  8303     Img_SegaSonic_13 equ $8303
    634                  8324     Img_SegaSonic_32 equ $8324
    635                  8345     Img_SegaSonic_21 equ $8345
    636                  8366     Img_SegaSonic_43 equ $8366
    637                  8387     Img_SegaSonic_11 equ $8387
    638                  83A8     Img_SegaSonic_33 equ $83A8
    639                  83C9     Img_SegaSonic_22 equ $83C9
    640                  83EA     Img_SegaSonic_41 equ $83EA
    641                  840B     Img_SegaSonic_31 equ $840B
    642                  842C     Img_SegaSonic_42 equ $842C
    643                  844D     Img_SegaTrails_6 equ $844D
    644                  845D     Img_SegaTrails_5 equ $845D
    645                  846D     Img_SegaTrails_4 equ $846D
    646                  847D     Img_SegaTrails_3 equ $847D
    647                  848D     Img_SegaTrails_2 equ $848D
    648                  84A6     Img_star_4 equ $84A6
    649                  84BA     Img_star_3 equ $84BA
    650                  84CE     Img_sonicHand equ $84CE
    651                  84E5     Img_star_2 equ $84E5
    652                  8500     Img_star_1 equ $8500
    653                  851B     Img_emblemBack08 equ $851B
    654                  852B     Img_emblemBack07 equ $852B
    655                  853B     Img_emblemBack09 equ $853B
    656                  854B     Img_emblemBack04 equ $854B
    657                  855B     Img_emblemBack03 equ $855B
    658                  856B     Img_emblemBack06 equ $856B
    659                  857B     Img_emblemBack05 equ $857B
    660                  858B     Img_tails_5 equ $858B
    661                  85A2     Img_tails_4 equ $85A2
    662                  85B6     Img_tails_3 equ $85B6
    663                  85CA     Img_tails_2 equ $85CA
    664                  85DE     Img_tails_1 equ $85DE
    665                  85F2     Img_tailsHand equ $85F2
    666                  8609     Img_island equ $8609
    667                  861D     Img_sonic_1 equ $861D
    668                  8631     Img_sonic_2 equ $8631
    669                  8645     Img_emblemBack02 equ $8645
    670                  8655     Img_emblemBack01 equ $8655
    671                  8665     Img_sonic_3 equ $8665
    672                  8679     Img_sonic_4 equ $8679
    673                  8690     Img_emblemFront07 equ $8690
    674                  86A0     Img_emblemFront08 equ $86A0
    675                  86B0     Img_emblemFront05 equ $86B0
    676                  86C0     Img_emblemFront06 equ $86C0
    677                  86D0     Img_emblemFront03 equ $86D0
    678                  86E0     Img_emblemFront04 equ $86E0
    679                  86F0     Img_emblemFront01 equ $86F0
    680                  8700     Img_emblemFront02 equ $8700
    681                  8711     Ani_SegaSonic_3 equ $8711
    682                  871B     Ani_SegaSonic_2 equ $871B
    683                  8725     Ani_SegaSonic_1 equ $8725
    684                  872F     Ani_smallStar equ $872F
    685                  8735     Ani_largeStar equ $8735
    686                  8741     Ani_tails equ $8741
    687                  874D     Ani_sonic equ $874D
    688                  8A56     Pcm_SEGA equ $8A56
    689                  8A61     Psg_TitleScreen equ $8A61
    690                  8A9B     Pal_SEGA equ $8A9B
    691                  8ABB     Pal_TitleScreen equ $8ABB
    692                  8ADB     Pal_SEGAMid equ $8ADB
    693                  8AFB     Pal_SonicAndTailsIn equ $8AFB
    694                  8B1B     Pal_SEGAEnd equ $8B1B
    695
    696                                   INCLUD CONSTANT
    697                           * --------------------------------------->>
    698                           * Constants
    699                           *
    700                           * Naming convention
    701                           * -----------------
    702                           * - lower case
    703                           * - underscore-separated names
    704                           *
    705                           * --------------------------------------->>
    706
    707                           * =======================================>>
    708                           * TO8 Registers
    709                           * =======================================>>
    710
    711                  6049     dk_lecteur                    equ $6049
    712                  604A     dk_piste                      equ $604A
    713                  604B     dk_pisteL                     equ $604B
    714                  604C     dk_secteur                    equ $604C
    715                  604F     dk_destination                equ $604F
    716
    717                           * =======================================>>
    718                           * Display Constants
    719                           * =======================================>>
    720
    721                  00A0     screen_width                  equ 160 ; s>>
    722                  001C     screen_top                    equ 28 ; in>>
    723                  00E3     screen_bottom                 equ 28+199 >>
    724                  0030     screen_left                   equ 48 ; in>>
    725                  00CF     screen_right                  equ 48+159 >>
    726                  0008     nb_priority_levels            equ 8   ; n>>
    727
    728                           * =======================================>>
    729                           * Physics Constants
    730                           * =======================================>>
    731
    732                  0038     gravity                       equ $38 ; G>>
    733
    734                           * =======================================>>
    735                           * Animation Constants
    736                           * =======================================>>
    737
    738                  00FF     _resetAnim                    equ $FF
    739                  00FE     _goBackNFrames                equ $FE
    740                  00FD     _goToAnimation                equ $FD
    741                  00FC     _nextRoutine                  equ $FC
    742                  00FB     _resetAnimAndSubRoutine       equ $FB
    743                  00FA     _nextSubRoutine               equ $FA
    744
    745                           * =======================================>>
    746                           * Images Constants
    747                           * =======================================>>
    748
    749                  0004     image_x_size                  equ 4
    750                  0005     image_y_size                  equ 5
    751                  0006     image_center_offset           equ 6
    752
    753                  0004     image_subset_x1_offset        equ 4
    754                  0005     image_subset_y1_offset        equ 5
    755
    756                  0000     page_draw_routine             equ 0
    757                  0001     draw_routine                  equ 1
    758                  0003     page_erase_routine            equ 3
    759                  0004     erase_routine                 equ 4
    760                  0006     erase_nb_cell                 equ 6
    761
    762                           * =======================================>>
    763                           * Sound Constants
    764                           * =======================================>>
    765
    766                  0000     pcm_page        equ 0
    767                  0001     pcm_start_addr  equ 1
    768                  0003     pcm_end_addr    equ 3
    769                  0005     pcm_meta_size   equ 5
    770
    771                           * =======================================>>
    772                           * Object Constants
    773                           * =======================================>>
    774
    775                  0002     nb_reserved_objects           equ 2
    776                  001B     nb_dynamic_objects            equ 27
    777                  0003     nb_level_objects              equ 3
    778                  0020     nb_objects                    equ 32 * ma>>
    779
    780                           * --------------------------------------->>
    781                           * Object Status Table offsets
    782                           * --------------------------------------->>
    783
    784                  005A     object_size                   equ 90 ; th>>
    785                  005A     next_object                   equ object_>>
    786
    787                  0000     id                            equ 0      >>
    788                  0001     subtype                       equ 1      >>
    789                  0002     render_flags                  equ 2
    790
    791                           * --- render_flags bitfield variables --->>
    792                  0001     render_xmirror_mask           equ $01 ; (>>
    793                  0002     render_ymirror_mask           equ $02 ; (>>
    794                  0004     render_overlay_mask           equ $04 ; (>>
    795                  0008     render_motionless_mask        equ $08 ; (>>
    796                  0010     render_playfieldcoord_mask    equ $10 ; (>>
    797                  0020     render_hide_mask              equ $20 ; (>>
    798                  0040     render_todelete_mask          equ $40 ; (>>
    799                  0080     render_xloop_mask             equ $80 ; (>>
    800                            
    801                  0003     priority                      equ 3      >>
    802                  0004     anim                          equ 4  ; an>>
    803                  0006     prev_anim                     equ 6  ; an>>
    804                  0008     anim_frame                    equ 8      >>
    805                  0009     anim_frame_duration           equ 9      >>
    806                  000A     image_set                     equ 10 ; an>>
    807                  000C     x_pos                         equ 12 ; an>>
    808                  000E     x_sub                         equ 14     >>
    809                  000F     y_pos                         equ 15 ; an>>
    810                  0011     y_sub                         equ 17     >>
    811                  0012     xy_pixel                      equ 18     >>
    812                  0012     x_pixel                       equ 18     >>
    813                  0013     y_pixel                       equ 19     >>
    814                  0014     x_vel                         equ 20 ; an>>
    815                  0016     y_vel                         equ 22 ; an>>
    816                  0018     routine                       equ 24     >>
    817                  0019     routine_secondary             equ 25     >>
    818                  001A     status                        equ 26
    819
    820                           * --- status bitfield variables for objec>>
    821                  0001     status_x_orientation          equ   $01 ;>>
    822                  0002     status_y_orientation          equ   $02 ;>>
    823                  0004     status_bit2                   equ   $04 ;>>
    824                  0008     status_mainchar_standing      equ   $08 ;>>
    825                  0010     status_sidekick_standing      equ   $10 ;>>
    826                  0020     status_mainchar_pushing       equ   $20 ;>>
    827                  0040     status_sidekick_pushing       equ   $40 ;>>
    828                  0080     status_bit7                   equ   $80 ;>>
    829
    830                           * --- status bitfield variables for Main >>
    831                  0002     status_inair                  equ   $02 ;>>
    832                  0004     status_jumporroll             equ   $04 ;>>
    833                  0008     status_norgroundnorfall       equ   $08 ;>>
    834                  0010     status_jumpingafterrolling    equ   $10 ;>>
    835                  0020     status_pushing                equ   $20 ;>>
    836                  0040     status_underwater             equ   $40 ;>>
    837
    838                  001B     ext_variables                 equ 27 ; to>>
    839
    840                           * --------------------------------------->>
    841                           * reserved variables (engine)
    842
    843                  0029     rsv_render_flags              equ 41
    844
    845                           * --- rsv_render_flags bitfield variables>>
    846                  0001     rsv_render_checkrefresh_mask  equ $01 ; (>>
    847                  0002     rsv_render_erasesprite_mask   equ $02 ; (>>
    848                  0004     rsv_render_displaysprite_mask equ $04 ; (>>
    849                  0008     rsv_render_outofrange_mask    equ $08 ; (>>
    850
    851                  002A     rsv_prev_anim                 equ 42 ; an>>
    852                  002C     rsv_image_center_offset       equ 44 ; 0 >>
    853                           * ne sert plus                       ; an>>
    854                  002E     rsv_image_subset              equ 46 ; an>>
    855                  0030     rsv_mapping_frame             equ 48 ; an>>
    856                  0032     rsv_xy1_pixel                 equ 50     >>
    857                  0032     rsv_x1_pixel                  equ 50     >>
    858                  0033     rsv_y1_pixel                  equ 51     >>
    859                  0034     rsv_xy2_pixel                 equ 52     >>
    860                  0034     rsv_x2_pixel                  equ 52     >>
    861                  0035     rsv_y2_pixel                  equ 53     >>
    862
    863                           * --------------------------------------->>
    864                           * reserved variables (engine) - buffer sp>>
    865
    866                  0036     rsv_buffer_0                  equ 54 ; St>>
    867                  0036     rsv_priority_0                equ 54 ; in>>
    868                  0037     rsv_priority_prev_obj_0       equ 55 ; an>>
    869                  0039     rsv_priority_next_obj_0       equ 57 ; an>>
    870                           *rsv_prev_image_subset_0       equ 59 ; a>>
    871                  003D     rsv_prev_mapping_frame_0      equ 61 ; an>>
    872                  003F     rsv_bgdata_0                  equ 63 ; an>>
    873                  0041     rsv_prev_xy_pixel_0           equ 65 ;
    874                  0041     rsv_prev_x_pixel_0            equ 65 ; pr>>
    875                  0042     rsv_prev_y_pixel_0            equ 66 ; pr>>
    876                  0043     rsv_prev_xy1_pixel_0          equ 67 ;
    877                  0043     rsv_prev_x1_pixel_0           equ 67 ; pr>>
    878                  0044     rsv_prev_y1_pixel_0           equ 68 ; pr>>
    879                  0045     rsv_prev_xy2_pixel_0          equ 69 ;
    880                  0045     rsv_prev_x2_pixel_0           equ 69 ; pr>>
    881                  0046     rsv_prev_y2_pixel_0           equ 70 ; pr>>
    882                  0047     rsv_prev_render_flags_0       equ 71 ;
    883                           * --- rsv_prev_render_flags_0 bitfield va>>
    884                  0001     rsv_prev_render_overlay_mask  equ $01 ; (>>
    885                  0080     rsv_prev_render_onscreen_mask equ $80 ; (>>
    886
    887                  0048     rsv_buffer_1                  equ 72 ; St>>
    888                  0048     rsv_priority_1                equ 72 ; in>>
    889                  0049     rsv_priority_prev_obj_1       equ 73 ; an>>
    890                  004B     rsv_priority_next_obj_1       equ 75 ; an>>
    891                           *rsv_prev_image_subset_1       equ 77 ; a>>
    892                  004F     rsv_prev_mapping_frame_1      equ 79 ; an>>
    893                  0051     rsv_bgdata_1                  equ 81 ; an>>
    894                  0053     rsv_prev_xy_pixel_1           equ 83 ;
    895                  0053     rsv_prev_x_pixel_1            equ 83 ; pr>>
    896                  0054     rsv_prev_y_pixel_1            equ 84 ; pr>>
    897                  0055     rsv_prev_xy1_pixel_1          equ 85 ;
    898                  0055     rsv_prev_x1_pixel_1           equ 85 ; pr>>
    899                  0056     rsv_prev_y1_pixel_1           equ 86 ; pr>>
    900                  0057     rsv_prev_xy2_pixel_1          equ 87 ;
    901                  0057     rsv_prev_x2_pixel_1           equ 87 ; pr>>
    902                  0058     rsv_prev_y2_pixel_1           equ 88 ; pr>>
    903                  0059     rsv_prev_render_flags_1       equ 89 ;
    904
    905                  0000     buf_priority                  equ 0  ; of>>
    906                  0001     buf_priority_prev_obj         equ 1  ;
    907                  0003     buf_priority_next_obj         equ 3  ;
    908                           *buf_prev_image_subset         equ 5  ;
    909                  0007     buf_prev_mapping_frame        equ 7  ;
    910                  0009     buf_bgdata                    equ 9  ;
    911                  000B     buf_prev_xy_pixel             equ 11 ;
    912                  000B     buf_prev_x_pixel              equ 11 ;
    913                  000C     buf_prev_y_pixel              equ 12 ;
    914                  000D     buf_prev_xy1_pixel            equ 13 ;
    915                  000D     buf_prev_x1_pixel             equ 13 ;
    916                  000E     buf_prev_y1_pixel             equ 14 ;
    917                  000F     buf_prev_xy2_pixel            equ 15 ;
    918                  000F     buf_prev_x2_pixel             equ 15 ;
    919                  0010     buf_prev_y2_pixel             equ 16 ;
    920                  0011     buf_prev_render_flags         equ 17 ;
     19        A000                       org   $A000
     20
     21                  6610     SegaScr_This            equ Object_RAM
     22                  6610     Obj_SEGA                equ SegaScr_This
     23                  666A     Obj_Trails1             equ SegaScr_This+>>
     24                  66C4     Obj_Trails2             equ SegaScr_This+>>
     25                  671E     Obj_Trails3             equ SegaScr_This+>>
     26                  6778     Obj_Trails4             equ SegaScr_This+>>
     27                  67D2     Obj_Sonic1              equ SegaScr_This+>>
     28                  682C     Obj_Sonic2              equ SegaScr_This+>>
     29                  6886     Obj_Sonic3              equ SegaScr_This+>>
     30                  68E0     Obj_PaletteHandler      equ SegaScr_This+>>
     31
     32                           * --------------------------------------->>
     33                           * Object Status Table offsets
     34                           * - two variables can share same space if>>
     35                           * - take care of words and bytes and spac>>
     36                           * --------------------------------------->>
     37                  001B     b_nbFrames              equ ext_variables>>
     38
     39                           * --------------------------------------->>
     40                           * Subtypes
     41                           * --------------------------------------->>
     42                  0000     Sub_Init        equ 0
     43                  0003     Sub_SEGA        equ 3
     44                  0006     Sub_Trails      equ 6
     45                  0009     Sub_Sonic       equ 9
     46
     47        A000               SEGA_Main
     48  4+1   A000 A6   C8 18            lda   routine,u
     49  4+1   A003 A7   8C 01            sta   *+4,pcr
     50  3     A006 20   00               bra   SEGA_Routines
     51
     52        A008               SEGA_Routines
     53  5     A008 16   0009             lbra  SEGA_MainInit
     54  5     A00B 16   001A             lbra  SEGA
     55  5     A00E 16   000E             lbra  Trails
     56  5     A011 16   000E             lbra  Sonic
     57
     58        A014               SEGA_MainInit
     59  2     A014 86   02               lda   #2
     60  4+1   A016 A7   43               sta   priority,u
     61  4+1   A018 A6   41               lda   subtype,u
     62  4+1   A01A A7   C8 18            sta   routine,u
     63  3     A01D 20   E1               bra   SEGA_Main
     64
     65        A01F               Trails
     66  4     A01F 7E   7201             jmp   DisplaySprite
     67
     68        A022               Sonic
     69  8     A022 BD   727A             jsr   AnimateSprite
     70  4     A025 7E   7201             jmp   DisplaySprite
     71
     72        A028               SEGA
     73  4+1   A028 A6   C8 19            lda   routine_secondary,u
     74  4+1   A02B A7   8C 01            sta   *+4,pcr
     75  3     A02E 20   D8               bra   SEGA_Routines
     76
     77        A030               SEGA_SubRoutines
     78  5     A030 16   0019             lbra  SEGA_Init
     79  5     A033 16   00E8             lbra  SEGA_RunLeft
     80  5     A036 16   012D             lbra  SEGA_MidWipe
     81  5     A039 16   01A8             lbra  SEGA_MidWipeWaitPal
     82  5     A03C 16   01B8             lbra  SEGA_RunRight
     83  5     A03F 16   01F8             lbra  SEGA_EndWipe
     84  5     A042 16   0242             lbra  SEGA_EndWipeWaitPal
     85  5     A045 16   025F             lbra  SEGA_Wait
     86  5     A048 16   0282             lbra  SEGA_end
     87  5     A04B 39                    rts
     88
     89        A04C               SEGA_Init
     90
     91  2     A04C 86   0E               lda   #$E
     92  4+1   A04E A7   C8 1B            sta   b_nbFrames,u
     93
     94                                   * Init SEGA logo position
     95  3     A051 CC   807F             ldd   #$807F
     96  5+1   A054 ED   C8 12            std   xy_pixel,u
     97
     98                                   * Disable background save
     99  4+1   A057 A6   42               lda   render_flags,u
    100  2     A059 8A   04               ora   #render_overlay_mask
    101  4+1   A05B A7   42               sta   render_flags,u
    102
    103                                   * Init all sub objects
    104  5+5   A05D EF   8D 0071          stu   SEGA_Init_01+1,pcr
    105  3     A061 CC   0206             ldd   #(ObjID_SEGA<+8)+Sub_Trails>>
    106  4     A064 108E F080             ldy   #$F080
    107
    108  3     A068 8E   666A             ldx   #Obj_Trails1
    109  5+0   A06B ED   84               std   ,x
    110  6+1   A06D 10AF 88 12            sty   xy_pixel,x
    111  3     A071 CE   82A8             ldu   #Img_SegaTrails_1
    112  5+1   A074 EF   0A               stu   image_set,x
    113
    114  3     A076 8E   66C4             ldx   #Obj_Trails2
    115  5+0   A079 ED   84               std   ,x
    116  6+1   A07B 10AF 88 12            sty   xy_pixel,x
    117  3     A07F CE   848D             ldu   #Img_SegaTrails_2
    118  5+1   A082 EF   0A               stu   image_set,x
    119
    120  3     A084 8E   671E             ldx   #Obj_Trails3
    121  5+0   A087 ED   84               std   ,x
    122  6+1   A089 10AF 88 12            sty   xy_pixel,x
    123  3     A08D CE   845D             ldu   #Img_SegaTrails_5
    124  5+1   A090 EF   0A               stu   image_set,x
    125
    126  3     A092 8E   6778             ldx   #Obj_Trails4
    127  5+0   A095 ED   84               std   ,x
    128  6+1   A097 10AF 88 12            sty   xy_pixel,x
    129  3     A09B CE   844D             ldu   #Img_SegaTrails_6
    130  5+1   A09E EF   0A               stu   image_set,x
    131
    132  3     A0A0 CC   0209             ldd   #(ObjID_SEGA<+8)+Sub_Sonic
    133  4     A0A3 108E F87B             ldy   #$F87B
    134
    135  3     A0A7 8E   67D2             ldx   #Obj_Sonic1
    136  5+0   A0AA ED   84               std   ,x
    137  6+1   A0AC 10AF 88 12            sty   xy_pixel,x
    138  3     A0B0 CE   8725             ldu   #Ani_SegaSonic_1
    139  5+1   A0B3 EF   04               stu   anim,x
    140
    141  3     A0B5 8E   682C             ldx   #Obj_Sonic2
    142  5+0   A0B8 ED   84               std   ,x
    143  6+1   A0BA 10AF 88 12            sty   xy_pixel,x
    144  3     A0BE CE   871B             ldu   #Ani_SegaSonic_2
    145  5+1   A0C1 EF   04               stu   anim,x
    146
    147  3     A0C3 8E   6886             ldx   #Obj_Sonic3
    148  5+0   A0C6 ED   84               std   ,x
    149  6+1   A0C8 10AF 88 12            sty   xy_pixel,x
    150  3     A0CC CE   8711             ldu   #Ani_SegaSonic_3
    151  5+1   A0CF EF   04               stu   anim,x
    152
    153        A0D1               SEGA_Init_01
    154  3     A0D1 CE   0000             ldu   #$0000
    155
    156                                   * Disable backround save on Trail>>
    157  3     A0D4 8E   666A             ldx   #Obj_Trails1
    158  4+1   A0D7 A6   02               lda   render_flags,x
    159  2     A0D9 8A   05               ora   #render_overlay_mask!render>>
    160  4+1   A0DB A7   02               sta   render_flags,x
    161  2     A0DD C6   03               ldb   #3
    162  4+1   A0DF E7   03               stb   priority,x
    163
    164  3     A0E1 8E   66C4             ldx   #Obj_Trails2
    165  4+1   A0E4 A7   02               sta   render_flags,x
    166  4+1   A0E6 E7   03               stb   priority,x
    167
    168  3     A0E8 8E   671E             ldx   #Obj_Trails3
    169  4+1   A0EB A7   02               sta   render_flags,x
    170  4+1   A0ED E7   03               stb   priority,x
    171
    172  3     A0EF 8E   6778             ldx   #Obj_Trails4
    173  4+1   A0F2 A7   02               sta   render_flags,x
    174  4+1   A0F4 E7   03               stb   priority,x
    175
    176                                   * Set x mirror on Sonic
    177  3     A0F6 8E   67D2             ldx   #Obj_Sonic1
    178  4+1   A0F9 A6   88 1A            lda   status,x
    179  2     A0FC 8A   01               ora   #status_x_orientation
    180  4+1   A0FE A7   88 1A            sta   status,x
    181  2     A101 C6   01               ldb   #1
    182  4+1   A103 E7   03               stb   priority,x
    183
    184  3     A105 8E   682C             ldx   #Obj_Sonic2
    185  4+1   A108 A7   88 1A            sta   status,x
    186  4+1   A10B E7   03               stb   priority,x
    187
    188  3     A10D 8E   6886             ldx   #Obj_Sonic3
    189  4+1   A110 A7   88 1A            sta   status,x
    190  4+1   A113 E7   03               stb   priority,x
    191
    192  4+1   A115 A6   C8 19            lda   routine_secondary,u
    193  2     A118 8B   03               adda  #$03
    194  4+1   A11A A7   C8 19            sta   routine_secondary,u
    195  5     A11D 39                    rts
    196
    197        A11E               SEGA_RunLeft
    198
    199  6+1   A11E 6A   C8 1B            dec   b_nbFrames,u
    200  3     A121 2B   35               bmi   SEGA_RunLeft_continue
    201
    202  3     A123 8E   666A             ldx   #Obj_Trails1
    203  4+1   A126 A6   88 12            lda   x_pixel,x
    204  2     A129 80   10               suba  #$10
    205  4+1   A12B A7   88 12            sta   x_pixel,x
    206  3     A12E 8E   66C4             ldx   #Obj_Trails2
    207  4+1   A131 A7   88 12            sta   x_pixel,x
    208  3     A134 8E   671E             ldx   #Obj_Trails3
    209  4+1   A137 A7   88 12            sta   x_pixel,x
    210  3     A13A 8E   6778             ldx   #Obj_Trails4
    211  4+1   A13D A7   88 12            sta   x_pixel,x
    212
    213  3     A140 8E   67D2             ldx   #Obj_Sonic1
    214  4+1   A143 A6   88 12            lda   x_pixel,x
    215  2     A146 80   10               suba  #$10
    216  4+1   A148 A7   88 12            sta   x_pixel,x
    217  3     A14B 8E   682C             ldx   #Obj_Sonic2
    218  4+1   A14E A7   88 12            sta   x_pixel,x
    219  3     A151 8E   6886             ldx   #Obj_Sonic3
    220  4+1   A154 A7   88 12            sta   x_pixel,x
    221  5     A157 39                    rts
    222
    223        A158               SEGA_RunLeft_continue
    224  4+1   A158 A6   C8 19            lda   routine_secondary,u
    225  2     A15B 8B   03               adda  #$03
    226  4+1   A15D A7   C8 19            sta   routine_secondary,u
    227
    228  2     A160 86   0E               lda   #$E
    229  4+1   A162 A7   C8 1B            sta   b_nbFrames,u
    230  5     A165 39                    rts
    231
    232        A166               SEGA_MidWipe
    233
    234                                   * Unset x mirror on Trails
    235  3     A166 8E   666A             ldx   #Obj_Trails1
    236  4+1   A169 A6   02               lda   render_flags,x
    237  2     A16B 84   FE               anda   #:render_xmirror_mask
    238  4+1   A16D A7   02               sta   render_flags,x
    239  4+1   A16F E6   88 13            ldb   y_pixel,x
    240  2     A172 5A                    decb
    241  4+1   A173 E7   88 13            stb   y_pixel,x
    242
    243  3     A176 8E   66C4             ldx   #Obj_Trails2
    244  4+1   A179 A7   02               sta   render_flags,x
    245  4+1   A17B E7   88 13            stb   y_pixel,x
    246
    247  3     A17E 8E   671E             ldx   #Obj_Trails3
    248  4+1   A181 A7   02               sta   render_flags,x
    249  4+1   A183 E7   88 13            stb   y_pixel,x
    250  4     A186 108E 847D             ldy   #Img_SegaTrails_3
    251  6+1   A18A 10AF 0A               sty   image_set,x
    252
    253  3     A18D 8E   6778             ldx   #Obj_Trails4
    254  4+1   A190 A7   02               sta   render_flags,x
    255  4+1   A192 E7   88 13            stb   y_pixel,x
    256  4     A195 108E 846D             ldy   #Img_SegaTrails_4
    257  6+1   A199 10AF 0A               sty   image_set,x
    258
    259                                   * Unset x mirror on Sonic
    260  3     A19C 8E   67D2             ldx   #Obj_Sonic1
    261  4+1   A19F A6   88 1A            lda   status,x
    262  2     A1A2 84   FE               anda   #:status_x_orientation
    263  4+1   A1A4 A7   88 1A            sta   status,x
    264  4+1   A1A7 E6   88 12            ldb   x_pixel,x
    265  2     A1AA C0   10               subb  #$10
    266  4+1   A1AC E7   88 12            stb   x_pixel,x
    267
    268  3     A1AF 8E   682C             ldx   #Obj_Sonic2
    269  4+1   A1B2 A7   88 1A            sta   status,x
    270  4+1   A1B5 E7   88 12            stb   x_pixel,x
    271
    272  3     A1B8 8E   6886             ldx   #Obj_Sonic3
    273  4+1   A1BB A7   88 1A            sta   status,x
    274  4+1   A1BE E7   88 12            stb   x_pixel,x
    275
    276                                   * Set Sega Logo
    277  3     A1C1 CC   8298             ldd   #Img_SegaLogo_1
    278  5+1   A1C4 ED   4A               std   image_set,u
    279
    280                                   * Fade out Trails
    281  3     A1C6 8E   68E0             ldx   #Obj_PaletteHandler
    282  2     A1C9 86   03               lda   #ObjID_PaletteHandler
    283  4+1   A1CB A7   00               sta   id,x
    284  3     A1CD CC   8A9B             ldd   #Pal_SEGA *@IgnoreUndefined>>
    285  5+1   A1D0 ED   88 1B            std   ext_variables,x
    286  3     A1D3 CC   8ADB             ldd   #Pal_SEGAMid *@IgnoreUndefi>>
    287  5+1   A1D6 ED   88 1D            std   ext_variables+2,x
    288  4+1   A1D9 A6   C8 19            lda   routine_secondary,u
    289  2     A1DC 8B   03               adda  #$03
    290  4+1   A1DE A7   C8 19            sta   routine_secondary,u
    291
    292  4     A1E1 7E   7201             jmp   DisplaySprite
    293
    294        A1E4               SEGA_MidWipeWaitPal
    295  3     A1E4 8E   68E0             ldx   #Obj_PaletteHandler
    296  6+0   A1E7 6D   84               tst   ,x
    297  3     A1E9 27   03               beq   SEGA_MidWipeWaitPal_continu>>
    298  4     A1EB 7E   7201             jmp   DisplaySprite
    299
    300        A1EE               SEGA_MidWipeWaitPal_continue
    301  4+1   A1EE A6   C8 19            lda   routine_secondary,u
    302  2     A1F1 8B   03               adda  #$03
    303  4+1   A1F3 A7   C8 19            sta   routine_secondary,u
    304  5     A1F6 39                    rts
    305
    306        A1F7               SEGA_RunRight
    307  6+1   A1F7 6A   C8 1B            dec   b_nbFrames,u
    308  3     A1FA 2B   35               bmi   SEGA_RunRight_continue
    309
    310  3     A1FC 8E   666A             ldx   #Obj_Trails1
    311  4+1   A1FF A6   88 12            lda   x_pixel,x
    312  2     A202 8B   10               adda  #$10
    313  4+1   A204 A7   88 12            sta   x_pixel,x
    314  3     A207 8E   66C4             ldx   #Obj_Trails2
    315  4+1   A20A A7   88 12            sta   x_pixel,x
    316  3     A20D 8E   671E             ldx   #Obj_Trails3
    317  4+1   A210 A7   88 12            sta   x_pixel,x
    318  3     A213 8E   6778             ldx   #Obj_Trails4
    319  4+1   A216 A7   88 12            sta   x_pixel,x
    320
    321  3     A219 8E   67D2             ldx   #Obj_Sonic1
    322  4+1   A21C A6   88 12            lda   x_pixel,x
    323  2     A21F 8B   10               adda  #$10
    324  4+1   A221 A7   88 12            sta   x_pixel,x
    325  3     A224 8E   682C             ldx   #Obj_Sonic2
    326  4+1   A227 A7   88 12            sta   x_pixel,x
    327  3     A22A 8E   6886             ldx   #Obj_Sonic3
    328  4+1   A22D A7   88 12            sta   x_pixel,x
    329  5     A230 39                    rts
    330
    331        A231               SEGA_RunRight_continue
    332  4+1   A231 A6   C8 19            lda   routine_secondary,u
    333  2     A234 8B   03               adda  #$03
    334  4+1   A236 A7   C8 19            sta   routine_secondary,u
    335  5     A239 39                    rts
    336
    337        A23A               SEGA_EndWipe
    338
    339                                   * Set Sega Logo
    340  3     A23A CC   8288             ldd   #Img_SegaLogo_2
    341  5+1   A23D ED   4A               std   image_set,u
    342
    343                                   * Delete Trails and Sonic Sprites>>
    344  3     A23F 8E   666A             ldx   #Obj_Trails1
    345  8     A242 BD   733F             jsr   DeleteObject_x
    346  3     A245 8E   66C4             ldx   #Obj_Trails2
    347  8     A248 BD   733F             jsr   DeleteObject_x
    348  3     A24B 8E   671E             ldx   #Obj_Trails3
    349  8     A24E BD   733F             jsr   DeleteObject_x
    350  3     A251 8E   6778             ldx   #Obj_Trails4
    351  8     A254 BD   733F             jsr   DeleteObject_x
    352  3     A257 8E   67D2             ldx   #Obj_Sonic1
    353  8     A25A BD   733F             jsr   DeleteObject_x
    354  3     A25D 8E   682C             ldx   #Obj_Sonic2
    355  8     A260 BD   733F             jsr   DeleteObject_x
    356  3     A263 8E   6886             ldx   #Obj_Sonic3
    357  8     A266 BD   733F             jsr   DeleteObject_x
    358
    359                                   * Fade out Trails
    360  3     A269 8E   68E0             ldx   #Obj_PaletteHandler
    361  2     A26C 86   03               lda   #ObjID_PaletteHandler
    362  4+1   A26E A7   00               sta   id,x
    363  6     A270 FC   7CF2             ldd   Cur_palette *@IgnoreUndefin>>
    364  5+1   A273 ED   88 1B            std   ext_variables,x
    365  3     A276 CC   8B1B             ldd   #Pal_SEGAEnd *@IgnoreUndefi>>
    366  5+1   A279 ED   88 1D            std   ext_variables+2,x
    367                            
    368  4+1   A27C A6   C8 19            lda   routine_secondary,u
    369  2     A27F 8B   03               adda  #$03
    370  4+1   A281 A7   C8 19            sta   routine_secondary,u
    371
    372  4     A284 7E   7201             jmp   DisplaySprite
    373
    374        A287               SEGA_EndWipeWaitPal
    375  3     A287 8E   68E0             ldx   #Obj_PaletteHandler
    376  6+0   A28A 6D   84               tst   ,x
    377  3     A28C 27   03               beq   SEGA_PlaySample
    378  4     A28E 7E   7201             jmp   DisplaySprite
    379
    380        A291               SEGA_PlaySample
    381  4+1   A291 A6   C8 19            lda   routine_secondary,u
    382  2     A294 8B   03               adda  #$03
    383  4+1   A296 A7   C8 19            sta   routine_secondary,u
    384
    385  4     A299 108E 8A56             ldy   #Pcm_SEGA *@IgnoreUndefined>>
    386  8     A29D BD   7D7C             jsr   PlayPCM
    387
    388  3     A2A0 CC   0000             ldd   #$0000
    389  6     A2A3 FD   7188             std   Vint_runcount
    390  5     A2A6 39                    rts
    391
    392        A2A7               SEGA_Wait
    393  6     A2A7 FC   7188             ldd   Vint_runcount
    394  5     A2AA 1083 0096             cmpd  #3*50 ; 3 seconds
    395  3     A2AE 27   01               beq   SEGA_fadeOut
    396  5     A2B0 39                    rts
    397
    398        A2B1               SEGA_fadeOut
    399  3     A2B1 8E   68E0             ldx   #Obj_PaletteHandler
    400  2     A2B4 86   03               lda   #ObjID_PaletteHandler
    401  4+1   A2B6 A7   00               sta   id,x
    402  6     A2B8 FC   7CF2             ldd   Cur_palette *@IgnoreUndefin>>
    403  5+1   A2BB ED   88 1B            std   ext_variables,x
    404  3     A2BE CC   7D14             ldd   #Black_palette *@IgnoreUnde>>
    405  5+1   A2C1 ED   88 1D            std   ext_variables+2,x
    406  4+1   A2C4 A6   C8 19            lda   routine_secondary,u
    407  2     A2C7 8B   03               adda  #$03
    408  4+1   A2C9 A7   C8 19            sta   routine_secondary,u
    409  5     A2CC 39                    rts
    410
    411        A2CD               SEGA_end
    412  3     A2CD 8E   68E0             ldx   #Obj_PaletteHandler
    413  6+0   A2D0 6D   84               tst   ,x
    414  3     A2D2 27   01               beq   SEGA_return
    415  5     A2D4 39                    rts
    416
    417        A2D5               SEGA_return
    418  8     A2D5 BD   7345             jsr   DeleteObject
    419  3     A2D8 CC   0100             ldd   #(ObjID_SonicAndTailsIn<+8)>>
    420  5+0   A2DB ED   C4               std   ,u
    421
    422  3     A2DD CE   68E0             ldu   #Obj_PaletteHandler
    423  8     A2E0 BD   7407             jsr   ClearObj
    424  5     A2E3 39                    rts
    425
    426

000000 Total Errors

000323 Total Symbols
     3x          Equ   0004 anim
     1x          Equ   727A AnimateSprite
     0x          Equ   0008 anim_frame
     0x          Equ   0009 anim_frame_duration
     0x          Equ   8735 Ani_largeStar
     1x          Equ   8725 Ani_SegaSonic_1
     1x          Equ   871B Ani_SegaSonic_2
     1x          Equ   8711 Ani_SegaSonic_3
     0x          Equ   872F Ani_smallStar
     0x          Equ   874D Ani_sonic
     0x          Equ   8741 Ani_tails
     1x          Equ   7D14 Black_palette
     0x          Equ   0009 buf_bgdata
     0x          Equ   0007 buf_prev_mapping_frame
     0x          Equ   0011 buf_prev_render_flags
     0x          Equ   000D buf_prev_x1_pixel
     0x          Equ   000F buf_prev_x2_pixel
     0x          Equ   000D buf_prev_xy1_pixel
     0x          Equ   000F buf_prev_xy2_pixel
     0x          Equ   000B buf_prev_xy_pixel
     0x          Equ   000B buf_prev_x_pixel
     0x          Equ   000E buf_prev_y1_pixel
     0x          Equ   0010 buf_prev_y2_pixel
     0x          Equ   000C buf_prev_y_pixel
     0x          Equ   0000 buf_priority
     0x          Equ   0003 buf_priority_next_obj
     0x          Equ   0001 buf_priority_prev_obj
     4x          Equ   001B b_nbFrames
     0x          Equ   0040 c1_button_A_mask
     0x          Equ   0002 c1_button_down_mask
     0x          Equ   0004 c1_button_left_mask
     0x          Equ   0008 c1_button_right_mask
     0x          Equ   0001 c1_button_up_mask
     0x          Equ   0080 c2_button_A_mask
     0x          Equ   0020 c2_button_down_mask
     0x          Equ   0040 c2_button_left_mask
     0x          Equ   0080 c2_button_right_mask
     0x          Equ   0010 c2_button_up_mask
     0x          Equ   7CB7 ClearCartMem
     1x          Equ   7407 ClearObj
     0x          Equ   41C7 current_game_mode_data
     2x          Equ   7CF2 Cur_palette
     1x          Equ   7345 DeleteObject
     7x          Equ   733F DeleteObject_x
     6x          Equ   7201 DisplaySprite
     0x          Equ   71FB DisplaySprite_x
     0x          Equ   604F dk_destination
     0x          Equ   6049 dk_lecteur
     0x          Equ   604A dk_piste
     0x          Equ   604B dk_pisteL
     0x          Equ   604C dk_secteur
     0x          Equ   718C Dpad_Held
     0x          Equ   718E Dpad_Press
     0x          Equ   0001 draw_routine
     0x          Equ   7CF4 Dyn_palette
     0x          Equ   0006 erase_nb_cell
     0x          Equ   0004 erase_routine
     7x          Equ   001B ext_variables
     0x          Equ   718D Fire_Held
     0x          Equ   718F Fire_Press
     0x          Equ   414F GameModeLoader
     0x          Equ   6122 Glb_Sprite_Screen_Pos_Part1
     0x          Equ   6124 Glb_Sprite_Screen_Pos_Part2
     0x          Equ   0038 gravity
     3x          Equ   0000 id
     0x          Equ   0006 image_center_offset
     8x          Equ   000A image_set
     0x          Equ   0004 image_subset_x1_offset
     0x          Equ   0005 image_subset_y1_offset
     0x          Equ   0004 image_x_size
     0x          Equ   0005 image_y_size
     0x          Equ   8655 Img_emblemBack01
     0x          Equ   8645 Img_emblemBack02
     0x          Equ   855B Img_emblemBack03
     0x          Equ   854B Img_emblemBack04
     0x          Equ   857B Img_emblemBack05
     0x          Equ   856B Img_emblemBack06
     0x          Equ   852B Img_emblemBack07
     0x          Equ   851B Img_emblemBack08
     0x          Equ   853B Img_emblemBack09
     0x          Equ   86F0 Img_emblemFront01
     0x          Equ   8700 Img_emblemFront02
     0x          Equ   86D0 Img_emblemFront03
     0x          Equ   86E0 Img_emblemFront04
     0x          Equ   86B0 Img_emblemFront05
     0x          Equ   86C0 Img_emblemFront06
     0x          Equ   8690 Img_emblemFront07
     0x          Equ   86A0 Img_emblemFront08
     0x          Equ   8609 Img_island
     1x          Equ   8298 Img_SegaLogo_1
     1x          Equ   8288 Img_SegaLogo_2
     0x          Equ   8387 Img_SegaSonic_11
     0x          Equ   82C1 Img_SegaSonic_12
     0x          Equ   8303 Img_SegaSonic_13
     0x          Equ   8345 Img_SegaSonic_21
     0x          Equ   83C9 Img_SegaSonic_22
     0x          Equ   82E2 Img_SegaSonic_23
     0x          Equ   840B Img_SegaSonic_31
     0x          Equ   8324 Img_SegaSonic_32
     0x          Equ   83A8 Img_SegaSonic_33
     0x          Equ   83EA Img_SegaSonic_41
     0x          Equ   842C Img_SegaSonic_42
     0x          Equ   8366 Img_SegaSonic_43
     1x          Equ   82A8 Img_SegaTrails_1
     1x          Equ   848D Img_SegaTrails_2
     1x          Equ   847D Img_SegaTrails_3
     1x          Equ   846D Img_SegaTrails_4
     1x          Equ   845D Img_SegaTrails_5
     1x          Equ   844D Img_SegaTrails_6
     0x          Equ   8278 Img_SonicAndTailsIn
     0x          Equ   84CE Img_sonicHand
     0x          Equ   861D Img_sonic_1
     0x          Equ   8631 Img_sonic_2
     0x          Equ   8665 Img_sonic_3
     0x          Equ   8679 Img_sonic_4
     0x          Equ   8500 Img_star_1
     0x          Equ   84E5 Img_star_2
     0x          Equ   84BA Img_star_3
     0x          Equ   84A6 Img_star_4
     0x          Equ   85F2 Img_tailsHand
     0x          Equ   85DE Img_tails_1
     0x          Equ   85CA Img_tails_2
     0x          Equ   85B6 Img_tails_3
     0x          Equ   85A2 Img_tails_4
     0x          Equ   858B Img_tails_5
     0x          Equ   8208 IrqOff
     0x          Equ   81FD IrqOn
     0x          Equ   8232 IrqPsg
     0x          Equ   8241 IrqPsgRaster
     0x          Equ   8213 IrqSync
     0x          Equ   4DFF irq_one_frame
     0x          Equ   81FB Irq_Raster_End
     0x          Equ   81F7 Irq_Raster_Page
     0x          Equ   81F9 Irq_Raster_Start
     0x          Equ   6027 irq_routine
     0x          Equ   E7C6 irq_timer
     0x          Equ   E7C5 irq_timer_ctrl
     0x          Equ   718C Joypads_Held
     0x          Equ   718E Joypads_Press
     0x          Equ   71F9 MarkObjGone
     0x          Equ   001B nb_dynamic_objects
     0x          Equ   0003 nb_level_objects
     0x          Equ   0020 nb_objects
     0x          Equ   0008 nb_priority_levels
     0x          Equ   0002 nb_reserved_objects
     0x          Equ   005A next_object
     1x          Equ   6610 Object_RAM
     9x          Equ   005A object_size
     3x          Equ   0003 ObjID_PaletteHandler
     2x          Equ   0002 ObjID_SEGA
     1x          Equ   0001 ObjID_SonicAndTailsIn
     0x          Equ   0004 ObjID_TitleScreen
     7x          Equ   68E0 Obj_PaletteHandler
     0x          Equ   6610 Obj_SEGA
     6x          Equ   67D2 Obj_Sonic1
     6x          Equ   682C Obj_Sonic2
     6x          Equ   6886 Obj_Sonic3
     6x          Equ   666A Obj_Trails1
     6x          Equ   66C4 Obj_Trails2
     6x          Equ   671E Obj_Trails3
     6x          Equ   6778 Obj_Trails4
     0x          Equ   0000 page_draw_routine
     0x          Equ   0003 page_erase_routine
     1x          Equ   8A9B Pal_SEGA
     1x          Equ   8B1B Pal_SEGAEnd
     1x          Equ   8ADB Pal_SEGAMid
     0x          Equ   8AFB Pal_SonicAndTailsIn
     0x          Equ   8ABB Pal_TitleScreen
     0x          Equ   0003 pcm_end_addr
     0x          Equ   0005 pcm_meta_size
     0x          Equ   0000 pcm_page
     1x          Equ   8A56 Pcm_SEGA
     0x          Equ   0001 pcm_start_addr
     1x          Equ   7D7C PlayPCM
     0x          Equ   0006 prev_anim
     8x          Equ   0003 priority
     0x          Equ   7E87 PSGCancelLoop
     0x          Equ   8041 PSGFrame
     0x          Equ   7E8B PSGGetStatus
     0x          Equ   7DD3 PSGInit
     0x          Equ   7DE5 PSGPlayNoRepeat
     0x          Equ   7F03 PSGRestoreVolumes
     0x          Equ   7E3C PSGResume
     0x          Equ   7E8F PSGSetMusicVolumeAttenuation
     0x          Equ   8039 PSGSFXCancelLoop
     0x          Equ   814E PSGSFXFrame
     0x          Equ   803D PSGSFXGetStatus
     0x          Equ   7F77 PSGSFXPlayLoop
     0x          Equ   7FC3 PSGSFXStop
     0x          Equ   7EEE PSGSilenceChannels
     0x          Equ   7E13 PSGStop
     0x          Equ   8A61 Psg_TitleScreen
     0x          Equ   7CF1 Refresh_palette
    12x          Equ   0002 render_flags
     0x          Equ   0020 render_hide_mask
     0x          Equ   0008 render_motionless_mask
     2x          Equ   0004 render_overlay_mask
     0x          Equ   0010 render_playfieldcoord_mask
     0x          Equ   0040 render_todelete_mask
     0x          Equ   0080 render_xloop_mask
     2x          Equ   0001 render_xmirror_mask
     0x          Equ   0002 render_ymirror_mask
     2x          Equ   0018 routine
    17x          Equ   0019 routine_secondary
     0x          Equ   003F rsv_bgdata_0
     0x          Equ   0051 rsv_bgdata_1
     0x          Equ   0036 rsv_buffer_0
     0x          Equ   0048 rsv_buffer_1
     0x          Equ   002C rsv_image_center_offset
     0x          Equ   002E rsv_image_subset
     0x          Equ   0030 rsv_mapping_frame
     0x          Equ   002A rsv_prev_anim
     0x          Equ   003D rsv_prev_mapping_frame_0
     0x          Equ   004F rsv_prev_mapping_frame_1
     0x          Equ   0047 rsv_prev_render_flags_0
     0x          Equ   0059 rsv_prev_render_flags_1
     0x          Equ   0080 rsv_prev_render_onscreen_mask
     0x          Equ   0001 rsv_prev_render_overlay_mask
     0x          Equ   0043 rsv_prev_x1_pixel_0
     0x          Equ   0055 rsv_prev_x1_pixel_1
     0x          Equ   0045 rsv_prev_x2_pixel_0
     0x          Equ   0057 rsv_prev_x2_pixel_1
     0x          Equ   0043 rsv_prev_xy1_pixel_0
     0x          Equ   0055 rsv_prev_xy1_pixel_1
     0x          Equ   0045 rsv_prev_xy2_pixel_0
     0x          Equ   0057 rsv_prev_xy2_pixel_1
     0x          Equ   0041 rsv_prev_xy_pixel_0
     0x          Equ   0053 rsv_prev_xy_pixel_1
     0x          Equ   0041 rsv_prev_x_pixel_0
     0x          Equ   0053 rsv_prev_x_pixel_1
     0x          Equ   0044 rsv_prev_y1_pixel_0
     0x          Equ   0056 rsv_prev_y1_pixel_1
     0x          Equ   0046 rsv_prev_y2_pixel_0
     0x          Equ   0058 rsv_prev_y2_pixel_1
     0x          Equ   0042 rsv_prev_y_pixel_0
     0x          Equ   0054 rsv_prev_y_pixel_1
     0x          Equ   0036 rsv_priority_0
     0x          Equ   0048 rsv_priority_1
     0x          Equ   0039 rsv_priority_next_obj_0
     0x          Equ   004B rsv_priority_next_obj_1
     0x          Equ   0037 rsv_priority_prev_obj_0
     0x          Equ   0049 rsv_priority_prev_obj_1
     0x          Equ   0001 rsv_render_checkrefresh_mask
     0x          Equ   0004 rsv_render_displaysprite_mask
     0x          Equ   0002 rsv_render_erasesprite_mask
     0x          Equ   0029 rsv_render_flags
     0x          Equ   0008 rsv_render_outofrange_mask
     0x          Equ   0032 rsv_x1_pixel
     0x          Equ   0034 rsv_x2_pixel
     0x          Equ   0032 rsv_xy1_pixel
     0x          Equ   0034 rsv_xy2_pixel
     0x          Equ   0033 rsv_y1_pixel
     0x          Equ   0035 rsv_y2_pixel
     0x          Equ   7162 screen_border_color
     0x          Equ   00E3 screen_bottom
     0x          Equ   0030 screen_left
     0x          Equ   00CF screen_right
     0x          Equ   001C screen_top
     0x          Equ   00A0 screen_width
     1x          Label A028 SEGA
     9x          Equ   6610 SegaScr_This
     1x          Label A2CD SEGA_end
     1x          Label A23A SEGA_EndWipe
     1x          Label A287 SEGA_EndWipeWaitPal
     1x          Label A2B1 SEGA_fadeOut
     1x          Label A04C SEGA_Init
     1x          Label A0D1 SEGA_Init_01
     1x          Label A000 SEGA_Main
     1x          Label A014 SEGA_MainInit
     1x          Label A166 SEGA_MidWipe
     1x          Label A1E4 SEGA_MidWipeWaitPal
     1x          Label A1EE SEGA_MidWipeWaitPal_continue
     1x          Label A291 SEGA_PlaySample
     1x          Label A2D5 SEGA_return
     2x          Label A008 SEGA_Routines
     1x          Label A11E SEGA_RunLeft
     1x          Label A158 SEGA_RunLeft_continue
     1x          Label A1F7 SEGA_RunRight
     1x          Label A231 SEGA_RunRight_continue
     0x          Label A030 SEGA_SubRoutines
     1x          Label A2A7 SEGA_Wait
     1x          Label A022 Sonic
     8x          Equ   001A status
     0x          Equ   0004 status_bit2
     0x          Equ   0080 status_bit7
     0x          Equ   0002 status_inair
     0x          Equ   0010 status_jumpingafterrolling
     0x          Equ   0004 status_jumporroll
     0x          Equ   0020 status_mainchar_pushing
     0x          Equ   0008 status_mainchar_standing
     0x          Equ   0008 status_norgroundnorfall
     0x          Equ   0020 status_pushing
     0x          Equ   0040 status_sidekick_pushing
     0x          Equ   0010 status_sidekick_standing
     0x          Equ   0040 status_underwater
     2x          Equ   0001 status_x_orientation
     0x          Equ   0002 status_y_orientation
     1x          Equ   0001 subtype
     0x          Equ   0000 Sub_Init
     0x          Equ   0003 Sub_SEGA
     1x          Equ   0009 Sub_Sonic
     1x          Equ   0006 Sub_Trails
     1x          Label A01F Trails
     0x          Equ   7D54 UpdatePalette
     2x          Equ   7188 Vint_runcount
     0x          Equ   7D34 White_palette
     8x          Equ   0012 xy_pixel
    22x          Equ   0012 x_pixel
     0x          Equ   000C x_pos
     0x          Equ   000E x_sub
     0x          Equ   0014 x_vel
     5x          Equ   0013 y_pixel
     0x          Equ   000F y_pos
     0x          Equ   0011 y_sub
     0x          Equ   0016 y_vel
     0x          Equ   00FE _goBackNFrames
     0x          Equ   00FD _goToAnimation
     0x          Equ   00FC _nextRoutine
     0x          Equ   00FA _nextSubRoutine
     0x          Equ   00FF _resetAnim
     0x          Equ   00FB _resetAnimAndSubRoutine
     0x          Equ   80FB _sendVolume2PSG
     0x          Equ   81AB _SFXsetLoopPoint

