/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : .\Sonic2\GeneratedCode\TITLESCR\RasterFade\RasterFade.asm
 * Fichier destination : .\Sonic2\GeneratedCode\TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     6922
 *     Include  0:GLOBALS.ASM  8223
 *     Include  0:CONSTANT.ASM 5845
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
    386                                   INCLUD GLOBALS
    387                           * Generated Code
    388
    389                  414F     GameModeLoader equ $414F
    390                  41C7     current_game_mode_data equ $41C7
    391                  0001     ObjID_PaletteFade equ 1
    392                  0002     ObjID_RasterFade equ 2
    393                  0003     ObjID_SonicAndTailsIn equ 3
    394                  0004     ObjID_SEGA equ 4
    395                  0005     ObjID_TitleScreen equ 5
    396                  6122     Glb_Sprite_Screen_Pos_Part1 equ $6122
    397                  6124     Glb_Sprite_Screen_Pos_Part2 equ $6124
    398                  6660     Object_RAM equ $6660
    399                  7536     screen_border_color equ $7536
    400                  755C     Vint_runcount equ $755C
    401                  0001     c1_button_up_mask equ $0001
    402                  0002     c1_button_down_mask equ $0002
    403                  0004     c1_button_left_mask equ $0004
    404                  0008     c1_button_right_mask equ $0008
    405                  0010     c2_button_up_mask equ $0010
    406                  0020     c2_button_down_mask equ $0020
    407                  0040     c2_button_left_mask equ $0040
    408                  0080     c2_button_right_mask equ $0080
    409                  0040     c1_button_A_mask equ $0040
    410                  0080     c2_button_A_mask equ $0080
    411                  7560     Joypads_Held equ $7560
    412                  7560     Dpad_Held equ $7560
    413                  7561     Fire_Held equ $7561
    414                  7562     Joypads_Press equ $7562
    415                  7562     Dpad_Press equ $7562
    416                  7563     Fire_Press equ $7563
    417                  75CD     MarkObjGone equ $75CD
    418                  75CF     DisplaySprite_x equ $75CF
    419                  75D5     DisplaySprite equ $75D5
    420                  764E     AnimateSprite equ $764E
    421                  7713     DeleteObject_x equ $7713
    422                  7719     DeleteObject equ $7719
    423                  77DB     ClearObj equ $77DB
    424                  808B     ClearCartMem equ $808B
    425                  80C5     Refresh_palette equ $80C5
    426                  80C6     Cur_palette equ $80C6
    427                  80C8     Dyn_palette equ $80C8
    428                  80E8     Black_palette equ $80E8
    429                  8108     White_palette equ $8108
    430                  8128     UpdatePalette equ $8128
    431                  8150     PlayPCM equ $8150
    432                  81A7     PSGInit equ $81A7
    433                  81B9     PSGPlayNoRepeat equ $81B9
    434                  81E7     PSGStop equ $81E7
    435                  8210     PSGResume equ $8210
    436                  825B     PSGCancelLoop equ $825B
    437                  825F     PSGGetStatus equ $825F
    438                  8263     PSGSetMusicVolumeAttenuation equ $8263
    439                  82C2     PSGSilenceChannels equ $82C2
    440                  82D7     PSGRestoreVolumes equ $82D7
    441                  834B     PSGSFXPlayLoop equ $834B
    442                  8397     PSGSFXStop equ $8397
    443                  840D     PSGSFXCancelLoop equ $840D
    444                  8411     PSGSFXGetStatus equ $8411
    445                  8415     PSGFrame equ $8415
    446                  84CF     _sendVolume2PSG equ $84CF
    447                  8522     PSGSFXFrame equ $8522
    448                  857F     _SFXsetLoopPoint equ $857F
    449                  6027     irq_routine equ $6027
    450                  E7C5     irq_timer_ctrl equ $E7C5
    451                  E7C6     irq_timer equ $E7C6
    452                  4DFF     irq_one_frame equ $4DFF
    453                  85CB     Irq_Raster_Page equ $85CB
    454                  85CD     Irq_Raster_Start equ $85CD
    455                  85CF     Irq_Raster_End equ $85CF
    456                  85D1     IrqOn equ $85D1
    457                  85DC     IrqOff equ $85DC
    458                  85E7     IrqSync equ $85E7
    459                  8606     IrqPsg equ $8606
    460                  8615     IrqPsgRaster equ $8615
    461                  8656     Img_SonicAndTailsIn equ $8656
    462                  8666     Img_SegaLogo_2 equ $8666
    463                  8676     Img_SegaLogo_1 equ $8676
    464                  8686     Img_SegaTrails_1 equ $8686
    465                  869F     Img_SegaSonic_12 equ $869F
    466                  86C0     Img_SegaSonic_23 equ $86C0
    467                  86E1     Img_SegaSonic_13 equ $86E1
    468                  8702     Img_SegaSonic_32 equ $8702
    469                  8723     Img_SegaSonic_21 equ $8723
    470                  8744     Img_SegaSonic_43 equ $8744
    471                  8765     Img_SegaSonic_11 equ $8765
    472                  8786     Img_SegaSonic_33 equ $8786
    473                  87A7     Img_SegaSonic_22 equ $87A7
    474                  87C8     Img_SegaSonic_41 equ $87C8
    475                  87E9     Img_SegaSonic_31 equ $87E9
    476                  880A     Img_SegaSonic_42 equ $880A
    477                  882B     Img_SegaTrails_6 equ $882B
    478                  883B     Img_SegaTrails_5 equ $883B
    479                  884B     Img_SegaTrails_4 equ $884B
    480                  885B     Img_SegaTrails_3 equ $885B
    481                  886B     Img_SegaTrails_2 equ $886B
    482                  8884     Img_tails_5 equ $8884
    483                  889B     Img_tails_4 equ $889B
    484                  88AF     Img_tails_3 equ $88AF
    485                  88C3     Img_tails_2 equ $88C3
    486                  88D7     Img_tails_1 equ $88D7
    487                  88EB     Img_islandWater15 equ $88EB
    488                  8906     Img_islandWater14 equ $8906
    489                  8921     Img_islandWater13 equ $8921
    490                  893C     Img_islandWater12 equ $893C
    491                  8957     Img_islandWater11 equ $8957
    492                  8972     Img_islandMask_1 equ $8972
    493                  8982     Img_islandWater10 equ $8982
    494                  899D     Img_emblemBack02 equ $899D
    495                  89AD     Img_emblemBack01 equ $89AD
    496                  89BD     Img_islandMask_2 equ $89BD
    497                  89CD     Img_islandWater09 equ $89CD
    498                  89E8     Img_islandWater08 equ $89E8
    499                  8A03     Img_islandWater07 equ $8A03
    500                  8A1E     Img_islandWater06 equ $8A1E
    501                  8A39     Img_islandWater05 equ $8A39
    502                  8A54     Img_islandWater04 equ $8A54
    503                  8A6F     Img_islandWater03 equ $8A6F
    504                  8A8A     Img_islandWater02 equ $8A8A
    505                  8AA5     Img_star_4 equ $8AA5
    506                  8AB9     Img_islandWater01 equ $8AB9
    507                  8AD4     Img_star_3 equ $8AD4
    508                  8AE8     Img_sonicHand equ $8AE8
    509                  8AFF     Img_star_2 equ $8AFF
    510                  8B1A     Img_star_1 equ $8B1A
    511                  8B35     Img_emblemBack08 equ $8B35
    512                  8B45     Img_emblemBack07 equ $8B45
    513                  8B55     Img_emblemBack09 equ $8B55
    514                  8B65     Img_emblemBack04 equ $8B65
    515                  8B75     Img_emblemBack03 equ $8B75
    516                  8B85     Img_emblemBack06 equ $8B85
    517                  8B95     Img_emblemBack05 equ $8B95
    518                  8BA5     Img_tailsHand equ $8BA5
    519                  8BBC     Img_island equ $8BBC
    520                  8BD7     Img_sonic_1 equ $8BD7
    521                  8BEB     Img_sonic_2 equ $8BEB
    522                  8BFF     Img_sonic_5 equ $8BFF
    523                  8C16     Img_sonic_3 equ $8C16
    524                  8C2A     Img_emblemFront07 equ $8C2A
    525                  8C3A     Img_emblemFront08 equ $8C3A
    526                  8C4A     Img_emblemFront05 equ $8C4A
    527                  8C5A     Img_emblemFront06 equ $8C5A
    528                  8C6A     Img_emblemFront03 equ $8C6A
    529                  8C7A     Img_emblemFront04 equ $8C7A
    530                  8C8A     Img_emblemFront01 equ $8C8A
    531                  8C9A     Img_emblemFront02 equ $8C9A
    532                  8CAB     Ani_SegaSonic_3 equ $8CAB
    533                  8CB5     Ani_SegaSonic_2 equ $8CB5
    534                  8CBF     Ani_SegaSonic_1 equ $8CBF
    535                  8CC9     Ani_smallStar equ $8CC9
    536                  8CCF     Ani_largeStar equ $8CCF
    537                  8CDB     Ani_tails equ $8CDB
    538                  8CE7     Ani_sonic equ $8CE7
    539                  6122     Glb_Sprite_Screen_Pos_Part1 equ $6122
    540                  6124     Glb_Sprite_Screen_Pos_Part2 equ $6124
    541                  6660     Object_RAM equ $6660
    542                  7536     screen_border_color equ $7536
    543                  755C     Vint_runcount equ $755C
    544                  0001     c1_button_up_mask equ $0001
    545                  0002     c1_button_down_mask equ $0002
    546                  0004     c1_button_left_mask equ $0004
    547                  0008     c1_button_right_mask equ $0008
    548                  0010     c2_button_up_mask equ $0010
    549                  0020     c2_button_down_mask equ $0020
    550                  0040     c2_button_left_mask equ $0040
    551                  0080     c2_button_right_mask equ $0080
    552                  0040     c1_button_A_mask equ $0040
    553                  0080     c2_button_A_mask equ $0080
    554                  7560     Joypads_Held equ $7560
    555                  7560     Dpad_Held equ $7560
    556                  7561     Fire_Held equ $7561
    557                  7562     Joypads_Press equ $7562
    558                  7562     Dpad_Press equ $7562
    559                  7563     Fire_Press equ $7563
    560                  75CD     MarkObjGone equ $75CD
    561                  75CF     DisplaySprite_x equ $75CF
    562                  75D5     DisplaySprite equ $75D5
    563                  764E     AnimateSprite equ $764E
    564                  7713     DeleteObject_x equ $7713
    565                  7719     DeleteObject equ $7719
    566                  77DB     ClearObj equ $77DB
    567                  808B     ClearCartMem equ $808B
    568                  80C5     Refresh_palette equ $80C5
    569                  80C6     Cur_palette equ $80C6
    570                  80C8     Dyn_palette equ $80C8
    571                  80E8     Black_palette equ $80E8
    572                  8108     White_palette equ $8108
    573                  8128     UpdatePalette equ $8128
    574                  8150     PlayPCM equ $8150
    575                  81A7     PSGInit equ $81A7
    576                  81B9     PSGPlayNoRepeat equ $81B9
    577                  81E7     PSGStop equ $81E7
    578                  8210     PSGResume equ $8210
    579                  825B     PSGCancelLoop equ $825B
    580                  825F     PSGGetStatus equ $825F
    581                  8263     PSGSetMusicVolumeAttenuation equ $8263
    582                  82C2     PSGSilenceChannels equ $82C2
    583                  82D7     PSGRestoreVolumes equ $82D7
    584                  834B     PSGSFXPlayLoop equ $834B
    585                  8397     PSGSFXStop equ $8397
    586                  840D     PSGSFXCancelLoop equ $840D
    587                  8411     PSGSFXGetStatus equ $8411
    588                  8415     PSGFrame equ $8415
    589                  84CF     _sendVolume2PSG equ $84CF
    590                  8522     PSGSFXFrame equ $8522
    591                  857F     _SFXsetLoopPoint equ $857F
    592                  6027     irq_routine equ $6027
    593                  E7C5     irq_timer_ctrl equ $E7C5
    594                  E7C6     irq_timer equ $E7C6
    595                  4DFF     irq_one_frame equ $4DFF
    596                  85CB     Irq_Raster_Page equ $85CB
    597                  85CD     Irq_Raster_Start equ $85CD
    598                  85CF     Irq_Raster_End equ $85CF
    599                  85D1     IrqOn equ $85D1
    600                  85DC     IrqOff equ $85DC
    601                  85E7     IrqSync equ $85E7
    602                  8606     IrqPsg equ $8606
    603                  8615     IrqPsgRaster equ $8615
    604                  8656     Img_SonicAndTailsIn equ $8656
    605                  8666     Img_SegaLogo_2 equ $8666
    606                  8676     Img_SegaLogo_1 equ $8676
    607                  8686     Img_SegaTrails_1 equ $8686
    608                  869F     Img_SegaSonic_12 equ $869F
    609                  86C0     Img_SegaSonic_23 equ $86C0
    610                  86E1     Img_SegaSonic_13 equ $86E1
    611                  8702     Img_SegaSonic_32 equ $8702
    612                  8723     Img_SegaSonic_21 equ $8723
    613                  8744     Img_SegaSonic_43 equ $8744
    614                  8765     Img_SegaSonic_11 equ $8765
    615                  8786     Img_SegaSonic_33 equ $8786
    616                  87A7     Img_SegaSonic_22 equ $87A7
    617                  87C8     Img_SegaSonic_41 equ $87C8
    618                  87E9     Img_SegaSonic_31 equ $87E9
    619                  880A     Img_SegaSonic_42 equ $880A
    620                  882B     Img_SegaTrails_6 equ $882B
    621                  883B     Img_SegaTrails_5 equ $883B
    622                  884B     Img_SegaTrails_4 equ $884B
    623                  885B     Img_SegaTrails_3 equ $885B
    624                  886B     Img_SegaTrails_2 equ $886B
    625                  8884     Img_tails_5 equ $8884
    626                  889B     Img_tails_4 equ $889B
    627                  88AF     Img_tails_3 equ $88AF
    628                  88C3     Img_tails_2 equ $88C3
    629                  88D7     Img_tails_1 equ $88D7
    630                  88EB     Img_islandWater15 equ $88EB
    631                  8906     Img_islandWater14 equ $8906
    632                  8921     Img_islandWater13 equ $8921
    633                  893C     Img_islandWater12 equ $893C
    634                  8957     Img_islandWater11 equ $8957
    635                  8972     Img_islandMask_1 equ $8972
    636                  8982     Img_islandWater10 equ $8982
    637                  899D     Img_emblemBack02 equ $899D
    638                  89AD     Img_emblemBack01 equ $89AD
    639                  89BD     Img_islandMask_2 equ $89BD
    640                  89CD     Img_islandWater09 equ $89CD
    641                  89E8     Img_islandWater08 equ $89E8
    642                  8A03     Img_islandWater07 equ $8A03
    643                  8A1E     Img_islandWater06 equ $8A1E
    644                  8A39     Img_islandWater05 equ $8A39
    645                  8A54     Img_islandWater04 equ $8A54
    646                  8A6F     Img_islandWater03 equ $8A6F
    647                  8A8A     Img_islandWater02 equ $8A8A
    648                  8AA5     Img_star_4 equ $8AA5
    649                  8AB9     Img_islandWater01 equ $8AB9
    650                  8AD4     Img_star_3 equ $8AD4
    651                  8AE8     Img_sonicHand equ $8AE8
    652                  8AFF     Img_star_2 equ $8AFF
    653                  8B1A     Img_star_1 equ $8B1A
    654                  8B35     Img_emblemBack08 equ $8B35
    655                  8B45     Img_emblemBack07 equ $8B45
    656                  8B55     Img_emblemBack09 equ $8B55
    657                  8B65     Img_emblemBack04 equ $8B65
    658                  8B75     Img_emblemBack03 equ $8B75
    659                  8B85     Img_emblemBack06 equ $8B85
    660                  8B95     Img_emblemBack05 equ $8B95
    661                  8BA5     Img_tailsHand equ $8BA5
    662                  8BBC     Img_island equ $8BBC
    663                  8BD7     Img_sonic_1 equ $8BD7
    664                  8BEB     Img_sonic_2 equ $8BEB
    665                  8BFF     Img_sonic_5 equ $8BFF
    666                  8C16     Img_sonic_3 equ $8C16
    667                  8C2A     Img_emblemFront07 equ $8C2A
    668                  8C3A     Img_emblemFront08 equ $8C3A
    669                  8C4A     Img_emblemFront05 equ $8C4A
    670                  8C5A     Img_emblemFront06 equ $8C5A
    671                  8C6A     Img_emblemFront03 equ $8C6A
    672                  8C7A     Img_emblemFront04 equ $8C7A
    673                  8C8A     Img_emblemFront01 equ $8C8A
    674                  8C9A     Img_emblemFront02 equ $8C9A
    675                  8CAB     Ani_SegaSonic_3 equ $8CAB
    676                  8CB5     Ani_SegaSonic_2 equ $8CB5
    677                  8CBF     Ani_SegaSonic_1 equ $8CBF
    678                  8CC9     Ani_smallStar equ $8CC9
    679                  8CCF     Ani_largeStar equ $8CCF
    680                  8CDB     Ani_tails equ $8CDB
    681                  8CE7     Ani_sonic equ $8CE7
    682                  8FF0     Pcm_SEGA equ $8FF0
    683                  8FFB     Psg_TitleScreen equ $8FFB
    684                  9035     Pal_Island equ $9035
    685                  9055     Pal_SEGA equ $9055
    686                  9075     Pal_TitleScreen equ $9075
    687                  9095     Pal_SEGAMid equ $9095
    688                  90B5     Pal_SonicAndTailsIn equ $90B5
    689                  90D5     Pal_SEGAEnd equ $90D5
    690
    691                                   INCLUD CONSTANT
    692                           * --------------------------------------->>
    693                           * Constants
    694                           *
    695                           * Naming convention
    696                           * -----------------
    697                           * - lower case
    698                           * - underscore-separated names
    699                           *
    700                           * --------------------------------------->>
    701
    702                           * =======================================>>
    703                           * TO8 Registers
    704                           * =======================================>>
    705
    706                  6049     dk_lecteur                    equ $6049
    707                  604A     dk_piste                      equ $604A
    708                  604B     dk_pisteL                     equ $604B
    709                  604C     dk_secteur                    equ $604C
    710                  604F     dk_destination                equ $604F
    711
    712                           * =======================================>>
    713                           * Display Constants
    714                           * =======================================>>
    715
    716                  00A0     screen_width                  equ 160 ; s>>
    717                  001C     screen_top                    equ 28 ; in>>
    718                  00E3     screen_bottom                 equ 28+199 >>
    719                  0030     screen_left                   equ 48 ; in>>
    720                  00CF     screen_right                  equ 48+159 >>
    721                  0008     nb_priority_levels            equ 8   ; n>>
    722
    723                           * =======================================>>
    724                           * Physics Constants
    725                           * =======================================>>
    726
    727                  0038     gravity                       equ $38 ; G>>
    728
    729                           * =======================================>>
    730                           * Animation Constants
    731                           * =======================================>>
    732
    733                  00FF     _resetAnim                    equ $FF
    734                  00FE     _goBackNFrames                equ $FE
    735                  00FD     _goToAnimation                equ $FD
    736                  00FC     _nextRoutine                  equ $FC
    737                  00FB     _resetAnimAndSubRoutine       equ $FB
    738                  00FA     _nextSubRoutine               equ $FA
    739
    740                           * =======================================>>
    741                           * Images Constants
    742                           * =======================================>>
    743
    744                  0004     image_x_size                  equ 4
    745                  0005     image_y_size                  equ 5
    746                  0006     image_center_offset           equ 6
    747
    748                  0004     image_subset_x1_offset        equ 4
    749                  0005     image_subset_y1_offset        equ 5
    750
    751                  0000     page_draw_routine             equ 0
    752                  0001     draw_routine                  equ 1
    753                  0003     page_erase_routine            equ 3
    754                  0004     erase_routine                 equ 4
    755                  0006     erase_nb_cell                 equ 6
    756
    757                           * =======================================>>
    758                           * Sound Constants
    759                           * =======================================>>
    760
    761                  0000     pcm_page        equ 0
    762                  0001     pcm_start_addr  equ 1
    763                  0003     pcm_end_addr    equ 3
    764                  0005     pcm_meta_size   equ 5
    765
    766                           * =======================================>>
    767                           * Object Constants
    768                           * =======================================>>
    769
    770                  0002     nb_reserved_objects           equ 2
    771                  0025     nb_dynamic_objects            equ 37
    772                  0003     nb_level_objects              equ 3
    773                  002A     nb_objects                    equ 42 * ma>>
    774
    775                           * --------------------------------------->>
    776                           * Object Status Table offsets
    777                           * --------------------------------------->>
    778
    779                  005A     object_size                   equ 90 ; th>>
    780                  005A     next_object                   equ object_>>
    781
    782                  0000     id                            equ 0      >>
    783                  0001     subtype                       equ 1      >>
    784                  0002     render_flags                  equ 2
    785
    786                           * --- render_flags bitfield variables --->>
    787                  0001     render_xmirror_mask           equ $01 ; (>>
    788                  0002     render_ymirror_mask           equ $02 ; (>>
    789                  0004     render_overlay_mask           equ $04 ; (>>
    790                  0008     render_motionless_mask        equ $08 ; (>>
    791                  0010     render_playfieldcoord_mask    equ $10 ; (>>
    792                  0020     render_hide_mask              equ $20 ; (>>
    793                  0040     render_todelete_mask          equ $40 ; (>>
    794                  0080     render_xloop_mask             equ $80 ; (>>
    795                            
    796                  0003     priority                      equ 3      >>
    797                  0004     anim                          equ 4  ; an>>
    798                  0006     prev_anim                     equ 6  ; an>>
    799                  0008     anim_frame                    equ 8      >>
    800                  0009     anim_frame_duration           equ 9      >>
    801                  000A     image_set                     equ 10 ; an>>
    802                  000C     x_pos                         equ 12 ; an>>
    803                  000E     x_sub                         equ 14     >>
    804                  000F     y_pos                         equ 15 ; an>>
    805                  0011     y_sub                         equ 17     >>
    806                  0012     xy_pixel                      equ 18     >>
    807                  0012     x_pixel                       equ 18     >>
    808                  0013     y_pixel                       equ 19     >>
    809                  0014     x_vel                         equ 20 ; an>>
    810                  0016     y_vel                         equ 22 ; an>>
    811                  0018     routine                       equ 24     >>
    812                  0019     routine_secondary             equ 25     >>
    813                  001A     status                        equ 26
    814
    815                           * --- status bitfield variables for objec>>
    816                  0001     status_x_orientation          equ   $01 ;>>
    817                  0002     status_y_orientation          equ   $02 ;>>
    818                  0004     status_bit2                   equ   $04 ;>>
    819                  0008     status_mainchar_standing      equ   $08 ;>>
    820                  0010     status_sidekick_standing      equ   $10 ;>>
    821                  0020     status_mainchar_pushing       equ   $20 ;>>
    822                  0040     status_sidekick_pushing       equ   $40 ;>>
    823                  0080     status_bit7                   equ   $80 ;>>
    824
    825                           * --- status bitfield variables for Main >>
    826                  0002     status_inair                  equ   $02 ;>>
    827                  0004     status_jumporroll             equ   $04 ;>>
    828                  0008     status_norgroundnorfall       equ   $08 ;>>
    829                  0010     status_jumpingafterrolling    equ   $10 ;>>
    830                  0020     status_pushing                equ   $20 ;>>
    831                  0040     status_underwater             equ   $40 ;>>
    832
    833                  001B     ext_variables                 equ 27 ; to>>
    834
    835                           * --------------------------------------->>
    836                           * reserved variables (engine)
    837
    838                  0029     rsv_render_flags              equ 41
    839
    840                           * --- rsv_render_flags bitfield variables>>
    841                  0001     rsv_render_checkrefresh_mask  equ $01 ; (>>
    842                  0002     rsv_render_erasesprite_mask   equ $02 ; (>>
    843                  0004     rsv_render_displaysprite_mask equ $04 ; (>>
    844                  0008     rsv_render_outofrange_mask    equ $08 ; (>>
    845
    846                  002A     rsv_prev_anim                 equ 42 ; an>>
    847                  002C     rsv_image_center_offset       equ 44 ; 0 >>
    848                           * ne sert plus                       ; an>>
    849                  002E     rsv_image_subset              equ 46 ; an>>
    850                  0030     rsv_mapping_frame             equ 48 ; an>>
    851                  0032     rsv_xy1_pixel                 equ 50     >>
    852                  0032     rsv_x1_pixel                  equ 50     >>
    853                  0033     rsv_y1_pixel                  equ 51     >>
    854                  0034     rsv_xy2_pixel                 equ 52     >>
    855                  0034     rsv_x2_pixel                  equ 52     >>
    856                  0035     rsv_y2_pixel                  equ 53     >>
    857
    858                           * --------------------------------------->>
    859                           * reserved variables (engine) - buffer sp>>
    860
    861                  0036     rsv_buffer_0                  equ 54 ; St>>
    862                  0036     rsv_priority_0                equ 54 ; in>>
    863                  0037     rsv_priority_prev_obj_0       equ 55 ; an>>
    864                  0039     rsv_priority_next_obj_0       equ 57 ; an>>
    865                           *rsv_prev_image_subset_0       equ 59 ; a>>
    866                  003D     rsv_prev_mapping_frame_0      equ 61 ; an>>
    867                  003F     rsv_bgdata_0                  equ 63 ; an>>
    868                  0041     rsv_prev_xy_pixel_0           equ 65 ;
    869                  0041     rsv_prev_x_pixel_0            equ 65 ; pr>>
    870                  0042     rsv_prev_y_pixel_0            equ 66 ; pr>>
    871                  0043     rsv_prev_xy1_pixel_0          equ 67 ;
    872                  0043     rsv_prev_x1_pixel_0           equ 67 ; pr>>
    873                  0044     rsv_prev_y1_pixel_0           equ 68 ; pr>>
    874                  0045     rsv_prev_xy2_pixel_0          equ 69 ;
    875                  0045     rsv_prev_x2_pixel_0           equ 69 ; pr>>
    876                  0046     rsv_prev_y2_pixel_0           equ 70 ; pr>>
    877                  0047     rsv_prev_render_flags_0       equ 71 ;
    878                           * --- rsv_prev_render_flags_0 bitfield va>>
    879                  0001     rsv_prev_render_overlay_mask  equ $01 ; (>>
    880                  0080     rsv_prev_render_onscreen_mask equ $80 ; (>>
    881
    882                  0048     rsv_buffer_1                  equ 72 ; St>>
    883                  0048     rsv_priority_1                equ 72 ; in>>
    884                  0049     rsv_priority_prev_obj_1       equ 73 ; an>>
    885                  004B     rsv_priority_next_obj_1       equ 75 ; an>>
    886                           *rsv_prev_image_subset_1       equ 77 ; a>>
    887                  004F     rsv_prev_mapping_frame_1      equ 79 ; an>>
    888                  0051     rsv_bgdata_1                  equ 81 ; an>>
    889                  0053     rsv_prev_xy_pixel_1           equ 83 ;
    890                  0053     rsv_prev_x_pixel_1            equ 83 ; pr>>
    891                  0054     rsv_prev_y_pixel_1            equ 84 ; pr>>
    892                  0055     rsv_prev_xy1_pixel_1          equ 85 ;
    893                  0055     rsv_prev_x1_pixel_1           equ 85 ; pr>>
    894                  0056     rsv_prev_y1_pixel_1           equ 86 ; pr>>
    895                  0057     rsv_prev_xy2_pixel_1          equ 87 ;
    896                  0057     rsv_prev_x2_pixel_1           equ 87 ; pr>>
    897                  0058     rsv_prev_y2_pixel_1           equ 88 ; pr>>
    898                  0059     rsv_prev_render_flags_1       equ 89 ;
    899
    900                  0000     buf_priority                  equ 0  ; of>>
    901                  0001     buf_priority_prev_obj         equ 1  ;
    902                  0003     buf_priority_next_obj         equ 3  ;
    903                           *buf_prev_image_subset         equ 5  ;
    904                  0007     buf_prev_mapping_frame        equ 7  ;
    905                  0009     buf_bgdata                    equ 9  ;
    906                  000B     buf_prev_xy_pixel             equ 11 ;
    907                  000B     buf_prev_x_pixel              equ 11 ;
    908                  000C     buf_prev_y_pixel              equ 12 ;
    909                  000D     buf_prev_xy1_pixel            equ 13 ;
    910                  000D     buf_prev_x1_pixel             equ 13 ;
    911                  000E     buf_prev_y1_pixel             equ 14 ;
    912                  000F     buf_prev_xy2_pixel            equ 15 ;
    913                  000F     buf_prev_x2_pixel             equ 15 ;
    914                  0010     buf_prev_y2_pixel             equ 16 ;
    915                  0011     buf_prev_render_flags         equ 17 ;
    916
    917                           * TODO Doit etre gere dynamiquement par l>>
    918                  0000     PalID_TitleScreenRaster       equ 0
     11        A000                       org   $A000
     12
     13                           * --------------------------------------->>
     14                           * Subtypes
     15                           * --------------------------------------->>
     16                  0003     Sub_RasterFadeInColor  equ 3
     17                  0003     Sub_RasterFadeOutColor equ 3
     18                  0003     Sub_RasterFadeInPal    equ 3
     19                  0003     Sub_RasterFadeOutPal   equ 3
     20                  0006     Sub_RasterMain         equ 6
     21
     22                           * --------------------------------------->>
     23                           * Object Status Table offsets
     24                           * --------------------------------------->>
     25                  001B     raster_pal_src        equ ext_variables  >>
     26                  001C     raster_pal_dst        equ ext_variables+1>>
     27                  001D     raster_nb_fade_colors equ ext_variables+2>>
     28                  001E     raster_cycle_idx      equ ext_variables+3>>
     29                  001F     raster_color          equ ext_variables+4>>
     30                  0021     raster_cycles         equ ext_variables+6>>
     31                  0022     raster_inc            equ ext_variables+7>>
     32                  0023     raster_inc_           equ ext_variables+8>>
     33                  0024     raster_frames         equ ext_variables+9>>
     34                  0025     raster_cur_frame      equ ext_variables+1>>
     35                  0026     raster_nb_colors      equ ext_variables+1>>
     36                  0027     raster_cycle_frame    equ ext_variables+1>>
     37
     38        A000               RasterFade
     39  4+1   A000 A6   C8 18            lda   routine,u
     40  4+1   A003 A7   8C 01            sta   *+4,pcr
     41  3     A006 20   00               bra   RasterFade_Routines
     42                            
     43        A008               RasterFade_Routines
     44  5     A008 16   0009             lbra  RasterFade_SubtypeInit
     45  5     A00B 16   000D             lbra  RasterFade_InInit
     46  5     A00E 16   0093             lbra  RasterFade_Main
     47  5     A011 16   0114             lbra  RasterCycle_Main
     48
     49        A014               RasterFade_SubtypeInit
     50  4+1   A014 A6   41               lda   subtype,u
     51  4+1   A016 A7   C8 18            sta   routine,u
     52  3     A019 20   E5               bra   RasterFade
     53
     54        A01B               RasterFade_InInit
     55  4+1   A01B A6   C8 18            lda   routine,u
     56  2     A01E 8B   03               adda  #$03
     57  4+1   A020 A7   C8 18            sta   routine,u
     58                            
     59  2     A023 86   06               lda   #Sub_RasterMain
     60  4+1   A025 A7   C8 18            sta   routine,u
     61                            
     62  6+1   A028 6F   C8 1E            clr   raster_cycle_idx,u
     63                            
     64  4+1   A02B A6   C8 24            lda   raster_frames,u
     65  4+1   A02E A7   C8 25            sta   raster_cur_frame,u
     66                            
     67  5     A031 B6   E7E5             lda   $E7E5
     68  5     A034 B7   85CB             sta   Irq_Raster_Page
     69                            
     70  4+5   A037 30   8D 0116          leax  pal_RasterCurrent,pcr      >>
     71  6     A03B BF   85CD             stx   Irq_Raster_Start           >>
     72  5+5   A03E AF   8D 0038          stx   RFA_InitColor_endloop1+1,pc>>
     73                            
     74  2     A042 86   03               lda   #$03                       >>
     75  4+1   A044 E6   C8 26            ldb   raster_nb_colors,u         >>
     76  11    A047 3D                    mul
     77  4+4   A048 30   8B               leax  d,x
     78  6     A04A BF   85CF             stx   Irq_Raster_End
     79  5+5   A04D AF   8D 00D2          stx   RFA_end+2,pcr
     80  5+5   A051 AF   8D 004A          stx   RFA_InitColor_endloop3+1,pc>>
     81                            
     82  4+5   A055 30   8D 00F8          leax  pal_RasterCurrent,pcr
     83  2     A059 86   03               lda   #$03
     84  4+1   A05B E6   C8 1D            ldb   raster_nb_fade_colors,u
     85  11    A05E 3D                    mul
     86  4+4   A05F 30   8B               leax  d,x
     87  5+5   A061 AF   8D 002D          stx   RFA_InitColor_endloop2+1,pc>>
     88                            
     89  4+1   A065 A6   C8 22            lda   raster_inc,u               >>
     90  2     A068 48                    asla                             >>
     91  2     A069 48                    asla
     92  2     A06A 48                    asla
     93  2     A06B 48                    asla
     94  4+1   A06C AB   C8 22            adda  raster_inc,u
     95  4+1   A06F A7   C8 23            sta   raster_inc_,u
     96                            
     97  5+1   A072 EC   C8 1F            ldd   raster_color,u             >>
     98        A075               RFA_InitColor_loop1
     99  4+1   A075 30   1D               leax  -3,x
    100  5+1   A077 ED   01               std   1,x
    101        A079               RFA_InitColor_endloop1
    102  4     A079 8C   0000             cmpx  #$0000
    103  3     A07C 26   F7               bne   RFA_InitColor_loop1
    104
    105  4+1   A07E A6   C8 1C            lda   raster_pal_dst,u           >>
    106  4+5   A081 31   8D 0330          leay  Pal_Index,pcr
    107  5+1   A085 EC   A6               ldd   a,y
    108  4+4   A087 31   AB               leay  d,y
    109        A089               RFA_InitColor_loop2
    110  4+0   A089 A6   A4               lda   ,y
    111  4+1   A08B 31   23               leay  3,y
    112  4+0   A08D A7   84               sta   ,x
    113  4+1   A08F 30   03               leax  3,x
    114        A091               RFA_InitColor_endloop2
    115  4     A091 8C   0000             cmpx  #$0000
    116  3     A094 26   F3               bne   RFA_InitColor_loop2
    117                            
    118        A096               RFA_InitColor_loop3
    119  4+2   A096 A6   A0               lda   ,y+                        >>
    120  4+2   A098 A7   80               sta   ,x+
    121  5+3   A09A EC   A1               ldd   ,y++
    122  5+3   A09C ED   81               std   ,x++
    123        A09E               RFA_InitColor_endloop3
    124  4     A09E 8C   0000             cmpx  #$0000
    125  3     A0A1 26   F3               bne   RFA_InitColor_loop3
    126  5     A0A3 39                    rts
    127                            
    128        A0A4               RasterFade_Main
    129  6+1   A0A4 6A   C8 25            dec   raster_cur_frame,u
    130  3     A0A7 27   02               beq   RFA_Continue
    131  3     A0A9 20   7D               bra   RasterCycle_Main
    132                            
    133        A0AB               RFA_Continue
    134  4+1   A0AB A6   C8 24            lda   raster_frames,u
    135  4+1   A0AE A7   C8 25            sta   raster_cur_frame,u
    136                            
    137  4+1   A0B1 A6   C8 1C            lda   raster_pal_dst,u           >>
    138  4+5   A0B4 30   8D 02FD          leax  Pal_Index,pcr
    139  5+1   A0B8 EC   86               ldd   a,x
    140  4     A0BA C3   0001             addd  #1
    141  4+4   A0BD 30   8B               leax  d,x
    142  4+5   A0BF 31   8D 008F          leay  pal_RasterCurrent+1,pcr
    143  6+1   A0C3 6A   C8 21            dec   raster_cycles,u          * >>
    144  3     A0C6 26   0A               bne   RFA_Loop                 * >>
    145  4+1   A0C8 A6   C8 18            lda   routine,u
    146  2     A0CB 8B   03               adda  #$03
    147  4+1   A0CD A7   C8 18            sta   routine,u
    148  3     A0D0 20   56               bra   RasterCycle_Main
    149                            
    150        A0D2               RFA_Loop
    151  4+1   A0D2 A6   21               lda   1,y                       *>>
    152  4+5   A0D4 A4   8D 0076          anda  pal_mask,pcr             * >>
    153  4+1   A0D8 E6   01               ldb   1,x                      * >>
    154  4+5   A0DA E4   8D 0070          andb  pal_mask,pcr             * >>
    155  4+5   A0DE E7   8D 006D          stb   pal_buffer,pcr           * >>
    156  4+1   A0E2 E6   C8 23            ldb   raster_inc_,u            * >>
    157  4+5   A0E5 E4   8D 0065          andb  pal_mask,pcr             * >>
    158  4+5   A0E9 E7   8D 0063          stb   pal_buffer+1,pcr         * >>
    159  4+5   A0ED A1   8D 005E          cmpa  pal_buffer,pcr           * >>
    160  3     A0F1 27   12               beq   RFA_VRSuivante           * >>
    161  3     A0F3 22   08               bhi   RFA_VRDec                * >>
    162  4+1   A0F5 A6   21               lda   1,y                      * >>
    163  4+5   A0F7 AB   8D 0055          adda  pal_buffer+1,pcr         * >>
    164  3     A0FB 20   06               bra   RFA_VRSave               * >>
    165        A0FD               RFA_VRDec
    166  4+1   A0FD A6   21               lda   1,y                      * >>
    167  4+5   A0FF A0   8D 004D          suba  pal_buffer+1,pcr         * >>
    168        A103               RFA_VRSave
    169  4+1   A103 A7   21               sta   1,y                      * >>
    170        A105               RFA_VRSuivante
    171  6+5   A105 63   8D 0045          com   pal_mask,pcr             * >>
    172  3     A109 2B   C7               bmi   RFA_Loop                 * >>
    173                            
    174        A10B               RFA_SetPalBleu
    175  4+0   A10B E6   A4               ldb   ,y                       * >>
    176  4+0   A10D E1   84               cmpb  ,x                       * >>
    177  3     A10F 27   0C               beq   RFA_SetPalNext           * >>
    178  3     A111 22   05               bhi   RFA_SetPalBleudec        * >>
    179  4+1   A113 E0   C8 22            subb  raster_inc,u             * >>
    180  3     A116 20   03               bra   RFA_SetPalSaveBleu       * >>
    181        A118               RFA_SetPalBleudec
    182  4+1   A118 E0   C8 22            subb  raster_inc,u             * >>
    183        A11B               RFA_SetPalSaveBleu
    184  4+0   A11B E7   A4               stb   ,y                       * >>
    185                            
    186        A11D               RFA_SetPalNext
    187  4+1   A11D 31   23               leay  3,y                      * >>
    188  4+1   A11F 30   03               leax  3,x                      * >>
    189        A121               RFA_end
    190  5     A121 108C 0000             cmpy  #$0000
    191  3     A125 25   AB               blo   RFA_Loop                 * >>
    192  5     A127 39                    rts
    193                            
    194        A128               RasterCycle_Main
    195  4+1   A128 A6   C8 27            lda   raster_cycle_frame,u
    196  2     A12B 4C                    inca
    197  4+1   A12C A7   C8 27            sta   raster_cycle_frame,u
    198  2     A12F 84   07               anda  #7
    199  3     A131 26   1A               bne   RasterCycle_Main_end
    200
    201  4+1   A133 A6   C8 1E            lda   raster_cycle_idx,u
    202  2     A136 4C                    inca
    203  2     A137 81   06               cmpa  #6
    204  3     A139 26   02               bne   RasterCycle_Main_continue
    205  2     A13B 86   00               lda   #0
    206        A13D               RasterCycle_Main_continue
    207  4+1   A13D A7   C8 1E            sta   raster_cycle_idx,u
    208  2     A140 48                    asla
    209                            
    210  4+5   A141 30   8D 0264          leax  Pal_TitleScreenCycle,pcr
    211  5+1   A145 AE   86               ldx   a,x
    212  4+5   A147 31   8D 0082          leay  pal_RasterCurrent+124,pcr
    213  5+0   A14B AF   A4               stx   ,y
    214                            
    215        A14D               RasterCycle_Main_end
    216  5     A14D 39                    rts
    217                            
    218                           * --------------------------------------->>
    219                           * Local data
    220                           * --------------------------------------->>
    221                            
    222        A14E 0F            pal_mask     fcb $0F                   * >>
    223        A14F 0000          pal_buffer   fdb $00                   * >>
    224        A151               pal_RasterCurrent rmb 600,0
    225
    226        A3A9               Pal_TitleScreenCycle
    227        A3A9 0E00                        fdb   $0e00
    228        A3AB 0C10                        fdb   $0c10
    229        A3AD 0E00                        fdb   $0e00
    230        A3AF 0B41                        fdb   $0b41
    231        A3B1 0E00                        fdb   $0e00
    232        A3B3 0B74                        fdb   $0b74
    233        A3B5               Pal_TitleScreenCycle_end
    234
    235        A3B5 0002          Pal_Index    fdb Pal_TitleScreenRaster-Pa>>
    236        A3B7               Pal_TitleScreenRaster
    237        A3B7 08                    fcb   $08
    238        A3B8 0020                  fdb   $0020  * 148-154 island 4
    239        A3BA 0A                    fcb   $0a
    240        A3BB 0040                  fdb   $0040  * 148-154 island 5
    241        A3BD 12                    fcb   $12
    242        A3BE 0071                  fdb   $0071  * 148-154 island 9
    243        A3C0 14                    fcb   $14
    244        A3C1 00A4                  fdb   $00a4  * 148-154 island 10
    245        A3C3 1E                    fcb   $1e
    246        A3C4 0B10                  fdb   $0b10  * 148-154
    247        A3C6 1E                    fcb   $1e
    248        A3C7 0C00                  fdb   $0c00
    249        A3C9 1E                    fcb   $1e
    250        A3CA 0B10                  fdb   $0b10  * 148-154
    251        A3CC 1E                    fcb   $1e
    252        A3CD 0B10                  fdb   $0b10  * 148-154
    253        A3CF 1E                    fcb   $1e
    254        A3D0 0C00                  fdb   $0c00
    255        A3D2 1E                    fcb   $1e
    256        A3D3 0B10                  fdb   $0b10  * 148-154
    257        A3D5 0E                    fcb   $0e
    258        A3D6 0026                  fdb   $0026  * 148-154 island 7
    259        A3D8 0C                    fcb   $0c
    260        A3D9 014A                  fdb   $014a  * 148-154 island 6
    261        A3DB 10                    fcb   $10
    262        A3DC 0FFF                  fdb   $0fff  * 148-154 island 8
    263        A3DE 1E                    fcb   $1e
    264        A3DF 0B10                  fdb   $0b10  * 148-154
    265        A3E1 1E                    fcb   $1e
    266        A3E2 0C10                  fdb   $0c10  * 155-157
    267        A3E4 1E                    fcb   $1e
    268        A3E5 0B10                  fdb   $0b10  * 148-154
    269        A3E7 1E                    fcb   $1e
    270        A3E8 0C10                  fdb   $0c10  * 155-157
    271        A3EA 1E                    fcb   $1e
    272        A3EB 0A21                  fdb   $0a21  * 158-161
    273        A3ED 1E                    fcb   $1e
    274        A3EE 0C10                  fdb   $0c10  * 155-157
    275        A3F0 1E                    fcb   $1e
    276        A3F1 0A21                  fdb   $0a21  * 158-161
    277        A3F3 1E                    fcb   $1e
    278        A3F4 0A21                  fdb   $0a21  * 158-161
    279        A3F6 1E                    fcb   $1e
    280        A3F7 0B41                  fdb   $0b41  * 162-164
    281        A3F9 1E                    fcb   $1e
    282        A3FA 0A21                        fdb   $0a21   * 158-161
    283        A3FC 1E                    fcb   $1e
    284        A3FD 0B41                  fdb   $0b41  * 162-164
    285        A3FF 1E                    fcb   $1e
    286        A400 0A52                  fdb   $0a52  * 165-167
    287        A402 1C                    fcb   $1c
    288        A403 0123                  fdb   $0123  * 165-167 island 14
    289        A405 06                    fcb   $06
    290        A406 026A                  fdb   $026a  * 165-167 island 3
    291        A408 1E                    fcb   $1e
    292        A409 0B74                  fdb   $0b74  * 168-171
    293        A40B 1E                    fcb   $1e
    294        A40C 0A52                        fdb   $0a52   * 165-167
    295        A40E 1E                    fcb   $1e
    296        A40F 0B74                  fdb   $0b74  * 168-171
    297        A411 1E                    fcb   $1e
    298        A412 0B74                        fdb   $0b74   * 168-171
    299        A414 1E                    fcb   $1e
    300        A415 0B97                  fdb   $0b97  * 172-174
    301        A417 1E                    fcb   $1e
    302        A418 0B74                        fdb   $0b74   * 168-171
    303        A41A 1E                    fcb   $1e
    304        A41B 0B97                  fdb   $0b97  * 172-174
    305        A41D 1E                    fcb   $1e
    306        A41E 0BBB                  fdb   $0bbb  * 175-180
    307        A420 1E                    fcb   $1e
    308        A421 0B97                        fdb   $0b97   * 172-174
    309        A423 1E                    fcb   $1e
    310        A424 0BBB                  fdb   $0bbb  * 175-180
    311        A426 18                    fcb   $18
    312        A427 0E00                        fdb   $0e00   * 175-180 isl>>
    313        A429 04                    fcb   $04
    314        A42A 0C10                        fdb   $0c10   * 175-180 isl>>
    315        A42C 00                    fcb   $00
    316        A42D 0B41                        fdb   $0b41   * 175-180 isl>>
    317        A42F 1A                    fcb   $1a
    318        A430 0B74                        fdb   $0b74   * 175-180 isl>>
    319        A432 16                    fcb   $16
    320        A433 0A42                        fdb   $0a42   * 175-180 isl>>
    321                            
    322        A435 1E                    fcb   $1e
    323        A436 0C00                  fdb   $0c00  * 181-131
    324        A438 1E                    fcb   $1e
    325        A439 0C00                  fdb   $0c00  * 181-131
    326        A43B 1E                    fcb   $1e
    327        A43C 0C00                  fdb   $0c00  * 181-131
    328        A43E 1E                    fcb   $1e
    329        A43F 0C00                  fdb   $0c00  * 181-131
    330        A441 1E                    fcb   $1e
    331        A442 0C00                  fdb   $0c00  * 181-131
    332        A444 1E                    fcb   $1e
    333        A445 0C00                  fdb   $0c00  * 181-131
    334        A447 1E                    fcb   $1e
    335        A448 0C00                  fdb   $0c00  * 181-131
    336        A44A 1E                    fcb   $1e
    337        A44B 0C00                  fdb   $0c00  * 181-131
    338        A44D 1E                    fcb   $1e
    339        A44E 0C00                  fdb   $0c00  * 181-131
    340        A450 1E                    fcb   $1e
    341        A451 0C00                  fdb   $0c00  * 181-131
    342        A453 1E                    fcb   $1e
    343        A454 0C00                  fdb   $0c00  * 181-131
    344        A456 1E                    fcb   $1e
    345        A457 0C00                  fdb   $0c00  * 181-131
    346        A459 1E                    fcb   $1e
    347        A45A 0C00                  fdb   $0c00  * 181-131
    348        A45C 1E                    fcb   $1e
    349        A45D 0C00                  fdb   $0c00  * 181-131
    350        A45F 1E                    fcb   $1e
    351        A460 0C00                  fdb   $0c00  * 181-131
    352        A462 1E                    fcb   $1e
    353        A463 0C00                  fdb   $0c00  * 181-131
    354
    355        A465 00                    fcb   $00
    356        A466 0FFF                  fdb   $0fff  * title screen 0
    357        A468 04                    fcb   $04
    358        A469 0008                  fdb   $0008  * title screen 2
    359        A46B 06                    fcb   $06
    360        A46C 0002                  fdb   $0002  * title screen 3
    361        A46E 08                    fcb   $08
    362        A46F 035D                  fdb   $035d  * title screen 4
    363        A471 0A                    fcb   $0a
    364        A472 0016                  fdb   $0016  * title screen 5
    365        A474 0C                    fcb   $0c
    366        A475 004F                  fdb   $004f  * title screen 6
    367        A477 0E                    fcb   $0e
    368        A478 0027                  fdb   $0027  * title screen 7
    369        A47A 10                    fcb   $10
    370        A47B 00FF                  fdb   $00ff  * title screen 8
    371        A47D 12                    fcb   $12
    372        A47E 00F3                  fdb   $00f3  * title screen 9
    373        A480 14                    fcb   $14
    374        A481 0FF8                  fdb   $0ff8  * title screen 10
    375        A483 16                    fcb   $16
    376        A484 0E64                  fdb   $0e64  * title screen 11
    377        A486 18                    fcb   $18
    378        A487 0522                  fdb   $0522  * title screen 12
    379        A489 1A                    fcb   $1a
    380        A48A 0E00                  fdb   $0e00  * title screen 13
    381        A48C 1C                    fcb   $1c
    382        A48D 0001                  fdb   $0001  * title screen 14
    383        A48F               Pal_TitleScreenRaster_end
    384
    385

000000 Total Errors

000354 Total Symbols
     0x          Equ   0004 anim
     0x          Equ   764E AnimateSprite
     0x          Equ   0008 anim_frame
     0x          Equ   0009 anim_frame_duration
     0x          Equ   8CCF Ani_largeStar
     0x          Equ   8CBF Ani_SegaSonic_1
     0x          Equ   8CB5 Ani_SegaSonic_2
     0x          Equ   8CAB Ani_SegaSonic_3
     0x          Equ   8CC9 Ani_smallStar
     0x          Equ   8CE7 Ani_sonic
     0x          Equ   8CDB Ani_tails
     0x          Equ   80E8 Black_palette
     0x          Equ   0009 buf_bgdata
     0x          Equ   0007 buf_prev_mapping_frame
     0x          Equ   0011 buf_prev_render_flags
     0x          Equ   000D buf_prev_x1_pixel
     0x          Equ   000F buf_prev_x2_pixel
     0x          Equ   000D buf_prev_xy1_pixel
     0x          Equ   000F buf_prev_xy2_pixel
     0x          Equ   000B buf_prev_xy_pixel
     0x          Equ   000B buf_prev_x_pixel
     0x          Equ   000E buf_prev_y1_pixel
     0x          Equ   0010 buf_prev_y2_pixel
     0x          Equ   000C buf_prev_y_pixel
     0x          Equ   0000 buf_priority
     0x          Equ   0003 buf_priority_next_obj
     0x          Equ   0001 buf_priority_prev_obj
     0x          Equ   0040 c1_button_A_mask
     0x          Equ   0002 c1_button_down_mask
     0x          Equ   0004 c1_button_left_mask
     0x          Equ   0008 c1_button_right_mask
     0x          Equ   0001 c1_button_up_mask
     0x          Equ   0080 c2_button_A_mask
     0x          Equ   0020 c2_button_down_mask
     0x          Equ   0040 c2_button_left_mask
     0x          Equ   0080 c2_button_right_mask
     0x          Equ   0010 c2_button_up_mask
     0x          Equ   808B ClearCartMem
     0x          Equ   77DB ClearObj
     0x          Equ   41C7 current_game_mode_data
     0x          Equ   80C6 Cur_palette
     0x          Equ   7719 DeleteObject
     0x          Equ   7713 DeleteObject_x
     0x          Equ   75D5 DisplaySprite
     0x          Equ   75CF DisplaySprite_x
     0x          Equ   604F dk_destination
     0x          Equ   6049 dk_lecteur
     0x          Equ   604A dk_piste
     0x          Equ   604B dk_pisteL
     0x          Equ   604C dk_secteur
     0x          Equ   7560 Dpad_Held
     0x          Equ   7562 Dpad_Press
     0x          Equ   0001 draw_routine
     0x          Equ   80C8 Dyn_palette
     0x          Equ   0006 erase_nb_cell
     0x          Equ   0004 erase_routine
    12x          Equ   001B ext_variables
     0x          Equ   7561 Fire_Held
     0x          Equ   7563 Fire_Press
     0x          Equ   414F GameModeLoader
     0x          Equ   6122 Glb_Sprite_Screen_Pos_Part1
     0x          Equ   6124 Glb_Sprite_Screen_Pos_Part2
     0x          Equ   0038 gravity
     0x          Equ   0000 id
     0x          Equ   0006 image_center_offset
     0x          Equ   000A image_set
     0x          Equ   0004 image_subset_x1_offset
     0x          Equ   0005 image_subset_y1_offset
     0x          Equ   0004 image_x_size
     0x          Equ   0005 image_y_size
     0x          Equ   89AD Img_emblemBack01
     0x          Equ   899D Img_emblemBack02
     0x          Equ   8B75 Img_emblemBack03
     0x          Equ   8B65 Img_emblemBack04
     0x          Equ   8B95 Img_emblemBack05
     0x          Equ   8B85 Img_emblemBack06
     0x          Equ   8B45 Img_emblemBack07
     0x          Equ   8B35 Img_emblemBack08
     0x          Equ   8B55 Img_emblemBack09
     0x          Equ   8C8A Img_emblemFront01
     0x          Equ   8C9A Img_emblemFront02
     0x          Equ   8C6A Img_emblemFront03
     0x          Equ   8C7A Img_emblemFront04
     0x          Equ   8C4A Img_emblemFront05
     0x          Equ   8C5A Img_emblemFront06
     0x          Equ   8C2A Img_emblemFront07
     0x          Equ   8C3A Img_emblemFront08
     0x          Equ   8BBC Img_island
     0x          Equ   8972 Img_islandMask_1
     0x          Equ   89BD Img_islandMask_2
     0x          Equ   8AB9 Img_islandWater01
     0x          Equ   8A8A Img_islandWater02
     0x          Equ   8A6F Img_islandWater03
     0x          Equ   8A54 Img_islandWater04
     0x          Equ   8A39 Img_islandWater05
     0x          Equ   8A1E Img_islandWater06
     0x          Equ   8A03 Img_islandWater07
     0x          Equ   89E8 Img_islandWater08
     0x          Equ   89CD Img_islandWater09
     0x          Equ   8982 Img_islandWater10
     0x          Equ   8957 Img_islandWater11
     0x          Equ   893C Img_islandWater12
     0x          Equ   8921 Img_islandWater13
     0x          Equ   8906 Img_islandWater14
     0x          Equ   88EB Img_islandWater15
     0x          Equ   8676 Img_SegaLogo_1
     0x          Equ   8666 Img_SegaLogo_2
     0x          Equ   8765 Img_SegaSonic_11
     0x          Equ   869F Img_SegaSonic_12
     0x          Equ   86E1 Img_SegaSonic_13
     0x          Equ   8723 Img_SegaSonic_21
     0x          Equ   87A7 Img_SegaSonic_22
     0x          Equ   86C0 Img_SegaSonic_23
     0x          Equ   87E9 Img_SegaSonic_31
     0x          Equ   8702 Img_SegaSonic_32
     0x          Equ   8786 Img_SegaSonic_33
     0x          Equ   87C8 Img_SegaSonic_41
     0x          Equ   880A Img_SegaSonic_42
     0x          Equ   8744 Img_SegaSonic_43
     0x          Equ   8686 Img_SegaTrails_1
     0x          Equ   886B Img_SegaTrails_2
     0x          Equ   885B Img_SegaTrails_3
     0x          Equ   884B Img_SegaTrails_4
     0x          Equ   883B Img_SegaTrails_5
     0x          Equ   882B Img_SegaTrails_6
     0x          Equ   8656 Img_SonicAndTailsIn
     0x          Equ   8AE8 Img_sonicHand
     0x          Equ   8BD7 Img_sonic_1
     0x          Equ   8BEB Img_sonic_2
     0x          Equ   8C16 Img_sonic_3
     0x          Equ   8BFF Img_sonic_5
     0x          Equ   8B1A Img_star_1
     0x          Equ   8AFF Img_star_2
     0x          Equ   8AD4 Img_star_3
     0x          Equ   8AA5 Img_star_4
     0x          Equ   8BA5 Img_tailsHand
     0x          Equ   88D7 Img_tails_1
     0x          Equ   88C3 Img_tails_2
     0x          Equ   88AF Img_tails_3
     0x          Equ   889B Img_tails_4
     0x          Equ   8884 Img_tails_5
     0x          Equ   85DC IrqOff
     0x          Equ   85D1 IrqOn
     0x          Equ   8606 IrqPsg
     0x          Equ   8615 IrqPsgRaster
     0x          Equ   85E7 IrqSync
     0x          Equ   4DFF irq_one_frame
     1x          Equ   85CF Irq_Raster_End
     1x          Equ   85CB Irq_Raster_Page
     1x          Equ   85CD Irq_Raster_Start
     0x          Equ   6027 irq_routine
     0x          Equ   E7C6 irq_timer
     0x          Equ   E7C5 irq_timer_ctrl
     0x          Equ   7560 Joypads_Held
     0x          Equ   7562 Joypads_Press
     0x          Equ   75CD MarkObjGone
     0x          Equ   0025 nb_dynamic_objects
     0x          Equ   0003 nb_level_objects
     0x          Equ   002A nb_objects
     0x          Equ   0008 nb_priority_levels
     0x          Equ   0002 nb_reserved_objects
     0x          Equ   005A next_object
     0x          Equ   6660 Object_RAM
     1x          Equ   005A object_size
     0x          Equ   0001 ObjID_PaletteFade
     0x          Equ   0002 ObjID_RasterFade
     0x          Equ   0004 ObjID_SEGA
     0x          Equ   0003 ObjID_SonicAndTailsIn
     0x          Equ   0005 ObjID_TitleScreen
     0x          Equ   0000 page_draw_routine
     0x          Equ   0003 page_erase_routine
     0x          Equ   0000 PalID_TitleScreenRaster
     5x          Label A14F pal_buffer
     3x          Label A3B5 Pal_Index
     0x          Equ   9035 Pal_Island
     4x          Label A14E pal_mask
     4x          Label A151 pal_RasterCurrent
     0x          Equ   9055 Pal_SEGA
     0x          Equ   90D5 Pal_SEGAEnd
     0x          Equ   9095 Pal_SEGAMid
     0x          Equ   90B5 Pal_SonicAndTailsIn
     0x          Equ   9075 Pal_TitleScreen
     1x          Label A3A9 Pal_TitleScreenCycle
     0x          Label A3B5 Pal_TitleScreenCycle_end
     1x          Label A3B7 Pal_TitleScreenRaster
     0x          Label A48F Pal_TitleScreenRaster_end
     0x          Equ   0003 pcm_end_addr
     0x          Equ   0005 pcm_meta_size
     0x          Equ   0000 pcm_page
     0x          Equ   8FF0 Pcm_SEGA
     0x          Equ   0001 pcm_start_addr
     0x          Equ   8150 PlayPCM
     0x          Equ   0006 prev_anim
     0x          Equ   0003 priority
     0x          Equ   825B PSGCancelLoop
     0x          Equ   8415 PSGFrame
     0x          Equ   825F PSGGetStatus
     0x          Equ   81A7 PSGInit
     0x          Equ   81B9 PSGPlayNoRepeat
     0x          Equ   82D7 PSGRestoreVolumes
     0x          Equ   8210 PSGResume
     0x          Equ   8263 PSGSetMusicVolumeAttenuation
     0x          Equ   840D PSGSFXCancelLoop
     0x          Equ   8522 PSGSFXFrame
     0x          Equ   8411 PSGSFXGetStatus
     0x          Equ   834B PSGSFXPlayLoop
     0x          Equ   8397 PSGSFXStop
     0x          Equ   82C2 PSGSilenceChannels
     0x          Equ   81E7 PSGStop
     0x          Equ   8FFB Psg_TitleScreen
     3x          Label A128 RasterCycle_Main
     1x          Label A13D RasterCycle_Main_continue
     1x          Label A14D RasterCycle_Main_end
     1x          Label A000 RasterFade
     1x          Label A01B RasterFade_InInit
     1x          Label A0A4 RasterFade_Main
     1x          Label A008 RasterFade_Routines
     1x          Label A014 RasterFade_SubtypeInit
     1x          Equ   001F raster_color
     3x          Equ   0025 raster_cur_frame
     1x          Equ   0021 raster_cycles
     2x          Equ   0027 raster_cycle_frame
     3x          Equ   001E raster_cycle_idx
     2x          Equ   0024 raster_frames
     4x          Equ   0022 raster_inc
     2x          Equ   0023 raster_inc_
     1x          Equ   0026 raster_nb_colors
     1x          Equ   001D raster_nb_fade_colors
     2x          Equ   001C raster_pal_dst
     0x          Equ   001B raster_pal_src
     0x          Equ   80C5 Refresh_palette
     0x          Equ   0002 render_flags
     0x          Equ   0020 render_hide_mask
     0x          Equ   0008 render_motionless_mask
     0x          Equ   0004 render_overlay_mask
     0x          Equ   0010 render_playfieldcoord_mask
     0x          Equ   0040 render_todelete_mask
     0x          Equ   0080 render_xloop_mask
     0x          Equ   0001 render_xmirror_mask
     0x          Equ   0002 render_ymirror_mask
     1x          Label A0AB RFA_Continue
     1x          Label A121 RFA_end
     1x          Label A079 RFA_InitColor_endloop1
     1x          Label A091 RFA_InitColor_endloop2
     1x          Label A09E RFA_InitColor_endloop3
     1x          Label A075 RFA_InitColor_loop1
     1x          Label A089 RFA_InitColor_loop2
     1x          Label A096 RFA_InitColor_loop3
     3x          Label A0D2 RFA_Loop
     0x          Label A10B RFA_SetPalBleu
     1x          Label A118 RFA_SetPalBleudec
     1x          Label A11D RFA_SetPalNext
     1x          Label A11B RFA_SetPalSaveBleu
     1x          Label A0FD RFA_VRDec
     1x          Label A103 RFA_VRSave
     1x          Label A105 RFA_VRSuivante
     7x          Equ   0018 routine
     0x          Equ   0019 routine_secondary
     0x          Equ   003F rsv_bgdata_0
     0x          Equ   0051 rsv_bgdata_1
     0x          Equ   0036 rsv_buffer_0
     0x          Equ   0048 rsv_buffer_1
     0x          Equ   002C rsv_image_center_offset
     0x          Equ   002E rsv_image_subset
     0x          Equ   0030 rsv_mapping_frame
     0x          Equ   002A rsv_prev_anim
     0x          Equ   003D rsv_prev_mapping_frame_0
     0x          Equ   004F rsv_prev_mapping_frame_1
     0x          Equ   0047 rsv_prev_render_flags_0
     0x          Equ   0059 rsv_prev_render_flags_1
     0x          Equ   0080 rsv_prev_render_onscreen_mask
     0x          Equ   0001 rsv_prev_render_overlay_mask
     0x          Equ   0043 rsv_prev_x1_pixel_0
     0x          Equ   0055 rsv_prev_x1_pixel_1
     0x          Equ   0045 rsv_prev_x2_pixel_0
     0x          Equ   0057 rsv_prev_x2_pixel_1
     0x          Equ   0043 rsv_prev_xy1_pixel_0
     0x          Equ   0055 rsv_prev_xy1_pixel_1
     0x          Equ   0045 rsv_prev_xy2_pixel_0
     0x          Equ   0057 rsv_prev_xy2_pixel_1
     0x          Equ   0041 rsv_prev_xy_pixel_0
     0x          Equ   0053 rsv_prev_xy_pixel_1
     0x          Equ   0041 rsv_prev_x_pixel_0
     0x          Equ   0053 rsv_prev_x_pixel_1
     0x          Equ   0044 rsv_prev_y1_pixel_0
     0x          Equ   0056 rsv_prev_y1_pixel_1
     0x          Equ   0046 rsv_prev_y2_pixel_0
     0x          Equ   0058 rsv_prev_y2_pixel_1
     0x          Equ   0042 rsv_prev_y_pixel_0
     0x          Equ   0054 rsv_prev_y_pixel_1
     0x          Equ   0036 rsv_priority_0
     0x          Equ   0048 rsv_priority_1
     0x          Equ   0039 rsv_priority_next_obj_0
     0x          Equ   004B rsv_priority_next_obj_1
     0x          Equ   0037 rsv_priority_prev_obj_0
     0x          Equ   0049 rsv_priority_prev_obj_1
     0x          Equ   0001 rsv_render_checkrefresh_mask
     0x          Equ   0004 rsv_render_displaysprite_mask
     0x          Equ   0002 rsv_render_erasesprite_mask
     0x          Equ   0029 rsv_render_flags
     0x          Equ   0008 rsv_render_outofrange_mask
     0x          Equ   0032 rsv_x1_pixel
     0x          Equ   0034 rsv_x2_pixel
     0x          Equ   0032 rsv_xy1_pixel
     0x          Equ   0034 rsv_xy2_pixel
     0x          Equ   0033 rsv_y1_pixel
     0x          Equ   0035 rsv_y2_pixel
     0x          Equ   7536 screen_border_color
     0x          Equ   00E3 screen_bottom
     0x          Equ   0030 screen_left
     0x          Equ   00CF screen_right
     0x          Equ   001C screen_top
     0x          Equ   00A0 screen_width
     0x          Equ   001A status
     0x          Equ   0004 status_bit2
     0x          Equ   0080 status_bit7
     0x          Equ   0002 status_inair
     0x          Equ   0010 status_jumpingafterrolling
     0x          Equ   0004 status_jumporroll
     0x          Equ   0020 status_mainchar_pushing
     0x          Equ   0008 status_mainchar_standing
     0x          Equ   0008 status_norgroundnorfall
     0x          Equ   0020 status_pushing
     0x          Equ   0040 status_sidekick_pushing
     0x          Equ   0010 status_sidekick_standing
     0x          Equ   0040 status_underwater
     0x          Equ   0001 status_x_orientation
     0x          Equ   0002 status_y_orientation
     1x          Equ   0001 subtype
     0x          Equ   0003 Sub_RasterFadeInColor
     0x          Equ   0003 Sub_RasterFadeInPal
     0x          Equ   0003 Sub_RasterFadeOutColor
     0x          Equ   0003 Sub_RasterFadeOutPal
     1x          Equ   0006 Sub_RasterMain
     0x          Equ   8128 UpdatePalette
     0x          Equ   755C Vint_runcount
     0x          Equ   8108 White_palette
     0x          Equ   0012 xy_pixel
     0x          Equ   0012 x_pixel
     0x          Equ   000C x_pos
     0x          Equ   000E x_sub
     0x          Equ   0014 x_vel
     0x          Equ   0013 y_pixel
     0x          Equ   000F y_pos
     0x          Equ   0011 y_sub
     0x          Equ   0016 y_vel
     0x          Equ   00FE _goBackNFrames
     0x          Equ   00FD _goToAnimation
     0x          Equ   00FC _nextRoutine
     0x          Equ   00FA _nextSubRoutine
     0x          Equ   00FF _resetAnim
     0x          Equ   00FB _resetAnimAndSubRoutine
     0x          Equ   84CF _sendVolume2PSG
     0x          Equ   857F _SFXsetLoopPoint

