/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : .\Sonic2\GeneratedCode\TEST\MainEngine.asm
 * Fichier destination : .\Sonic2\GeneratedCode\TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     4191
 *     Include  0:CONSTANT.ASM 5768
 *     Include  0:WAITVBLR.ASM 7652
 *     Include  0:READJPDS.ASM 1855
 *     Include  0:RUNOBJTS.ASM 1312
 *     Include  0:MRKOBJGN.ASM 481
 *     Include  0:DISPLSPR.ASM 2223
 *     Include  0:ANIMSPR.ASM  1998
 *     Include  0:OBJMOVE.ASM  752
 *     Include  0:OBJLOAD.ASM  1109
 *     Include  0:DELETOBJ.ASM 2732
 *     Include  0:CLEAROBJ.ASM 647
 *     Include  0:CHECKSPR.ASM 10494
 *     Include  0:ERASESPR.ASM 4868
 *     Include  0:UNSETDSP.ASM 2832
 *     Include  0:DRAWSPR.ASM  6323
 *     Include  0:BGBALLOC.ASM 1029
 *     Include  0:BGBFREE.ASM  1879
 *     Include  0:CLRCARTM.ASM 642
 *     Include  0:UPDTPAL.ASM  922
 *     Include  0:IMAGEIDX.ASM 755
 *     Include  0:ANIMSCPT.ASM 19
 *     Include  0:OBJINDEX.ASM 6715
 *     Include  0:LOADACT.ASM  372
 *     Include  0:PALETTE.ASM  260
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
    201                                   INCLUD CONSTANT
    202                           * --------------------------------------->>
    203                           * Constants
    204                           *
    205                           * Naming convention
    206                           * -----------------
    207                           * - lower case
    208                           * - underscore-separated names
    209                           *
    210                           * --------------------------------------->>
    211
    212                           * =======================================>>
    213                           * TO8 Registers
    214                           * =======================================>>
    215
    216                  6049     dk_lecteur                    equ $6049
    217                  604A     dk_piste                      equ $604A
    218                  604B     dk_pisteL                     equ $604B
    219                  604C     dk_secteur                    equ $604C
    220                  604F     dk_destination                equ $604F
    221
    222                           * =======================================>>
    223                           * Display Constants
    224                           * =======================================>>
    225
    226                  00A0     screen_width                  equ 160 ; s>>
    227                  001C     screen_top                    equ 28 ; in>>
    228                  00E3     screen_bottom                 equ 28+199 >>
    229                  0030     screen_left                   equ 48 ; in>>
    230                  00CF     screen_right                  equ 48+159 >>
    231                  0008     nb_priority_levels            equ 8   ; n>>
    232
    233                           * =======================================>>
    234                           * Physics Constants
    235                           * =======================================>>
    236
    237                  0038     gravity                       equ $38 ; G>>
    238
    239                           * =======================================>>
    240                           * Animation Constants
    241                           * =======================================>>
    242
    243                  00FF     _resetAnim                    equ $FF
    244                  00FE     _goBackNFrames                equ $FE
    245                  00FD     _goToAnimation                equ $FD
    246                  00FC     _nextRoutine                  equ $FC
    247                  00FB     _resetAnimAndSubRoutine       equ $FB
    248                  00FA     _nextSubRoutine               equ $FA
    249
    250                           * =======================================>>
    251                           * Images Constants
    252                           * =======================================>>
    253
    254                  0004     image_x_size                  equ 4
    255                  0005     image_y_size                  equ 5
    256                  0006     image_center_offset           equ 6
    257
    258                  0004     image_subset_x1_offset        equ 4
    259                  0005     image_subset_y1_offset        equ 5
    260
    261                  0000     page_draw_routine             equ 0
    262                  0001     draw_routine                  equ 1
    263                  0003     page_erase_routine            equ 3
    264                  0004     erase_routine                 equ 4
    265                  0006     erase_nb_cell                 equ 6
    266
    267                           * =======================================>>
    268                           * Sound Constants
    269                           * =======================================>>
    270
    271                  0000     pcm_page        equ 0
    272                  0001     pcm_start_addr  equ 1
    273                  0003     pcm_end_addr    equ 3
    274                  0005     pcm_meta_size   equ 5
    275
    276                           * =======================================>>
    277                           * Object Constants
    278                           * =======================================>>
    279
    280                  0002     nb_reserved_objects           equ 2
    281                  001B     nb_dynamic_objects            equ 27
    282                  0003     nb_level_objects              equ 3
    283                  0020     nb_objects                    equ 32 * ma>>
    284
    285                           * --------------------------------------->>
    286                           * Object Status Table offsets
    287                           * --------------------------------------->>
    288
    289                  005A     object_size                   equ 90 ; th>>
    290                  005A     next_object                   equ object_>>
    291
    292                  0000     id                            equ 0      >>
    293                  0001     subtype                       equ 1      >>
    294                  0002     render_flags                  equ 2
    295
    296                           * --- render_flags bitfield variables --->>
    297                  0001     render_xmirror_mask           equ $01 ; (>>
    298                  0002     render_ymirror_mask           equ $02 ; (>>
    299                  0004     render_overlay_mask           equ $04 ; (>>
    300                  0008     render_motionless_mask        equ $08 ; (>>
    301                  0010     render_playfieldcoord_mask    equ $10 ; (>>
    302                  0020     render_hide_mask              equ $20 ; (>>
    303                  0040     render_todelete_mask          equ $40 ; (>>
    304                  0080     render_xloop_mask             equ $80 ; (>>
    305                            
    306                  0003     priority                      equ 3      >>
    307                  0004     anim                          equ 4  ; an>>
    308                  0006     prev_anim                     equ 6  ; an>>
    309                  0008     anim_frame                    equ 8      >>
    310                  0009     anim_frame_duration           equ 9      >>
    311                  000A     image_set                     equ 10 ; an>>
    312                  000C     x_pos                         equ 12 ; an>>
    313                  000E     x_sub                         equ 14     >>
    314                  000F     y_pos                         equ 15 ; an>>
    315                  0011     y_sub                         equ 17     >>
    316                  0012     xy_pixel                      equ 18     >>
    317                  0012     x_pixel                       equ 18     >>
    318                  0013     y_pixel                       equ 19     >>
    319                  0014     x_vel                         equ 20 ; an>>
    320                  0016     y_vel                         equ 22 ; an>>
    321                  0018     routine                       equ 24     >>
    322                  0019     routine_secondary             equ 25     >>
    323                  001A     status                        equ 26
    324
    325                           * --- status bitfield variables for objec>>
    326                  0001     status_x_orientation          equ   $01 ;>>
    327                  0002     status_y_orientation          equ   $02 ;>>
    328                  0004     status_bit2                   equ   $04 ;>>
    329                  0008     status_mainchar_standing      equ   $08 ;>>
    330                  0010     status_sidekick_standing      equ   $10 ;>>
    331                  0020     status_mainchar_pushing       equ   $20 ;>>
    332                  0040     status_sidekick_pushing       equ   $40 ;>>
    333                  0080     status_bit7                   equ   $80 ;>>
    334
    335                           * --- status bitfield variables for Main >>
    336                  0002     status_inair                  equ   $02 ;>>
    337                  0004     status_jumporroll             equ   $04 ;>>
    338                  0008     status_norgroundnorfall       equ   $08 ;>>
    339                  0010     status_jumpingafterrolling    equ   $10 ;>>
    340                  0020     status_pushing                equ   $20 ;>>
    341                  0040     status_underwater             equ   $40 ;>>
    342
    343                  001B     ext_variables                 equ 27 ; to>>
    344
    345                           * --------------------------------------->>
    346                           * reserved variables (engine)
    347
    348                  0029     rsv_render_flags              equ 41
    349
    350                           * --- rsv_render_flags bitfield variables>>
    351                  0001     rsv_render_checkrefresh_mask  equ $01 ; (>>
    352                  0002     rsv_render_erasesprite_mask   equ $02 ; (>>
    353                  0004     rsv_render_displaysprite_mask equ $04 ; (>>
    354                  0008     rsv_render_outofrange_mask    equ $08 ; (>>
    355
    356                  002A     rsv_prev_anim                 equ 42 ; an>>
    357                  002C     rsv_image_center_offset       equ 44 ; 0 >>
    358                           * ne sert plus                       ; an>>
    359                  002E     rsv_image_subset              equ 46 ; an>>
    360                  0030     rsv_mapping_frame             equ 48 ; an>>
    361                  0032     rsv_xy1_pixel                 equ 50     >>
    362                  0032     rsv_x1_pixel                  equ 50     >>
    363                  0033     rsv_y1_pixel                  equ 51     >>
    364                  0034     rsv_xy2_pixel                 equ 52     >>
    365                  0034     rsv_x2_pixel                  equ 52     >>
    366                  0035     rsv_y2_pixel                  equ 53     >>
    367
    368                           * --------------------------------------->>
    369                           * reserved variables (engine) - buffer sp>>
    370
    371                  0036     rsv_buffer_0                  equ 54 ; St>>
    372                  0036     rsv_priority_0                equ 54 ; in>>
    373                  0037     rsv_priority_prev_obj_0       equ 55 ; an>>
    374                  0039     rsv_priority_next_obj_0       equ 57 ; an>>
    375                           *rsv_prev_image_subset_0       equ 59 ; a>>
    376                  003D     rsv_prev_mapping_frame_0      equ 61 ; an>>
    377                  003F     rsv_bgdata_0                  equ 63 ; an>>
    378                  0041     rsv_prev_xy_pixel_0           equ 65 ;
    379                  0041     rsv_prev_x_pixel_0            equ 65 ; pr>>
    380                  0042     rsv_prev_y_pixel_0            equ 66 ; pr>>
    381                  0043     rsv_prev_xy1_pixel_0          equ 67 ;
    382                  0043     rsv_prev_x1_pixel_0           equ 67 ; pr>>
    383                  0044     rsv_prev_y1_pixel_0           equ 68 ; pr>>
    384                  0045     rsv_prev_xy2_pixel_0          equ 69 ;
    385                  0045     rsv_prev_x2_pixel_0           equ 69 ; pr>>
    386                  0046     rsv_prev_y2_pixel_0           equ 70 ; pr>>
    387                  0047     rsv_prev_render_flags_0       equ 71 ;
    388                           * --- rsv_prev_render_flags_0 bitfield va>>
    389                  0001     rsv_prev_render_overlay_mask  equ $01 ; (>>
    390                  0080     rsv_prev_render_onscreen_mask equ $80 ; (>>
    391
    392                  0048     rsv_buffer_1                  equ 72 ; St>>
    393                  0048     rsv_priority_1                equ 72 ; in>>
    394                  0049     rsv_priority_prev_obj_1       equ 73 ; an>>
    395                  004B     rsv_priority_next_obj_1       equ 75 ; an>>
    396                           *rsv_prev_image_subset_1       equ 77 ; a>>
    397                  004F     rsv_prev_mapping_frame_1      equ 79 ; an>>
    398                  0051     rsv_bgdata_1                  equ 81 ; an>>
    399                  0053     rsv_prev_xy_pixel_1           equ 83 ;
    400                  0053     rsv_prev_x_pixel_1            equ 83 ; pr>>
    401                  0054     rsv_prev_y_pixel_1            equ 84 ; pr>>
    402                  0055     rsv_prev_xy1_pixel_1          equ 85 ;
    403                  0055     rsv_prev_x1_pixel_1           equ 85 ; pr>>
    404                  0056     rsv_prev_y1_pixel_1           equ 86 ; pr>>
    405                  0057     rsv_prev_xy2_pixel_1          equ 87 ;
    406                  0057     rsv_prev_x2_pixel_1           equ 87 ; pr>>
    407                  0058     rsv_prev_y2_pixel_1           equ 88 ; pr>>
    408                  0059     rsv_prev_render_flags_1       equ 89 ;
    409
    410                  0000     buf_priority                  equ 0  ; of>>
    411                  0001     buf_priority_prev_obj         equ 1  ;
    412                  0003     buf_priority_next_obj         equ 3  ;
    413                           *buf_prev_image_subset         equ 5  ;
    414                  0007     buf_prev_mapping_frame        equ 7  ;
    415                  0009     buf_bgdata                    equ 9  ;
    416                  000B     buf_prev_xy_pixel             equ 11 ;
    417                  000B     buf_prev_x_pixel              equ 11 ;
    418                  000C     buf_prev_y_pixel              equ 12 ;
    419                  000D     buf_prev_xy1_pixel            equ 13 ;
    420                  000D     buf_prev_x1_pixel             equ 13 ;
    421                  000E     buf_prev_y1_pixel             equ 14 ;
    422                  000F     buf_prev_xy2_pixel            equ 15 ;
    423                  000F     buf_prev_x2_pixel             equ 15 ;
    424                  0010     buf_prev_y2_pixel             equ 16 ;
    425                  0011     buf_prev_render_flags         equ 17 ;
    426
     10        6100                       org   $6100
     11
     12  8     6100 BD   839A             jsr   LoadAct
     13                                   * jsr   PSGInit
     14
     15        6103               InitIRQ
     16  3     6103 CC   6129             ldd   #_IRQ                      >>
     17  6     6106 FD   6027             std   $6027
     18  3     6109 CC   09C4             ldd   #$09C4                     >>
     19  6     610C FD   E7C6             std   $E7C6                      >>
     20
     21                           * =======================================>>
     22                           * Main Loop
     23                           * =======================================>>
     24        610F               LevelMainLoop
     25  8     610F BD   71A1             jsr   WaitVBL
     26  8     6112 BD   7F7E             jsr   UpdatePalette
     27  8     6115 BD   73B9             jsr   ReadJoypads
     28  8     6118 BD   73DA             jsr   RunObjects
     29  8     611B BD   7669             jsr   CheckSpritesRefresh
     30  8     611E BD   79A9             jsr   EraseSprites
     31  8     6121 BD   7B22             jsr   UnsetDisplayPriority
     32  8     6124 BD   7C01             jsr   DrawSprites
     33  3     6127 20   E6               bra   LevelMainLoop
     34                            
     35                           * =======================================>>
     36                           * IRQ
     37                           * =======================================>>
     38        6129               _IRQ
     39  5     6129 B6   E7E5             lda   $E7E5
     40  5     612C B7   6130             sta   _IRQ_end+1                 >>
     41                                   *jsr   PSGFrame
     42                                   * jsr   PSGSFXFrame
     43        612F               _IRQ_end
     44  2     612F 86   00               lda   #$00
     45  5     6131 B7   E7E5             sta   $E7E5                      >>
     46  4     6134 7E   E830             jmp   $E830
     47
     48                           * =======================================>>
     49                           * Global Data
     50                           *
     51                           * Naming convention
     52                           * -----------------
     53                           * - underscore-separated names
     54                           * - first letter of each word in upper ca>>
     55                           *
     56                           * Templates
     57                           * ---------
     58                           * - Glb_*        : global variable
     59                           * - Tbl_*        : data table
     60                           * - Lst_*        : list is a data table w>>
     61                           * - Obj_*        : address of an object i>>
     62                           *
     63                           * - *_Object_RAM : sub group of objects
     64                           * - *_end        : data end label
     65                           *
     66                           * =======================================>>
     67
     68                           * --------------------------------------->>
     69                           * Display
     70                           * --------------------------------------->>
     71                            
     72        6137 00            Glb_Cur_Wrk_Screen_Id         fcb   $00  >>
     73        6138 0000          Glb_Camera_X_Pos              fdb   $0000>>
     74        613A 0000          Glb_Camera_Y_Pos              fdb   $0000>>
     75        613C 0000          Glb_Sprite_Screen_Pos_Part1   fdb   $0000>>
     76        613E 0000          Glb_Sprite_Screen_Pos_Part2   fdb   $0000>>
     77
     78                           * --------------------------------------->>
     79                           * Background Backup Cells - BBC
     80                           * --------------------------------------->>
     81
     82                           * ----- Cell variables
     83                  0000     nb_cells                      equ   0
     84                  0001     cell_start                    equ   1
     85                  0003     cell_end                      equ   3
     86                  0005     next_entry                    equ   5
     87                  0007     entry_size                    equ   7
     88
     89                           * ----- Cells List
     90                  0082     nb_free_cells                 equ   130
     91                  0040     cell_size                     equ   64   >>
     92                  6000     cell_start_adr                equ   $6000>>
     93
     94        6140 6142          Lst_FreeCellFirstEntry_0      fdb   Lst_F>>
     95        6142 82            Lst_FreeCell_0                fcb   nb_fr>>
     96        6143 3F80                                        fdb   cell_>>
     97        6145 6000                                        fdb   cell_>>
     98        6147 0000                                        fdb   $0000>>
     99        6149                                             rmb   (entr>>
    100                            
    101        630F 6311          Lst_FreeCellFirstEntry_1      fdb   Lst_F>>
    102        6311 82            Lst_FreeCell_1                fcb   nb_fr>>
    103        6312 3F80                                        fdb   cell_>>
    104        6314 6000                                        fdb   cell_>>
    105        6316 0000                                        fdb   $0000>>
    106        6318                                             rmb   (entr>>
    107                           * --------------------------------------->>
    108                           * Display Priority Structure - DPS
    109                           * --------------------------------------->>
    110
    111        64DE               DPS_buffer_0
    112        64DE               Tbl_Priority_First_Entry_0    rmb   2+(nb>>
    113        64F0               Tbl_Priority_Last_Entry_0     rmb   2+(nb>>
    114        6502 6504          Lst_Priority_Unset_0          fdb   Lst_P>>
    115        6504                                             rmb   (nb_o>>
    116        6544               DPS_buffer_1
    117        6544               Tbl_Priority_First_Entry_1    rmb   2+(nb>>
    118        6556               Tbl_Priority_Last_Entry_1     rmb   2+(nb>>
    119        6568 656A          Lst_Priority_Unset_1          fdb   Lst_P>>
    120        656A                                             rmb   (nb_o>>
    121                            
    122                  0000     buf_Tbl_Priority_First_Entry  equ   0
    123                  0012     buf_Tbl_Priority_Last_Entry   equ   Tbl_P>>
    124                  0024     buf_Lst_Priority_Unset        equ   Lst_P>>
    125
    126                           * --------------------------------------->>
    127                           * Sub Priority Objects List - SOL
    128                           * --------------------------------------->>
    129
    130        65AA               Tbl_Sub_Object_Erase          rmb   nb_ob>>
    131        65EA               Tbl_Sub_Object_Draw           rmb   nb_ob>>
    132
    133                           * --------------------------------------->>
    134                           * Object Status Table - OST
    135                           * --------------------------------------->>
    136                            
    137        662A               Object_RAM *@globals
    138        662A               Reserved_Object_RAM
    139                            *Obj_MainCharacter             fdb   $02>>
    140        662A 0100          Obj_MainCharacter             fdb   $0100>>
    141        662C                                             rmb   objec>>
    142        6684               Obj_Sidekick                  rmb   objec>>
    143        66DE               Reserved_Object_RAM_End
    144
    145        66DE               Dynamic_Object_RAM            rmb   nb_dy>>
    146        705C               Dynamic_Object_RAM_End
    147
    148        705C               LevelOnly_Object_RAM                     >>
    149        705C               Obj_TailsTails                rmb   objec>>
    150        70B6               Obj_SonicDust                 rmb   objec>>
    151        7110               Obj_TailsDust                 rmb   objec>>
    152        716A               LevelOnly_Object_RAM_End
    153        716A 716A          Object_RAM_End                fdb *
    154
    155                           * --------------------------------------->>
    156                           * Lifecycle
    157                           * --------------------------------------->>
    158
    159        716C               Glb_MainCharacter_Is_Dead     rmb   $1,0
    160
    161                           * =======================================>>
    162                           * Routines
    163                           * =======================================>>
    164                                   * a rendre dynamique a partir du >>
    165                                   * INCLUD WAITVBL
    427                                   INCLUD WAITVBLR
    428                            **************************************
    429                           **         -  C O P P E R  -          **
    430                           *  permet de changer la palette de la  *
    431                           * couleur 0 a chaque ligne. On obtient *
    432                           * ainsi des images (fixes) en plus de  *
    433                           *        2 0 0   T E I N T E S         *
    434                           * Laurent HIRIART ,  Les ENVERSGOUTTES *
    435                           **       67420 COLROY-LA-ROCHE        **
    436                            **************************************
    437
    438                  00C8     NL     EQU    200     nombre de lignes
    439                  0000     VIT    EQU    0       vitesse defilement
    440
    441                           * NL x Palettes 16 bits chacune: (0 bleu >>
    442
    443                           * SYNCRONISATION - REGLAGE COLONNE *****
    444                           * b5 de $E7E7 : situation en ligne INILN
    445
    446  3     716D 8E   7171            LDX    #*+4
    447  2     7170 86   20              LDA    #32
    448
    449  4     7172 95   E7              BITA   <$E7       sort quand
    450  3     7174 27   FC              BEQ    *-2     spot dans fenetre
    451
    452  4     7176 95   E7              BITA   <$E7       sort quand
    453  3     7178 26   FC              BNE    *-2     spot entre border
    454
    455  4+2   717A A7   80              STA    ,X+     5
    456  11    717C 3D                   MUL            11  boucle de 63
    457  11    717D 3D                   MUL            11 cycles dont on
    458  11    717E 3D                   MUL            11 sort quand le
    459  11    717F 3D                   MUL            11 spot est sur la
    460  4+2   7180 A6   82              LDA    ,-X     5     derniere
    461  4     7182 95   E7              BITA   <$E7    4   C O L O N N E
    462  3     7184 27   F4              BEQ    *-10    3   de la fenetre
    463
    464                           * SYNCRONISATION - REGLAGE LIGNE *******
    465                           * b7 de $E7E7 : situation en trame INITN
    466
    467  11    7186 3D                   MUL            11  boucle de 64
    468  11    7187 3D                   MUL            11 cycles dont on
    469  11    7188 3D                   MUL            11 sort quand le
    470  11    7189 3D                   MUL            11  spot est sur
    471  11    718A 3D                   MUL            11    une ligne
    472  6     718B 0D   E7              TST    <$E7    6  DANS le border
    473  3     718D 2A   F7              BPL    *-7     3
    474
    475  11    718F 3D                   MUL            11  boucle de 64
    476  11    7190 3D                   MUL            11 cycles dont on
    477  11    7191 3D                   MUL            11 sort quand le
    478  11    7192 3D                   MUL            11 spot est sur la
    479  11    7193 3D                   MUL            11    derniere
    480  6     7194 0D   E7              TST    <$E7    6     L I G N E
    481  3     7196 2B   F7              BMI    *-7     3   de la fenetre
    482
    483  3     7198 8E   0375            LDX    #(211-NL/2)*8-3
    484  4+1   719B 30   1F              LEAX   -1,X     Pour centrer les
    485  3     719D 26   FC              BNE    *-2      lignes de copper.
    486
    487                           * Pour pousser les bandes noires dans le
    488                           * border afin qu'on ne puisse les voir
    489                           * ni a gauche ni a droite.
    490                           * Varie selon les moniteurs : regler le
    491                           * nombre de cycles machine ...
    492
    493  6+1   719F 6D   86              TST    A,X     7    Temporisation
    494
    495                           * Changement de la palette d'une couleur
    496                           * tous les 64 cycles (i.e. chaque ligne)
    497
    498        71A1               WaitVBL
    499
    500  2     71A1 C6   E7              LDB    #$E7
    501  6     71A3 1F   9B              TFR    B,DP    Pour acces rapides
    502
    503  6     71A5 0D   E7               tst   <$E7              * le fais>>
    504  3     71A7 2A   F8               bpl   WaitVBL            * tant q>>
    505
    506  3     71A9 8E   73B3            LDX    #G      Deb liste palettes
    507  4     71AC 108E 00C8     GOON   LDY    #NL     Nombre de lignes
    508
    509  5+3   71B0 EC   83       COPPER LDD    ,--X     8  Chargement et
    510  6     71B2 0F   DB              CLR    <$DB     6  affectation de
    511  4     71B4 D7   DA              STB    <$DA     4  la nouvelle
    512  4     71B6 97   DA              STA    <$DA     4  palette->coul0
    513  11    71B8 3D                   MUL             11  Temporisation
    514  11    71B9 3D                   MUL             11  Temporisation
    515  2     71BA 12                   NOP             2   Temporisation
    516  4     71BB 8C   7223            CMPX   #G-2*NL  4  Fin dans liste
    517  3     71BE 27   02              BEQ    *+4      3  des couleurs ?
    518  3     71C0 20   03              BRA    *+5       3 non:rien, oui:
    519  3     71C2 8E   73B3            LDX    #G       3  repart debut.
    520  4+1   71C5 31   3F              LEAY   -1,Y     5  200eme ligne ?
    521  3     71C7 26   E7              BNE    COPPER   3  non: on boucle
    522
    523  4     71C9 108E 0377            LDY    #(311-NL)*8-1  4 Cf + bas.
    524  2     71CD 4F                   CLRA           2 A la fin des NL
    525  2     71CE 12                   NOP            2 lignes de copper
    526  6     71CF 0F   DB              CLR    <$DB    6  on remet vite
    527  4     71D1 97   DA              STA    <$DA    4 la couleur 0 en
    528  4     71D3 97   DA              STA    <$DA    4 noir (palette=0)
    529  4+1   71D5 31   3F              LEAY   -1,Y    5   On patiente
    530  3     71D7 26   FC              BNE    *-2     3 dans le border.
    531
    532                           *      LEAX   2*VIT,X 5 Donne la vitesse
    533        71D9 3088                 FDB    $3088   Sinon l'assembleur
    534        71DB 00                   FCB    2*VIT   risque d'optimiser
    535  4     71DC 8C   73B3            CMPX   #G      4 Pointeur couleur
    536  3     71DF 22   04              BHI    DECALB  3 depasse en haut?
    537  4+1   71E1 A6   86              LDA    A,X      5  non:
    538  3     71E3 20   04              BRA    *+6      3  temporisation
    539  4+4   71E5 30   89 FE70  DECALB LEAX   -2*NL,X 8 oui:decale bas.
    540  4     71E9 8C   7223            CMPX   #G-2*NL 4 Pointeur couleur
    541  3     71EC 23   04              BLS    DECALH  3 depasse en bas?
    542  4+1   71EE A6   86              LDA    A,X      5  non:
    543  3     71F0 20   04              BRA    *+6      3  temporisation
    544  4+4   71F2 30   89 0190  DECALH LEAX   2*NL,X  8 oui:decale haut.
    545                            
    546  6     71F6 FC   7221             ldd   Vint_runcount
    547  4     71F9 C3   0001             addd  #1
    548  6     71FC FD   7221             std   Vint_runcount
    549                            
    550        71FF               SwapVideoPage
    551  5     71FF F6   720D             ldb   am_SwapVideoPage+1 * charge>>
    552  2     7202 C4   40               andb  #$40               * altern>>
    553        7204               screen_border_color *@globals
    554  2     7204 CA   80               orb   #$80               * bit7=1>>
    555  5     7206 F7   E7DD             stb   $E7DD              * change>>
    556  7     7209 73   720D             com   am_SwapVideoPage+1 * altern>>
    557        720C               am_SwapVideoPage
    558  2     720C C6   00               ldb   #$00
    559  2     720E C4   01               andb  #$01               * altern>>
    560  5     7210 F7   6137             stb   Glb_Cur_Wrk_Screen_Id
    561  2     7213 CA   62               orb   #$62               * bit6=1>>
    562  5     7215 F7   E7E6             stb   $E7E6              * change>>
    563  5     7218 F6   E7C3             ldb   $E7C3              * charge>>
    564  2     721B C8   01               eorb  #$01               * altern>>
    565  5     721D F7   E7C3             stb   $E7C3
    566  5     7220 39                    rts
    567                            
    568        7221               Vint_runcount rmb   $2,0 *@globals
    569
    570        7223 0C00                  fdb   $0c00 * 0-131
    571        7225 0C00                  fdb   $0c00 * 0-131
    572        7227 0C00                  fdb   $0c00 * 0-131
    573        7229 0C00                  fdb   $0c00 * 0-131
    574        722B 0C00                  fdb   $0c00 * 0-131
    575        722D 0C00                  fdb   $0c00 * 0-131
    576        722F 0C00                  fdb   $0c00 * 0-131
    577        7231 0C00                  fdb   $0c00 * 0-131
    578        7233 0C00                  fdb   $0c00 * 0-131
    579        7235 0C00                  fdb   $0c00 * 0-131
    580        7237 0C00                  fdb   $0c00 * 0-131
    581        7239 0C00                  fdb   $0c00 * 0-131
    582        723B 0C00                  fdb   $0c00 * 0-131
    583        723D 0C00                  fdb   $0c00 * 0-131
    584        723F 0C00                  fdb   $0c00 * 0-131
    585        7241 0C00                  fdb   $0c00 * 0-131
    586        7243 0C00                  fdb   $0c00 * 0-131
    587        7245 0C00                  fdb   $0c00 * 0-131
    588        7247 0C00                  fdb   $0c00 * 0-131
    589        7249 0C00                  fdb   $0c00 * 0-131
    590        724B 0C00                  fdb   $0c00 * 0-131
    591        724D 0C00                  fdb   $0c00 * 0-131
    592        724F 0C00                  fdb   $0c00 * 0-131
    593        7251 0C00                  fdb   $0c00 * 0-131
    594        7253 0C00                  fdb   $0c00 * 0-131
    595        7255 0C00                  fdb   $0c00 * 0-131
    596        7257 0C00                  fdb   $0c00 * 0-131
    597        7259 0C00                  fdb   $0c00 * 0-131
    598        725B 0C00                  fdb   $0c00 * 0-131
    599        725D 0C00                  fdb   $0c00 * 0-131
    600        725F 0C00                  fdb   $0c00 * 0-131
    601        7261 0C00                  fdb   $0c00 * 0-131
    602        7263 0C00                  fdb   $0c00 * 0-131
    603        7265 0C00                  fdb   $0c00 * 0-131
    604        7267 0C00                  fdb   $0c00 * 0-131
    605        7269 0C00                  fdb   $0c00 * 0-131
    606        726B 0C00                  fdb   $0c00 * 0-131
    607        726D 0C00                  fdb   $0c00 * 0-131
    608        726F 0C00                  fdb   $0c00 * 0-131
    609        7271 0C00                  fdb   $0c00 * 0-131
    610        7273 0C00                  fdb   $0c00 * 0-131
    611        7275 0C00                  fdb   $0c00 * 0-131
    612        7277 0C00                  fdb   $0c00 * 0-131
    613        7279 0C00                  fdb   $0c00 * 0-131
    614        727B 0C00                  fdb   $0c00 * 0-131
    615        727D 0C00                  fdb   $0c00 * 0-131
    616        727F 0C00                  fdb   $0c00 * 0-131
    617        7281 0C00                  fdb   $0c00 * 0-131
    618        7283 0C00                  fdb   $0c00 * 0-131
    619        7285 0C00                  fdb   $0c00 * 0-131
    620        7287 0C00                  fdb   $0c00 * 0-131
    621        7289 0C00                  fdb   $0c00 * 0-131
    622        728B 0C00                  fdb   $0c00 * 0-131
    623        728D 0C00                  fdb   $0c00 * 0-131
    624        728F 0C00                  fdb   $0c00 * 0-131
    625        7291 0C00                  fdb   $0c00 * 0-131
    626        7293 0C00                  fdb   $0c00 * 0-131
    627        7295 0C00                  fdb   $0c00 * 0-131
    628        7297 0C00                  fdb   $0c00 * 0-131
    629        7299 0C00                  fdb   $0c00 * 0-131
    630        729B 0C00                  fdb   $0c00 * 0-131
    631        729D 0C00                  fdb   $0c00 * 0-131
    632        729F 0C00                  fdb   $0c00 * 0-131
    633        72A1 0C00                  fdb   $0c00 * 0-131
    634        72A3 0C00                  fdb   $0c00 * 0-131
    635        72A5 0C00                  fdb   $0c00 * 0-131
    636        72A7 0C00                  fdb   $0c00 * 0-131
    637        72A9 0C00                  fdb   $0c00 * 0-131
    638        72AB 0C00                  fdb   $0c00 * 0-131
    639        72AD 0C00                  fdb   $0c00 * 0-131
    640        72AF 0C00                  fdb   $0c00 * 0-131
    641        72B1 0C00                  fdb   $0c00 * 0-131
    642        72B3 0C00                  fdb   $0c00 * 0-131
    643        72B5 0C00                  fdb   $0c00 * 0-131
    644        72B7 0C00                  fdb   $0c00 * 0-131
    645        72B9 0C00                  fdb   $0c00 * 0-131
    646        72BB 0C00                  fdb   $0c00 * 0-131
    647        72BD 0C00                  fdb   $0c00 * 0-131
    648        72BF 0C00                  fdb   $0c00 * 0-131
    649        72C1 0C00                  fdb   $0c00 * 0-131
    650        72C3 0C00                  fdb   $0c00 * 0-131
    651        72C5 0C00                  fdb   $0c00 * 0-131
    652        72C7 0C00                  fdb   $0c00 * 0-131
    653        72C9 0C00                  fdb   $0c00 * 0-131
    654        72CB 0C00                  fdb   $0c00 * 0-131
    655        72CD 0C00                  fdb   $0c00 * 0-131
    656        72CF 0C00                  fdb   $0c00 * 0-131
    657        72D1 0C00                  fdb   $0c00 * 0-131
    658        72D3 0C00                  fdb   $0c00 * 0-131
    659        72D5 0C00                  fdb   $0c00 * 0-131
    660        72D7 0C00                  fdb   $0c00 * 0-131
    661        72D9 0C00                  fdb   $0c00 * 0-131
    662        72DB 0C00                  fdb   $0c00 * 0-131
    663        72DD 0C00                  fdb   $0c00 * 0-131
    664        72DF 0C00                  fdb   $0c00 * 0-131
    665        72E1 0C00                  fdb   $0c00 * 0-131
    666        72E3 0C00                  fdb   $0c00 * 0-131
    667        72E5 0C00                  fdb   $0c00 * 0-131
    668        72E7 0C00                  fdb   $0c00 * 0-131
    669        72E9 0C00                  fdb   $0c00 * 0-131
    670        72EB 0C00                  fdb   $0c00 * 0-131
    671        72ED 0C00                  fdb   $0c00 * 0-131
    672        72EF 0C00                  fdb   $0c00 * 0-131
    673        72F1 0C00                  fdb   $0c00 * 0-131
    674        72F3 0C00                  fdb   $0c00 * 0-131
    675        72F5 0C00                  fdb   $0c00 * 0-131
    676        72F7 0C00                  fdb   $0c00 * 0-131
    677        72F9 0C00                  fdb   $0c00 * 0-131
    678        72FB 0C00                  fdb   $0c00 * 0-131
    679        72FD 0C00                  fdb   $0c00 * 0-131
    680        72FF 0C00                  fdb   $0c00 * 0-131
    681        7301 0C00                  fdb   $0c00 * 0-131
    682        7303 0C00                  fdb   $0c00 * 0-131
    683        7305 0C00                  fdb   $0c00 * 0-131
    684        7307 0C00                  fdb   $0c00 * 0-131
    685        7309 0C00                  fdb   $0c00 * 0-131
    686        730B 0C00                  fdb   $0c00 * 0-131
    687        730D 0C00                  fdb   $0c00 * 0-131
    688        730F 0C00                  fdb   $0c00 * 0-131
    689        7311 0C00                  fdb   $0c00 * 0-131
    690        7313 0C00                  fdb   $0c00 * 0-131
    691        7315 0C00                  fdb   $0c00 * 0-131
    692        7317 0C00                  fdb   $0c00 * 0-131
    693        7319 0C00                  fdb   $0c00 * 0-131
    694        731B 0C00                  fdb   $0c00 * 0-131
    695        731D 0C00                  fdb   $0c00 * 0-131
    696        731F 0C00                  fdb   $0c00 * 0-131
    697        7321 0C00                  fdb   $0c00 * 0-131
    698        7323 0C00                  fdb   $0c00 * 0-131
    699        7325 0C00                  fdb   $0c00 * 0-131
    700        7327 0C00                  fdb   $0c00 * 0-131
    701        7329 0C00                  fdb   $0c00 * 0-131
    702        732B 0E00                  fdb   $0e00 * 132-147
    703        732D 0E00                  fdb   $0e00 * 132-147
    704        732F 0E00                  fdb   $0e00 * 132-147
    705        7331 0E00                  fdb   $0e00 * 132-147
    706        7333 0E00                  fdb   $0e00 * 132-147
    707        7335 0E00                  fdb   $0e00 * 132-147
    708        7337 0E00                  fdb   $0e00 * 132-147
    709        7339 0E00                  fdb   $0e00 * 132-147
    710        733B 0E00                  fdb   $0e00 * 132-147
    711        733D 0E00                  fdb   $0e00 * 132-147
    712        733F 0E00                  fdb   $0e00 * 132-147
    713        7341 0E00                  fdb   $0e00 * 132-147
    714        7343 0E00                  fdb   $0e00 * 132-147
    715        7345 0E00                  fdb   $0e00 * 132-147
    716        7347 0E00                  fdb   $0e00 * 132-147
    717        7349 0E00                  fdb   $0e00 * 132-147
    718        734B 0B10                  fdb   $0b10  * 148-154
    719        734D 0B10                  fdb   $0b10  * 148-154
    720        734F 0B10                  fdb   $0b10  * 148-154
    721        7351 0B10                  fdb   $0b10  * 148-154
    722        7353 0B10                  fdb   $0b10  * 148-154
    723        7355 0B10                  fdb   $0b10  * 148-154
    724        7357 0B10                  fdb   $0b10  * 148-154
    725        7359 0C10                  fdb   $0c10  * 155-157
    726        735B 0C10                  fdb   $0c10  * 155-157
    727        735D 0C10                  fdb   $0c10  * 155-157
    728        735F 0A21                  fdb   $0a21  * 158-161
    729        7361 0A21                  fdb   $0a21  * 158-161
    730        7363 0A21                        fdb   $0a21   * 158-161
    731        7365 0A21                        fdb   $0a21   * 158-161
    732        7367 0B41                  fdb   $0b41  * 162-164
    733        7369 0B41                        fdb   $0b41   * 162-164
    734        736B 0B41                        fdb   $0b41   * 162-164
    735        736D 0A52                  fdb   $0a52  * 165-167
    736        736F 0A52                        fdb   $0a52   * 165-167
    737        7371 0A52                        fdb   $0a52   * 165-167
    738        7373 0B74                  fdb   $0b74  * 168-171
    739        7375 0B74                        fdb   $0b74   * 168-171
    740        7377 0B74                        fdb   $0b74   * 168-171
    741        7379 0B74                        fdb   $0b74   * 168-171
    742        737B 0B97                  fdb   $0b97  * 172-174
    743        737D 0B97                        fdb   $0b97   * 172-174
    744        737F 0B97                        fdb   $0b97   * 172-174
    745        7381 0BBB                  fdb   $0bbb  * 175-180
    746        7383 0BBB                        fdb   $0bbb   * 175-180
    747        7385 0BBB                        fdb   $0bbb   * 175-180
    748        7387 0BBB                        fdb   $0bbb   * 175-180
    749        7389 0BBB                        fdb   $0bbb   * 175-180
    750        738B 0BBB                        fdb   $0bbb   * 175-180
    751        738D 0C00                  fdb   $0c00  * 181-199
    752        738F 0C00                  fdb   $0c00  * 181-199
    753        7391 0C00                  fdb   $0c00  * 181-199
    754        7393 0C00                  fdb   $0c00  * 181-199
    755        7395 0C00                  fdb   $0c00  * 181-199
    756        7397 0C00                  fdb   $0c00  * 181-199
    757        7399 0C00                  fdb   $0c00  * 181-199
    758        739B 0C00                  fdb   $0c00  * 181-199
    759        739D 0C00                  fdb   $0c00  * 181-199
    760        739F 0C00                  fdb   $0c00  * 181-199
    761        73A1 0C00                  fdb   $0c00  * 181-199
    762        73A3 0C00                  fdb   $0c00  * 181-199
    763        73A5 0C00                  fdb   $0c00  * 181-199
    764        73A7 0C00                  fdb   $0c00  * 181-199
    765        73A9 0C00                  fdb   $0c00  * 181-199
    766        73AB 0C00                  fdb   $0c00  * 181-199
    767        73AD 0C00                  fdb   $0c00  * 181-199
    768        73AF 0C00                  fdb   $0c00  * 181-199
    769        73B1 0C00                  fdb   $0c00  * 181-199
    770        73B3               G
    771
    772                                   INCLUD READJPDS
    773                           * --------------------------------------->>
    774                           * Controller Buttons
    775                           *
    776                  0001     c1_button_up_mask            equ   $01 *@>>
    777                  0002     c1_button_down_mask          equ   $02 *@>>
    778                  0004     c1_button_left_mask          equ   $04 *@>>
    779                  0008     c1_button_right_mask         equ   $08 *@>>
    780                  0010     c2_button_up_mask            equ   $10 *@>>
    781                  0020     c2_button_down_mask          equ   $20 *@>>
    782                  0040     c2_button_left_mask          equ   $40 *@>>
    783                  0080     c2_button_right_mask         equ   $80 *@>>
    784                  0040     c1_button_A_mask             equ   $40 *@>>
    785                  0080     c2_button_A_mask             equ   $80 *@>>
    786
    787        73B3               Joypads_Read
    788        73B3 00            Dpad_Read                    fcb   $00
    789        73B4 00            Fire_Read                    fcb   $00
    790                            
    791        73B5               Joypads
    792        73B5               Joypads_Held                           *@>>
    793        73B5 00            Dpad_Held                    fcb   $00 *@>>
    794        73B6 00            Fire_Held                    fcb   $00 *@>>
    795        73B7               Joypads_Press                          *@>>
    796        73B7 00            Dpad_Press                   fcb   $00 *@>>
    797        73B8 00            Fire_Press                   fcb   $00 *@>>
    798
    799                           *****************************************>>
    800                           * Get joystick parameters
    801                           *
    802                           * Direction des Joypads
    803                           * ---------------------
    804                           * Registre: $E7CC (8bits)
    805                           *
    806                           * Joypad2     Joypad1
    807                           * 1111        1111 (0: appuye | 1: relach>>
    808                           * ||||_Haut   ||||_Haut
    809                           * |||__Bas    |||__Bas
    810                           * ||___Gauche ||___Gauche
    811                           * |____Droite |____Droite
    812                           *
    813                           * Boutons des Joypads
    814                           * -------------------
    815                           * Registre: $E7CD (8bits)
    816                           *
    817                           * 11 000000 (0: appuye | 1: relache)
    818                           * ||[------] 6 bits convertisseur numeriq>>
    819                           * ||_Fire Joypad1
    820                           * |__Fire Joypad2
    821                           *
    822                           * Variables globales: Joypads_Held, Joypa>>
    823                           * --------------------------------------->>
    824                           * (16 bits)
    825                           * Joypad2     Joypad1
    826                           * 0000        0000 (0: relache | 1: appuy>>
    827                           * ||||_Haut   ||||_Haut                  >>
    828                           * |||__Bas    |||__Bas                   >>
    829                           * ||___Gauche ||___Gauche                >>
    830                           * |____Droite |____Droite
    831                           *
    832                           *****************************************>>
    833                            
    834                                                                  *;>>
    835                                                                  *;>>
    836                                                                  *;>>
    837                                                                  *;>>
    838                                                                  *
    839                                                                  *;>>
    840        73B9               ReadJoypads                            *R>>
    841                                                                  * >>
    842                                                                  * >>
    843                                                                  * >>
    844                                                                  * >>
    845                                                                  *
    846                                                                  *;>>
    847                                                                  *J>>
    848                                                                  * >>
    849                                                                  * >>
    850                                                                  * >>
    851                                                                  * >>
    852                                                                  * >>
    853                                                                  * >>
    854                                                                  * >>
    855                                                                  * >>
    856                                                                  * >>
    857                                                                  * >>
    858                                                                  * >>
    859                                                                  * >>
    860  6     73B9 FC   E7CC             ldd   $E7CC
    861  2     73BC 43                    coma
    862  2     73BD 53                    comb                           * >>
    863  6     73BE FD   73B3             std   Joypads_Read
    864  6     73C1 FC   73B5             ldd   Joypads_Held             * >>
    865  5     73C4 B8   73B3             eora  Dpad_Read                * >>
    866  5     73C7 F8   73B4             eorb  Fire_Read
    867                                                                  * >>
    868  5     73CA B4   73B3             anda  Dpad_Read                * >>
    869  5     73CD F4   73B4             andb  Fire_Read
    870  6     73D0 FD   73B7             std   Joypads_Press            * >>
    871  6     73D3 FC   73B3             ldd   Joypads_Read
    872  6     73D6 FD   73B5             std   Joypads_Held
    873  5     73D9 39                    rts                            * >>
    874                                                                  *;>>
    875
    876
    877                                   INCLUD RUNOBJTS
    878                           * --------------------------------------->>
    879                           * RunObjects
    880                           * ------------
    881                           * Subroutine to run objects code
    882                           *
    883                           * input REG : none
    884                           * --------------------------------------->>
    885                                                                    >>
    886                                                                    >>
    887                                                                    >>
    888                                                                    >>
    889                                                                    >>
    890                                                                    >>
    891                                                                    >>
    892        73DA               RunObjects                               >>
    893                                                                    >>
    894                                                                    >>
    895  3     73DA CE   662A             ldu   #Object_RAM                >>
    896                                                                    >>
    897                                                                    >>
    898                                                                    >>
    899                                                                    >>
    900                                                                    >>
    901                                                                    >>
    902                                                                    >>
    903        73DD               RunObjects_01                            >>
    904                                                                    >>
    905                                                                    >>
    906                                                                    >>
    907                                                                    >>
    908  7     73DD 7D   716C             tst   Glb_MainCharacter_Is_Dead  >>
    909  3     73E0 26   23               bne   RunObjectsWhenPlayerIsDead >>
    910                                                                    >>
    911                                                                    >>
    912                                                                    >>
    913                                                                    >>
    914                                                                    >>
    915                                                                    >>
    916                                                                    >>
    917                                                                    >>
    918                                                                    >>
    919                                                                    >>
    920        73E2               RunObject                                >>
    921  2     73E2 86   00               lda   #$00
    922  4+0   73E4 E6   C4               ldb   ,u                         >>
    923  3     73E6 27   13               beq   RunNextObject              >>
    924
    925  4     73E8 108E 809A             ldy   #Obj_Index_Page
    926  4+4   73EC A6   AB               lda   d,y                        >>
    927  5     73EE B7   E7E5             sta   $E7E5                      >>
    928  2     73F1 86   00               lda   #$00
    929  2     73F3 58                    aslb                             >>
    930  2     73F4 49                    rola                             >>
    931  4     73F5 108E 819A             ldy   #Obj_Index_Address         >>
    932  7+7   73F9 AD   BB               jsr   [d,y]                      >>
    933                                                                    >>
    934                                                                    >>
    935                                                                    >>
    936        73FB               RunNextObject                            >>
    937  4+1   73FB 33   C8 5A            leau  next_object,u              >>
    938        73FE               am_RunNextObject
    939  5     73FE 1183 716A             cmpu  #Object_RAM_End            >>
    940  3     7402 26   DE               bne   RunObject                  >>
    941        7404               RunObjects_End                           >>
    942  5     7404 39                    rts                              >>
    943                                                                    >>
    944                                                                    >>
    945                                                                    >>
    946                                                                    >>
    947        7405               RunObjectsWhenPlayerIsDead               >>
    948  3     7405 CE   662A             ldu   #Reserved_Object_RAM
    949  3     7408 8E   66DE             ldx   #Reserved_Object_RAM_End
    950  6     740B BF   7400             stx   am_RunNextObject+2         >>
    951  7     740E 8D   D2               bsr   RunObject                  >>
    952                                                                    >>
    953                                                                    >>
    954  3     7410 CE   705C             ldu   #LevelOnly_Object_RAM
    955  3     7413 8E   716A             ldx   #LevelOnly_Object_RAM_End
    956  6     7416 BF   7400             stx   am_RunNextObject+2         >>
    957  7     7419 8D   C7               bsr   RunObject                  >>
    958                                                                    >>
    959  3     741B 8E   716A             ldx   #Object_RAM_End            >>
    960  6     741E BF   7400             stx   am_RunNextObject+2
    961  5     7421 39                    rts
    962                                                                    >>
    963                                                                    >>
    964                                                                    >>
    965                                                                    >>
    966                                                                    >>
    967                                                                    >>
    968                                                                    >>
    969                                                                    >>
    970                                                                    >>
    971                                                                    >>
    972                                                                    >>
    973                                                                    >>
    974                                                                    >>
    975                            
    976                                                                    >>
    977                                                                    >>
    978                                                                    >>
    979                                                                    >>
    980
    981                                   INCLUD MRKOBJGN
    982                           * --------------------------------------->>
    983                           * MarkObjGone
    984                           * -----------
    985                           * Subroutine to destroy an object that is>>
    986                           * -- TODO --
    987                           * waiting for camera implementation
    988                           *
    989                           * input REG : none
    990                           * clear REG : none
    991                           * --------------------------------------->>
    992
    993                                                                  *;>>
    994                                                                  *;>>
    995                                                                  *;>>
    996                                                                  *
    997                                                                  *;>>
    998                                                                  *;>>
    999                                                                  *;>>
   1000        7422               MarkObjGone *@globals                  *M>>
   1001                                                                  * >>
   1002                                                                  * >>
   1003  3     7422 20   06               bra   DisplaySprite            * >>
   1004                                                                  *+>>
   1005                                                                  * >>
   1006                                                                  * >>
   1007                                                                  * >>
   1008                                                                  * >>
   1009                                                                  * >>
   1010                                                                  * >>
   1011                                                                  *
   1012                                                                  *+>>
   1013                                                                  * >>
   1014                                                                  * >>
   1015                                                                  * >>
   1016                                                                  * >>
   1017                                                                  *+>>
   1018                                                                  * >>
   1019
   1020                                   INCLUD DISPLSPR
   1021                           * --------------------------------------->>
   1022                           * DisplaySprite
   1023                           * -------------
   1024                           * Subroutine to manage sprite priority.
   1025                           * Object's priority is read and object is>>
   1026                           * priority: 0 - unregistred
   1027                           * priority: 1 - register non moving overl>>
   1028                           * priority; 2-8 - register moving sprite >>
   1029                           *
   1030                           * Unlike original S2 code, sprite priorit>>
   1031                           * it allows to keep an exact sprite order>>
   1032                           *
   1033                           * DisplaySprite
   1034                           * input REG : [u] object pointer (OST)
   1035                           *
   1036                           * DisplaySprite_x
   1037                           * input REG : [x] object pointer (OST)
   1038                           * --------------------------------------->>
   1039                            
   1040        7424               DisplaySprite_x *@globals
   1041  5+6   7424 34   56               pshs  d,x,u
   1042  6     7426 1F   13               tfr   x,u
   1043  3     7428 20   02               bra   DSP_Start
   1044                            
   1045        742A               DisplaySprite *@globals
   1046  5+6   742A 34   56               pshs  d,x,u
   1047                            
   1048        742C               DSP_Start
   1049  4+1   742C A6   42               lda   render_flags,u
   1050  2     742E 84   DF               anda  #:render_hide_mask         >>
   1051  4+1   7430 A7   42               sta   render_flags,u
   1052
   1053  5     7432 B6   6137             lda   Glb_Cur_Wrk_Screen_Id      >>
   1054  3     7435 26   09               bne   DSP_SetBuffer1
   1055                            
   1056        7437               DSP_SetBuffer0
   1057  4+1   7437 30   C8 36            leax  rsv_buffer_0,u             >>
   1058  4     743A 108E 64DE             ldy   #DPS_buffer_0              >>
   1059  3     743E 20   07               bra   DSP_BufferPositionned
   1060                            
   1061        7440               DSP_SetBuffer1
   1062  4+1   7440 30   C8 48            leax  rsv_buffer_1,u             >>
   1063  4     7443 108E 6544             ldy   #DPS_buffer_1              >>
   1064                            
   1065        7447               DSP_BufferPositionned
   1066  4+1   7447 A6   43               lda   priority,u                 >>
   1067  4+1   7449 A1   00               cmpa  buf_priority,x
   1068  3     744B 27   1C               beq   DSP_rts                    >>
   1069  4+1   744D E6   00               ldb   buf_priority,x
   1070  3     744F 26   3F               bne   DSP_ChangePriority
   1071                            
   1072        7451               DSP_InitPriority
   1073  4+1   7451 A7   00               sta   buf_priority,x             >>
   1074  2     7453 48                    asla                             >>
   1075                            
   1076        7454               DSP_CheckLastEntry
   1077  4+1   7454 31   A8 12            leay  buf_Tbl_Priority_Last_Entry>>
   1078  6+1   7457 6D   A6               tst   a,y                        >>
   1079  3     7459 26   10               bne   DSP_addToExistingNode      >>
   1080                            
   1081        745B               DSP_addFirstNode
   1082  5+1   745B EF   A6               stu   a,y                        >>
   1083  4+1   745D 31   A8 EE            leay  buf_Tbl_Priority_First_Entr>>
   1084  5+1   7460 EF   A6               stu   a,y                        >>
   1085  3     7462 CC   0000             ldd   #0
   1086  5+1   7465 ED   01               std   buf_priority_prev_obj,x    >>
   1087  5+1   7467 ED   03               std   buf_priority_next_obj,x
   1088                            
   1089        7469               DSP_rts
   1090  5+8   7469 35   D6               puls  d,x,u,pc                   >>
   1091                            
   1092        746B               DSP_addToExistingNode
   1093  5+1   746B AE   A6               ldx   a,y                        >>
   1094  5     746D F6   6137             ldb   Glb_Cur_Wrk_Screen_Id
   1095  3     7470 26   0E               bne   DSP_LinkBuffer1
   1096  5+1   7472 EF   88 39            stu   rsv_priority_next_obj_0,x  >>
   1097  5+1   7475 AF   C8 37            stx   rsv_priority_prev_obj_0,u  >>
   1098  6+1   7478 6F   C8 39            clr   rsv_priority_next_obj_0,u  >>
   1099  6+1   747B 6F   C8 3A            clr   rsv_priority_next_obj_0+1,u>>
   1100  3     747E 20   0C               bra   DSP_LinkCurWithPrev
   1101        7480               DSP_LinkBuffer1
   1102  5+1   7480 EF   88 4B            stu   rsv_priority_next_obj_1,x  >>
   1103  5+1   7483 AF   C8 49            stx   rsv_priority_prev_obj_1,u  >>
   1104  6+1   7486 6F   C8 4B            clr   rsv_priority_next_obj_1,u  >>
   1105  6+1   7489 6F   C8 4C            clr   rsv_priority_next_obj_1+1,u>>
   1106                            
   1107        748C               DSP_LinkCurWithPrev
   1108  5+1   748C EF   A6               stu   a,y                        >>
   1109  5+8   748E 35   D6               puls  d,x,u,pc                   >>
   1110                            
   1111        7490               DSP_ChangePriority
   1112  4+1   7490 31   A8 24            leay  buf_Lst_Priority_Unset,y
   1113  5+3   7493 EF   B4               stu   [,y]                       >>
   1114  4+1   7495 31   22               leay  2,y
   1115  6+0   7497 10AF A4               sty   ,y                         >>
   1116  4+1   749A 31   A8 DA            leay  -buf_Lst_Priority_Unset-2,y>>
   1117  2     749D 81   00               cmpa  #0
   1118  3     749F 26   B3               bne   DSP_CheckLastEntry         >>
   1119  5+8   74A1 35   D6               puls  d,x,u,pc                   >>
   1120
   1121                            
   1122                                                                  *;>>
   1123                                                                  *;>>
   1124                                                                  *;>>
   1125                                                                  *
   1126                                                                  *;>>
   1127                                                                  *
   1128                                                                  *;>>
   1129                                                                  *D>>
   1130                                                                  * >>
   1131                                                                  * >>
   1132                                                                  * >>
   1133                                                                  * >>
   1134                                                                  * >>
   1135                            
   1136                                                                  * >>
   1137                                                                  * >>
   1138                                                                  * >>
   1139                            
   1140                                                                  * >>
   1141                                                                  * >>
   1142                                                                  *
   1143                                                                  *r>>
   1144                            
   1145                                                                  * >>
   1146                                                                  *;>>
   1147
   1148                                   INCLUD ANIMSPR
   1149                           * --------------------------------------->>
   1150                           * Subroutine to animate a sprite using an>>
   1151                           *
   1152                           *   this function also change render flag>>
   1153                           *   the status byte;
   1154                           *
   1155                           * input REG : [u] pointeur sur l'objet
   1156                           *
   1157                           * --------------------------------------->>
   1158
   1159                  00FF     resetAnim              equ $FF
   1160                  00FE     goBackNFrames          equ $FE ; followed>>
   1161                  00FD     goToAnimation          equ $FD ; followed>>
   1162                  00FC     nextRoutine            equ $FC
   1163                  00FB     resetAnimAndSubRoutine equ $FB
   1164                  00FA     nextSubRoutine         equ $FA
   1165
   1166                                                                    >>
   1167                                                                    >>
   1168                                                                    >>
   1169                                                                    >>
   1170                                                                    >>
   1171                                                                    >>
   1172                                                                    >>
   1173        74A3               AnimateSprite * @globals                 >>
   1174                                                                    >>
   1175  5+1   74A3 AE   44               ldx   anim,u                     >>
   1176  6+1   74A5 AC   46               cmpx  prev_anim,u                >>
   1177  3     74A7 27   08               beq   Anim_Run                   >>
   1178  5+1   74A9 AF   46               stx   prev_anim,u                >>
   1179  2     74AB C6   00                     ldb   #0
   1180  4+1   74AD E7   48               stb   anim_frame,u               >>
   1181  4+1   74AF E7   49               stb   anim_frame_duration,u      >>
   1182                                                                    >>
   1183        74B1               Anim_Run                                 >>
   1184  6+1   74B1 6A   49               dec   anim_frame_duration,u      >>
   1185  3     74B3 2A   23               bpl   Anim_Wait                  >>
   1186                                   * no offset table                >>
   1187                                   * anim is the address of anim    >>
   1188  4+1   74B5 E6   1F               ldb   -1,x
   1189  4+1   74B7 E7   49                     stb   anim_frame_duration,u>>
   1190                                                                    >>
   1191  4+1   74B9 E6   48               ldb   anim_frame,u               >>
   1192  2     74BB 58                    aslb
   1193  4+1   74BC 31   85               leay  b,x
   1194  5+0   74BE EC   A4               ldd   ,y                         >>
   1195                                   * bmi   Anim_End_FF              >>
   1196  2     74C0 81   FA                     cmpa  #$FA                 >>
   1197  3     74C2 24   15                     bhs   Anim_End_FF          >>
   1198                                                                    >>
   1199        74C4               Anim_Next                                >>
   1200                                      * ne pas utiliser             >>
   1201  5+1   74C4 ED   4A               std   image_set,u                >>
   1202  4+1   74C6 E6   C8 1A            ldb   status,u                   >>
   1203  2     74C9 C4   03               andb  #status_x_orientation+statu>>
   1204  5     74CB F7   74D3             stb   Anim_dyn+1
   1205                                                                    >>
   1206  4+1   74CE A6   42               lda   render_flags,u             >>
   1207  2     74D0 84   FC               anda  #:(render_xmirror_mask+rend>>
   1208        74D2               Anim_dyn
   1209  2     74D2 8A   00               ora   #$00                       >>
   1210                                                                    >>
   1211  4+1   74D4 A7   42               sta   render_flags,u
   1212  6+1   74D6 6C   48               inc   anim_frame,u               >>
   1213                                                                    >>
   1214        74D8               Anim_Wait                                >>
   1215  5     74D8 39                    rts                              >>
   1216                                                                    >>
   1217                                                                    >>
   1218        74D9               Anim_End_FF                              >>
   1219  2     74D9 4C                    inca                             >>
   1220  3     74DA 26   08               bne   Anim_End_FE                >>
   1221  2     74DC C6   00                     ldb   #0
   1222  4+1   74DE E7   48               stb   anim_frame,u               >>
   1223  5+0   74E0 EC   84               ldd   ,x                         >>
   1224  3     74E2 20   E0               bra   Anim_Next                  >>
   1225                                                                    >>
   1226                                                                    >>
   1227        74E4               Anim_End_FE                              >>
   1228  2     74E4 4C                    inca                             >>
   1229  3     74E5 26   0E               bne   Anim_End_FD                >>
   1230  4+1   74E7 A6   48               lda   anim_frame,u
   1231  5     74E9 F7   74ED             stb   Anim_End_FE_dyn+1          >>
   1232        74EC               Anim_End_FE_dyn
   1233  2     74EC 80   00               suba  #$00                       >>
   1234  4+1   74EE A7   48               sta   anim_frame,u               >>
   1235                                                                    >>
   1236  2     74F0 48                    asla
   1237  5+1   74F1 EC   86               ldd   a,x                        >>
   1238  3     74F3 20   CF               bra   Anim_Next                  >>
   1239                                                                    >>
   1240                                                                    >>
   1241        74F5               Anim_End_FD                              >>
   1242  2     74F5 4C                    inca                             >>
   1243  3     74F6 26   05               bne   Anim_End_FC                >>
   1244  5+1   74F8 EC   21               ldd   1,y                        >>
   1245  5+1   74FA ED   44               std   anim,u                     >>
   1246  5     74FC 39                    rts                              >>
   1247                                                                    >>
   1248                                                                    >>
   1249        74FD               Anim_End_FC                              >>
   1250  2     74FD 4C                    inca                             >>
   1251  3     74FE 26   0F               bne   Anim_End_FB                >>
   1252  4+1   7500 E6   C8 18            ldb   routine,u
   1253  2     7503 CB   03               addb  #$03
   1254  4+1   7505 E7   C8 18            stb   routine,u                  >>
   1255  2     7508 86   00               lda   #0
   1256  4+1   750A A7   49               sta   anim_frame_duration,u      >>
   1257  6+1   750C 6C   48               inc   anim_frame,u               >>
   1258  5     750E 39                    rts                              >>
   1259                                                                    >>
   1260                                                                    >>
   1261        750F               Anim_End_FB                              >>
   1262  2     750F 4C                    inca                             >>
   1263  3     7510 26   08               bne   Anim_End_FA                >>
   1264  2     7512 86   00               lda   #0
   1265  4+1   7514 A7   48               sta   anim_frame,u               >>
   1266  4+1   7516 A7   C8 19            sta   routine_secondary,u        >>
   1267  5     7519 39                    rts                              >>
   1268                                                                    >>
   1269                                                                    >>
   1270        751A               Anim_End_FA                              >>
   1271  2     751A 4C                    inca                             >>
   1272  3     751B 26   08               bne   Anim_End                   >>
   1273  4+1   751D E6   C8 19            ldb   routine_secondary,u        >>
   1274  2     7520 CB   03               addb  #$03
   1275  4+1   7522 E7   C8 19            stb   routine_secondary,u
   1276        7525               Anim_End
   1277  5     7525 39                    rts                              >>
   1278                                                                    >>
   1279                                                                    >>
   1280                                                                    >>
   1281                                                                    >>
   1282                                                                    >>
   1283                                                                    >>
   1284                                                                    >>
   1285                                                                    >>
   1286                                                                    >>
   1287                                                                    >>
   1288
   1289                                   INCLUD OBJMOVE
   1290                           * --------------------------------------->>
   1291                           * Subroutine translating object speed to >>
   1292                           * This moves the object horizontally and >>
   1293                           * but does not apply gravity to it
   1294                           * --------------------------------------->>
   1295
   1296                                                                  *;>>
   1297                                                                  *;>>
   1298                                                                  *;>>
   1299                                                                  *;>>
   1300                                                                  *;>>
   1301                                                                  *
   1302                                                                  *;>>
   1303                                                                  *
   1304                                                                  *;>>
   1305        7526               ObjectMove                             *O>>
   1306                                                                  * >>
   1307                                                                  * >>
   1308                                                                  * >>
   1309                                                                  * >>
   1310                                                                  * >>
   1311                                                                  * >>
   1312  4+1   7526 E6   C8 14            ldb   x_vel,u
   1313  2     7529 1D                    sex                            ; >>
   1314  5     752A B7   7537             sta   am_ObjectMove_01+1
   1315  5+1   752D EC   C8 14            ldd   x_vel,u
   1316  6+1   7530 E3   4D               addd  x_pos+1,u                ; >>
   1317  5+1   7532 ED   4D               std   x_pos+1,u                ; >>
   1318  4+1   7534 A6   4C               lda   x_pos,u
   1319        7536               am_ObjectMove_01
   1320  2     7536 89   00               adca  #$00                     ; >>
   1321  4+1   7538 A7   4C               sta   x_pos,u                  ; >>
   1322                            
   1323                                                                  * >>
   1324                                                                  * >>
   1325                                                                  * >>
   1326                                                                  * >>
   1327                                                                  * >>
   1328                                                                  * >>
   1329  4+1   753A E6   C8 16            ldb   y_vel,u
   1330  2     753D 1D                    sex                            ; >>
   1331  5     753E B7   754D             sta   am_ObjectMove_02+1
   1332  5+1   7541 EC   C8 16            ldd   y_vel,u
   1333  6+1   7544 E3   C8 10            addd  y_pos+1,u                ; >>
   1334  5+1   7547 ED   C8 10            std   y_pos+1,u                ; >>
   1335  4+1   754A A6   4F               lda   y_pos,u
   1336        754C               am_ObjectMove_02
   1337  2     754C 89   00               adca  #$00                     ; >>
   1338  4+1   754E A7   4F               sta   y_pos,u                  ; >>
   1339  5     7550 39                    rts                            * >>
   1340                                                                  *;>>
   1341                                                                  *;>>
   1342
   1343                                   INCLUD OBJLOAD
   1344                           * --------------------------------------->>
   1345                           * Single object loading subroutine
   1346                           * Find an empty object array
   1347                           *
   1348                           * input  REG : [u] pointeur sur l'objet c>>
   1349                           * output REG : [x] pointeur sur l'objet l>>
   1350                           * --------------------------------------->>
   1351
   1352                                                                  *;>>
   1353                                                                  *;>>
   1354                                                                  *;>>
   1355                                                                  *;>>
   1356                                                                  *;>>
   1357                                                                  *
   1358                                                                  *;>>
   1359                                                                  *S>>
   1360                                                                  * >>
   1361                                                                  * >>
   1362                                                                  * >>
   1363                                                                  * >>
   1364                                                                  * >>
   1365                                                                  *
   1366                                                                  */>>
   1367                                                                  * >>
   1368                                                                  * >>
   1369                                                                  * >>
   1370                                                                  * >>
   1371                                                                  *
   1372                                                                  *r>>
   1373                                                                  * >>
   1374                                                                  *;>>
   1375                                                                  *;>>
   1376                                                                  *;>>
   1377                                                                  *;>>
   1378                                                                  *;>>
   1379                                                                  *
   1380                                                                  *;>>
   1381                                                                  *
   1382                                                                  *;>>
   1383        7551               SingleObjLoad2                         *S>>
   1384  6     7551 1F   31               tfr   u,x                      * >>
   1385  4+1   7553 30   88 5A            leax  next_object,x            * >>
   1386  4     7556 8C   705C             cmpx  #Dynamic_Object_RAM_End  * >>
   1387  3     7559 27   0C               beq   SingleObjLoad2_02        * >>
   1388                                                                  * >>
   1389                                                                  * >>
   1390                                                                  * >>
   1391                                                                  * >>
   1392                                                                  * >>
   1393                                                                  * >>
   1394                                                                  * >>
   1395                                                                  * >>
   1396                                                                  *
   1397        755B               SingleObjLoad2_01                      *->>
   1398  6+0   755B 6D   84               tst   ,x                       * >>
   1399  3     755D 27   08               beq   SingleObjLoad2_02        * >>
   1400  4+1   755F 30   88 5A            leax  next_object,x            * >>
   1401  4     7562 8C   705C             cmpx  #Dynamic_Object_RAM_End
   1402  3     7565 26   F4               bne   SingleObjLoad2_01        * >>
   1403                                                                  *
   1404        7567               SingleObjLoad2_02                      *r>>
   1405  5     7567 39                    rts                            * >>
   1406                                                                  *
   1407                                                                  * >>
   1408                                                                  *+>>
   1409                                                                  *.>>
   1410                                                                  *.>>
   1411                                                                  *
   1412                                                                  * >>
   1413                                                                  * >>
   1414                                                                  * >>
   1415                                                                  * >>
   1416                                                                  * >>
   1417                                                                  * >>
   1418                                                                  *
   1419                                                                  *.>>
   1420                                                                  *.>>
   1421                                                                  * >>
   1422                                                                  * >>
   1423                                                                  * >>
   1424                                                                  *;>>
   1425                                                                  *;>>
   1426                                                                  *;>>
   1427                                                                  *;>>
   1428                                                                  *;>>
   1429                                                                  *
   1430                                                                  *;>>
   1431                                                                  *
   1432                                                                  *;>>
   1433                                                                  *S>>
   1434                                                                  * >>
   1435                                                                  * >>
   1436                                                                  *
   1437                                                                  *->>
   1438                                                                  * >>
   1439                                                                  * >>
   1440                                                                  * >>
   1441                                                                  * >>
   1442                                                                  *
   1443                                                                  *r>>
   1444                                                                  * >>
   1445                                                                  *;>>
   1446
   1447
   1448                                   INCLUD DELETOBJ
   1449                           * --------------------------------------->>
   1450                           * DeleteObject
   1451                           * ------------
   1452                           * Subroutine to delete an object.
   1453                           * If the object is rendered as a sprite i>>
   1454                           * routine
   1455                           *
   1456                           * DeleteObject
   1457                           * input REG : [u] object pointer (OST)
   1458                           *
   1459                           * DeleteObject_x
   1460                           * input REG : [x] object pointer (OST)
   1461                           * --------------------------------------->>
   1462
   1463                                                                  *;>>
   1464                                                                  *;>>
   1465                                                                  *;>>
   1466                                                                  *
   1467                                                                  *;>>
   1468                                                                  *
   1469                                                                  *;>>
   1470        7568               DeleteObject_x *@globals               *D>>
   1471  5+6   7568 34   56               pshs  d,x,u                    * >>
   1472  4+0   756A 33   84               leau  ,x                       *;>>
   1473  3     756C 20   02               bra   DOB_Start
   1474                            
   1475        756E               DeleteObject *@globals                 *D>>
   1476  5+6   756E 34   56               pshs  d,x,u
   1477                            
   1478        7570               DOB_Start
   1479  4+1   7570 A6   C8 47            lda   rsv_prev_render_flags_0,u
   1480  3     7573 2A   27               bpl   DOB_RemoveFromDPSB0        >>
   1481
   1482        7575               DOB_ToDeleteFlag0
   1483  4+1   7575 A6   42               lda   render_flags,u
   1484  2     7577 8A   40               ora   #render_todelete_mask
   1485  4+1   7579 A7   42               sta   render_flags,u             >>
   1486                            
   1487        757B               DOB_Unset0
   1488  6     757B BE   6502             ldx   Lst_Priority_Unset_0       >>
   1489  5+0   757E EF   84               stu   ,x
   1490  4+1   7580 30   02               leax  2,x
   1491  6     7582 BF   6502             stx   Lst_Priority_Unset_0
   1492                            
   1493        7585               DOB_TestOnscreen1
   1494  4+1   7585 A6   C8 59            lda   rsv_prev_render_flags_1,u
   1495  3     7588 2A   54               bpl   DOB_RemoveFromDPSB1        >>
   1496                            
   1497        758A               DOB_ToDeleteFlag1
   1498  4+1   758A A6   42               lda   render_flags,u
   1499  2     758C 8A   40               ora   #render_todelete_mask
   1500  4+1   758E A7   42               sta   render_flags,u             >>
   1501                            
   1502        7590               DOB_Unset1
   1503  6     7590 BE   6568             ldx   Lst_Priority_Unset_1       >>
   1504  5+0   7593 EF   84               stu   ,x
   1505  4+1   7595 30   02               leax  2,x
   1506  6     7597 BF   6568             stx   Lst_Priority_Unset_1
   1507  5+8   759A 35   D6               puls  d,x,u,pc                   >>
   1508
   1509        759C               DOB_RemoveFromDPSB0
   1510  5+1   759C EC   C8 37            ldd   rsv_priority_prev_obj_0,u  >>
   1511  3     759F 26   11               bne   DOB_ChainPrevB0
   1512                            
   1513  4+1   75A1 A6   C8 36            lda   rsv_priority_0,u
   1514  2     75A4 48                    lsla
   1515  4     75A5 108E 64DE             ldy   #Tbl_Priority_First_Entry_0>>
   1516  4+1   75A9 31   A6               leay  a,y
   1517  5+1   75AB EC   C8 39            ldd   rsv_priority_next_obj_0,u
   1518  5+0   75AE ED   A4               std   ,y
   1519  3     75B0 20   0A               bra   DOB_CheckPrioNextB0
   1520                            
   1521        75B2               DOB_ChainPrevB0
   1522  5+1   75B2 EC   C8 39            ldd   rsv_priority_next_obj_0,u
   1523  6+1   75B5 10AE C8 37            ldy   rsv_priority_prev_obj_0,u
   1524  5+1   75B9 ED   A8 39            std   rsv_priority_next_obj_0,y
   1525
   1526        75BC               DOB_CheckPrioNextB0
   1527  5+1   75BC EC   C8 39            ldd   rsv_priority_next_obj_0,u
   1528  3     75BF 26   11               bne   DOB_ChainNextB0
   1529
   1530  4+1   75C1 A6   C8 36            lda   rsv_priority_0,u
   1531  2     75C4 48                    lsla
   1532  4     75C5 108E 64F0             ldy   #Tbl_Priority_Last_Entry_0
   1533  4+1   75C9 31   A6               leay  a,y
   1534  5+1   75CB EC   C8 37            ldd   rsv_priority_prev_obj_0,u
   1535  5+0   75CE ED   A4               std   ,y
   1536  3     75D0 20   B3               bra   DOB_TestOnscreen1
   1537                            
   1538        75D2               DOB_ChainNextB0
   1539  5+1   75D2 EC   C8 37            ldd   rsv_priority_prev_obj_0,u
   1540  6+1   75D5 10AE C8 39            ldy   rsv_priority_next_obj_0,u
   1541  5+1   75D9 ED   A8 37            std   rsv_priority_prev_obj_0,y
   1542  3     75DC 20   A7               bra   DOB_TestOnscreen1
   1543
   1544        75DE               DOB_RemoveFromDPSB1
   1545  5+1   75DE EC   C8 49            ldd   rsv_priority_prev_obj_1,u
   1546  3     75E1 26   11               bne   DOB_ChainPrevB1
   1547                            
   1548  4+1   75E3 A6   C8 48            lda   rsv_priority_1,u
   1549  2     75E6 48                    lsla
   1550  4     75E7 108E 6544             ldy   #Tbl_Priority_First_Entry_1>>
   1551  4+1   75EB 31   A6               leay  a,y
   1552  5+1   75ED EC   C8 4B            ldd   rsv_priority_next_obj_1,u
   1553  5+0   75F0 ED   A4               std   ,y
   1554  3     75F2 20   0A               bra   DOB_CheckPrioNextB1
   1555                            
   1556        75F4               DOB_ChainPrevB1
   1557  5+1   75F4 EC   C8 4B            ldd   rsv_priority_next_obj_1,u
   1558  6+1   75F7 10AE C8 49            ldy   rsv_priority_prev_obj_1,u
   1559  5+1   75FB ED   A8 4B            std   rsv_priority_next_obj_1,y
   1560
   1561        75FE               DOB_CheckPrioNextB1
   1562  5+1   75FE EC   C8 4B            ldd   rsv_priority_next_obj_1,u
   1563  3     7601 26   19               bne   DOB_ChainNextB1
   1564
   1565  4+1   7603 A6   C8 48            lda   rsv_priority_1,u
   1566  2     7606 48                    lsla
   1567  4     7607 108E 6556             ldy   #Tbl_Priority_Last_Entry_1
   1568  4+1   760B 31   A6               leay  a,y
   1569  5+1   760D EC   C8 49            ldd   rsv_priority_prev_obj_1,u
   1570  5+0   7610 ED   A4               std   ,y
   1571  4+1   7612 A6   C8 47            lda   rsv_prev_render_flags_0,u
   1572  3     7615 2B   03               bmi   DOB_rts                    >>
   1573  8     7617 BD   7630             jsr   ClearObj                   >>
   1574        761A               DOB_rts                                *
   1575  5+8   761A 35   D6               puls  d,x,u,pc
   1576                            
   1577        761C               DOB_ChainNextB1
   1578  5+1   761C EC   C8 49            ldd   rsv_priority_prev_obj_1,u
   1579  6+1   761F 10AE C8 4B            ldy   rsv_priority_next_obj_1,u
   1580  5+1   7623 ED   A8 49            std   rsv_priority_prev_obj_1,y
   1581  4+1   7626 A6   C8 47            lda   rsv_prev_render_flags_0,u
   1582  3     7629 2B   EF               bmi   DOB_rts                    >>
   1583  8     762B BD   7630             jsr   ClearObj                   >>
   1584  5+8   762E 35   D6               puls  d,x,u,pc
   1585
   1586                                                                  * >>
   1587                                                                  *
   1588                                                                  * >>
   1589                                                                  * >>
   1590                                                                  *->>
   1591                                                                  * >>
   1592                                                                  * >>
   1593                                                                  * >>
   1594                                                                  * >>
   1595                                                                  *
   1596                                                                  * >>
   1597                                                                  *;>>
   1598
   1599                                   INCLUD CLEAROBJ
   1600                           * --------------------------------------->>
   1601                           * ClearObj
   1602                           * --------
   1603                           * Subroutine to clear an object data in O>>
   1604                           *
   1605                           * input REG : [u] pointer on objet (OST)
   1606                           * clear REG : [d,y]
   1607                           * --------------------------------------->>
   1608
   1609        7630               ClearObj *@globals
   1610  5+8   7630 34   76               pshs  d,x,y,u
   1611  7     7632 10FF 7659             sts   CLO_1+2
   1612  4+1   7636 32   C8 5A            leas  object_size,u
   1613  3     7639 CC   0000             ldd   #$0000
   1614  3     763C 8E   0000             ldx   #$0000
   1615  4+0   763F 31   84               leay  ,x
   1616  4+0   7641 33   84               leau  ,x
   1617  5+8   7643 34   76               pshs  d,x,y,u
   1618  5+8   7645 34   76               pshs  d,x,y,u
   1619  5+8   7647 34   76               pshs  d,x,y,u
   1620  5+8   7649 34   76               pshs  d,x,y,u
   1621  5+8   764B 34   76               pshs  d,x,y,u
   1622  5+8   764D 34   76               pshs  d,x,y,u
   1623  5+8   764F 34   76               pshs  d,x,y,u
   1624  5+8   7651 34   76               pshs  d,x,y,u
   1625  5+8   7653 34   76               pshs  d,x,y,u
   1626  4+0   7655 33   E4               leau  ,s
   1627        7657               CLO_1
   1628  4     7657 10CE 0000             lds   #$0000        ; start of ob>>
   1629  5+6   765B 36   36               pshu  d,x,y         ; saving 12 b>>
   1630  5+6   765D 36   36               pshu  d,x,y         ; DEPENDENCY >>
   1631  5+6   765F 36   36               pshu  d,x,y         ; DEPENDENCY >>
   1632        7661               CLO_2
   1633  5+10  7661 35   F6               puls  d,x,y,u,pc
   1634
   1635                                   INCLUD CHECKSPR
   1636                           * --------------------------------------->>
   1637                           * CheckSpritesRefresh
   1638                           * -------------------
   1639                           * Subroutine to determine if sprites are >>
   1640                           * Read Display Priority Structure (back t>>
   1641                           * priority: 0 - unregistred
   1642                           * priority: 1 - register non moving overl>>
   1643                           * priority; 2-8 - register moving sprite >>
   1644                           *
   1645                           * input REG : none
   1646                           * --------------------------------------->>
   1647
   1648        7663 0000          cur_priority            fdb   $00
   1649        7665 0000          cur_ptr_sub_obj_erase   fdb   $0000
   1650        7667 0000          cur_ptr_sub_obj_draw    fdb   $0000
   1651                            
   1652        7669               CheckSpritesRefresh
   1653
   1654        7669               CSR_Start
   1655  3     7669 CC   65AA             ldd   #Tbl_Sub_Object_Erase
   1656  6     766C FD   7665             std   cur_ptr_sub_obj_erase
   1657  3     766F CC   65EA             ldd   #Tbl_Sub_Object_Draw
   1658  6     7672 FD   7667             std   cur_ptr_sub_obj_draw
   1659  5     7675 B6   6137             lda   Glb_Cur_Wrk_Screen_Id      >>
   1660  3     7678 26   6E               bne   CSR_SetBuffer1
   1661                            
   1662        767A               CSR_SetBuffer0
   1663  2     767A 86   36               lda   #rsv_buffer_0              >>
   1664  5     767C B7   7758             sta   CSR_ProcessEachPriorityLeve>>
   1665        767F               CSR_P8B0
   1666  6     767F FE   64EE             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1667  3     7682 27   08               beq   CSR_P7B0
   1668  2     7684 86   08               lda   #$08
   1669  5     7686 B7   7663             sta   cur_priority
   1670  8     7689 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1671        768C               CSR_P7B0
   1672  6     768C FE   64EC             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1673  3     768F 27   08               beq   CSR_P6B0
   1674  2     7691 86   07               lda   #$07
   1675  5     7693 B7   7663             sta   cur_priority
   1676  8     7696 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1677        7699               CSR_P6B0
   1678  6     7699 FE   64EA             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1679  3     769C 27   08               beq   CSR_P5B0
   1680  2     769E 86   06               lda   #$06
   1681  5     76A0 B7   7663             sta   cur_priority
   1682  8     76A3 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1683        76A6               CSR_P5B0
   1684  6     76A6 FE   64E8             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1685  3     76A9 27   08               beq   CSR_P4B0
   1686  2     76AB 86   05               lda   #$05
   1687  5     76AD B7   7663             sta   cur_priority
   1688  8     76B0 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1689        76B3               CSR_P4B0
   1690  6     76B3 FE   64E6             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1691  3     76B6 27   08               beq   CSR_P3B0
   1692  2     76B8 86   04               lda   #$04
   1693  5     76BA B7   7663             sta   cur_priority
   1694  8     76BD BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1695        76C0               CSR_P3B0
   1696  6     76C0 FE   64E4             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1697  3     76C3 27   08               beq   CSR_P2B0
   1698  2     76C5 86   03               lda   #$03
   1699  5     76C7 B7   7663             sta   cur_priority
   1700  8     76CA BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1701        76CD               CSR_P2B0
   1702  6     76CD FE   64E2             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1703  3     76D0 27   08               beq   CSR_P1B0
   1704  2     76D2 86   02               lda   #$02
   1705  5     76D4 B7   7663             sta   cur_priority
   1706  8     76D7 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1707        76DA               CSR_P1B0
   1708  6     76DA FE   64E0             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1709  3     76DD 27   08               beq   CSR_rtsB0
   1710  2     76DF 86   01               lda   #$01
   1711  5     76E1 B7   7663             sta   cur_priority
   1712  8     76E4 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1713        76E7               CSR_rtsB0
   1714  5     76E7 39                    rts
   1715                            
   1716        76E8               CSR_SetBuffer1
   1717  2     76E8 86   48               lda   #rsv_buffer_1              >>
   1718  5     76EA B7   7758             sta   CSR_ProcessEachPriorityLeve>>
   1719        76ED               CSR_P8B1
   1720  6     76ED FE   6554             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1721  3     76F0 27   08               beq   CSR_P7B1
   1722  2     76F2 86   08               lda   #$08
   1723  5     76F4 B7   7663             sta   cur_priority
   1724  8     76F7 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1725        76FA               CSR_P7B1
   1726  6     76FA FE   6552             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1727  3     76FD 27   08               beq   CSR_P6B1
   1728  2     76FF 86   07               lda   #$07
   1729  5     7701 B7   7663             sta   cur_priority
   1730  8     7704 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1731        7707               CSR_P6B1
   1732  6     7707 FE   6550             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1733  3     770A 27   08               beq   CSR_P5B1
   1734  2     770C 86   06               lda   #$06
   1735  5     770E B7   7663             sta   cur_priority
   1736  8     7711 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1737        7714               CSR_P5B1
   1738  6     7714 FE   654E             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1739  3     7717 27   08               beq   CSR_P4B1
   1740  2     7719 86   05               lda   #$05
   1741  5     771B B7   7663             sta   cur_priority
   1742  8     771E BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1743        7721               CSR_P4B1
   1744  6     7721 FE   654C             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1745  3     7724 27   08               beq   CSR_P3B1
   1746  2     7726 86   04               lda   #$04
   1747  5     7728 B7   7663             sta   cur_priority
   1748  8     772B BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1749        772E               CSR_P3B1
   1750  6     772E FE   654A             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1751  3     7731 27   08               beq   CSR_P2B1
   1752  2     7733 86   03               lda   #$03
   1753  5     7735 B7   7663             sta   cur_priority
   1754  8     7738 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1755        773B               CSR_P2B1
   1756  6     773B FE   6548             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1757  3     773E 27   08               beq   CSR_P1B1
   1758  2     7740 86   02               lda   #$02
   1759  5     7742 B7   7663             sta   cur_priority
   1760  8     7745 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1761        7748               CSR_P1B1
   1762  6     7748 FE   6546             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1763  3     774B 27   08               beq   CSR_rtsB1
   1764  2     774D 86   01               lda   #$01
   1765  5     774F B7   7663             sta   cur_priority
   1766  8     7752 BD   7756             jsr   CSR_ProcessEachPriorityLeve>>
   1767        7755               CSR_rtsB1
   1768  5     7755 39                    rts
   1769
   1770        7756               CSR_ProcessEachPriorityLevel
   1771  4+1   7756 30   C8 10            leax  16,u                       >>
   1772                            
   1773        7759               CSR_CheckDelHide
   1774  4+1   7759 A6   42               lda   render_flags,u
   1775  2     775B 84   60               anda  #render_hide_mask!render_to>>
   1776  3     775D 26   2B               bne   CSR_DoNotDisplaySprite
   1777
   1778        775F               CSR_CheckRefresh
   1779  4+1   775F A6   C8 29            lda   rsv_render_flags,u
   1780  2     7762 84   01               anda  #rsv_render_checkrefresh_ma>>
   1781  6     7764 1026 00FE             lbne  CSR_CheckErase
   1782
   1783        7768               CSR_UpdSpriteImageBasedOnMirror
   1784  4+1   7768 A6   C8 29            lda   rsv_render_flags,u
   1785  2     776B 8A   01               ora   #rsv_render_checkrefresh_ma>>
   1786  4+1   776D A7   C8 29            sta   rsv_render_flags,u         >>
   1787                            
   1788  4+1   7770 A6   42               lda   render_flags,u             >>
   1789  2     7772 84   03               anda  #render_xmirror_mask!render>>
   1790  6+1   7774 10AE 4A               ldy   image_set,u
   1791  4+1   7777 E6   26               ldb   image_center_offset,y
   1792  4+1   7779 E7   C8 2C            stb   rsv_image_center_offset,u
   1793  4+1   777C E6   A6               ldb   a,y
   1794  4+1   777E 31   A5               leay  b,y                        >>
   1795  6+1   7780 10AF C8 2E            sty   rsv_image_subset,u
   1796                            
   1797        7784               CSR_CheckPlayFieldCoord
   1798  4+1   7784 A6   42               lda   render_flags,u
   1799  2     7786 84   10               anda  #render_playfieldcoord_mask>>
   1800  3     7788 27   2A               beq   CSR_CheckVerticalPosition  >>
   1801                            
   1802                                   * not yet implemented
   1803                                   * need to be updated with new alg>>
   1804                                   *ldd   x_pos,u
   1805                                   *subd  Glb_Camera_X_Pos
   1806                                   *ldy   rsv_mapping_frame,u
   1807                                   *addd  image_x_offset,y
   1808                                   *lbvs   CSR_SetOutOfRange        >>
   1809                                   *lbmi   CSR_SetOutOfRange        >>
   1810                                   *stb   x_pixel,u
   1811                                   *addb  image_x_size_l,y
   1812                                   *lbvs   CSR_SetOutOfRange        >>
   1813                                   *stb   rsv_x2_pixel,u
   1814                                   *cmpb  #screen_width
   1815                                   *lbgt   CSR_SetOutOfRange        >>
   1816
   1817                                   *ldd   y_pos,u
   1818                                   *subd  Glb_Camera_Y_Pos
   1819                                   *addd  image_y1_offset,y
   1820                                   *bvs   CSR_SetOutOfRange         >>
   1821                                   *bmi   CSR_SetOutOfRange         >>
   1822                                   *stb   y_pixel,u
   1823                                   *addb  image_y_size_l,y
   1824                                   *bvs   CSR_SetOutOfRange         >>
   1825                                   *stb   rsv_y2_pixel,u
   1826                                   *cmpb  #screen_bottom
   1827                                   *bhi   CSR_SetOutOfRange         >>
   1828                                   *lda   rsv_render_flags,u
   1829                                   *anda  #:rsv_render_outofrange_ma>>
   1830                                   *sta   rsv_render_flags,u
   1831                                   *bra   CSR_CheckErase
   1832                            
   1833        778A               CSR_DoNotDisplaySprite
   1834  4+1   778A A6   43               lda   priority,u
   1835  5     778C B1   7663             cmpa  cur_priority
   1836  3     778F 26   1C               bne   CSR_NextObject             >>
   1837                            
   1838  4+1   7791 A6   C8 29            lda   rsv_render_flags,u
   1839  2     7794 84   F9               anda  #:rsv_render_erasesprite_ma>>
   1840  4+1   7796 A7   C8 29            sta   rsv_render_flags,u
   1841                            
   1842  4+1   7799 E6   88 11            ldb   buf_prev_render_flags,x
   1843  3     779C 2A   0F               bpl   CSR_NextObject             >>
   1844                            
   1845  2     779E 8A   02               ora   #rsv_render_erasesprite_mas>>
   1846  4+1   77A0 A7   C8 29            sta   rsv_render_flags,u
   1847                            
   1848  7     77A3 10BE 7665             ldy   cur_ptr_sub_obj_erase      >>
   1849  5+3   77A7 EF   A1               stu   ,y++
   1850  7     77A9 10BF 7665             sty   cur_ptr_sub_obj_erase
   1851                            
   1852        77AD               CSR_NextObject
   1853  5+1   77AD EE   03               ldu   buf_priority_next_obj,x
   1854  6     77AF 1026 FFA3             lbne  CSR_ProcessEachPriorityLeve>>
   1855  5     77B3 39                    rts
   1856
   1857        77B4               CSR_CheckVerticalPosition
   1858  4+1   77B4 A6   C8 12            lda   x_pixel,u                  >>
   1859  4+1   77B7 A8   C8 2C            eora  rsv_image_center_offset,u  >>
   1860  2     77BA 84   01               anda  #$01                       >>
   1861  2     77BC 48                    asla                             >>
   1862  4+1   77BD E6   42               ldb   render_flags,u
   1863  2     77BF C4   04               andb  #render_overlay_mask       >>
   1864  3     77C1 27   01               beq   CSR_NoOverlay
   1865  2     77C3 4C                    inca
   1866        77C4               CSR_NoOverlay
   1867  4+1   77C4 E6   A6               ldb   a,y
   1868  3     77C6 27   08               beq   CSR_NoDefinedFrame
   1869  4+1   77C8 31   A5               leay  b,y                        >>
   1870  6+1   77CA 10AF C8 30            sty   rsv_mapping_frame,u
   1871  3     77CE 20   16               bra CSR_CVP_Continue
   1872                            
   1873        77D0               CSR_NoDefinedFrame
   1874  2     77D0 84   01               anda  #$01                       >>
   1875  4+1   77D2 E6   A6               ldb   a,y
   1876  3     77D4 27   08               beq   CSR_NoFrameFound           >>
   1877  4+1   77D6 31   A5               leay  b,y                        >>
   1878  6+1   77D8 10AF C8 30            sty   rsv_mapping_frame,u
   1879  3     77DC 20   08               bra CSR_CVP_Continue
   1880                            
   1881        77DE               CSR_NoFrameFound
   1882  4     77DE 108E 0000             ldy   #$0000
   1883  6+1   77E2 10AF C8 30            sty   rsv_mapping_frame,u
   1884
   1885        77E6               CSR_CVP_Continue
   1886  4+1   77E6 E6   C8 13            ldb   y_pixel,u                  >>
   1887  6+1   77E9 10AE C8 2E            ldy   rsv_image_subset,u
   1888  4+1   77ED EB   25               addb  image_subset_y1_offset,y
   1889  2     77EF C1   E3               cmpb  #screen_bottom
   1890  3     77F1 22   6B               bhi   CSR_SetOutOfRange
   1891  2     77F3 C1   1C               cmpb  #screen_top
   1892  3     77F5 25   67               blo   CSR_SetOutOfRange
   1893  4+1   77F7 E7   C8 33            stb   rsv_y1_pixel,u
   1894  6+1   77FA 10AE 4A               ldy   image_set,u
   1895  4+1   77FD EB   25               addb  image_y_size,y
   1896  2     77FF C1   E3               cmpb  #screen_bottom
   1897  3     7801 22   5B               bhi   CSR_SetOutOfRange
   1898  2     7803 C1   1C               cmpb  #screen_top
   1899  3     7805 25   57               blo   CSR_SetOutOfRange
   1900  4+1   7807 E7   C8 35            stb   rsv_y2_pixel,u
   1901  4+1   780A E1   C8 33            cmpb  rsv_y1_pixel,u             >>
   1902  3     780D 25   4F               blo   CSR_SetOutOfRange
   1903                            
   1904  4+1   780F A6   42               lda   render_flags,u             >>
   1905  2     7811 85   80               bita  #render_xloop_mask
   1906  3     7813 26   2B               bne   CSR_DontCheckXFrontier
   1907                            
   1908  4+1   7815 E6   C8 12            ldb   x_pixel,u
   1909  6+1   7818 10AE C8 2E            ldy   rsv_image_subset,u
   1910  4+1   781C EB   24               addb  image_subset_x1_offset,y
   1911  2     781E C1   CF               cmpb  #screen_right
   1912  3     7820 22   3C               bhi   CSR_SetOutOfRange
   1913  2     7822 C1   30               cmpb  #screen_left
   1914  3     7824 25   38               blo   CSR_SetOutOfRange
   1915  4+1   7826 E7   C8 32            stb   rsv_x1_pixel,u
   1916  6+1   7829 10AE 4A               ldy   image_set,u
   1917  4+1   782C EB   24               addb  image_x_size,y
   1918  2     782E C1   CF               cmpb  #screen_right
   1919  3     7830 22   2C               bhi   CSR_SetOutOfRange
   1920  2     7832 C1   30               cmpb  #screen_left
   1921  3     7834 25   28               blo   CSR_SetOutOfRange
   1922  4+1   7836 E7   C8 34            stb   rsv_x2_pixel,u
   1923  4+1   7839 E1   C8 32            cmpb  rsv_x1_pixel,u             >>
   1924  3     783C 25   20               blo   CSR_SetOutOfRange
   1925                            
   1926  3     783E 20   14               bra   CSR_DontCheckXFrontier_end
   1927                            
   1928        7840               CSR_DontCheckXFrontier
   1929  4+1   7840 E6   C8 12            ldb   x_pixel,u
   1930  6+1   7843 10AE C8 2E            ldy   rsv_image_subset,u
   1931  4+1   7847 EB   24               addb  image_subset_x1_offset,y
   1932  4+1   7849 E7   C8 32            stb   rsv_x1_pixel,u
   1933                            
   1934  6+1   784C 10AE 4A               ldy   image_set,u
   1935  4+1   784F EB   24               addb  image_x_size,y
   1936  4+1   7851 E7   C8 34            stb   rsv_x2_pixel,u
   1937
   1938        7854               CSR_DontCheckXFrontier_end
   1939  4+1   7854 A6   C8 29            lda   rsv_render_flags,u
   1940  2     7857 84   F7               anda  #:rsv_render_outofrange_mas>>
   1941  4+1   7859 A7   C8 29            sta   rsv_render_flags,u
   1942  3     785C 20   08               bra   CSR_CheckErase
   1943                            
   1944        785E               CSR_SetOutOfRange
   1945  4+1   785E A6   C8 29            lda   rsv_render_flags,u
   1946  2     7861 8A   08               ora   #rsv_render_outofrange_mask>>
   1947  4+1   7863 A7   C8 29            sta   rsv_render_flags,u
   1948
   1949        7866               CSR_CheckErase
   1950  6     7866 BF   7944             stx   CSR_CheckDraw+1
   1951  4+1   7869 A6   00               lda   buf_priority,x
   1952  5     786B B1   7663             cmpa  cur_priority
   1953  6     786E 1026 00D1             lbne  CSR_CheckDraw
   1954                            
   1955  7     7872 10BE 7665             ldy   cur_ptr_sub_obj_erase
   1956                            
   1957  4+1   7876 A6   C8 29            lda   rsv_render_flags,u
   1958  2     7879 84   08               anda  #rsv_render_outofrange_mask>>
   1959  3     787B 27   09               beq   CSR_CheckErase_InRange
   1960  4+1   787D A6   88 11            lda   buf_prev_render_flags,x
   1961  6     7880 102A 010E             lbpl  CSR_SetEraseDrawFalse      >>
   1962  3     7884 20   20               bra   CSR_SetEraseTrue
   1963                            
   1964        7886               CSR_CheckErase_InRange
   1965  4+1   7886 A6   88 11            lda   buf_prev_render_flags,x
   1966  6     7889 102A 00AE             lbpl  CSR_SetEraseFalse          >>
   1967  5+1   788D EC   C8 12            ldd   xy_pixel,u
   1968  2     7890 44                    lsra                             >>
   1969  7+1   7891 10A3 0B               cmpd  buf_prev_xy_pixel,x
   1970  3     7894 26   10               bne   CSR_SetEraseTrue           >>
   1971  5+1   7896 EC   C8 30            ldd   rsv_mapping_frame,u
   1972  7+1   7899 10A3 07               cmpd  buf_prev_mapping_frame,x
   1973  3     789C 26   08               bne   CSR_SetEraseTrue           >>
   1974  4+1   789E A6   43               lda   priority,u
   1975  4+1   78A0 A1   00               cmpa  buf_priority,x
   1976  3     78A2 26   02               bne   CSR_SetEraseTrue           >>
   1977  3     78A4 20   11               bra   CSR_SubEraseSpriteSearchIni>>
   1978                            
   1979        78A6               CSR_SetEraseTrue
   1980  4+1   78A6 A6   C8 29            lda   rsv_render_flags,u
   1981  2     78A9 8A   02               ora   #rsv_render_erasesprite_mas>>
   1982  4+1   78AB A7   C8 29            sta   rsv_render_flags,u
   1983                            
   1984  5+3   78AE EF   A1               stu   ,y++
   1985  7     78B0 10BF 7665             sty   cur_ptr_sub_obj_erase
   1986                            
   1987  5     78B4 16   008C             lbra   CSR_CheckDraw
   1988                            
   1989        78B7               CSR_SubEraseSpriteSearchInit
   1990
   1991                                   * search a collision with a sprit>>
   1992                                   * the sprite under should have to>>
   1993                                   * in this case it forces the refr>>
   1994                                   * as a sub loop, this should be o>>
   1995                                   * there are two lists because a s>>
   1996                                   * and displayed at another positi>>
   1997
   1998  6     78B7 BE   7665             ldx   cur_ptr_sub_obj_erase
   1999  5     78BA B6   6137             lda   Glb_Cur_Wrk_Screen_Id      >>
   2000  3     78BD 26   28               bne   CSR_SubEraseSearchB1
   2001                            
   2002        78BF               CSR_SubEraseSearchB0
   2003  4     78BF 8C   65AA             cmpx  #Tbl_Sub_Object_Erase
   2004  3     78C2 27   4B               beq   CSR_SubDrawSpriteSearchInit>>
   2005  6+3   78C4 10AE 83               ldy   ,--x
   2006                            
   2007        78C7               CSR_SubEraseCheckCollisionB0
   2008  5+1   78C7 EC   A8 43            ldd   rsv_prev_xy1_pixel_0,y     >>
   2009  4+1   78CA A1   C8 34            cmpa  rsv_x2_pixel,u             >>
   2010  3     78CD 22   F0               bhi   CSR_SubEraseSearchB0
   2011  4+1   78CF E1   C8 35            cmpb  rsv_y2_pixel,u             >>
   2012  3     78D2 22   EB               bhi   CSR_SubEraseSearchB0
   2013  5+1   78D4 EC   A8 45            ldd   rsv_prev_xy2_pixel_0,y     >>
   2014  4+1   78D7 A1   C8 32            cmpa  rsv_x1_pixel,u             >>
   2015  3     78DA 25   E3               blo   CSR_SubEraseSearchB0
   2016  4+1   78DC E1   C8 33            cmpb  rsv_y1_pixel,u             >>
   2017  3     78DF 25   DE               blo   CSR_SubEraseSearchB0
   2018                            
   2019  7     78E1 10BE 7665             ldy   cur_ptr_sub_obj_erase
   2020  3     78E5 20   BF               bra   CSR_SetEraseTrue           >>
   2021
   2022        78E7               CSR_SubEraseSearchB1
   2023  4     78E7 8C   65AA             cmpx  #Tbl_Sub_Object_Erase
   2024  3     78EA 27   23               beq   CSR_SubDrawSpriteSearchInit>>
   2025  6+3   78EC 10AE 83               ldy   ,--x
   2026                            
   2027        78EF               CSR_SubEraseCheckCollisionB1
   2028  5+1   78EF EC   A8 55            ldd   rsv_prev_xy1_pixel_1,y     >>
   2029  4+1   78F2 A1   C8 34            cmpa  rsv_x2_pixel,u             >>
   2030  3     78F5 22   F0               bhi   CSR_SubEraseSearchB1
   2031  4+1   78F7 E1   C8 35            cmpb  rsv_y2_pixel,u             >>
   2032  3     78FA 22   EB               bhi   CSR_SubEraseSearchB1
   2033  5+1   78FC EC   A8 57            ldd   rsv_prev_xy2_pixel_1,y     >>
   2034  4+1   78FF A1   C8 32            cmpa  rsv_x1_pixel,u             >>
   2035  3     7902 25   E3               blo   CSR_SubEraseSearchB1
   2036  4+1   7904 E1   C8 33            cmpb  rsv_y1_pixel,u             >>
   2037  3     7907 25   DE               blo   CSR_SubEraseSearchB1
   2038                            
   2039  7     7909 10BE 7665             ldy   cur_ptr_sub_obj_erase
   2040  3     790D 20   97               bra   CSR_SetEraseTrue           >>
   2041
   2042        790F               CSR_SubDrawSpriteSearchInit
   2043  6     790F BE   7667             ldx   cur_ptr_sub_obj_draw
   2044                            
   2045        7912               CSR_SubDrawSearch
   2046  4     7912 8C   65EA             cmpx  #Tbl_Sub_Object_Draw
   2047  3     7915 27   24               beq   CSR_SetEraseFalse          >>
   2048  6+3   7917 10AE 83               ldy   ,--x
   2049
   2050        791A               CSR_SubDrawCheckCollision
   2051  5+1   791A EC   A8 32            ldd   rsv_xy1_pixel,y            >>
   2052  4+1   791D A1   C8 34            cmpa  rsv_x2_pixel,u             >>
   2053  3     7920 22   F0               bhi   CSR_SubDrawSearch
   2054  4+1   7922 E1   C8 35            cmpb  rsv_y2_pixel,u             >>
   2055  3     7925 22   EB               bhi   CSR_SubDrawSearch
   2056  5+1   7927 EC   A8 34            ldd   rsv_xy2_pixel,y            >>
   2057  4+1   792A A1   C8 32            cmpa  rsv_x1_pixel,u             >>
   2058  3     792D 25   E3               blo   CSR_SubDrawSearch
   2059  4+1   792F E1   C8 33            cmpb  rsv_y1_pixel,u             >>
   2060  3     7932 25   DE               blo   CSR_SubDrawSearch
   2061                            
   2062  7     7934 10BE 7665             ldy   cur_ptr_sub_obj_erase
   2063  5     7938 16   FF6B             lbra  CSR_SetEraseTrue           >>
   2064
   2065        793B               CSR_SetEraseFalse
   2066  4+1   793B A6   C8 29            lda   rsv_render_flags,u
   2067  2     793E 84   FD               anda  #:rsv_render_erasesprite_ma>>
   2068  4+1   7940 A7   C8 29            sta   rsv_render_flags,u
   2069                            
   2070        7943               CSR_CheckDraw
   2071  3     7943 8E   FFFF             ldx   #$FFFF                     >>
   2072  4+1   7946 A6   43               lda   priority,u
   2073  5     7948 B1   7663             cmpa  cur_priority
   2074  6     794B 1026 FE5E             lbne  CSR_NextObject
   2075                            
   2076  7     794F 10BE 7667             ldy   cur_ptr_sub_obj_draw
   2077                            
   2078  4+1   7953 A6   C8 29            lda   rsv_render_flags,u
   2079  2     7956 84   08               anda  #rsv_render_outofrange_mask>>
   2080  3     7958 26   40               bne   CSR_SetDrawFalse           >>
   2081  5+1   795A EC   C8 30            ldd   rsv_mapping_frame,u
   2082  3     795D 27   3B               beq   CSR_SetDrawFalse           >>
   2083  4+1   795F A6   42               lda   render_flags,u
   2084  2     7961 84   20               anda  #render_hide_mask
   2085  3     7963 26   35               bne   CSR_SetDrawFalse           >>
   2086                            
   2087        7965               CSR_SetDrawTrue
   2088  4+1   7965 A6   C8 29            lda   rsv_render_flags,u
   2089  2     7968 8A   04               ora   #rsv_render_displaysprite_m>>
   2090  4+1   796A A7   C8 29            sta   rsv_render_flags,u
   2091                            
   2092  2     796D 85   02               bita  #rsv_render_erasesprite_mas>>
   2093  3     796F 27   02               beq   CSR_SDT1
   2094  3     7971 20   07               bra   CSR_SDT2
   2095        7973               CSR_SDT1
   2096  4+1   7973 E6   88 11            ldb   buf_prev_render_flags,x
   2097  3     7976 2B   0D               bmi   CSR_SetHide
   2098  3     7978 20   05               bra   CSR_SDT3
   2099        797A               CSR_SDT2
   2100  4+1   797A E6   88 11            ldb   buf_prev_render_flags,x
   2101  3     797D 2A   06               bpl   CSR_SetHide
   2102        797F               CSR_SDT3
   2103  5+3   797F EF   A1               stu   ,y++
   2104  7     7981 10BF 7667             sty   cur_ptr_sub_obj_draw       >>
   2105
   2106        7985               CSR_SetHide
   2107  4+1   7985 A6   42               lda   render_flags,u
   2108  2     7987 8A   20               ora   #render_hide_mask          >>
   2109  4+1   7989 A7   42               sta   render_flags,u
   2110                            
   2111  5+1   798B EE   03               ldu   buf_priority_next_obj,x
   2112  6     798D 1026 FDC5             lbne  CSR_ProcessEachPriorityLeve>>
   2113  5     7991 39                    rts
   2114
   2115        7992               CSR_SetEraseDrawFalse
   2116  4+1   7992 A6   C8 29            lda   rsv_render_flags,u
   2117  2     7995 84   FD               anda  #:rsv_render_erasesprite_ma>>
   2118  4+1   7997 A7   C8 29            sta   rsv_render_flags,u
   2119
   2120        799A               CSR_SetDrawFalse
   2121  4+1   799A A6   C8 29            lda   rsv_render_flags,u
   2122  2     799D 84   FB               anda  #:rsv_render_displaysprite_>>
   2123  4+1   799F A7   C8 29            sta   rsv_render_flags,u
   2124                            
   2125  5+1   79A2 EE   03               ldu   buf_priority_next_obj,x
   2126  6     79A4 1026 FDAE             lbne   CSR_ProcessEachPriorityLev>>
   2127  5     79A8 39                    rts
   2128
   2129
   2130                                   INCLUD ERASESPR
   2131                           * --------------------------------------->>
   2132                           * EraseSprites
   2133                           * ------------
   2134                           * Subroutine to erase sprites on screen
   2135                           * Read Display Priority Structure (front >>
   2136                           * priority: 0 - unregistred
   2137                           * priority: 1 - register non moving overl>>
   2138                           * priority; 2-8 - register moving sprite >>
   2139                           *
   2140                           * input REG : none
   2141                           * --------------------------------------->>
   2142                            
   2143        79A9               EraseSprites
   2144
   2145        79A9               ESP_Start
   2146  5     79A9 B6   6137             lda   Glb_Cur_Wrk_Screen_Id      >>
   2147  3     79AC 26   69               bne   ESP_P1B1
   2148
   2149        79AE               ESP_P1B0
   2150  6     79AE FE   64F2             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   2151  3     79B1 27   08               beq   ESP_P2B0
   2152  2     79B3 86   01               lda   #$01
   2153  5     79B5 B7   7A84             sta   ESP_CheckPriorityB0+1
   2154  8     79B8 BD   7A80             jsr   ESP_ProcessEachPriorityLeve>>
   2155        79BB               ESP_P2B0
   2156  6     79BB FE   64F4             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   2157  3     79BE 27   08               beq   ESP_P3B0
   2158  2     79C0 86   02               lda   #$02
   2159  5     79C2 B7   7A84             sta   ESP_CheckPriorityB0+1
   2160  8     79C5 BD   7A80             jsr   ESP_ProcessEachPriorityLeve>>
   2161        79C8               ESP_P3B0
   2162  6     79C8 FE   64F6             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   2163  3     79CB 27   08               beq   ESP_P4B0
   2164  2     79CD 86   03               lda   #$03
   2165  5     79CF B7   7A84             sta   ESP_CheckPriorityB0+1
   2166  8     79D2 BD   7A80             jsr   ESP_ProcessEachPriorityLeve>>
   2167        79D5               ESP_P4B0
   2168  6     79D5 FE   64F8             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   2169  3     79D8 27   08               beq   ESP_P5B0
   2170  2     79DA 86   04               lda   #$04
   2171  5     79DC B7   7A84             sta   ESP_CheckPriorityB0+1
   2172  8     79DF BD   7A80             jsr   ESP_ProcessEachPriorityLeve>>
   2173        79E2               ESP_P5B0
   2174  6     79E2 FE   64FA             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   2175  3     79E5 27   08               beq   ESP_P6B0
   2176  2     79E7 86   05               lda   #$05
   2177  5     79E9 B7   7A84             sta   ESP_CheckPriorityB0+1
   2178  8     79EC BD   7A80             jsr   ESP_ProcessEachPriorityLeve>>
   2179        79EF               ESP_P6B0
   2180  6     79EF FE   64FC             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   2181  3     79F2 27   08               beq   ESP_P7B0
   2182  2     79F4 86   06               lda   #$06
   2183  5     79F6 B7   7A84             sta   ESP_CheckPriorityB0+1
   2184  8     79F9 BD   7A80             jsr   ESP_ProcessEachPriorityLeve>>
   2185        79FC               ESP_P7B0
   2186  6     79FC FE   64FE             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   2187  3     79FF 27   08               beq   ESP_P8B0
   2188  2     7A01 86   07               lda   #$07
   2189  5     7A03 B7   7A84             sta   ESP_CheckPriorityB0+1
   2190  8     7A06 BD   7A80             jsr   ESP_ProcessEachPriorityLeve>>
   2191        7A09               ESP_P8B0
   2192  6     7A09 FE   6500             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   2193  3     7A0C 27   08               beq   ESP_rtsB0
   2194  2     7A0E 86   08               lda   #$08
   2195  5     7A10 B7   7A84             sta   ESP_CheckPriorityB0+1
   2196  8     7A13 BD   7A80             jsr   ESP_ProcessEachPriorityLeve>>
   2197        7A16               ESP_rtsB0
   2198  5     7A16 39                    rts
   2199                            
   2200        7A17               ESP_P1B1
   2201  6     7A17 FE   6558             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   2202  3     7A1A 27   08               beq   ESP_P2B1
   2203  2     7A1C 86   01               lda   #$01
   2204  5     7A1E B7   7AD5             sta   ESP_CheckPriorityB1+1
   2205  8     7A21 BD   7AD1             jsr   ESP_ProcessEachPriorityLeve>>
   2206        7A24               ESP_P2B1
   2207  6     7A24 FE   655A             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   2208  3     7A27 27   08               beq   ESP_P3B1
   2209  2     7A29 86   02               lda   #$02
   2210  5     7A2B B7   7AD5             sta   ESP_CheckPriorityB1+1
   2211  8     7A2E BD   7AD1             jsr   ESP_ProcessEachPriorityLeve>>
   2212        7A31               ESP_P3B1
   2213  6     7A31 FE   655C             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   2214  3     7A34 27   08               beq   ESP_P4B1
   2215  2     7A36 86   03               lda   #$03
   2216  5     7A38 B7   7AD5             sta   ESP_CheckPriorityB1+1
   2217  8     7A3B BD   7AD1             jsr   ESP_ProcessEachPriorityLeve>>
   2218        7A3E               ESP_P4B1
   2219  6     7A3E FE   655E             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   2220  3     7A41 27   08               beq   ESP_P5B1
   2221  2     7A43 86   04               lda   #$04
   2222  5     7A45 B7   7AD5             sta   ESP_CheckPriorityB1+1
   2223  8     7A48 BD   7AD1             jsr   ESP_ProcessEachPriorityLeve>>
   2224        7A4B               ESP_P5B1
   2225  6     7A4B FE   6560             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   2226  3     7A4E 27   08               beq   ESP_P6B1
   2227  2     7A50 86   05               lda   #$05
   2228  5     7A52 B7   7AD5             sta   ESP_CheckPriorityB1+1
   2229  8     7A55 BD   7AD1             jsr   ESP_ProcessEachPriorityLeve>>
   2230        7A58               ESP_P6B1
   2231  6     7A58 FE   6562             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   2232  3     7A5B 27   08               beq   ESP_P7B1
   2233  2     7A5D 86   06               lda   #$06
   2234  5     7A5F B7   7AD5             sta   ESP_CheckPriorityB1+1
   2235  8     7A62 BD   7AD1             jsr   ESP_ProcessEachPriorityLeve>>
   2236        7A65               ESP_P7B1
   2237  6     7A65 FE   6564             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   2238  3     7A68 27   08               beq   ESP_P8B1
   2239  2     7A6A 86   07               lda   #$07
   2240  5     7A6C B7   7AD5             sta   ESP_CheckPriorityB1+1
   2241  8     7A6F BD   7AD1             jsr   ESP_ProcessEachPriorityLeve>>
   2242        7A72               ESP_P8B1
   2243  6     7A72 FE   6566             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   2244  3     7A75 27   08               beq   ESP_rtsB1
   2245  2     7A77 86   08               lda   #$08
   2246  5     7A79 B7   7AD5             sta   ESP_CheckPriorityB1+1
   2247  8     7A7C BD   7AD1             jsr   ESP_ProcessEachPriorityLeve>>
   2248        7A7F               ESP_rtsB1
   2249  5     7A7F 39                    rts
   2250
   2251                           * *******
   2252                           * BUFFER0
   2253                           * *******
   2254
   2255        7A80               ESP_ProcessEachPriorityLevelB0
   2256  4+1   7A80 A6   C8 36            lda   rsv_priority_0,u
   2257                            
   2258        7A83               ESP_CheckPriorityB0
   2259  2     7A83 81   00               cmpa  #0                         >>
   2260  3     7A85 26   44               bne   ESP_NextObjectB0           >>
   2261                            
   2262        7A87               ESP_UnsetCheckRefreshB0
   2263  4+1   7A87 A6   C8 29            lda   rsv_render_flags,u
   2264  4+1   7A8A E6   42               ldb   render_flags,u
   2265  2     7A8C C4   08               andb  #render_motionless_mask
   2266  3     7A8E 26   05               bne   ESP_CheckEraseB0
   2267  2     7A90 84   FE               anda  #:rsv_render_checkrefresh_m>>
   2268  4+1   7A92 A7   C8 29            sta   rsv_render_flags,u
   2269                            
   2270        7A95               ESP_CheckEraseB0
   2271  2     7A95 84   02               anda  #rsv_render_erasesprite_mas>>
   2272  3     7A97 27   32               beq   ESP_NextObjectB0
   2273  4+1   7A99 E6   C8 47            ldb   rsv_prev_render_flags_0,u
   2274  2     7A9C C4   01               andb  #rsv_prev_render_overlay_ma>>
   2275  3     7A9E 26   23               bne   ESP_UnsetOnScreenFlagB0
   2276                            
   2277        7AA0               ESP_CallEraseRoutineB0
   2278  6     7AA0 FF   7AB4             stu   ESP_CallEraseRoutineB0_00+1>>
   2279  5+1   7AA3 AE   C8 3D            ldx   rsv_prev_mapping_frame_0,u >>
   2280  4+1   7AA6 A6   03               lda   page_erase_routine,x
   2281  5     7AA8 B7   E7E5             sta   $E7E5                      >>
   2282  5+1   7AAB EE   C8 3F            ldu   rsv_bgdata_0,u             >>
   2283  7+4   7AAE AD   98 04            jsr   [erase_routine,x]          >>
   2284  4+0   7AB1 31   C4               leay  ,u                         >>
   2285        7AB3               ESP_CallEraseRoutineB0_00
   2286  3     7AB3 CE   0000             ldu   #$0000                     >>
   2287  5+1   7AB6 EC   C8 3F            ldd   rsv_bgdata_0,u             >>
   2288  4     7AB9 83   0010             subd  #16
   2289  2     7ABC C4   C0               andb  #256-cell_size             >>
   2290  6     7ABE 1F   01               tfr   d,x                        >>
   2291                            
   2292        7AC0               ESP_FreeEraseBufferB0
   2293  8     7AC0 BD   7E47             jsr   BgBufferFree               >>
   2294                            
   2295        7AC3               ESP_UnsetOnScreenFlagB0
   2296  4+1   7AC3 A6   C8 47            lda   rsv_prev_render_flags_0,u
   2297  2     7AC6 84   7F               anda  #:rsv_prev_render_onscreen_>>
   2298  4+1   7AC8 A7   C8 47            sta   rsv_prev_render_flags_0,u
   2299
   2300        7ACB               ESP_NextObjectB0
   2301  5+1   7ACB EE   C8 37            ldu   rsv_priority_prev_obj_0,u
   2302  3     7ACE 26   B0               bne   ESP_ProcessEachPriorityLeve>>
   2303  5     7AD0 39                    rts
   2304
   2305                           * *******
   2306                           * BUFFER1
   2307                           * *******
   2308                            
   2309        7AD1               ESP_ProcessEachPriorityLevelB1
   2310  4+1   7AD1 A6   C8 48            lda   rsv_priority_1,u
   2311                            
   2312        7AD4               ESP_CheckPriorityB1
   2313  2     7AD4 81   00               cmpa  #0                         >>
   2314  3     7AD6 26   44               bne   ESP_NextObjectB1           >>
   2315                            
   2316        7AD8               ESP_UnsetCheckRefreshB1
   2317  4+1   7AD8 A6   C8 29            lda   rsv_render_flags,u
   2318  4+1   7ADB E6   42               ldb   render_flags,u
   2319  2     7ADD C4   08               andb  #render_motionless_mask
   2320  3     7ADF 26   05               bne   ESP_CheckEraseB1
   2321  2     7AE1 84   FE               anda  #:rsv_render_checkrefresh_m>>
   2322  4+1   7AE3 A7   C8 29            sta   rsv_render_flags,u
   2323                            
   2324        7AE6               ESP_CheckEraseB1
   2325  2     7AE6 84   02               anda  #rsv_render_erasesprite_mas>>
   2326  3     7AE8 27   32               beq   ESP_NextObjectB1
   2327  4+1   7AEA E6   C8 59            ldb   rsv_prev_render_flags_1,u
   2328  2     7AED C4   01               andb  #rsv_prev_render_overlay_ma>>
   2329  3     7AEF 26   23               bne   ESP_UnsetOnScreenFlagB1
   2330                            
   2331        7AF1               ESP_CallEraseRoutineB1
   2332  6     7AF1 FF   7B05             stu   ESP_CallEraseRoutineB1_00+1>>
   2333  5+1   7AF4 AE   C8 4F            ldx   rsv_prev_mapping_frame_1,u >>
   2334  4+1   7AF7 A6   03               lda   page_erase_routine,x
   2335  5     7AF9 B7   E7E5             sta   $E7E5                      >>
   2336  5+1   7AFC EE   C8 51            ldu   rsv_bgdata_1,u             >>
   2337  7+4   7AFF AD   98 04            jsr   [erase_routine,x]          >>
   2338  4+0   7B02 31   C4               leay  ,u                         >>
   2339        7B04               ESP_CallEraseRoutineB1_00
   2340  3     7B04 CE   0000             ldu   #$0000                     >>
   2341  5+1   7B07 EC   C8 51            ldd   rsv_bgdata_1,u             >>
   2342  4     7B0A 83   0010             subd  #16
   2343  2     7B0D C4   C0               andb  #256-cell_size             >>
   2344  6     7B0F 1F   01               tfr   d,x                        >>
   2345                            
   2346        7B11               ESP_FreeEraseBufferB1
   2347  8     7B11 BD   7E47             jsr   BgBufferFree               >>
   2348                            
   2349        7B14               ESP_UnsetOnScreenFlagB1
   2350  4+1   7B14 A6   C8 59            lda   rsv_prev_render_flags_1,u
   2351  2     7B17 84   7F               anda  #:rsv_prev_render_onscreen_>>
   2352  4+1   7B19 A7   C8 59            sta   rsv_prev_render_flags_1,u
   2353                            
   2354        7B1C               ESP_NextObjectB1
   2355  5+1   7B1C EE   C8 49            ldu   rsv_priority_prev_obj_1,u
   2356  3     7B1F 26   B0               bne   ESP_ProcessEachPriorityLeve>>
   2357  5     7B21 39                    rts
   2358
   2359                                   INCLUD UNSETDSP
   2360                           * --------------------------------------->>
   2361                           * UnsetDisplayPriority
   2362                           * --------------------
   2363                           * Subroutine to unset sprites in Display >>
   2364                           * Read Lst_Priority_Unset_0/1
   2365                           *
   2366                           * input REG : none
   2367                           * --------------------------------------->>
   2368                            
   2369        7B22               UnsetDisplayPriority
   2370
   2371        7B22               UDP_Start
   2372  5     7B22 B6   6137             lda   Glb_Cur_Wrk_Screen_Id      >>
   2373  3     7B25 26   6D               bne   UDP_B1
   2374                            
   2375        7B27               UDP_B0
   2376  3     7B27 8E   6504             ldx   #Lst_Priority_Unset_0+2
   2377                            
   2378        7B2A               UDP_CheckEndB0
   2379  7     7B2A BC   6502             cmpx  Lst_Priority_Unset_0       >>
   2380  3     7B2D 26   07               bne   UDP_CheckPrioPrevB0
   2381                            
   2382        7B2F               UDP_InitListB0
   2383  3     7B2F 8E   6504             ldx   #Lst_Priority_Unset_0+2
   2384  6     7B32 BF   6502             stx   Lst_Priority_Unset_0       >>
   2385  5     7B35 39                    rts
   2386                            
   2387        7B36               UDP_CheckPrioPrevB0
   2388  5+3   7B36 EE   81               ldu   ,x++
   2389  5+1   7B38 EC   C8 37            ldd   rsv_priority_prev_obj_0,u
   2390  3     7B3B 26   11               bne   UDP_ChainPrevB0
   2391                            
   2392  4+1   7B3D A6   C8 36            lda   rsv_priority_0,u
   2393  2     7B40 48                    lsla
   2394  4     7B41 108E 64DE             ldy   #Tbl_Priority_First_Entry_0>>
   2395  4+1   7B45 31   A6               leay  a,y
   2396  5+1   7B47 EC   C8 39            ldd   rsv_priority_next_obj_0,u
   2397  5+0   7B4A ED   A4               std   ,y
   2398  3     7B4C 20   0A               bra   UDP_CheckPrioNextB0
   2399                            
   2400        7B4E               UDP_ChainPrevB0
   2401  5+1   7B4E EC   C8 39            ldd   rsv_priority_next_obj_0,u
   2402  6+1   7B51 10AE C8 37            ldy   rsv_priority_prev_obj_0,u
   2403  5+1   7B55 ED   A8 39            std   rsv_priority_next_obj_0,y
   2404
   2405        7B58               UDP_CheckPrioNextB0
   2406  5+1   7B58 EC   C8 39            ldd   rsv_priority_next_obj_0,u
   2407  3     7B5B 26   11               bne   UDP_ChainNextB0
   2408
   2409  4+1   7B5D A6   C8 36            lda   rsv_priority_0,u
   2410  2     7B60 48                    lsla
   2411  4     7B61 108E 64F0             ldy   #Tbl_Priority_Last_Entry_0
   2412  4+1   7B65 31   A6               leay  a,y
   2413  5+1   7B67 EC   C8 37            ldd   rsv_priority_prev_obj_0,u
   2414  5+0   7B6A ED   A4               std   ,y
   2415  3     7B6C 20   0A               bra   UDP_CheckDeleteB0
   2416                            
   2417        7B6E               UDP_ChainNextB0
   2418  5+1   7B6E EC   C8 37            ldd   rsv_priority_prev_obj_0,u
   2419  6+1   7B71 10AE C8 39            ldy   rsv_priority_next_obj_0,u
   2420  5+1   7B75 ED   A8 37            std   rsv_priority_prev_obj_0,y
   2421                            
   2422        7B78               UDP_CheckDeleteB0
   2423  4+1   7B78 A6   42               lda   render_flags,u
   2424  2     7B7A 84   40               anda  #render_todelete_mask
   2425  3     7B7C 27   0F               beq   UDP_SetNewPrioB0
   2426  4+1   7B7E A6   C8 47            lda   rsv_prev_render_flags_0,u
   2427  3     7B81 2B   0A               bmi   UDP_SetNewPrioB0
   2428  4+1   7B83 A6   C8 59            lda   rsv_prev_render_flags_1,u
   2429  3     7B86 2B   05               bmi   UDP_SetNewPrioB0
   2430  8     7B88 BD   7630             jsr   ClearObj
   2431  3     7B8B 20   9D               bra   UDP_CheckEndB0
   2432                            
   2433        7B8D               UDP_SetNewPrioB0
   2434  4+1   7B8D A6   43               lda   priority,u
   2435  4+1   7B8F A7   C8 36            sta   rsv_priority_0,u
   2436  3     7B92 20   96               bra   UDP_CheckEndB0
   2437
   2438        7B94               UDP_B1
   2439  3     7B94 8E   656A             ldx   #Lst_Priority_Unset_1+2
   2440                            
   2441        7B97               UDP_CheckEndB1
   2442  7     7B97 BC   6568             cmpx  Lst_Priority_Unset_1       >>
   2443  3     7B9A 26   07               bne   UDP_CheckPrioPrevB1
   2444                            
   2445        7B9C               UDP_InitListB1
   2446  3     7B9C 8E   656A             ldx   #Lst_Priority_Unset_1+2
   2447  6     7B9F BF   6568             stx   Lst_Priority_Unset_1       >>
   2448  5     7BA2 39                    rts
   2449                            
   2450        7BA3               UDP_CheckPrioPrevB1
   2451  5+3   7BA3 EE   81               ldu   ,x++
   2452  5+1   7BA5 EC   C8 49            ldd   rsv_priority_prev_obj_1,u
   2453  3     7BA8 26   11               bne   UDP_ChainPrevB1
   2454                            
   2455  4+1   7BAA A6   C8 48            lda   rsv_priority_1,u
   2456  2     7BAD 48                    lsla
   2457  4     7BAE 108E 6544             ldy   #Tbl_Priority_First_Entry_1>>
   2458  4+1   7BB2 31   A6               leay  a,y
   2459  5+1   7BB4 EC   C8 4B            ldd   rsv_priority_next_obj_1,u
   2460  5+0   7BB7 ED   A4               std   ,y
   2461  3     7BB9 20   0A               bra   UDP_CheckPrioNextB1
   2462                            
   2463        7BBB               UDP_ChainPrevB1
   2464  5+1   7BBB EC   C8 4B            ldd   rsv_priority_next_obj_1,u
   2465  6+1   7BBE 10AE C8 49            ldy   rsv_priority_prev_obj_1,u
   2466  5+1   7BC2 ED   A8 4B            std   rsv_priority_next_obj_1,y
   2467
   2468        7BC5               UDP_CheckPrioNextB1
   2469  5+1   7BC5 EC   C8 4B            ldd   rsv_priority_next_obj_1,u
   2470  3     7BC8 26   11               bne   UDP_ChainNextB1
   2471
   2472  4+1   7BCA A6   C8 48            lda   rsv_priority_1,u
   2473  2     7BCD 48                    lsla
   2474  4     7BCE 108E 6556             ldy   #Tbl_Priority_Last_Entry_1
   2475  4+1   7BD2 31   A6               leay  a,y
   2476  5+1   7BD4 EC   C8 49            ldd   rsv_priority_prev_obj_1,u
   2477  5+0   7BD7 ED   A4               std   ,y
   2478  3     7BD9 20   0A               bra   UDP_CheckDeleteB1
   2479                            
   2480        7BDB               UDP_ChainNextB1
   2481  5+1   7BDB EC   C8 49            ldd   rsv_priority_prev_obj_1,u
   2482  6+1   7BDE 10AE C8 4B            ldy   rsv_priority_next_obj_1,u
   2483  5+1   7BE2 ED   A8 49            std   rsv_priority_prev_obj_1,y
   2484                            
   2485        7BE5               UDP_CheckDeleteB1
   2486  4+1   7BE5 A6   42               lda   render_flags,u
   2487  2     7BE7 84   40               anda  #render_todelete_mask
   2488  3     7BE9 27   0F               beq   UDP_SetNewPrioB1
   2489  4+1   7BEB A6   C8 47            lda   rsv_prev_render_flags_0,u
   2490  3     7BEE 2B   0A               bmi   UDP_SetNewPrioB1
   2491  4+1   7BF0 A6   C8 59            lda   rsv_prev_render_flags_1,u
   2492  3     7BF3 2B   05               bmi   UDP_SetNewPrioB1
   2493  8     7BF5 BD   7630             jsr   ClearObj
   2494  3     7BF8 20   9D               bra   UDP_CheckEndB1
   2495                            
   2496        7BFA               UDP_SetNewPrioB1
   2497  4+1   7BFA A6   43               lda   priority,u
   2498  4+1   7BFC A7   C8 48            sta   rsv_priority_1,u
   2499  3     7BFF 20   96               bra   UDP_CheckEndB1
   2500
   2501                                   INCLUD DRAWSPR
   2502                           * --------------------------------------->>
   2503                           * DrawSprites
   2504                           * ------------
   2505                           * Subroutine to draw sprites on screen
   2506                           * Read Display Priority Structure (back t>>
   2507                           * priority: 0 - unregistred
   2508                           * priority: 1 - register non moving overl>>
   2509                           * priority; 2-8 - register moving sprite >>
   2510                           *
   2511                           * input REG : none
   2512                           * --------------------------------------->>
   2513                            
   2514        7C01               DrawSprites
   2515
   2516        7C01               DRS_Start
   2517  5     7C01 B6   6137             lda   Glb_Cur_Wrk_Screen_Id      >>
   2518  3     7C04 26   41               bne   DRS_P8B1
   2519                            
   2520        7C06               DRS_P8B0
   2521  6     7C06 BE   64EE             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2522  3     7C09 27   03               beq   DRS_P7B0
   2523  8     7C0B BD   7C88             jsr   DRS_ProcessEachPriorityLeve>>
   2524        7C0E               DRS_P7B0
   2525  6     7C0E BE   64EC             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2526  3     7C11 27   03               beq   DRS_P6B0
   2527  8     7C13 BD   7C88             jsr   DRS_ProcessEachPriorityLeve>>
   2528        7C16               DRS_P6B0
   2529  6     7C16 BE   64EA             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2530  3     7C19 27   03               beq   DRS_P5B0
   2531  8     7C1B BD   7C88             jsr   DRS_ProcessEachPriorityLeve>>
   2532        7C1E               DRS_P5B0
   2533  6     7C1E BE   64E8             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2534  3     7C21 27   03               beq   DRS_P4B0
   2535  8     7C23 BD   7C88             jsr   DRS_ProcessEachPriorityLeve>>
   2536        7C26               DRS_P4B0
   2537  6     7C26 BE   64E6             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2538  3     7C29 27   03               beq   DRS_P3B0
   2539  8     7C2B BD   7C88             jsr   DRS_ProcessEachPriorityLeve>>
   2540        7C2E               DRS_P3B0
   2541  6     7C2E BE   64E4             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2542  3     7C31 27   03               beq   DRS_P2B0
   2543  8     7C33 BD   7C88             jsr   DRS_ProcessEachPriorityLeve>>
   2544        7C36               DRS_P2B0
   2545  6     7C36 BE   64E2             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2546  3     7C39 27   03               beq   DRS_P1B0
   2547  8     7C3B BD   7C88             jsr   DRS_ProcessEachPriorityLeve>>
   2548        7C3E               DRS_P1B0
   2549  6     7C3E BE   64E0             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2550  3     7C41 27   03               beq   DRS_rtsB0
   2551  8     7C43 BD   7C88             jsr   DRS_ProcessEachPriorityLeve>>
   2552        7C46               DRS_rtsB0
   2553  5     7C46 39                    rts
   2554                            
   2555        7C47               DRS_P8B1
   2556  6     7C47 BE   6554             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2557  3     7C4A 27   03               beq   DRS_P7B1
   2558  8     7C4C BD   7D57             jsr   DRS_ProcessEachPriorityLeve>>
   2559        7C4F               DRS_P7B1
   2560  6     7C4F BE   6552             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2561  3     7C52 27   03               beq   DRS_P6B1
   2562  8     7C54 BD   7D57             jsr   DRS_ProcessEachPriorityLeve>>
   2563        7C57               DRS_P6B1
   2564  6     7C57 BE   6550             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2565  3     7C5A 27   03               beq   DRS_P5B1
   2566  8     7C5C BD   7D57             jsr   DRS_ProcessEachPriorityLeve>>
   2567        7C5F               DRS_P5B1
   2568  6     7C5F BE   654E             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2569  3     7C62 27   03               beq   DRS_P4B1
   2570  8     7C64 BD   7D57             jsr   DRS_ProcessEachPriorityLeve>>
   2571        7C67               DRS_P4B1
   2572  6     7C67 BE   654C             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2573  3     7C6A 27   03               beq   DRS_P3B1
   2574  8     7C6C BD   7D57             jsr   DRS_ProcessEachPriorityLeve>>
   2575        7C6F               DRS_P3B1
   2576  6     7C6F BE   654A             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2577  3     7C72 27   03               beq   DRS_P2B1
   2578  8     7C74 BD   7D57             jsr   DRS_ProcessEachPriorityLeve>>
   2579        7C77               DRS_P2B1
   2580  6     7C77 BE   6548             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2581  3     7C7A 27   03               beq   DRS_P1B1
   2582  8     7C7C BD   7D57             jsr   DRS_ProcessEachPriorityLeve>>
   2583        7C7F               DRS_P1B1
   2584  6     7C7F BE   6546             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2585  3     7C82 27   03               beq   DRS_rtsB1
   2586  8     7C84 BD   7D57             jsr   DRS_ProcessEachPriorityLeve>>
   2587        7C87               DRS_rtsB1
   2588  5     7C87 39                    rts
   2589
   2590        7C88               DRS_ProcessEachPriorityLevelB0
   2591  4+1   7C88 A6   88 29            lda   rsv_render_flags,x
   2592  2     7C8B 84   04               anda  #rsv_render_displaysprite_m>>
   2593  3     7C8D 27   6A               beq   DRS_NextObjectB0
   2594  4+1   7C8F A6   88 47            lda   rsv_prev_render_flags_0,x
   2595  3     7C92 2B   65               bmi   DRS_NextObjectB0
   2596  4+1   7C94 A6   02               lda   render_flags,x
   2597  2     7C96 84   04               anda  #render_overlay_mask
   2598  3     7C98 26   67               bne   DRS_DrawWithoutBackupB0
   2599  5+1   7C9A EE   88 30            ldu   rsv_mapping_frame,x
   2600  4+1   7C9D A6   46               lda   erase_nb_cell,u
   2601  8     7C9F BD   7DF4             jsr   BgBufferAlloc              >>
   2602  5     7CA2 108C 0000             cmpy  #$0000                     >>
   2603  3     7CA6 27   51               beq   DRS_NextObjectB0           >>
   2604  5+1   7CA8 EC   88 12            ldd   xy_pixel,x                 >>
   2605  4+1   7CAB A0   88 2C            suba  rsv_image_center_offset,x
   2606  8     7CAE BD   7D25             jsr   DRS_XYToAddress
   2607                           *        ldu   rsv_image_subset,x
   2608                           *        stu   rsv_prev_image_subset_0,x
   2609  5+1   7CB1 EE   88 30            ldu   rsv_mapping_frame,x        >>
   2610  5+1   7CB4 EF   88 3D            stu   rsv_prev_mapping_frame_0,x >>
   2611  4+1   7CB7 A6   40               lda   page_draw_routine,u
   2612  5     7CB9 B7   E7E5             sta   $E7E5                      >>
   2613  6     7CBC BF   7CCD             stx   DRS_dyn3B0+1               >>
   2614  5+1   7CBF AE   41               ldx   draw_routine,u
   2615  4+0   7CC1 33   A4               leau  ,y                         >>
   2616  4     7CC3 108E 613E             ldy   #Glb_Sprite_Screen_Pos_Part>>
   2617  6     7CC7 FC   613C             ldd   Glb_Sprite_Screen_Pos_Part1>>
   2618  7+0   7CCA AD   84               jsr   ,x                         >>
   2619        7CCC               DRS_dyn3B0
   2620  3     7CCC 8E   0000             ldx   #$0000                     >>
   2621  5+1   7CCF EF   88 3F            stu   rsv_bgdata_0,x             >>
   2622  5+1   7CD2 EC   88 12            ldd   xy_pixel,x                 >>
   2623  2     7CD5 44                    lsra                             >>
   2624  5+1   7CD6 ED   88 41            std   rsv_prev_xy_pixel_0,x      >>
   2625  5+1   7CD9 EC   88 32            ldd   rsv_xy1_pixel,x            >>
   2626  5+1   7CDC ED   88 43            std   rsv_prev_xy1_pixel_0,x     >>
   2627  5+1   7CDF EC   88 34            ldd   rsv_xy2_pixel,x            >>
   2628  5+1   7CE2 ED   88 45            std   rsv_prev_xy2_pixel_0,x     >>
   2629  4+1   7CE5 A6   88 47            lda   rsv_prev_render_flags_0,x
   2630  2     7CE8 8A   80               ora   #rsv_prev_render_onscreen_m>>
   2631  4+1   7CEA E6   02               ldb   render_flags,x
   2632  2     7CEC C5   04               bitb  #render_overlay_mask
   2633  3     7CEE 27   04               beq   DRS_NoOverlayB0
   2634  2     7CF0 8A   01               ora   #rsv_prev_render_overlay_ma>>
   2635  3     7CF2 20   02               bra   DRS_UpdateRenderFlagB0
   2636                            
   2637        7CF4               DRS_NoOverlayB0
   2638  2     7CF4 84   FE               anda   #:rsv_prev_render_overlay_>>
   2639
   2640        7CF6               DRS_UpdateRenderFlagB0
   2641  4+1   7CF6 A7   88 47            sta   rsv_prev_render_flags_0,x  >>
   2642                            
   2643        7CF9               DRS_NextObjectB0
   2644  5+1   7CF9 AE   88 39            ldx   rsv_priority_next_obj_0,x
   2645  6     7CFC 1026 FF88             lbne  DRS_ProcessEachPriorityLeve>>
   2646  5     7D00 39                    rts
   2647                            
   2648        7D01               DRS_DrawWithoutBackupB0
   2649  5+1   7D01 EC   88 12            ldd   xy_pixel,x                 >>
   2650  4+1   7D04 A0   88 2C            suba  rsv_image_center_offset,x
   2651  8     7D07 BD   7D25             jsr   DRS_XYToAddress
   2652  5+1   7D0A EE   88 30            ldu   rsv_mapping_frame,x      ; >>
   2653  5+1   7D0D EF   88 3D            stu   rsv_prev_mapping_frame_0,x >>
   2654  4+1   7D10 A6   40               lda   page_draw_routine,u
   2655  5     7D12 B7   E7E5             sta   $E7E5                      >>
   2656  6     7D15 BF   7CCD             stx   DRS_dyn3B0+1               >>
   2657  5+1   7D18 AE   41               ldx   draw_routine,u
   2658  4     7D1A 108E 613E             ldy   #Glb_Sprite_Screen_Pos_Part>>
   2659  6     7D1E FC   613C             ldd   Glb_Sprite_Screen_Pos_Part1>>
   2660  7+0   7D21 AD   84               jsr   ,x                         >>
   2661  3     7D23 20   A7               bra   DRS_dyn3B0
   2662
   2663                           *****************************************>>
   2664                           * x_pixel and y_pixel coordinate system
   2665                           * x coordinates:
   2666                           *    - off-screen left 00-2F (0-47)
   2667                           *    - on screen 30-CF (48-207)
   2668                           *    - off-screen right D0-FF (208-255)
   2669                           *
   2670                           * y coordinates:
   2671                           *    - off-screen top 00-1B (0-27)
   2672                           *    - on screen 1C-E3 (28-227)
   2673                           *    - off-screen bottom E4-FF (228-255)
   2674                           *****************************************>>
   2675
   2676        7D25               DRS_XYToAddress
   2677  2     7D25 80   30               suba  #$30
   2678  3     7D27 24   03               bcc   DRS_XYToAddressPositive
   2679  2     7D29 80   60               suba  #$60                       >>
   2680  2     7D2B 5A                    decb
   2681        7D2C               DRS_XYToAddressPositive
   2682  2     7D2C C0   1C               subb  #$1C                       >>
   2683  2     7D2E 44                    lsra                             >>
   2684  2     7D2F 44                    lsra                             >>
   2685  3     7D30 25   12               bcs   DRS_XYToAddressRAM2First   >>
   2686        7D32               DRS_XYToAddressRAM1First
   2687  5     7D32 B7   7D3A             sta   DRS_dyn1+2
   2688  2     7D35 86   28               lda   #$28                       >>
   2689  11    7D37 3D                    mul
   2690        7D38               DRS_dyn1
   2691  4     7D38 C3   0000             addd  #$0000                     >>
   2692  6     7D3B FD   613E             std   Glb_Sprite_Screen_Pos_Part2>>
   2693  2     7D3E 8A   20               ora   #$20                       >>
   2694  6     7D40 FD   613C             std   Glb_Sprite_Screen_Pos_Part1>>
   2695  5     7D43 39                    rts
   2696        7D44               DRS_XYToAddressRAM2First
   2697  5     7D44 B7   7D4C             sta   DRS_dyn2+2
   2698  2     7D47 86   28               lda   #$28                       >>
   2699  11    7D49 3D                    mul
   2700        7D4A               DRS_dyn2
   2701  4     7D4A C3   2000             addd  #$2000                     >>
   2702  6     7D4D FD   613E             std   Glb_Sprite_Screen_Pos_Part2>>
   2703  4     7D50 83   1FFF             subd  #$1FFF
   2704  6     7D53 FD   613C             std   Glb_Sprite_Screen_Pos_Part1>>
   2705  5     7D56 39                    rts
   2706                            
   2707        7D57               DRS_ProcessEachPriorityLevelB1
   2708  4+1   7D57 A6   88 29            lda   rsv_render_flags,x
   2709  2     7D5A 84   04               anda  #rsv_render_displaysprite_m>>
   2710  3     7D5C 27   6A               beq   DRS_NextObjectB1
   2711  4+1   7D5E A6   88 59            lda   rsv_prev_render_flags_1,x
   2712  3     7D61 2B   65               bmi   DRS_NextObjectB1
   2713  4+1   7D63 A6   02               lda   render_flags,x
   2714  2     7D65 84   04               anda  #render_overlay_mask
   2715  3     7D67 26   67               bne   DRS_DrawWithoutBackupB1
   2716  5+1   7D69 EE   88 30            ldu   rsv_mapping_frame,x
   2717  4+1   7D6C A6   46               lda   erase_nb_cell,u
   2718  8     7D6E BD   7DF4             jsr   BgBufferAlloc              >>
   2719  5     7D71 108C 0000             cmpy  #$0000                     >>
   2720  3     7D75 27   51               beq   DRS_NextObjectB1           >>
   2721  5+1   7D77 EC   88 12            ldd   xy_pixel,x                 >>
   2722  4+1   7D7A A0   88 2C            suba  rsv_image_center_offset,x
   2723  8     7D7D BD   7D25             jsr   DRS_XYToAddress
   2724                                   *ldu   rsv_image_subset,x
   2725                                   *stu   rsv_prev_image_subset_1,x
   2726  5+1   7D80 EE   88 30            ldu   rsv_mapping_frame,x      ; >>
   2727  5+1   7D83 EF   88 4F            stu   rsv_prev_mapping_frame_1,x >>
   2728  4+1   7D86 A6   40               lda   page_draw_routine,u
   2729  5     7D88 B7   E7E5             sta   $E7E5                      >>
   2730  6     7D8B BF   7D9C             stx   DRS_dyn3B1+1               >>
   2731  5+1   7D8E AE   41               ldx   draw_routine,u
   2732  4+0   7D90 33   A4               leau  ,y                         >>
   2733  4     7D92 108E 613E             ldy   #Glb_Sprite_Screen_Pos_Part>>
   2734  6     7D96 FC   613C             ldd   Glb_Sprite_Screen_Pos_Part1>>
   2735  7+0   7D99 AD   84               jsr   ,x                         >>
   2736        7D9B               DRS_dyn3B1
   2737  3     7D9B 8E   0000             ldx   #$0000                     >>
   2738  5+1   7D9E EF   88 51            stu   rsv_bgdata_1,x             >>
   2739  5+1   7DA1 EC   88 12            ldd   xy_pixel,x                 >>
   2740  2     7DA4 44                    lsra                             >>
   2741  5+1   7DA5 ED   88 53            std   rsv_prev_xy_pixel_1,x      >>
   2742  5+1   7DA8 EC   88 32            ldd   rsv_xy1_pixel,x            >>
   2743  5+1   7DAB ED   88 55            std   rsv_prev_xy1_pixel_1,x     >>
   2744  5+1   7DAE EC   88 34            ldd   rsv_xy2_pixel,x            >>
   2745  5+1   7DB1 ED   88 57            std   rsv_prev_xy2_pixel_1,x     >>
   2746  4+1   7DB4 A6   88 59            lda   rsv_prev_render_flags_1,x
   2747  2     7DB7 8A   80               ora   #rsv_prev_render_onscreen_m>>
   2748  4+1   7DB9 E6   02               ldb   render_flags,x
   2749  2     7DBB C5   04               bitb  #render_overlay_mask
   2750  3     7DBD 27   04               beq   DRS_NoOverlayB1
   2751  2     7DBF 8A   01               ora   #rsv_prev_render_overlay_ma>>
   2752  3     7DC1 20   02               bra   DRS_UpdateRenderFlagB1
   2753                            
   2754        7DC3               DRS_NoOverlayB1
   2755  2     7DC3 84   FE               anda   #:rsv_prev_render_overlay_>>
   2756
   2757        7DC5               DRS_UpdateRenderFlagB1
   2758  4+1   7DC5 A7   88 59            sta   rsv_prev_render_flags_1,x  >>
   2759                            
   2760        7DC8               DRS_NextObjectB1
   2761  5+1   7DC8 AE   88 4B            ldx   rsv_priority_next_obj_1,x
   2762  6     7DCB 1026 FF88             lbne  DRS_ProcessEachPriorityLeve>>
   2763  5     7DCF 39                    rts
   2764                            
   2765        7DD0               DRS_DrawWithoutBackupB1
   2766  5+1   7DD0 EC   88 12            ldd   xy_pixel,x                 >>
   2767  4+1   7DD3 A0   88 2C            suba  rsv_image_center_offset,x
   2768  8     7DD6 BD   7D25             jsr   DRS_XYToAddress
   2769  5+1   7DD9 EE   88 30            ldu   rsv_mapping_frame,x      ; >>
   2770  5+1   7DDC EF   88 4F            stu   rsv_prev_mapping_frame_1,x >>
   2771  4+1   7DDF A6   40               lda   page_draw_routine,u
   2772  5     7DE1 B7   E7E5             sta   $E7E5                      >>
   2773  6     7DE4 BF   7D9C             stx   DRS_dyn3B1+1               >>
   2774  5+1   7DE7 AE   41               ldx   draw_routine,u
   2775  4     7DE9 108E 613E             ldy   #Glb_Sprite_Screen_Pos_Part>>
   2776  6     7DED FC   613C             ldd   Glb_Sprite_Screen_Pos_Part1>>
   2777  7+0   7DF0 AD   84               jsr   ,x                         >>
   2778  3     7DF2 20   A7               bra   DRS_dyn3B1
   2779
   2780                                   INCLUD BGBALLOC
   2781                           * --------------------------------------->>
   2782                           * BgBufferAlloc
   2783                           * -------------
   2784                           * Subroutine to allocate memory into back>>
   2785                           *
   2786                           * input  REG : [a] number of requested ce>>
   2787                           * output REG : [y] cell_end or 0000 if no>>
   2788                           * --------------------------------------->>
   2789
   2790        7DF4               BgBufferAlloc
   2791  5+3   7DF4 34   14               pshs  b,x
   2792  5     7DF6 F6   6137             ldb   Glb_Cur_Wrk_Screen_Id      >>
   2793  3     7DF9 26   09               bne   BBA1                       >>
   2794                            
   2795        7DFB               BBA0
   2796  3     7DFB 8E   6140             ldx   #Lst_FreeCellFirstEntry_0  >>
   2797  7     7DFE 10BE 6140             ldy   Lst_FreeCellFirstEntry_0   >>
   2798  3     7E02 20   07               bra   BBA_Next
   2799                            
   2800        7E04               BBA1
   2801  3     7E04 8E   630F             ldx   #Lst_FreeCellFirstEntry_1  >>
   2802  7     7E07 10BE 630F             ldy   Lst_FreeCellFirstEntry_1   >>
   2803                            
   2804        7E0B               BBA_Next
   2805  3     7E0B 27   38               beq   BBA_rts                    >>
   2806  4+1   7E0D A1   20               cmpa  nb_cells,y                 >>
   2807  3     7E0F 27   09               beq   BBA_FitCell                >>
   2808  3     7E11 23   12               bls   BBA_DivideCell             >>
   2809  4+1   7E13 30   25               leax  next_entry,y               >>
   2810  6+1   7E15 10AE 25               ldy   next_entry,y               >>
   2811  3     7E18 20   F1               bra   BBA_Next
   2812                            
   2813        7E1A               BBA_FitCell
   2814  5+1   7E1A EC   25               ldd   next_entry,y
   2815  5+0   7E1C ED   84               std   ,x                         >>
   2816  6+1   7E1E 6F   20               clr   nb_cells,y                 >>
   2817  6+1   7E20 10AE 23               ldy   cell_end,y                 >>
   2818  3     7E23 20   20               bra   BBA_rts
   2819                            
   2820        7E25               BBA_DivideCell
   2821  5     7E25 B7   7E2B             sta   BBA_dyn+1
   2822  4+1   7E28 E6   20               ldb   nb_cells,y
   2823        7E2A               BBA_dyn
   2824  2     7E2A C0   00               subb  #$00                       >>
   2825  4+1   7E2C E7   20               stb   nb_cells,y                 >>
   2826                            
   2827  2     7E2E C6   40               ldb   #cell_size
   2828  11    7E30 3D                    mul
   2829  2     7E31 88   FF               eora  #$FF                       >>
   2830  2     7E33 C8   FF               eorb  #$FF                       >>
   2831  4     7E35 C3   0001             addd  #$01
   2832  5+1   7E38 AE   23               ldx   cell_end,y
   2833  6     7E3A BF   7E43             stx   cell_end_return+2
   2834  4+4   7E3D 30   8B               leax  d,x                        >>
   2835  5+1   7E3F AF   23               stx   cell_end,y                 >>
   2836        7E41               cell_end_return
   2837  4     7E41 108E 0000             ldy   #$0000
   2838        7E45               BBA_rts
   2839  5+5   7E45 35   94               puls  b,x,pc
   2840
   2841                                   INCLUD BGBFREE
   2842                           * --------------------------------------->>
   2843                           * BgBufferFree
   2844                           * ------------
   2845                           * Subroutine to free memory from backgrou>>
   2846                           *
   2847                           * input  REG : [x] cell_start
   2848                           *              [y] cell_end
   2849                           * output REG : none
   2850                           * --------------------------------------->>
   2851
   2852        7E47               BgBufferFree
   2853  5+4   7E47 34   46               pshs  d,u
   2854  3     7E49 CC   0000             ldd   #$0000
   2855  6     7E4C FD   7EA9             std   BBF_SetNewEntryNextentry+1 >>
   2856  5     7E4F F6   6137             ldb   Glb_Cur_Wrk_Screen_Id      >>
   2857  3     7E52 26   16               bne   BBF1                       >>
   2858                            
   2859        7E54               BBF0
   2860  5+1   7E54 EE   C8 3D            ldu   rsv_prev_mapping_frame_0,u >>
   2861  4+1   7E57 A6   46               lda   erase_nb_cell,u            >>
   2862  3     7E59 CE   6140             ldu   #Lst_FreeCellFirstEntry_0
   2863  6     7E5C FF   7EAE             stu   BBF_SetNewEntryPrevLink+1  >>
   2864  3     7E5F CE   6142             ldu   #Lst_FreeCell_0            >>
   2865  6     7E62 FF   7E97             stu   BBF_AddNewEntryAtEnd+1     >>
   2866  6     7E65 FE   6140             ldu   Lst_FreeCellFirstEntry_0   >>
   2867  3     7E68 20   14               bra   BBF_Next
   2868                            
   2869        7E6A               BBF1
   2870  5+1   7E6A EE   C8 4F            ldu   rsv_prev_mapping_frame_1,u
   2871  4+1   7E6D A6   46               lda   erase_nb_cell,u
   2872  3     7E6F CE   630F             ldu   #Lst_FreeCellFirstEntry_1
   2873  6     7E72 FF   7EAE             stu   BBF_SetNewEntryPrevLink+1
   2874  3     7E75 CE   6311             ldu   #Lst_FreeCell_1
   2875  6     7E78 FF   7E97             stu   BBF_AddNewEntryAtEnd+1
   2876  6     7E7B FE   630F             ldu   Lst_FreeCellFirstEntry_1
   2877                            
   2878        7E7E               BBF_Next
   2879  3     7E7E 27   16               beq   BBF_AddNewEntryAtEnd       >>
   2880  7+1   7E80 10AC 41               cmpy  cell_start,u               >>
   2881  3     7E83 27   2D               beq   BBF_ExpandAtStart          >>
   2882  3     7E85 22   4C               bhi   BBF_ExpandAtEnd            >>
   2883  5+1   7E87 EE   45               ldu   next_entry,u               >>
   2884  6     7E89 1F   30               tfr   u,d
   2885  4     7E8B C3   0005             addd  #next_entry                >>
   2886  6     7E8E FD   7EAE             std   BBF_SetNewEntryPrevLink+1
   2887  3     7E91 20   EB               bra   BBF_Next
   2888
   2889        7E93               BBF_AddNewEntry
   2890  6     7E93 FF   7EA9             stu   BBF_SetNewEntryNextentry+1
   2891        7E96               BBF_AddNewEntryAtEnd
   2892  3     7E96 CE   0000             ldu   #$0000                     >>
   2893        7E99               BBF_FindFreeSlot
   2894  4+1   7E99 E6   40               ldb   nb_cells,u                 >>
   2895  3     7E9B 27   04               beq   BBF_SetNewEntry            >>
   2896  4+1   7E9D 33   47               leau  entry_size,u               >>
   2897  3     7E9F 20   F8               bra   BBF_FindFreeSlot           >>
   2898        7EA1               BBF_SetNewEntry
   2899  4+1   7EA1 A7   40               sta   nb_cells,u                 >>
   2900  5+1   7EA3 AF   41               stx   cell_start,u               >>
   2901  6+1   7EA5 10AF 43               sty   cell_end,u                 >>
   2902        7EA8               BBF_SetNewEntryNextentry
   2903  3     7EA8 8E   0000             ldx   #$0000                     >>
   2904  5+1   7EAB AF   45               stx   next_entry,u               >>
   2905        7EAD               BBF_SetNewEntryPrevLink
   2906  6     7EAD FF   FFFF             stu   $FFFF                      >>
   2907  3     7EB0 20   2C               bra   BBF_rts
   2908
   2909        7EB2               BBF_ExpandAtStart
   2910  5+1   7EB2 AF   41               stx   cell_start,u
   2911  4+1   7EB4 AB   40               adda  nb_cells,u
   2912  4+1   7EB6 A7   40               sta   nb_cells,u
   2913  6+1   7EB8 10AE 45               ldy   next_entry,u
   2914  3     7EBB 27   21               beq   BBF_rts
   2915        7EBD               BBF_Join
   2916  6+1   7EBD AC   23               cmpx  cell_end,y
   2917  3     7EBF 26   1D               bne   BBF_rts
   2918  5+1   7EC1 EC   21               ldd   cell_start,y
   2919  5+1   7EC3 ED   41               std   cell_start,u
   2920  4+1   7EC5 A6   20               lda   nb_cells,y
   2921  4+1   7EC7 AB   40               adda  nb_cells,u
   2922  4+1   7EC9 A7   40               sta   nb_cells,u
   2923  6+1   7ECB 6F   20               clr   nb_cells,y                 >>
   2924  5+1   7ECD EC   25               ldd   next_entry,y
   2925  5+1   7ECF ED   45               std   next_entry,u               >>
   2926  3     7ED1 20   0B               bra   BBF_rts
   2927
   2928        7ED3               BBF_ExpandAtEnd
   2929  6+1   7ED3 AC   43               cmpx  cell_end,u
   2930  3     7ED5 26   BC               bne   BBF_AddNewEntry
   2931  6+1   7ED7 10AF 43               sty   cell_end,u
   2932  4+1   7EDA AB   40               adda  nb_cells,u
   2933  4+1   7EDC A7   40               sta   nb_cells,u
   2934                            
   2935        7EDE               BBF_rts
   2936  5+6   7EDE 35   C6               puls  d,u,pc
   2937
   2938                                   INCLUD CLRCARTM
   2939                           *****************************************>>
   2940                           * Clear memory in cardtridge area
   2941                           *****************************************>>
   2942
   2943        7EE0               ClearCartMem *@globals
   2944  5+3   7EE0 34   48               pshs  u,dp
   2945  7     7EE2 10FF 7F10             sts   ClearCartMem_3+2
   2946  4     7EE6 10CE 4000             lds   #$4000
   2947  4+0   7EEA 33   84               leau  ,x
   2948  4+0   7EEC 31   84               leay  ,x
   2949  6     7EEE 1F   10               tfr   x,d
   2950  6     7EF0 1F   8B               tfr   a,dp
   2951        7EF2               ClearCartMem_2
   2952  5+9   7EF2 34   7E               pshs  u,y,x,dp,b,a
   2953  5+9   7EF4 34   7E               pshs  u,y,x,dp,b,a
   2954  5+9   7EF6 34   7E               pshs  u,y,x,dp,b,a
   2955  5+9   7EF8 34   7E               pshs  u,y,x,dp,b,a
   2956  5+9   7EFA 34   7E               pshs  u,y,x,dp,b,a
   2957  5+9   7EFC 34   7E               pshs  u,y,x,dp,b,a
   2958  5+9   7EFE 34   7E               pshs  u,y,x,dp,b,a
   2959  5+9   7F00 34   7E               pshs  u,y,x,dp,b,a
   2960  5+9   7F02 34   7E               pshs  u,y,x,dp,b,a
   2961  5+7   7F04 34   78               pshs  u,y,x,dp
   2962  5     7F06 118C 0010             cmps  #$0010
   2963  3     7F0A 26   E6               bne   ClearCartMem_2
   2964  4+0   7F0C 33   E4               leau  ,s
   2965        7F0E               ClearCartMem_3
   2966  4     7F0E 10CE 0000             lds   #$0000        ; start of me>>
   2967  5+6   7F12 36   36               pshu  d,x,y         ; saving 12 b>>
   2968  5+6   7F14 36   36               pshu  d,x,y         ; DEPENDENCY >>
   2969  5+4   7F16 36   16               pshu  d,x
   2970  5+5   7F18 35   C8               puls  dp,u,pc
   2971
   2972
   2973                                   INCLUD UPDTPAL
   2974                           * --------------------------------------->>
   2975                           * UpdatePalette
   2976                           * -------------
   2977                           * Subroutine to update palette
   2978                           * should be called quickly after WaitVBL
   2979                           *
   2980                           * input REG : none
   2981                           * reset REG : [d] [x]
   2982                           * --------------------------------------->>
   2983
   2984        7F1A 00            cpt             fcb   $00
   2985        7F1B FF            Refresh_palette fcb   $FF            *@gl>>
   2986        7F1C 7F1E          Cur_palette     fdb   Dyn_palette    *@gl>>
   2987        7F1E               Dyn_palette     rmb   $20,0          *@gl>>
   2988        7F3E               Black_palette   rmb   $20,0          *@gl>>
   2989        7F5E FF0F          White_palette   fdb   $ff0f          *@gl>>
   2990        7F60 FF0F                          fdb   $ff0f
   2991        7F62 FF0F                          fdb   $ff0f
   2992        7F64 FF0F                          fdb   $ff0f
   2993        7F66 FF0F                          fdb   $ff0f
   2994        7F68 FF0F                          fdb   $ff0f
   2995        7F6A FF0F                          fdb   $ff0f
   2996        7F6C FF0F                          fdb   $ff0f
   2997        7F6E FF0F                          fdb   $ff0f
   2998        7F70 FF0F                          fdb   $ff0f
   2999        7F72 FF0F                          fdb   $ff0f
   3000        7F74 FF0F                          fdb   $ff0f
   3001        7F76 FF0F                          fdb   $ff0f
   3002        7F78 FF0F                          fdb   $ff0f
   3003        7F7A FF0F                          fdb   $ff0f
   3004        7F7C FF0F                          fdb   $ff0f
   3005
   3006        7F7E               UpdatePalette *@globals
   3007  7     7F7E 7D   7F1B             tst   Refresh_palette
   3008  3     7F81 26   22               bne   UPP_return
   3009  6     7F83 BE   7F1C            ldx   Cur_palette
   3010  7     7F86 7F   7F1A            clr   cpt                      * c>>
   3011  5     7F89 B6   7F1A             lda   cpt                        >>
   3012        7F8C               UPP_SetColor
   3013  2     7F8C 48                   asla                              >>
   3014  5     7F8D B7   E7DB            sta   $E7DB                       >>
   3015  5+3   7F90 EC   81              ldd   ,x++                        >>
   3016  5     7F92 B7   E7DA            sta   $E7DA                       >>
   3017  5     7F95 F7   E7DA            stb   $E7DA                    * s>>
   3018  7     7F98 7C   7F1A            inc   cpt                         >>
   3019  5     7F9B B6   7F1A            lda   cpt
   3020  2     7F9E 81   10              cmpa  #$10                     * t>>
   3021  3     7FA0 26   EA              bne   UPP_SetColor             * o>>
   3022  7     7FA2 73   7F1B            com   Refresh_palette          * u>>
   3023        7FA5               UPP_return
   3024  5     7FA5 39                    rts
   3025
   3026
    184                                   *INCLUD PLAYPCM * A rendre dynami>>
    185                                   *INCLUD PSGLIB  * A rendre dynami>>
    186                            
    187                           * =======================================>>
    188                           * Level Specific Generated Data
    189                           * IMG and ANI should be in first position>>
    190                           * =======================================>>
   3027                                   INCLUD IMAGEIDX
   3028                           * Generated Code
   3029
   3030        7FA6               Img_SonicRun *@globals
   3031        7FA6 07 14 21 2E           fcb   $07,$14,$21,$2E,$0E,$23,$03>>
               7FAA 0E 23 03 06
               7FAE 00 00 00 F9
               7FB2 F1 06
   3032        7FB4 D7 BD 05 DD           fcb   $D7,$BD,$05,$DD,$FE,$04,$06>>
               7FB8 FE 04 06 00
               7FBC 00 00 F8 F1
               7FC0 06 D2
   3033        7FC2 AD 05 DC 48           fcb   $AD,$05,$DC,$48,$04,$06,$00>>
               7FC6 04 06 00 00
               7FCA 00 F9 ED 06
               7FCE CD AC
   3034        7FD0 05 DA 92 04           fcb   $05,$DA,$92,$04,$06,$00,$00>>
               7FD4 06 00 00 00
               7FD8 F9 ED 06 C8
               7FDC AC 05
   3035        7FDE D8 DA 04              fcb   $D8,$DA,$04
   3036        7FE1               Img_SonicBreathe *@globals
   3037        7FE1 07 10 19 22           fcb   $07,$10,$19,$22,$11,$23,$03>>
               7FE5 11 23 03 00
               7FE9 06 00 00 F7
               7FED F0 05
   3038        7FEF D4 E9 00 06           fcb   $D4,$E9,$00,$06,$00,$00,$F7>>
               7FF3 00 00 F7 F0
               7FF7 05 D0 FC 00
               7FFB 06 00
   3039        7FFD 00 F7 EE 05           fcb   $00,$F7,$EE,$05,$CD,$12,$00>>
               8001 CD 12 00 06
               8005 00 00 F7 EE
               8009 05 C9
   3040        800B 28                    fcb   $28
   3041        800C               Img_SonicWalk *@globals
   3042        800C 07 1B 2F 43           fcb   $07,$1B,$2F,$43,$13,$27,$03>>
               8010 13 27 03 06
               8014 00 0D 00 F7
               8018 EC 06
   3043        801A C2 D6 05 C7           fcb   $C2,$D6,$05,$C7,$29,$05,$06>>
               801E 29 05 06 BD
               8022 52 05 C5 3B
               8026 04 06
   3044        8028 00 0D 00 F5           fcb   $00,$0D,$00,$F5,$EC,$06,$B7>>
               802C EC 06 B7 7F
               8030 05 C3 43 04
               8034 06 B1
   3045        8036 F4 05 C1 52           fcb   $F4,$05,$C1,$52,$04,$06,$00>>
               803A 04 06 00 0D
               803E 00 F7 EE 06
               8042 AC 24
   3046        8044 05 BF 54 05           fcb   $05,$BF,$54,$05,$06,$A6,$97>>
               8048 06 A6 97 05
               804C BD 60 04 06
               8050 00 0D
   3047        8052 00 F7 EE 06           fcb   $00,$F7,$EE,$06,$A0,$C7,$05>>
               8056 A0 C7 05 BB
               805A 60 05 07 A0
               805E 00 05
   3048        8060 B9 66 04              fcb   $B9,$66,$04
   3049        8063               Img_SonicFall *@globals
   3050        8063 07 13 1F 2B           fcb   $07,$13,$1F,$2B,$13,$1A,$03>>
               8067 13 1A 03 00
               806B 06 00 09 F6
               806F F5 05
   3051        8071 B6 56 05 B3           fcb   $B6,$56,$05,$B3,$09,$00,$06>>
               8075 09 00 06 00
               8079 09 F6 F5 05
               807D AF FB
   3052        807F 05 AC A8 00           fcb   $05,$AC,$A8,$00,$06,$00,$09>>
               8083 06 00 09 F6
               8087 F2 05 A9 A1
               808B 05 A6
   3053        808D 54 00 06 00           fcb   $54,$00,$06,$00,$09,$F6,$F2>>
               8091 09 F6 F2 05
               8095 A3 4D 05 A0
               8099 00
   3054
   3055                                   INCLUD ANIMSCPT
   3056                           * Generated Code
   3057
   3058
   3059                                   INCLUD OBJINDEX
   3060                           * Generated Code
   3061
   3062        809A               Obj_Index_Page
   3063        809A 00                    fcb   $00
   3064        809B 06                    fcb   $06
   3065        809C 00                    fcb   $00
   3066        809D 00                    fcb   $00
   3067        809E 00                    fcb   $00
   3068        809F 00                    fcb   $00
   3069        80A0 00                    fcb   $00
   3070        80A1 00                    fcb   $00
   3071        80A2 00                    fcb   $00
   3072        80A3 00                    fcb   $00
   3073        80A4 00                    fcb   $00
   3074        80A5 00                    fcb   $00
   3075        80A6 00                    fcb   $00
   3076        80A7 00                    fcb   $00
   3077        80A8 00                    fcb   $00
   3078        80A9 00                    fcb   $00
   3079        80AA 00                    fcb   $00
   3080        80AB 00                    fcb   $00
   3081        80AC 00                    fcb   $00
   3082        80AD 00                    fcb   $00
   3083        80AE 00                    fcb   $00
   3084        80AF 00                    fcb   $00
   3085        80B0 00                    fcb   $00
   3086        80B1 00                    fcb   $00
   3087        80B2 00                    fcb   $00
   3088        80B3 00                    fcb   $00
   3089        80B4 00                    fcb   $00
   3090        80B5 00                    fcb   $00
   3091        80B6 00                    fcb   $00
   3092        80B7 00                    fcb   $00
   3093        80B8 00                    fcb   $00
   3094        80B9 00                    fcb   $00
   3095        80BA 00                    fcb   $00
   3096        80BB 00                    fcb   $00
   3097        80BC 00                    fcb   $00
   3098        80BD 00                    fcb   $00
   3099        80BE 00                    fcb   $00
   3100        80BF 00                    fcb   $00
   3101        80C0 00                    fcb   $00
   3102        80C1 00                    fcb   $00
   3103        80C2 00                    fcb   $00
   3104        80C3 00                    fcb   $00
   3105        80C4 00                    fcb   $00
   3106        80C5 00                    fcb   $00
   3107        80C6 00                    fcb   $00
   3108        80C7 00                    fcb   $00
   3109        80C8 00                    fcb   $00
   3110        80C9 00                    fcb   $00
   3111        80CA 00                    fcb   $00
   3112        80CB 00                    fcb   $00
   3113        80CC 00                    fcb   $00
   3114        80CD 00                    fcb   $00
   3115        80CE 00                    fcb   $00
   3116        80CF 00                    fcb   $00
   3117        80D0 00                    fcb   $00
   3118        80D1 00                    fcb   $00
   3119        80D2 00                    fcb   $00
   3120        80D3 00                    fcb   $00
   3121        80D4 00                    fcb   $00
   3122        80D5 00                    fcb   $00
   3123        80D6 00                    fcb   $00
   3124        80D7 00                    fcb   $00
   3125        80D8 00                    fcb   $00
   3126        80D9 00                    fcb   $00
   3127        80DA 00                    fcb   $00
   3128        80DB 00                    fcb   $00
   3129        80DC 00                    fcb   $00
   3130        80DD 00                    fcb   $00
   3131        80DE 00                    fcb   $00
   3132        80DF 00                    fcb   $00
   3133        80E0 00                    fcb   $00
   3134        80E1 00                    fcb   $00
   3135        80E2 00                    fcb   $00
   3136        80E3 00                    fcb   $00
   3137        80E4 00                    fcb   $00
   3138        80E5 00                    fcb   $00
   3139        80E6 00                    fcb   $00
   3140        80E7 00                    fcb   $00
   3141        80E8 00                    fcb   $00
   3142        80E9 00                    fcb   $00
   3143        80EA 00                    fcb   $00
   3144        80EB 00                    fcb   $00
   3145        80EC 00                    fcb   $00
   3146        80ED 00                    fcb   $00
   3147        80EE 00                    fcb   $00
   3148        80EF 00                    fcb   $00
   3149        80F0 00                    fcb   $00
   3150        80F1 00                    fcb   $00
   3151        80F2 00                    fcb   $00
   3152        80F3 00                    fcb   $00
   3153        80F4 00                    fcb   $00
   3154        80F5 00                    fcb   $00
   3155        80F6 00                    fcb   $00
   3156        80F7 00                    fcb   $00
   3157        80F8 00                    fcb   $00
   3158        80F9 00                    fcb   $00
   3159        80FA 00                    fcb   $00
   3160        80FB 00                    fcb   $00
   3161        80FC 00                    fcb   $00
   3162        80FD 00                    fcb   $00
   3163        80FE 00                    fcb   $00
   3164        80FF 00                    fcb   $00
   3165        8100 00                    fcb   $00
   3166        8101 00                    fcb   $00
   3167        8102 00                    fcb   $00
   3168        8103 00                    fcb   $00
   3169        8104 00                    fcb   $00
   3170        8105 00                    fcb   $00
   3171        8106 00                    fcb   $00
   3172        8107 00                    fcb   $00
   3173        8108 00                    fcb   $00
   3174        8109 00                    fcb   $00
   3175        810A 00                    fcb   $00
   3176        810B 00                    fcb   $00
   3177        810C 00                    fcb   $00
   3178        810D 00                    fcb   $00
   3179        810E 00                    fcb   $00
   3180        810F 00                    fcb   $00
   3181        8110 00                    fcb   $00
   3182        8111 00                    fcb   $00
   3183        8112 00                    fcb   $00
   3184        8113 00                    fcb   $00
   3185        8114 00                    fcb   $00
   3186        8115 00                    fcb   $00
   3187        8116 00                    fcb   $00
   3188        8117 00                    fcb   $00
   3189        8118 00                    fcb   $00
   3190        8119 00                    fcb   $00
   3191        811A 00                    fcb   $00
   3192        811B 00                    fcb   $00
   3193        811C 00                    fcb   $00
   3194        811D 00                    fcb   $00
   3195        811E 00                    fcb   $00
   3196        811F 00                    fcb   $00
   3197        8120 00                    fcb   $00
   3198        8121 00                    fcb   $00
   3199        8122 00                    fcb   $00
   3200        8123 00                    fcb   $00
   3201        8124 00                    fcb   $00
   3202        8125 00                    fcb   $00
   3203        8126 00                    fcb   $00
   3204        8127 00                    fcb   $00
   3205        8128 00                    fcb   $00
   3206        8129 00                    fcb   $00
   3207        812A 00                    fcb   $00
   3208        812B 00                    fcb   $00
   3209        812C 00                    fcb   $00
   3210        812D 00                    fcb   $00
   3211        812E 00                    fcb   $00
   3212        812F 00                    fcb   $00
   3213        8130 00                    fcb   $00
   3214        8131 00                    fcb   $00
   3215        8132 00                    fcb   $00
   3216        8133 00                    fcb   $00
   3217        8134 00                    fcb   $00
   3218        8135 00                    fcb   $00
   3219        8136 00                    fcb   $00
   3220        8137 00                    fcb   $00
   3221        8138 00                    fcb   $00
   3222        8139 00                    fcb   $00
   3223        813A 00                    fcb   $00
   3224        813B 00                    fcb   $00
   3225        813C 00                    fcb   $00
   3226        813D 00                    fcb   $00
   3227        813E 00                    fcb   $00
   3228        813F 00                    fcb   $00
   3229        8140 00                    fcb   $00
   3230        8141 00                    fcb   $00
   3231        8142 00                    fcb   $00
   3232        8143 00                    fcb   $00
   3233        8144 00                    fcb   $00
   3234        8145 00                    fcb   $00
   3235        8146 00                    fcb   $00
   3236        8147 00                    fcb   $00
   3237        8148 00                    fcb   $00
   3238        8149 00                    fcb   $00
   3239        814A 00                    fcb   $00
   3240        814B 00                    fcb   $00
   3241        814C 00                    fcb   $00
   3242        814D 00                    fcb   $00
   3243        814E 00                    fcb   $00
   3244        814F 00                    fcb   $00
   3245        8150 00                    fcb   $00
   3246        8151 00                    fcb   $00
   3247        8152 00                    fcb   $00
   3248        8153 00                    fcb   $00
   3249        8154 00                    fcb   $00
   3250        8155 00                    fcb   $00
   3251        8156 00                    fcb   $00
   3252        8157 00                    fcb   $00
   3253        8158 00                    fcb   $00
   3254        8159 00                    fcb   $00
   3255        815A 00                    fcb   $00
   3256        815B 00                    fcb   $00
   3257        815C 00                    fcb   $00
   3258        815D 00                    fcb   $00
   3259        815E 00                    fcb   $00
   3260        815F 00                    fcb   $00
   3261        8160 00                    fcb   $00
   3262        8161 00                    fcb   $00
   3263        8162 00                    fcb   $00
   3264        8163 00                    fcb   $00
   3265        8164 00                    fcb   $00
   3266        8165 00                    fcb   $00
   3267        8166 00                    fcb   $00
   3268        8167 00                    fcb   $00
   3269        8168 00                    fcb   $00
   3270        8169 00                    fcb   $00
   3271        816A 00                    fcb   $00
   3272        816B 00                    fcb   $00
   3273        816C 00                    fcb   $00
   3274        816D 00                    fcb   $00
   3275        816E 00                    fcb   $00
   3276        816F 00                    fcb   $00
   3277        8170 00                    fcb   $00
   3278        8171 00                    fcb   $00
   3279        8172 00                    fcb   $00
   3280        8173 00                    fcb   $00
   3281        8174 00                    fcb   $00
   3282        8175 00                    fcb   $00
   3283        8176 00                    fcb   $00
   3284        8177 00                    fcb   $00
   3285        8178 00                    fcb   $00
   3286        8179 00                    fcb   $00
   3287        817A 00                    fcb   $00
   3288        817B 00                    fcb   $00
   3289        817C 00                    fcb   $00
   3290        817D 00                    fcb   $00
   3291        817E 00                    fcb   $00
   3292        817F 00                    fcb   $00
   3293        8180 00                    fcb   $00
   3294        8181 00                    fcb   $00
   3295        8182 00                    fcb   $00
   3296        8183 00                    fcb   $00
   3297        8184 00                    fcb   $00
   3298        8185 00                    fcb   $00
   3299        8186 00                    fcb   $00
   3300        8187 00                    fcb   $00
   3301        8188 00                    fcb   $00
   3302        8189 00                    fcb   $00
   3303        818A 00                    fcb   $00
   3304        818B 00                    fcb   $00
   3305        818C 00                    fcb   $00
   3306        818D 00                    fcb   $00
   3307        818E 00                    fcb   $00
   3308        818F 00                    fcb   $00
   3309        8190 00                    fcb   $00
   3310        8191 00                    fcb   $00
   3311        8192 00                    fcb   $00
   3312        8193 00                    fcb   $00
   3313        8194 00                    fcb   $00
   3314        8195 00                    fcb   $00
   3315        8196 00                    fcb   $00
   3316        8197 00                    fcb   $00
   3317        8198 00                    fcb   $00
   3318        8199 00                    fcb   $00
   3319        819A               Obj_Index_Address
   3320        819A 00 00                 fcb   $00,$00
   3321        819C A0 00                 fcb   $A0,$00
   3322        819E 00 00                 fcb   $00,$00
   3323        81A0 00 00                 fcb   $00,$00
   3324        81A2 00 00                 fcb   $00,$00
   3325        81A4 00 00                 fcb   $00,$00
   3326        81A6 00 00                 fcb   $00,$00
   3327        81A8 00 00                 fcb   $00,$00
   3328        81AA 00 00                 fcb   $00,$00
   3329        81AC 00 00                 fcb   $00,$00
   3330        81AE 00 00                 fcb   $00,$00
   3331        81B0 00 00                 fcb   $00,$00
   3332        81B2 00 00                 fcb   $00,$00
   3333        81B4 00 00                 fcb   $00,$00
   3334        81B6 00 00                 fcb   $00,$00
   3335        81B8 00 00                 fcb   $00,$00
   3336        81BA 00 00                 fcb   $00,$00
   3337        81BC 00 00                 fcb   $00,$00
   3338        81BE 00 00                 fcb   $00,$00
   3339        81C0 00 00                 fcb   $00,$00
   3340        81C2 00 00                 fcb   $00,$00
   3341        81C4 00 00                 fcb   $00,$00
   3342        81C6 00 00                 fcb   $00,$00
   3343        81C8 00 00                 fcb   $00,$00
   3344        81CA 00 00                 fcb   $00,$00
   3345        81CC 00 00                 fcb   $00,$00
   3346        81CE 00 00                 fcb   $00,$00
   3347        81D0 00 00                 fcb   $00,$00
   3348        81D2 00 00                 fcb   $00,$00
   3349        81D4 00 00                 fcb   $00,$00
   3350        81D6 00 00                 fcb   $00,$00
   3351        81D8 00 00                 fcb   $00,$00
   3352        81DA 00 00                 fcb   $00,$00
   3353        81DC 00 00                 fcb   $00,$00
   3354        81DE 00 00                 fcb   $00,$00
   3355        81E0 00 00                 fcb   $00,$00
   3356        81E2 00 00                 fcb   $00,$00
   3357        81E4 00 00                 fcb   $00,$00
   3358        81E6 00 00                 fcb   $00,$00
   3359        81E8 00 00                 fcb   $00,$00
   3360        81EA 00 00                 fcb   $00,$00
   3361        81EC 00 00                 fcb   $00,$00
   3362        81EE 00 00                 fcb   $00,$00
   3363        81F0 00 00                 fcb   $00,$00
   3364        81F2 00 00                 fcb   $00,$00
   3365        81F4 00 00                 fcb   $00,$00
   3366        81F6 00 00                 fcb   $00,$00
   3367        81F8 00 00                 fcb   $00,$00
   3368        81FA 00 00                 fcb   $00,$00
   3369        81FC 00 00                 fcb   $00,$00
   3370        81FE 00 00                 fcb   $00,$00
   3371        8200 00 00                 fcb   $00,$00
   3372        8202 00 00                 fcb   $00,$00
   3373        8204 00 00                 fcb   $00,$00
   3374        8206 00 00                 fcb   $00,$00
   3375        8208 00 00                 fcb   $00,$00
   3376        820A 00 00                 fcb   $00,$00
   3377        820C 00 00                 fcb   $00,$00
   3378        820E 00 00                 fcb   $00,$00
   3379        8210 00 00                 fcb   $00,$00
   3380        8212 00 00                 fcb   $00,$00
   3381        8214 00 00                 fcb   $00,$00
   3382        8216 00 00                 fcb   $00,$00
   3383        8218 00 00                 fcb   $00,$00
   3384        821A 00 00                 fcb   $00,$00
   3385        821C 00 00                 fcb   $00,$00
   3386        821E 00 00                 fcb   $00,$00
   3387        8220 00 00                 fcb   $00,$00
   3388        8222 00 00                 fcb   $00,$00
   3389        8224 00 00                 fcb   $00,$00
   3390        8226 00 00                 fcb   $00,$00
   3391        8228 00 00                 fcb   $00,$00
   3392        822A 00 00                 fcb   $00,$00
   3393        822C 00 00                 fcb   $00,$00
   3394        822E 00 00                 fcb   $00,$00
   3395        8230 00 00                 fcb   $00,$00
   3396        8232 00 00                 fcb   $00,$00
   3397        8234 00 00                 fcb   $00,$00
   3398        8236 00 00                 fcb   $00,$00
   3399        8238 00 00                 fcb   $00,$00
   3400        823A 00 00                 fcb   $00,$00
   3401        823C 00 00                 fcb   $00,$00
   3402        823E 00 00                 fcb   $00,$00
   3403        8240 00 00                 fcb   $00,$00
   3404        8242 00 00                 fcb   $00,$00
   3405        8244 00 00                 fcb   $00,$00
   3406        8246 00 00                 fcb   $00,$00
   3407        8248 00 00                 fcb   $00,$00
   3408        824A 00 00                 fcb   $00,$00
   3409        824C 00 00                 fcb   $00,$00
   3410        824E 00 00                 fcb   $00,$00
   3411        8250 00 00                 fcb   $00,$00
   3412        8252 00 00                 fcb   $00,$00
   3413        8254 00 00                 fcb   $00,$00
   3414        8256 00 00                 fcb   $00,$00
   3415        8258 00 00                 fcb   $00,$00
   3416        825A 00 00                 fcb   $00,$00
   3417        825C 00 00                 fcb   $00,$00
   3418        825E 00 00                 fcb   $00,$00
   3419        8260 00 00                 fcb   $00,$00
   3420        8262 00 00                 fcb   $00,$00
   3421        8264 00 00                 fcb   $00,$00
   3422        8266 00 00                 fcb   $00,$00
   3423        8268 00 00                 fcb   $00,$00
   3424        826A 00 00                 fcb   $00,$00
   3425        826C 00 00                 fcb   $00,$00
   3426        826E 00 00                 fcb   $00,$00
   3427        8270 00 00                 fcb   $00,$00
   3428        8272 00 00                 fcb   $00,$00
   3429        8274 00 00                 fcb   $00,$00
   3430        8276 00 00                 fcb   $00,$00
   3431        8278 00 00                 fcb   $00,$00
   3432        827A 00 00                 fcb   $00,$00
   3433        827C 00 00                 fcb   $00,$00
   3434        827E 00 00                 fcb   $00,$00
   3435        8280 00 00                 fcb   $00,$00
   3436        8282 00 00                 fcb   $00,$00
   3437        8284 00 00                 fcb   $00,$00
   3438        8286 00 00                 fcb   $00,$00
   3439        8288 00 00                 fcb   $00,$00
   3440        828A 00 00                 fcb   $00,$00
   3441        828C 00 00                 fcb   $00,$00
   3442        828E 00 00                 fcb   $00,$00
   3443        8290 00 00                 fcb   $00,$00
   3444        8292 00 00                 fcb   $00,$00
   3445        8294 00 00                 fcb   $00,$00
   3446        8296 00 00                 fcb   $00,$00
   3447        8298 00 00                 fcb   $00,$00
   3448        829A 00 00                 fcb   $00,$00
   3449        829C 00 00                 fcb   $00,$00
   3450        829E 00 00                 fcb   $00,$00
   3451        82A0 00 00                 fcb   $00,$00
   3452        82A2 00 00                 fcb   $00,$00
   3453        82A4 00 00                 fcb   $00,$00
   3454        82A6 00 00                 fcb   $00,$00
   3455        82A8 00 00                 fcb   $00,$00
   3456        82AA 00 00                 fcb   $00,$00
   3457        82AC 00 00                 fcb   $00,$00
   3458        82AE 00 00                 fcb   $00,$00
   3459        82B0 00 00                 fcb   $00,$00
   3460        82B2 00 00                 fcb   $00,$00
   3461        82B4 00 00                 fcb   $00,$00
   3462        82B6 00 00                 fcb   $00,$00
   3463        82B8 00 00                 fcb   $00,$00
   3464        82BA 00 00                 fcb   $00,$00
   3465        82BC 00 00                 fcb   $00,$00
   3466        82BE 00 00                 fcb   $00,$00
   3467        82C0 00 00                 fcb   $00,$00
   3468        82C2 00 00                 fcb   $00,$00
   3469        82C4 00 00                 fcb   $00,$00
   3470        82C6 00 00                 fcb   $00,$00
   3471        82C8 00 00                 fcb   $00,$00
   3472        82CA 00 00                 fcb   $00,$00
   3473        82CC 00 00                 fcb   $00,$00
   3474        82CE 00 00                 fcb   $00,$00
   3475        82D0 00 00                 fcb   $00,$00
   3476        82D2 00 00                 fcb   $00,$00
   3477        82D4 00 00                 fcb   $00,$00
   3478        82D6 00 00                 fcb   $00,$00
   3479        82D8 00 00                 fcb   $00,$00
   3480        82DA 00 00                 fcb   $00,$00
   3481        82DC 00 00                 fcb   $00,$00
   3482        82DE 00 00                 fcb   $00,$00
   3483        82E0 00 00                 fcb   $00,$00
   3484        82E2 00 00                 fcb   $00,$00
   3485        82E4 00 00                 fcb   $00,$00
   3486        82E6 00 00                 fcb   $00,$00
   3487        82E8 00 00                 fcb   $00,$00
   3488        82EA 00 00                 fcb   $00,$00
   3489        82EC 00 00                 fcb   $00,$00
   3490        82EE 00 00                 fcb   $00,$00
   3491        82F0 00 00                 fcb   $00,$00
   3492        82F2 00 00                 fcb   $00,$00
   3493        82F4 00 00                 fcb   $00,$00
   3494        82F6 00 00                 fcb   $00,$00
   3495        82F8 00 00                 fcb   $00,$00
   3496        82FA 00 00                 fcb   $00,$00
   3497        82FC 00 00                 fcb   $00,$00
   3498        82FE 00 00                 fcb   $00,$00
   3499        8300 00 00                 fcb   $00,$00
   3500        8302 00 00                 fcb   $00,$00
   3501        8304 00 00                 fcb   $00,$00
   3502        8306 00 00                 fcb   $00,$00
   3503        8308 00 00                 fcb   $00,$00
   3504        830A 00 00                 fcb   $00,$00
   3505        830C 00 00                 fcb   $00,$00
   3506        830E 00 00                 fcb   $00,$00
   3507        8310 00 00                 fcb   $00,$00
   3508        8312 00 00                 fcb   $00,$00
   3509        8314 00 00                 fcb   $00,$00
   3510        8316 00 00                 fcb   $00,$00
   3511        8318 00 00                 fcb   $00,$00
   3512        831A 00 00                 fcb   $00,$00
   3513        831C 00 00                 fcb   $00,$00
   3514        831E 00 00                 fcb   $00,$00
   3515        8320 00 00                 fcb   $00,$00
   3516        8322 00 00                 fcb   $00,$00
   3517        8324 00 00                 fcb   $00,$00
   3518        8326 00 00                 fcb   $00,$00
   3519        8328 00 00                 fcb   $00,$00
   3520        832A 00 00                 fcb   $00,$00
   3521        832C 00 00                 fcb   $00,$00
   3522        832E 00 00                 fcb   $00,$00
   3523        8330 00 00                 fcb   $00,$00
   3524        8332 00 00                 fcb   $00,$00
   3525        8334 00 00                 fcb   $00,$00
   3526        8336 00 00                 fcb   $00,$00
   3527        8338 00 00                 fcb   $00,$00
   3528        833A 00 00                 fcb   $00,$00
   3529        833C 00 00                 fcb   $00,$00
   3530        833E 00 00                 fcb   $00,$00
   3531        8340 00 00                 fcb   $00,$00
   3532        8342 00 00                 fcb   $00,$00
   3533        8344 00 00                 fcb   $00,$00
   3534        8346 00 00                 fcb   $00,$00
   3535        8348 00 00                 fcb   $00,$00
   3536        834A 00 00                 fcb   $00,$00
   3537        834C 00 00                 fcb   $00,$00
   3538        834E 00 00                 fcb   $00,$00
   3539        8350 00 00                 fcb   $00,$00
   3540        8352 00 00                 fcb   $00,$00
   3541        8354 00 00                 fcb   $00,$00
   3542        8356 00 00                 fcb   $00,$00
   3543        8358 00 00                 fcb   $00,$00
   3544        835A 00 00                 fcb   $00,$00
   3545        835C 00 00                 fcb   $00,$00
   3546        835E 00 00                 fcb   $00,$00
   3547        8360 00 00                 fcb   $00,$00
   3548        8362 00 00                 fcb   $00,$00
   3549        8364 00 00                 fcb   $00,$00
   3550        8366 00 00                 fcb   $00,$00
   3551        8368 00 00                 fcb   $00,$00
   3552        836A 00 00                 fcb   $00,$00
   3553        836C 00 00                 fcb   $00,$00
   3554        836E 00 00                 fcb   $00,$00
   3555        8370 00 00                 fcb   $00,$00
   3556        8372 00 00                 fcb   $00,$00
   3557        8374 00 00                 fcb   $00,$00
   3558        8376 00 00                 fcb   $00,$00
   3559        8378 00 00                 fcb   $00,$00
   3560        837A 00 00                 fcb   $00,$00
   3561        837C 00 00                 fcb   $00,$00
   3562        837E 00 00                 fcb   $00,$00
   3563        8380 00 00                 fcb   $00,$00
   3564        8382 00 00                 fcb   $00,$00
   3565        8384 00 00                 fcb   $00,$00
   3566        8386 00 00                 fcb   $00,$00
   3567        8388 00 00                 fcb   $00,$00
   3568        838A 00 00                 fcb   $00,$00
   3569        838C 00 00                 fcb   $00,$00
   3570        838E 00 00                 fcb   $00,$00
   3571        8390 00 00                 fcb   $00,$00
   3572        8392 00 00                 fcb   $00,$00
   3573        8394 00 00                 fcb   $00,$00
   3574        8396 00 00                 fcb   $00,$00
   3575        8398 00 00                 fcb   $00,$00
   3576
    194                                   *INCLUD SOUNDIDX * A rendre dynam>>
   3577                                   INCLUD LOADACT
   3578                           * Generated Code
   3579
   3580        839A               LoadAct
   3581  3     839A 8E   0000             ldx   #$0000                   * >>
   3582  2     839D C6   62               ldb   #$62                     * >>
   3583  5     839F F7   E7E6             stb   $E7E6                    * >>
   3584  8     83A2 BD   7EE0             jsr   ClearCartMem
   3585  5     83A5 B6   E7DD             lda   $E7DD                    * >>
   3586  2     83A8 84   F0               anda  #$F0
   3587  2     83AA 8B   00               adda  #$00                     * >>
   3588  5     83AC B7   E7DD             sta   $E7DD
   3589  2     83AF 84   0F               anda  #$0F
   3590  2     83B1 8B   80               adda  #$80
   3591  5     83B3 B7   7205             sta   screen_border_color+1    * >>
   3592  8     83B6 BD   71A1             jsr   WaitVBL
   3593  3     83B9 8E   0000             ldx   #$0000                   * >>
   3594  2     83BC C6   63               ldb   #$63                     * >>
   3595  5     83BE F7   E7E6             stb   $E7E6                    * >>
   3596  8     83C1 BD   7EE0             jsr   ClearCartMem
   3597  3     83C4 CC   83CE             ldd   #Pal_TestImageSet
   3598  6     83C7 FD   7F1C             std   Cur_palette
   3599  7     83CA 7F   7F1B             clr   Refresh_palette
   3600  5     83CD 39                    rts
   3601
    196                            
    197
   3602                                   INCLUD PALETTE
   3603                           * Generated Code
   3604
   3605        83CE               Pal_TestImageSet * @globals
   3606        83CE FF0F                  fdb   $ff0f
   3607        83D0 5505                  fdb   $5505
   3608        83D2 3303                  fdb   $3303
   3609        83D4 1101                  fdb   $1101
   3610        83D6 0000                  fdb   $0000
   3611        83D8 0F00                  fdb   $0f00
   3612        83DA 0300                  fdb   $0300
   3613        83DC 5F03                  fdb   $5f03
   3614        83DE 2501                  fdb   $2501
   3615        83E0 3F00                  fdb   $3f00
   3616        83E2 5E00                  fdb   $5e00
   3617        83E4 1009                  fdb   $1009
   3618        83E6 110E                  fdb   $110e
   3619        83E8 220E                  fdb   $220e
   3620        83EA 0008                  fdb   $0008
   3621        83EC 0000                  fdb   $0000
    199
    200

000000 Total Errors

000493 Total Symbols
     1x          Label 7536 am_ObjectMove_01
     1x          Label 754C am_ObjectMove_02
     3x          Label 73FE am_RunNextObject
     2x          Label 720C am_SwapVideoPage
     2x          Equ   0004 anim
     0x          Label 74A3 AnimateSprite
     1x          Label 74D2 Anim_dyn
     1x          Label 7525 Anim_End
     1x          Label 751A Anim_End_FA
     1x          Label 750F Anim_End_FB
     1x          Label 74FD Anim_End_FC
     1x          Label 74F5 Anim_End_FD
     1x          Label 74E4 Anim_End_FE
     1x          Label 74EC Anim_End_FE_dyn
     1x          Label 74D9 Anim_End_FF
     8x          Equ   0008 anim_frame
     4x          Equ   0009 anim_frame_duration
     2x          Label 74C4 Anim_Next
     1x          Label 74B1 Anim_Run
     1x          Label 74D8 Anim_Wait
     0x          Label 7DFB BBA0
     1x          Label 7E04 BBA1
     1x          Label 7E25 BBA_DivideCell
     1x          Label 7E2A BBA_dyn
     1x          Label 7E1A BBA_FitCell
     2x          Label 7E0B BBA_Next
     2x          Label 7E45 BBA_rts
     0x          Label 7E54 BBF0
     1x          Label 7E6A BBF1
     1x          Label 7E93 BBF_AddNewEntry
     3x          Label 7E96 BBF_AddNewEntryAtEnd
     1x          Label 7ED3 BBF_ExpandAtEnd
     1x          Label 7EB2 BBF_ExpandAtStart
     1x          Label 7E99 BBF_FindFreeSlot
     0x          Label 7EBD BBF_Join
     2x          Label 7E7E BBF_Next
     4x          Label 7EDE BBF_rts
     1x          Label 7EA1 BBF_SetNewEntry
     2x          Label 7EA8 BBF_SetNewEntryNextentry
     3x          Label 7EAD BBF_SetNewEntryPrevLink
     2x          Label 7DF4 BgBufferAlloc
     2x          Label 7E47 BgBufferFree
     0x          Label 7F3E Black_palette
     0x          Equ   0009 buf_bgdata
     2x          Equ   0024 buf_Lst_Priority_Unset
     1x          Equ   0007 buf_prev_mapping_frame
     5x          Equ   0011 buf_prev_render_flags
     0x          Equ   000D buf_prev_x1_pixel
     0x          Equ   000F buf_prev_x2_pixel
     0x          Equ   000D buf_prev_xy1_pixel
     0x          Equ   000F buf_prev_xy2_pixel
     1x          Equ   000B buf_prev_xy_pixel
     0x          Equ   000B buf_prev_x_pixel
     0x          Equ   000E buf_prev_y1_pixel
     0x          Equ   0010 buf_prev_y2_pixel
     0x          Equ   000C buf_prev_y_pixel
     5x          Equ   0000 buf_priority
     4x          Equ   0003 buf_priority_next_obj
     1x          Equ   0001 buf_priority_prev_obj
    33x          Equ   0000 buf_Tbl_Priority_First_Entry
    18x          Equ   0012 buf_Tbl_Priority_Last_Entry
     0x          Equ   0040 c1_button_A_mask
     0x          Equ   0002 c1_button_down_mask
     0x          Equ   0004 c1_button_left_mask
     0x          Equ   0008 c1_button_right_mask
     0x          Equ   0001 c1_button_up_mask
     0x          Equ   0080 c2_button_A_mask
     0x          Equ   0020 c2_button_down_mask
     0x          Equ   0040 c2_button_left_mask
     0x          Equ   0080 c2_button_right_mask
     0x          Equ   0010 c2_button_up_mask
     7x          Equ   0003 cell_end
     1x          Label 7E41 cell_end_return
     5x          Equ   0040 cell_size
     5x          Equ   0001 cell_start
     4x          Equ   6000 cell_start_adr
     1x          Label 7669 CheckSpritesRefresh
     2x          Label 7EE0 ClearCartMem
     1x          Label 7EF2 ClearCartMem_2
     1x          Label 7F0E ClearCartMem_3
     4x          Label 7630 ClearObj
     1x          Label 7657 CLO_1
     0x          Label 7661 CLO_2
     1x          Label 71B0 COPPER
     4x          Label 7F1A cpt
     0x          Label 7759 CSR_CheckDelHide
     3x          Label 7943 CSR_CheckDraw
     2x          Label 7866 CSR_CheckErase
     1x          Label 7886 CSR_CheckErase_InRange
     0x          Label 7784 CSR_CheckPlayFieldCoord
     0x          Label 775F CSR_CheckRefresh
     1x          Label 77B4 CSR_CheckVerticalPosition
     2x          Label 77E6 CSR_CVP_Continue
     1x          Label 778A CSR_DoNotDisplaySprite
     1x          Label 7840 CSR_DontCheckXFrontier
     1x          Label 7854 CSR_DontCheckXFrontier_end
     3x          Label 77AD CSR_NextObject
     1x          Label 77D0 CSR_NoDefinedFrame
     1x          Label 77DE CSR_NoFrameFound
     1x          Label 77C4 CSR_NoOverlay
     1x          Label 76DA CSR_P1B0
     1x          Label 7748 CSR_P1B1
     1x          Label 76CD CSR_P2B0
     1x          Label 773B CSR_P2B1
     1x          Label 76C0 CSR_P3B0
     1x          Label 772E CSR_P3B1
     1x          Label 76B3 CSR_P4B0
     1x          Label 7721 CSR_P4B1
     1x          Label 76A6 CSR_P5B0
     1x          Label 7714 CSR_P5B1
     1x          Label 7699 CSR_P6B0
     1x          Label 7707 CSR_P6B1
     1x          Label 768C CSR_P7B0
     1x          Label 76FA CSR_P7B1
     0x          Label 767F CSR_P8B0
     0x          Label 76ED CSR_P8B1
    21x          Label 7756 CSR_ProcessEachPriorityLevel
     1x          Label 76E7 CSR_rtsB0
     1x          Label 7755 CSR_rtsB1
     1x          Label 7973 CSR_SDT1
     1x          Label 797A CSR_SDT2
     1x          Label 797F CSR_SDT3
     0x          Label 767A CSR_SetBuffer0
     1x          Label 76E8 CSR_SetBuffer1
     3x          Label 799A CSR_SetDrawFalse
     0x          Label 7965 CSR_SetDrawTrue
     1x          Label 7992 CSR_SetEraseDrawFalse
     2x          Label 793B CSR_SetEraseFalse
     7x          Label 78A6 CSR_SetEraseTrue
     2x          Label 7985 CSR_SetHide
    10x          Label 785E CSR_SetOutOfRange
     0x          Label 7669 CSR_Start
     0x          Label 791A CSR_SubDrawCheckCollision
     4x          Label 7912 CSR_SubDrawSearch
     2x          Label 790F CSR_SubDrawSpriteSearchInit
     0x          Label 78C7 CSR_SubEraseCheckCollisionB0
     0x          Label 78EF CSR_SubEraseCheckCollisionB1
     4x          Label 78BF CSR_SubEraseSearchB0
     5x          Label 78E7 CSR_SubEraseSearchB1
     1x          Label 78B7 CSR_SubEraseSpriteSearchInit
     0x          Label 7768 CSR_UpdSpriteImageBasedOnMirror
     2x          Label 7F1C Cur_palette
    19x          Label 7663 cur_priority
     4x          Label 7667 cur_ptr_sub_obj_draw
     9x          Label 7665 cur_ptr_sub_obj_erase
     1x          Label 71E5 DECALB
     1x          Label 71F2 DECALH
     0x          Label 756E DeleteObject
     0x          Label 7568 DeleteObject_x
     1x          Label 742A DisplaySprite
     0x          Label 7424 DisplaySprite_x
     0x          Equ   604F dk_destination
     0x          Equ   6049 dk_lecteur
     0x          Equ   604A dk_piste
     0x          Equ   604B dk_pisteL
     0x          Equ   604C dk_secteur
     1x          Label 75D2 DOB_ChainNextB0
     1x          Label 761C DOB_ChainNextB1
     1x          Label 75B2 DOB_ChainPrevB0
     1x          Label 75F4 DOB_ChainPrevB1
     1x          Label 75BC DOB_CheckPrioNextB0
     1x          Label 75FE DOB_CheckPrioNextB1
     1x          Label 759C DOB_RemoveFromDPSB0
     1x          Label 75DE DOB_RemoveFromDPSB1
     2x          Label 761A DOB_rts
     1x          Label 7570 DOB_Start
     2x          Label 7585 DOB_TestOnscreen1
     0x          Label 7575 DOB_ToDeleteFlag0
     0x          Label 758A DOB_ToDeleteFlag1
     0x          Label 757B DOB_Unset0
     0x          Label 7590 DOB_Unset1
     0x          Label 73B5 Dpad_Held
     0x          Label 73B7 Dpad_Press
     2x          Label 73B3 Dpad_Read
    27x          Label 64DE DPS_buffer_0
    25x          Label 6544 DPS_buffer_1
     1x          Label 7C01 DrawSprites
     4x          Equ   0001 draw_routine
     1x          Label 7D01 DRS_DrawWithoutBackupB0
     1x          Label 7DD0 DRS_DrawWithoutBackupB1
     1x          Label 7D38 DRS_dyn1
     1x          Label 7D4A DRS_dyn2
     3x          Label 7CCC DRS_dyn3B0
     3x          Label 7D9B DRS_dyn3B1
     3x          Label 7CF9 DRS_NextObjectB0
     3x          Label 7DC8 DRS_NextObjectB1
     1x          Label 7CF4 DRS_NoOverlayB0
     1x          Label 7DC3 DRS_NoOverlayB1
     1x          Label 7C3E DRS_P1B0
     1x          Label 7C7F DRS_P1B1
     1x          Label 7C36 DRS_P2B0
     1x          Label 7C77 DRS_P2B1
     1x          Label 7C2E DRS_P3B0
     1x          Label 7C6F DRS_P3B1
     1x          Label 7C26 DRS_P4B0
     1x          Label 7C67 DRS_P4B1
     1x          Label 7C1E DRS_P5B0
     1x          Label 7C5F DRS_P5B1
     1x          Label 7C16 DRS_P6B0
     1x          Label 7C57 DRS_P6B1
     1x          Label 7C0E DRS_P7B0
     1x          Label 7C4F DRS_P7B1
     0x          Label 7C06 DRS_P8B0
     1x          Label 7C47 DRS_P8B1
     9x          Label 7C88 DRS_ProcessEachPriorityLevelB0
     9x          Label 7D57 DRS_ProcessEachPriorityLevelB1
     1x          Label 7C46 DRS_rtsB0
     1x          Label 7C87 DRS_rtsB1
     0x          Label 7C01 DRS_Start
     1x          Label 7CF6 DRS_UpdateRenderFlagB0
     1x          Label 7DC5 DRS_UpdateRenderFlagB1
     4x          Label 7D25 DRS_XYToAddress
     1x          Label 7D2C DRS_XYToAddressPositive
     0x          Label 7D32 DRS_XYToAddressRAM1First
     1x          Label 7D44 DRS_XYToAddressRAM2First
     0x          Label 745B DSP_addFirstNode
     1x          Label 746B DSP_addToExistingNode
     1x          Label 7447 DSP_BufferPositionned
     1x          Label 7490 DSP_ChangePriority
     1x          Label 7454 DSP_CheckLastEntry
     0x          Label 7451 DSP_InitPriority
     1x          Label 7480 DSP_LinkBuffer1
     1x          Label 748C DSP_LinkCurWithPrev
     1x          Label 7469 DSP_rts
     0x          Label 7437 DSP_SetBuffer0
     1x          Label 7440 DSP_SetBuffer1
     1x          Label 742C DSP_Start
     0x          Label 66DE Dynamic_Object_RAM
     2x          Label 705C Dynamic_Object_RAM_End
     1x          Label 7F1E Dyn_palette
     3x          Equ   0007 entry_size
     1x          Label 79A9 EraseSprites
     4x          Equ   0006 erase_nb_cell
     2x          Equ   0004 erase_routine
     0x          Label 7AA0 ESP_CallEraseRoutineB0
     1x          Label 7AB3 ESP_CallEraseRoutineB0_00
     0x          Label 7AF1 ESP_CallEraseRoutineB1
     1x          Label 7B04 ESP_CallEraseRoutineB1_00
     1x          Label 7A95 ESP_CheckEraseB0
     1x          Label 7AE6 ESP_CheckEraseB1
     8x          Label 7A83 ESP_CheckPriorityB0
     8x          Label 7AD4 ESP_CheckPriorityB1
     0x          Label 7AC0 ESP_FreeEraseBufferB0
     0x          Label 7B11 ESP_FreeEraseBufferB1
     2x          Label 7ACB ESP_NextObjectB0
     2x          Label 7B1C ESP_NextObjectB1
     0x          Label 79AE ESP_P1B0
     1x          Label 7A17 ESP_P1B1
     1x          Label 79BB ESP_P2B0
     1x          Label 7A24 ESP_P2B1
     1x          Label 79C8 ESP_P3B0
     1x          Label 7A31 ESP_P3B1
     1x          Label 79D5 ESP_P4B0
     1x          Label 7A3E ESP_P4B1
     1x          Label 79E2 ESP_P5B0
     1x          Label 7A4B ESP_P5B1
     1x          Label 79EF ESP_P6B0
     1x          Label 7A58 ESP_P6B1
     1x          Label 79FC ESP_P7B0
     1x          Label 7A65 ESP_P7B1
     1x          Label 7A09 ESP_P8B0
     1x          Label 7A72 ESP_P8B1
     9x          Label 7A80 ESP_ProcessEachPriorityLevelB0
     9x          Label 7AD1 ESP_ProcessEachPriorityLevelB1
     1x          Label 7A16 ESP_rtsB0
     1x          Label 7A7F ESP_rtsB1
     0x          Label 79A9 ESP_Start
     0x          Label 7A87 ESP_UnsetCheckRefreshB0
     0x          Label 7AD8 ESP_UnsetCheckRefreshB1
     1x          Label 7AC3 ESP_UnsetOnScreenFlagB0
     1x          Label 7B14 ESP_UnsetOnScreenFlagB1
     0x          Equ   001B ext_variables
     0x          Label 73B6 Fire_Held
     0x          Label 73B8 Fire_Press
     2x          Label 73B4 Fire_Read
     5x          Label 73B3 G
     0x          Label 6138 Glb_Camera_X_Pos
     0x          Label 613A Glb_Camera_Y_Pos
    10x          Label 6137 Glb_Cur_Wrk_Screen_Id
     1x          Label 716C Glb_MainCharacter_Is_Dead
     6x          Label 613C Glb_Sprite_Screen_Pos_Part1
     6x          Label 613E Glb_Sprite_Screen_Pos_Part2
     0x          Equ   00FE goBackNFrames
     0x          Label 71AC GOON
     0x          Equ   00FD goToAnimation
     0x          Equ   0038 gravity
     0x          Equ   0000 id
     1x          Equ   0006 image_center_offset
     5x          Equ   000A image_set
     2x          Equ   0004 image_subset_x1_offset
     1x          Equ   0005 image_subset_y1_offset
     2x          Equ   0004 image_x_size
     1x          Equ   0005 image_y_size
     0x          Label 7FE1 Img_SonicBreathe
     0x          Label 8063 Img_SonicFall
     0x          Label 7FA6 Img_SonicRun
     0x          Label 800C Img_SonicWalk
     0x          Label 6103 InitIRQ
     0x          Label 73B5 Joypads
     2x          Label 73B5 Joypads_Held
     1x          Label 73B7 Joypads_Press
     2x          Label 73B3 Joypads_Read
     1x          Label 610F LevelMainLoop
     1x          Label 705C LevelOnly_Object_RAM
     1x          Label 716A LevelOnly_Object_RAM_End
     1x          Label 839A LoadAct
     4x          Label 6140 Lst_FreeCellFirstEntry_0
     4x          Label 630F Lst_FreeCellFirstEntry_1
     2x          Label 6142 Lst_FreeCell_0
     2x          Label 6311 Lst_FreeCell_1
     8x          Label 6502 Lst_Priority_Unset_0
     7x          Label 6568 Lst_Priority_Unset_1
     0x          Label 7422 MarkObjGone
    14x          Equ   0000 nb_cells
     1x          Equ   001B nb_dynamic_objects
     6x          Equ   0082 nb_free_cells
     0x          Equ   0003 nb_level_objects
     4x          Equ   0020 nb_objects
     4x          Equ   0008 nb_priority_levels
     0x          Equ   0002 nb_reserved_objects
     0x          Equ   00FC nextRoutine
     0x          Equ   00FA nextSubRoutine
     9x          Equ   0005 next_entry
     3x          Equ   005A next_object
     7x          Equ   00C8 NL
     0x          Label 7526 ObjectMove
     1x          Label 662A Object_RAM
     2x          Label 716A Object_RAM_End
     8x          Equ   005A object_size
     1x          Label 819A Obj_Index_Address
     1x          Label 809A Obj_Index_Page
     0x          Label 662A Obj_MainCharacter
     0x          Label 6684 Obj_Sidekick
     0x          Label 70B6 Obj_SonicDust
     0x          Label 7110 Obj_TailsDust
     0x          Label 705C Obj_TailsTails
     4x          Equ   0000 page_draw_routine
     2x          Equ   0003 page_erase_routine
     1x          Label 83CE Pal_TestImageSet
     0x          Equ   0003 pcm_end_addr
     0x          Equ   0005 pcm_meta_size
     0x          Equ   0000 pcm_page
     0x          Equ   0001 pcm_start_addr
     2x          Equ   0006 prev_anim
     6x          Equ   0003 priority
     1x          Label 73B9 ReadJoypads
     3x          Label 7F1B Refresh_palette
    24x          Equ   0002 render_flags
     4x          Equ   0020 render_hide_mask
     2x          Equ   0008 render_motionless_mask
     5x          Equ   0004 render_overlay_mask
     1x          Equ   0010 render_playfieldcoord_mask
     5x          Equ   0040 render_todelete_mask
     1x          Equ   0080 render_xloop_mask
     2x          Equ   0001 render_xmirror_mask
     2x          Equ   0002 render_ymirror_mask
     1x          Label 662A Reserved_Object_RAM
     1x          Label 66DE Reserved_Object_RAM_End
     0x          Equ   00FF resetAnim
     0x          Equ   00FB resetAnimAndSubRoutine
     2x          Equ   0018 routine
     3x          Equ   0019 routine_secondary
     3x          Equ   003F rsv_bgdata_0
     3x          Equ   0051 rsv_bgdata_1
     2x          Equ   0036 rsv_buffer_0
     2x          Equ   0048 rsv_buffer_1
     6x          Equ   002C rsv_image_center_offset
     4x          Equ   002E rsv_image_subset
    11x          Equ   0030 rsv_mapping_frame
     0x          Equ   002A rsv_prev_anim
     4x          Equ   003D rsv_prev_mapping_frame_0
     4x          Equ   004F rsv_prev_mapping_frame_1
    11x          Equ   0047 rsv_prev_render_flags_0
     9x          Equ   0059 rsv_prev_render_flags_1
     4x          Equ   0080 rsv_prev_render_onscreen_mask
     6x          Equ   0001 rsv_prev_render_overlay_mask
     0x          Equ   0043 rsv_prev_x1_pixel_0
     0x          Equ   0055 rsv_prev_x1_pixel_1
     0x          Equ   0045 rsv_prev_x2_pixel_0
     0x          Equ   0057 rsv_prev_x2_pixel_1
     2x          Equ   0043 rsv_prev_xy1_pixel_0
     2x          Equ   0055 rsv_prev_xy1_pixel_1
     2x          Equ   0045 rsv_prev_xy2_pixel_0
     2x          Equ   0057 rsv_prev_xy2_pixel_1
     1x          Equ   0041 rsv_prev_xy_pixel_0
     1x          Equ   0053 rsv_prev_xy_pixel_1
     0x          Equ   0041 rsv_prev_x_pixel_0
     0x          Equ   0053 rsv_prev_x_pixel_1
     0x          Equ   0044 rsv_prev_y1_pixel_0
     0x          Equ   0056 rsv_prev_y1_pixel_1
     0x          Equ   0046 rsv_prev_y2_pixel_0
     0x          Equ   0058 rsv_prev_y2_pixel_1
     0x          Equ   0042 rsv_prev_y_pixel_0
     0x          Equ   0054 rsv_prev_y_pixel_1
     6x          Equ   0036 rsv_priority_0
     6x          Equ   0048 rsv_priority_1
    14x          Equ   0039 rsv_priority_next_obj_0
    14x          Equ   004B rsv_priority_next_obj_1
    12x          Equ   0037 rsv_priority_prev_obj_0
    12x          Equ   0049 rsv_priority_prev_obj_1
     4x          Equ   0001 rsv_render_checkrefresh_mask
     5x          Equ   0004 rsv_render_displaysprite_mask
     8x          Equ   0002 rsv_render_erasesprite_mask
    28x          Equ   0029 rsv_render_flags
     4x          Equ   0008 rsv_render_outofrange_mask
     6x          Equ   0032 rsv_x1_pixel
     5x          Equ   0034 rsv_x2_pixel
     3x          Equ   0032 rsv_xy1_pixel
     3x          Equ   0034 rsv_xy2_pixel
     5x          Equ   0033 rsv_y1_pixel
     4x          Equ   0035 rsv_y2_pixel
     1x          Label 73FB RunNextObject
     3x          Label 73E2 RunObject
     1x          Label 73DA RunObjects
     1x          Label 7405 RunObjectsWhenPlayerIsDead
     0x          Label 73DD RunObjects_01
     0x          Label 7404 RunObjects_End
     1x          Label 7204 screen_border_color
     2x          Equ   00E3 screen_bottom
     2x          Equ   0030 screen_left
     2x          Equ   00CF screen_right
     2x          Equ   001C screen_top
     0x          Equ   00A0 screen_width
     0x          Label 7551 SingleObjLoad2
     1x          Label 755B SingleObjLoad2_01
     2x          Label 7567 SingleObjLoad2_02
     1x          Equ   001A status
     0x          Equ   0004 status_bit2
     0x          Equ   0080 status_bit7
     0x          Equ   0002 status_inair
     0x          Equ   0010 status_jumpingafterrolling
     0x          Equ   0004 status_jumporroll
     0x          Equ   0020 status_mainchar_pushing
     0x          Equ   0008 status_mainchar_standing
     0x          Equ   0008 status_norgroundnorfall
     0x          Equ   0020 status_pushing
     0x          Equ   0040 status_sidekick_pushing
     0x          Equ   0010 status_sidekick_standing
     0x          Equ   0040 status_underwater
     1x          Equ   0001 status_x_orientation
     1x          Equ   0002 status_y_orientation
     0x          Equ   0001 subtype
     0x          Label 71FF SwapVideoPage
     2x          Label 64DE Tbl_Priority_First_Entry_0
     2x          Label 6544 Tbl_Priority_First_Entry_1
     3x          Label 64F0 Tbl_Priority_Last_Entry_0
     2x          Label 6556 Tbl_Priority_Last_Entry_1
     2x          Label 65EA Tbl_Sub_Object_Draw
     3x          Label 65AA Tbl_Sub_Object_Erase
     0x          Label 7B27 UDP_B0
     1x          Label 7B94 UDP_B1
     1x          Label 7B6E UDP_ChainNextB0
     1x          Label 7BDB UDP_ChainNextB1
     1x          Label 7B4E UDP_ChainPrevB0
     1x          Label 7BBB UDP_ChainPrevB1
     1x          Label 7B78 UDP_CheckDeleteB0
     1x          Label 7BE5 UDP_CheckDeleteB1
     2x          Label 7B2A UDP_CheckEndB0
     2x          Label 7B97 UDP_CheckEndB1
     1x          Label 7B58 UDP_CheckPrioNextB0
     1x          Label 7BC5 UDP_CheckPrioNextB1
     1x          Label 7B36 UDP_CheckPrioPrevB0
     1x          Label 7BA3 UDP_CheckPrioPrevB1
     0x          Label 7B2F UDP_InitListB0
     0x          Label 7B9C UDP_InitListB1
     3x          Label 7B8D UDP_SetNewPrioB0
     3x          Label 7BFA UDP_SetNewPrioB1
     0x          Label 7B22 UDP_Start
     1x          Label 7B22 UnsetDisplayPriority
     1x          Label 7F7E UpdatePalette
     1x          Label 7FA5 UPP_return
     1x          Label 7F8C UPP_SetColor
     2x          Label 7221 Vint_runcount
     1x          Equ   0000 VIT
     3x          Label 71A1 WaitVBL
     0x          Label 7F5E White_palette
     7x          Equ   0012 xy_pixel
     3x          Equ   0012 x_pixel
     4x          Equ   000C x_pos
     0x          Equ   000E x_sub
     2x          Equ   0014 x_vel
     1x          Equ   0013 y_pixel
     4x          Equ   000F y_pos
     0x          Equ   0011 y_sub
     2x          Equ   0016 y_vel
     0x          Equ   00FE _goBackNFrames
     0x          Equ   00FD _goToAnimation
     1x          Label 6129 _IRQ
     1x          Label 612F _IRQ_end
     0x          Equ   00FC _nextRoutine
     0x          Equ   00FA _nextSubRoutine
     0x          Equ   00FF _resetAnim
     0x          Equ   00FB _resetAnimAndSubRoutine

