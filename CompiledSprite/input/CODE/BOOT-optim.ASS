***************************************
* Boot loader
***************************************
(main)BOOT.ASS
   setdp $60
   org $6200
   
   ldd #$6300
   std ,s
   lda #$02    * entree routine: 6205
   sta <$6048 * DK.OPC $02 Operation - Lecture d un secteur
piste
   ldd #$0000
   std <$604A * DK.TRK Piste a lire
secteur
   lda #$02
   sta <$604C * DK.SEC Secteur a lire
destination
   ldd #$6300 * Destination des donnees lues
   std <$604F * DK.BUF Destination des donnees lues
   jsr $E82A  * DKFORM Appel 
   *stb <$6080 * Semaphore du controle de presence du controleur de disque
   *bcs exit   * Si Erreur C=1 alors branchement exit
   inc secteur+1
   lda secteur+1
   cmpa #$10
   bhi init_secteur
retour_init_secteur
   inc destination+1 * Increment de 256 octets de la zone a ecrire
   ldd destination+1 * Destination des donnees lues
dernier_bloc_a_ecrire
   cmpd #$9E00       * 9F00 - 9FFF est reserve a la pile systeme
   bls piste   
   rts
init_secteur
   lda #$01
   sta secteur+1
   inc piste+2
   bra retour_init_secteur
