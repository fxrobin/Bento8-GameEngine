/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : ./input/CODE/MAIN.ASM.TMP
 * Fichier destination : TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     26700
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        6300                      ORG $6300
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17
     18                  6205     DK_lecture               EQU $6205 * rout>>
     19                  620A     DK_piste                 EQU $620A * 2B n>>
     20                  620F     DK_secteur               EQU $620F * 1B n>>
     21                  6213     DK_destination           EQU $6213 * 2B d>>
     22                  622C     DK_dernier_bloc_a_ecrire EQU $622C * 2B f>>
     23
     24                  0014     DEBUTECRANA EQU $0014 * test pour fin sta>>
     25                  1F40     FINECRANA   EQU $1F40 * fin de la RAM A v>>
     26                  2014     DEBUTECRANB EQU $2014 * test pour fin sta>>
     27                  3F40     FINECRANB   EQU $3F40 * fin de la RAM B v>>
     28
     29                  0005     JOY_BD EQU $05 * Bas Droite
     30                  0006     JOY_HD EQU $06 * Haut Droite
     31                  0007     JOY_D  EQU $07 * Droite
     32                  0009     JOY_BG EQU $09 * Bas Gauche
     33                  000A     JOY_HG EQU $0A * Haut Gauche
     34                  000B     JOY_G  EQU $0B * Gauche
     35                  000D     JOY_B  EQU $0D * Bas
     36                  000E     JOY_H  EQU $0E * Haut
     37                  000F     JOY_C  EQU $0F * Centre
     38                  0040     JOY_A  EQU $40 * Bouton
     39
     40                  9F00     HERO_POS EQU $9F00 * Emplacement memoire >>
     41
     42                           *****************************************>>
     43                           * Debut du programme
     44                           *****************************************>>
     45        6300               BEGIN
     46  2     6300 1A   50              ORCC #$50     * desactive les inte>>
     47                            
     48                           *****************************************>>
     49                           * Initialisation du mode video
     50                           *****************************************>>
     51  2     6302 86   7B              LDA #$7B      * passage en mode 16>>
     52  5     6304 B7   E7DC            STA $E7DC
     53                            
     54                           *****************************************>>
     55                           * Initialisation de la palette en noir
     56                           *****************************************>>
     57
     58  3     6307 CC   0000            LDD #$0000
     59        630A               SETBLACKPALETTE
     60  5     630A B7   E7DB            STA $E7DB     * determine l'indice>>
     61  5     630D F7   E7DA            STB $E7DA     * set de la couleur >>
     62  5     6310 F7   E7DA            STB $E7DA   * set de la couleur Bl>>
     63  2     6313 8B   02              ADDA #$02     * increment de l'ind>>
     64  2     6315 81   20              CMPA #$20     * si on atteint 32 s>>
     65  3     6317 26   F1              BNE    SETBLACKPALETTE
     66                            
     67                                  * Bordure initialisee avec couleur>>
     68                                  **********************************>>
     69                            
     70  5     6319 F6   E7DD         LDB $E7DD
     71  2     631C C4   F0              ANDB #$F0
     72  5     631E F7   E7DD            STB $E7DD
     73
     74                           *****************************************>>
     75                           * Chargement des pages memoire
     76                           *****************************************>>
     77                                  * Chargement des pages depuis la d>>
     78                                  **********************************>>
     79                            
     80  3     6321 CC   0004            LDD #$0004
     81  6     6324 FD   620A            STD DK_piste
     82  2     6327 86   01              LDA #$01
     83  5     6329 B7   620F            STA DK_secteur
     84  3     632C CC   DF00            LDD #$DF00
     85  6     632F FD   622C            STD DK_dernier_bloc_a_ecrire
     86                            
     87        6332               LDPAGE_LOOP
     88  2     6332 C6   00              LDB #$00
     89  5     6334 F7   E7E5            STB $E7E5 * Selection de la page e>>
     90                            
     91  2     6337 86   01              LDA #$01
     92  5     6339 B7   620F            STA DK_secteur
     93  3     633C CC   A000            LDD #$A000
     94  6     633F FD   6213            STD DK_destination
     95  8     6342 BD   6205            JSR DK_lecture
     96                            
     97                                  * Duplication de la page p en p+1
     98                                  *********************************
     99        6345               CPPAGE_LOOP
    100  2     6345 C6   62              LDB #$62                       * O>>
    101  5     6347 F7   E7E6            STB $E7E6                      * e>>
    102
    103  3     634A CE   A000         LDU #$A000                     * Sour>>
    104  4     634D 108E 4040         LDY #$4000+64                  * Dest>>
    105  7     6351 10BF 6534            STY MEM_COPY_DATA_TO_CART_E+2
    106  4     6355 108E 2040         LDY #$2000+64                  * Dest>>
    107  8     6359 BD   644C         JSR MEM_COPY_DATA_TO_CART      * Copi>>
    108                            
    109  3     635C CE   C000         LDU #$C000                     * Sour>>
    110  4     635F 108E 2040         LDY #$2000+64                  * Dest>>
    111  7     6363 10BF 6534            STY MEM_COPY_DATA_TO_CART_E+2
    112  4     6367 108E 0040         LDY #$0000+64                  * Dest>>
    113  8     636B BD   644C         JSR MEM_COPY_DATA_TO_CART      * Copi>>
    114
    115        636E               PAGEINITNEXT
    116  3     636E 20   00           BRA PAGEINIT
    117
    118        6370               PAGEINIT
    119  2     6370 86   04              LDA #$04
    120  5     6372 B7   6333            STA LDPAGE_LOOP+1
    121  2     6375 86   65           LDA #$65
    122  5     6377 B7   6346         STA CPPAGE_LOOP+1
    123  2     637A 86   11           LDA #$11
    124  5     637C B7   636F            STA PAGEINITNEXT+1
    125  3     637F 20   B1           BRA LDPAGE_LOOP
    126
    127        6381               PAGENEXT
    128  7     6381 7C   6346         INC CPPAGE_LOOP+1
    129  7     6384 7C   6346            INC CPPAGE_LOOP+1
    130  7     6387 7C   6333            INC LDPAGE_LOOP+1
    131  7     638A 7C   6333            INC LDPAGE_LOOP+1
    132  5     638D F6   6333            LDB LDPAGE_LOOP+1
    133  2     6390 C1   16              CMPB #$16
    134  3     6392 23   9E              BLS LDPAGE_LOOP
    135
    136                           *****************************************>>
    137                           * Initialisation de la routine de commuta>>
    138                           *****************************************>>
    139        6394               INIT_VID
    140  5     6394 F6   6081            LDB $6081 * A documenter
    141  2     6397 CA   10              ORB #$10  * mettre le bit d4 a 1
    142  5     6399 F7   6081            STB $6081
    143  5     639C F7   E7E7            STB $E7E7
    144  8     639F BD   641D            JSR SCRC     * page 2 en RAM Carto>>
    145
    146                           *****************************************>>
    147                           * Initialisation de la palette de couleur>>
    148                           *****************************************>>
    149                           * Ecriture en $E7DB de l'adresse ou sera >>
    150                           *
    151                           * les adresses vont de deux en deux car i>>
    152                           * couleur: 0, adresse: 00
    153                           * couleur: 1, adresse: 02
    154                           * couleur: 2, adresse: 04
    155                           * ...
    156                           *
    157                           * Deux ecritures en $E7DA (auto-increment>>
    158                           *                          positionnee en>>
    159                           *
    160                           *                             V V V V    >>
    161                           * Premiere adresse        fondamentale V >>
    162                           *
    163                           * Deuxieme adresse            X X X M    >>
    164                           * auto-incrementee        bit de marquage>>
    165                           *
    166                           * Piste d'optim pour changer plus de coul>>
    167                           * ne changer que la moditie des donnees d>>
    168                           *****************************************>>
    169
    170  4     63A2 108E 65E8            LDY #TABPALETTE
    171  2     63A6 4F                   CLRA                        * regi>>
    172        63A7               SETPALETTE
    173  5+1   63A7 34   02              PSHS A                      * sauv>>
    174  2     63A9 48                   ASLA                        * mult>>
    175  5     63AA B7   E7DB            STA $E7DB                   * dete>>
    176  5+3   63AD EC   A1              LDD ,Y++                    * char>>
    177  5     63AF F7   E7DA            STB $E7DA                   * set >>
    178  5     63B2 B7   E7DA            STA $E7DA           * set de la co>>
    179  5+1   63B5 35   02              PULS A                      * rech>>
    180  2     63B7 4C                   INCA                        * et i>>
    181  5     63B8 108C 6608            CMPY #FINTABPALETTE * test fin de >>
    182  3     63BC 26   E9              BNE    SETPALETTE      * on rebouc>>
    183
    184                           *****************************************>>
    185                           * Initialisation des sprites
    186                           *****************************************>>
    187  3     63BE 8E   697A            LDX #HERO_IDLE_R
    188  6     63C1 BF   6B17            STX HERO_ANIMATION_ADR_OLD
    189  8     63C4 BD   68B4            JSR HERO_ANIMATION_LOAD
    190
    191                           *****************************************>>
    192                           * Boucle principale
    193                           *****************************************>>
    194
    195                                  * Init routine effacement sprite
    196  8     63C7 BD   687B            JSR Compute_Position
    197  5     63CA F6   6B1B            LDB HERO_ANIMATION_PAG            >>
    198  5     63CD F7   6B1D            STB HERO_ANIMATION_PAG_DEL
    199  5     63D0 F7   E7E5            STB $E7E5                         >>
    200  7+3   63D3 AD   9F 6B23         JSR [HERO_ANIMATION_DRW]          >>
    201  8     63D7 BD   641D            JSR SCRC
    202  3     63DA 20   0D              BRA MAIN_0
    203                            
    204        63DC               MAIN
    205                                  * Effacement et affichage des spri>>
    206  6     63DC FC   6B1D            LDD HERO_ANIMATION_PAG_DEL        >>
    207  5     63DF F7   6B1D            STB HERO_ANIMATION_PAG_DEL
    208  5     63E2 B7   E7E5            STA $E7E5                         >>
    209  7+3   63E5 AD   9F 6B1F         JSR [HERO_ANIMATION_DEL]          >>
    210        63E9               MAIN_0
    211  6     63E9 FC   6B21            LDD HERO_ANIMATION_DEL+2          >>
    212  6     63EC FD   6B1F            STD HERO_ANIMATION_DEL
    213
    214                                  * Gestion des deplacements
    215  8     63EF BD   6608            JSR JOY_READ
    216  8     63F2 BD   662A            JSR Hero_Move
    217  8     63F5 BD   687B            JSR Compute_Position
    218  6     63F8 BE   6B15            LDX HERO_ANIMATION_ADR
    219  7     63FB BC   6B17            CMPX HERO_ANIMATION_ADR_OLD
    220  3     63FE 26   05              BNE MAIN_1
    221  8     6400 BD   6927            JSR HERO_ANIMATION_NEXT
    222  3     6403 20   06              BRA MAIN_2
    223        6405               MAIN_1
    224  6     6405 BF   6B17            STX HERO_ANIMATION_ADR_OLD
    225  8     6408 BD   68B4            JSR HERO_ANIMATION_LOAD
    226        640B               MAIN_2
    227                            
    228  5     640B F6   6B1B            LDB HERO_ANIMATION_PAG            >>
    229  5     640E F7   6B1E            STB HERO_ANIMATION_PAG_DEL+1
    230  5     6411 F7   E7E5            STB $E7E5                         >>
    231  7+3   6414 AD   9F 6B23         JSR [HERO_ANIMATION_DRW]          >>
    232                            
    233  8     6418 BD   641D            JSR SCRC                          >>
    234  3     641B 20   BF              BRA MAIN
    235
    236                           *****************************************>>
    237                           * Changement de page ESPACE ECRAN (affich>>
    238                           *      $E7DD determine la page affichee d>>
    239                           *      D7=0 D6=0 D5=0 D4=0 (#$0_) : page >>
    240                           *      D7=0 D6=1 D5=0 D4=0 (#$4_) : page >>
    241                           *      D7=1 D6=0 D5=0 D4=0 (#$8_) : page >>
    242                           *      D7=1 D6=1 D5=0 D4=0 (#$C_) : page >>
    243                           *   D3 D2 D1 D0  (#$_0 a #$_F) : couleur >>
    244                           *   Remarque : D5 et D4 utilisable unique>>
    245                           *
    246                           * Changement de page ESPACE CARTOUCHE (ec>>
    247                           *      $E7E6 determine la page affichee d>>
    248                           *   D5 : 1 = espace cartouche recouvert p>>
    249                           *   D4 : 0 = CAS1N valide : banques 0-15 >>
    250                           *      D5=1 D4=0 D3=0 D2=0 D1=0 D0=0 (#$6>>
    251                           *   ...
    252                           *      D5=1 D4=0 D3=1 D2=1 D1=1 D0=1 (#$6>>
    253                           *      D5=1 D4=1 D3=0 D2=0 D1=0 D0=0 (#$7>>
    254                           *   ...
    255                           *      D5=1 D4=1 D3=1 D2=1 D1=1 D0=1 (#$7>>
    256                           *****************************************>>
    257        641D               SCRC
    258  7     641D 8D   22              BSR VSYNC
    259
    260  5     641F F6   6438            LDB SCRC0+1
    261  2     6422 C4   01              ANDB #$01
    262  5     6424 FB   6B1C            ADDB HERO_ANIMATION_PAG_REF
    263  5     6427 F7   6B1B            STB HERO_ANIMATION_PAG
    264                            
    265  5     642A F6   6438            LDB SCRC0+1   * charge la valeur d>>
    266  2     642D C4   80              ANDB #$80     * permute #$00 ou #$>>
    267  2     642F CA   00              ORB #$00      * recharger la coule>>
    268  5     6431 F7   E7DD            STB $E7DD     * changement page da>>
    269  7     6434 73   6438            COM SCRC0+1   * modification du co>>
    270        6437               SCRC0
    271  2     6437 C6   00              LDB #$00
    272  2     6439 C4   02              ANDB #$02     * permute #$60 ou #$>>
    273  2     643B CA   60              ORB #$60      * espace cartouche r>>
    274  5     643D F7   E7E6            STB $E7E6     * changement page da>>
    275  5     6440 39                   RTS                  * E7E6 D5=1 p>>
    276                                                       * CAS1N : ban>>
    277
    278                           *****************************************>>
    279                           * Attente VBL
    280                           *****************************************>>
    281        6441               VSYNC
    282        6441               VSYNC_1
    283  7     6441 7D   E7E7            TST    $E7E7
    284  3     6444 2A   FB              BPL    VSYNC_1
    285        6446               VSYNC_2
    286  7     6446 7D   E7E7            TST    $E7E7
    287  3     6449 2B   FB              BMI    VSYNC_2
    288  5     644B 39                   RTS
    289
    290                           *****************************************>>
    291                           * Copie Memoire de la zone donnee vers ca>>
    292                           * Cycles en fonction de l'implementation
    293                           * 256 octets (-128 a 127) x 64  boucles (>>
    294                           * 128 octets (-64  a 63)  x 128 boucles (>>
    295                           * 32  octets (-16  a 15)  x 512 boucles (>>
    296                           *****************************************>>
    297                            
    298        644C               MEM_COPY_DATA_TO_CART
    299  7     644C 10FF 653C        STS MEM_COPY_DATA_TO_CART_S+2  * sauve>>
    300  4+0   6450 32   C4          LEAS ,U * remplacement de TFR U,S (Gai>>
    301        6452               MEM_COPY_DATA_TO_CART_LOOP
    302  5+6   6452 35   56          PULS       D,X,U
    303  5+1   6454 ED   A8 C0       STD -64,Y
    304  5+1   6457 AF   A8 C2       STX -62,Y
    305  5+1   645A EF   A8 C4       STU -60,Y
    306  5+6   645D 35   56          PULS       D,X,U
    307  5+1   645F ED   A8 C6       STD -58,Y
    308  5+1   6462 AF   A8 C8       STX -56,Y
    309  5+1   6465 EF   A8 CA       STU -54,Y
    310  5+6   6468 35   56          PULS       D,X,U
    311  5+1   646A ED   A8 CC       STD -52,Y
    312  5+1   646D AF   A8 CE       STX -50,Y
    313  5+1   6470 EF   A8 D0       STU -48,Y
    314  5+6   6473 35   56          PULS       D,X,U
    315  5+1   6475 ED   A8 D2       STD -46,Y
    316  5+1   6478 AF   A8 D4       STX -44,Y
    317  5+1   647B EF   A8 D6       STU -42,Y
    318  5+6   647E 35   56          PULS       D,X,U
    319  5+1   6480 ED   A8 D8       STD -40,Y
    320  5+1   6483 AF   A8 DA       STX -38,Y
    321  5+1   6486 EF   A8 DC       STU -36,Y
    322  5+6   6489 35   56          PULS       D,X,U
    323  5+1   648B ED   A8 DE       STD -34,Y
    324  5+1   648E AF   A8 E0       STX -32,Y
    325  5+1   6491 EF   A8 E2       STU -30,Y
    326  5+6   6494 35   56          PULS       D,X,U
    327  5+1   6496 ED   A8 E4       STD -28,Y
    328  5+1   6499 AF   A8 E6       STX -26,Y
    329  5+1   649C EF   A8 E8       STU -24,Y
    330  5+6   649F 35   56          PULS       D,X,U
    331  5+1   64A1 ED   A8 EA       STD -22,Y
    332  5+1   64A4 AF   A8 EC       STX -20,Y
    333  5+1   64A7 EF   A8 EE       STU -18,Y
    334  5+6   64AA 35   56          PULS       D,X,U
    335  5+1   64AC ED   30          STD -16,Y
    336  5+1   64AE AF   32          STX -14,Y
    337  5+1   64B0 EF   34          STU -12,Y
    338  5+6   64B2 35   56          PULS       D,X,U
    339  5+1   64B4 ED   36          STD -10,Y
    340  5+1   64B6 AF   38          STX -8,Y
    341  5+1   64B8 EF   3A          STU -6,Y
    342  5+6   64BA 35   56          PULS       D,X,U
    343  5+1   64BC ED   3C          STD -4,Y
    344  5+1   64BE AF   3E          STX -2,Y
    345  5+0   64C0 EF   A4          STU ,Y
    346  5+6   64C2 35   56          PULS       D,X,U
    347  5+1   64C4 ED   22          STD 2,Y
    348  5+1   64C6 AF   24          STX 4,Y
    349  5+1   64C8 EF   26          STU 6,Y
    350  5+6   64CA 35   56          PULS       D,X,U
    351  5+1   64CC ED   28          STD 8,Y
    352  5+1   64CE AF   2A          STX 10,Y
    353  5+1   64D0 EF   2C          STU 12,Y
    354  5+6   64D2 35   56          PULS       D,X,U
    355  5+1   64D4 ED   2E          STD 14,Y
    356  5+1   64D6 AF   A8 10       STX 16,Y
    357  5+1   64D9 EF   A8 12       STU 18,Y
    358  5+6   64DC 35   56          PULS       D,X,U
    359  5+1   64DE ED   A8 14       STD 20,Y
    360  5+1   64E1 AF   A8 16       STX 22,Y
    361  5+1   64E4 EF   A8 18       STU 24,Y
    362  5+6   64E7 35   56          PULS       D,X,U
    363  5+1   64E9 ED   A8 1A       STD 26,Y
    364  5+1   64EC AF   A8 1C       STX 28,Y
    365  5+1   64EF EF   A8 1E       STU 30,Y
    366  5+6   64F2 35   56          PULS       D,X,U
    367  5+1   64F4 ED   A8 20       STD 32,Y
    368  5+1   64F7 AF   A8 22       STX 34,Y
    369  5+1   64FA EF   A8 24       STU 36,Y
    370  5+6   64FD 35   56          PULS       D,X,U
    371  5+1   64FF ED   A8 26       STD 38,Y
    372  5+1   6502 AF   A8 28       STX 40,Y
    373  5+1   6505 EF   A8 2A       STU 42,Y
    374  5+6   6508 35   56          PULS       D,X,U
    375  5+1   650A ED   A8 2C       STD 44,Y
    376  5+1   650D AF   A8 2E       STX 46,Y
    377  5+1   6510 EF   A8 30       STU 48,Y
    378  5+6   6513 35   56          PULS       D,X,U
    379  5+1   6515 ED   A8 32       STD 50,Y
    380  5+1   6518 AF   A8 34       STX 52,Y
    381  5+1   651B EF   A8 36       STU 54,Y
    382  5+6   651E 35   56          PULS       D,X,U
    383  5+1   6520 ED   A8 38       STD 56,Y
    384  5+1   6523 AF   A8 3A       STX 58,Y
    385  5+1   6526 EF   A8 3C       STU 60,Y
    386  5+2   6529 35   06          PULS       D
    387  5+1   652B ED   A8 3E       STD 62,Y
    388  4+4   652E 31   A9 0080     LEAY 128,Y
    389        6532               MEM_COPY_DATA_TO_CART_E
    390  5     6532 108C 00C0        CMPY    #$00C0
    391  6     6536 1026 FF18        LBNE    MEM_COPY_DATA_TO_CART_LOOP
    392        653A               MEM_COPY_DATA_TO_CART_S
    393  4     653A 10CE 0000        LDS     #$0000    * Rechargement du po>>
    394  5     653E 39               RTS
    395
    396                           *****************************************>>
    397                           * Effacement memoire Cartouche (27000 cy)>>
    398                           *****************************************>>
    399        653F               CLR_CART
    400  5+3   653F 34   48           PSHS U,DP
    401  7     6541 10FF 6576         STS CLR_CART_3+2
    402  4     6545 10CE 4000         LDS #$4000
    403  3     6549 CE   0C0C         LDU #$0C0C
    404  4     654C 108E 0C0C         LDY #$0C0C
    405  3     6550 8E   0C0C         LDX #$0C0C
    406  3     6553 CC   0C0C         LDD #$0C0C
    407  6     6556 1F   8B           TFR A,DP
    408        6558               CLR_CART_2
    409  5+9   6558 34   7E           PSHS U,Y,X,DP,B,A
    410  5+9   655A 34   7E           PSHS U,Y,X,DP,B,A
    411  5+9   655C 34   7E           PSHS U,Y,X,DP,B,A
    412  5+9   655E 34   7E           PSHS U,Y,X,DP,B,A
    413  5+9   6560 34   7E           PSHS U,Y,X,DP,B,A
    414  5+9   6562 34   7E           PSHS U,Y,X,DP,B,A
    415  5+9   6564 34   7E           PSHS U,Y,X,DP,B,A
    416  5+9   6566 34   7E           PSHS U,Y,X,DP,B,A
    417  5+9   6568 34   7E           PSHS U,Y,X,DP,B,A
    418  5+9   656A 34   7E           PSHS U,Y,X,DP,B,A
    419  5     656C 118C 0004         CMPS #$0004
    420  3     6570 26   E6           BNE CLR_CART_2
    421  5+4   6572 34   60           PSHS U,Y
    422        6574               CLR_CART_3
    423  4     6574 10CE 0000         LDS #$0000
    424  5+5   6578 35   C8           PULS DP,U,PC * Ajout du PC au PULS po>>
    425                            
    426                           *****************************************>>
    427                           * Affichage de l arriere plan 57900 cycle>>
    428                           *****************************************>>
    429        657A               DRAW_RAM_DATA_TO_CART_160x200
    430  5+3   657A 34   48              PSHS U,DP            * sauvegarde >>
    431  7     657C 10FF 65E4            STS DRAW_RAM_DATA_TO_CART_160x200A>>
    432                            
    433  4     6580 10CE 1F40            LDS #FINECRANA       * init pointe>>
    434  3     6584 CE   A000            LDU #$A000
    435
    436        6587               DRAW_RAM_DATA_TO_CART_160x200A
    437  5+7   6587 37   3E              PULU A,B,DP,X,Y
    438  5+7   6589 34   3E              PSHS Y,X,DP,B,A
    439  5+7   658B 37   3E              PULU A,B,DP,X,Y
    440  5+7   658D 34   3E              PSHS Y,X,DP,B,A
    441  5+7   658F 37   3E              PULU A,B,DP,X,Y
    442  5+7   6591 34   3E              PSHS Y,X,DP,B,A
    443  5+7   6593 37   3E              PULU A,B,DP,X,Y
    444  5+7   6595 34   3E              PSHS Y,X,DP,B,A
    445  5+7   6597 37   3E              PULU A,B,DP,X,Y
    446  5+7   6599 34   3E              PSHS Y,X,DP,B,A
    447  5+7   659B 37   3E              PULU A,B,DP,X,Y
    448  5+7   659D 34   3E              PSHS Y,X,DP,B,A
    449  5     659F 118C 0014            CMPS #DEBUTECRANA
    450  3     65A3 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200A>>
    451  5+7   65A5 37   3E              PULU A,B,DP,X,Y
    452  5+7   65A7 34   3E              PSHS Y,X,DP,B,A
    453  5+7   65A9 37   3E              PULU A,B,DP,X,Y
    454  5+7   65AB 34   3E              PSHS Y,X,DP,B,A
    455  5+6   65AD 37   3C              PULU B,DP,X,Y
    456  5+6   65AF 34   3C              PSHS Y,X,DP,B
    457
    458  4     65B1 10CE 3F40            LDS #FINECRANB       * init pointe>>
    459  3     65B5 CE   C000            LDU #$C000
    460
    461        65B8               DRAW_RAM_DATA_TO_CART_160x200B
    462  5+7   65B8 37   3E              PULU A,B,DP,X,Y
    463  5+7   65BA 34   3E              PSHS Y,X,DP,B,A
    464  5+7   65BC 37   3E              PULU A,B,DP,X,Y
    465  5+7   65BE 34   3E              PSHS Y,X,DP,B,A
    466  5+7   65C0 37   3E              PULU A,B,DP,X,Y
    467  5+7   65C2 34   3E              PSHS Y,X,DP,B,A
    468  5+7   65C4 37   3E              PULU A,B,DP,X,Y
    469  5+7   65C6 34   3E              PSHS Y,X,DP,B,A
    470  5+7   65C8 37   3E              PULU A,B,DP,X,Y
    471  5+7   65CA 34   3E              PSHS Y,X,DP,B,A
    472  5+7   65CC 37   3E              PULU A,B,DP,X,Y
    473  5+7   65CE 34   3E              PSHS Y,X,DP,B,A
    474  5     65D0 118C 2014            CMPS #DEBUTECRANB
    475  3     65D4 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200B>>
    476  5+7   65D6 37   3E              PULU A,B,DP,X,Y
    477  5+7   65D8 34   3E              PSHS Y,X,DP,B,A
    478  5+7   65DA 37   3E              PULU A,B,DP,X,Y
    479  5+7   65DC 34   3E              PSHS Y,X,DP,B,A
    480  5+6   65DE 37   3C              PULU B,DP,X,Y
    481  5+6   65E0 34   3C              PSHS Y,X,DP,B
    482        65E2               DRAW_RAM_DATA_TO_CART_160x200A_E
    483  4     65E2 10CE 0000            LDS  #$0000 * rechargement des reg>>
    484  5+5   65E6 35   C8              PULS DP,U,PC * Ajout du PC au PULS>>
    485
    486                           *****************************************>>
    487                           * Palette de 16 couleurs
    488                           *****************************************>>
    489        65E8               TABPALETTE
    490        65E8 0000                 FDB $0000     * index:1  R:0   V:0>>
    491        65EA 0004                 FDB $0004     * index:2  R:139 V:2>>
    492        65EC 047D                 FDB $047d     * index:3  R:236 V:1>>
    493        65EE 0028                 FDB $0028     * index:4  R:189 V:9>>
    494        65F0 006A                 FDB $006a     * index:5  R:206 V:1>>
    495        65F2 01A6                 FDB $01a6     * index:6  R:167 V:2>>
    496        65F4 0061                 FDB $0061     * index:7  R:75  V:1>>
    497        65F6 0020                 FDB $0020     * index:8  R:16  V:9>>
    498        65F8 0010                 FDB $0010     * index:9  R:0   V:4>>
    499        65FA 0220                 FDB $0220     * index:10 R:22  V:8>>
    500        65FC 0B82                 FDB $0b82     * index:11 R:103 V:1>>
    501        65FE 0DDD                 FDB $0ddd     * index:12 R:239 V:2>>
    502        6600 0D30                 FDB $0d30     * index:13 R:9   V:1>>
    503        6602 0700                 FDB $0700     * index:14 R:12  V:3>>
    504        6604 0000                 FDB $0000     * index:15 R:53  V:7>>
    505        6606 000C                 FDB $000c     * index:16 R:225 V:0>>
    506        6608               FINTABPALETTE
    507
    508                           *****************************************>>
    509                           * Get joystick parameters
    510                           *****************************************>>
    511        6608               JOY_READ
    512  5     6608 B6   6627            LDA    JOY_BTN_STATUS
    513  5     660B B7   6628            STA JOY_BTN_STATUS_OLD
    514  3     660E 8E   E7CF            ldx    #$e7cf
    515  4     6611 108E E7CD            ldy    #$e7cd
    516  3     6615 CC   400F            ldd    #$400f
    517  5     6618 F4   E7CC            andb   >$e7cc     * Read position
    518  5     661B F7   6626            stb    JOY_DIR_STATUS
    519  4+0   661E A4   A4              anda   ,y         * Read button
    520  2     6620 88   40              eora   #$40
    521  5     6622 B7   6627            sta    JOY_BTN_STATUS
    522  5     6625 39                   RTS
    523        6626               JOY_DIR_STATUS
    524        6626 00                   FCB $00 * Position Pad
    525        6627               JOY_BTN_STATUS
    526        6627 00                   FCB $00 * 40 Bouton A enfonce
    527        6628               JOY_BTN_STATUS_OLD
    528        6628 00                   FCB $00 * 40 Bouton A enfonce
    529        6629               HERO_ISJUMPING
    530        6629 00                   FCB $00       * flag is jumping $0>>
    531
    532                           *****************************************>>
    533                           * Subroutine to      make HERO walk/run
    534                           *****************************************>>
    535        662A               Hero_Move
    536                           * si bouton jump: Maj ysp Jump start & ch>>
    537  6     662A FC   6627            LDD JOY_BTN_STATUS
    538  5     662D 1083 4000            CMPD #$4000
    539  3     6631 26   2A              BNE Hero_alreadyJumping     * si s>>
    540  5     6633 F6   6629            LDB HERO_ISJUMPING
    541  3     6636 26   25              BNE Hero_alreadyJumping           >>
    542  7     6638 7C   6629            INC HERO_ISJUMPING          * set >>
    543  6     663B FC   6B0B            LDD HERO_G_SPEED            * char>>
    544  3     663E 2D   05              BLT Hero_JumpLeft      * si vitess>>
    545  3     6640 8E   6A02            LDX #HERO_JUMP_R        * Charge a>>
    546  3     6643 20   03              BRA Hero_Jump
    547        6645               Hero_JumpLeft
    548  3     6645 8E   6A92            LDX #HERO_JUMP_L        * Charge a>>
    549        6648               Hero_Jump
    550  6     6648 BF   6B15            STX HERO_ANIMATION_ADR      * Sauv>>
    551  6     664B FD   6B0D            STD HERO_X_SPEED            * Init>>
    552  6     664E FC   6B05            LDD HERO_AIR_JUMP_VEL       * Init>>
    553  6     6651 FD   6B11            STD HERO_Y_SPEED
    554  3     6654 CC   0000            LDD #$0000
    555  6     6657 FD   6B0F            STD HERO_X_SPS
    556  6     665A FD   6B13            STD HERO_Y_SPS
    557
    558        665D               Hero_alreadyJumping
    559                           * Maj xsp en fonction de G ou D joystick
    560  5     665D F6   6629            LDB HERO_ISJUMPING
    561  6     6660 1027 0088            LBEQ Hero_OnGround          * si u>>
    562  5     6664 B6   6626            LDA JOY_DIR_STATUS
    563  2     6667 81   07              CMPA #JOY_D
    564  3     6669 27   09              BEQ Hero_JumpAccelD
    565  2     666B 81   0B              CMPA #JOY_G
    566  3     666D 27   0D              BEQ Hero_JumpAccelG
    567  6     666F FC   6B0D            LDD HERO_X_SPEED
    568  3     6672 20   0E              BRA Hero_JumpCapTopXSpeed
    569        6674               Hero_JumpAccelD
    570  6     6674 FC   6B0D            LDD HERO_X_SPEED
    571  7     6677 F3   6AFF            ADDD HERO_AIR_X_ACCELERATION
    572  3     667A 20   06              BRA Hero_JumpCapTopXSpeed
    573        667C               Hero_JumpAccelG
    574  6     667C FC   6B0D            LDD HERO_X_SPEED
    575  7     667F B3   6AFF            SUBD HERO_AIR_X_ACCELERATION
    576
    577        6682               Hero_JumpCapTopXSpeed
    578                           * Top xsp
    579  8     6682 10B3 6AF3            CMPD HERO_X_TOP_SPEED
    580  3     6686 2F   03              BLE Hero_JumpAirDrag
    581  6     6688 FC   6AF3            LDD HERO_X_TOP_SPEED
    582                            
    583        668B               Hero_JumpAirDrag
    584                           * Maj xsp Air drag
    585  6     668B FD   6B0D            STD HERO_X_SPEED
    586  6     668E FC   6B11            LDD HERO_Y_SPEED     * si ysp (ysp>>
    587  3     6691 2C   36              BGE Hero_JumpCut
    588  5     6693 1083 FC00            CMPD #$FC00
    589  3     6697 2F   30              BLE Hero_JumpCut
    590  6     6699 FC   6B0D            LDD HERO_X_SPEED
    591  3     669C 2C   0D              BGE Hero_JumpAirDragPositive
    592  2     669E C6   C3              LDB #$C3                          >>
    593  5     66A0 F7   66C3            STB Hero_AirDragSUB
    594  3     66A3 CC   0000            LDD #$0000
    595  7     66A6 B3   6B0D            SUBD HERO_X_SPEED
    596  3     66A9 20   08              BRA Hero_JumpAirDragCommon
    597        66AB               Hero_JumpAirDragPositive
    598  2     66AB C6   83              LDB #$83                          >>
    599  5     66AD F7   66C3            STB Hero_AirDragSUB
    600  6     66B0 FC   6B0D            LDD HERO_X_SPEED
    601        66B3               Hero_JumpAirDragCommon
    602  2     66B3 44                   LSRA   * Division par 32 du regist>>
    603  2     66B4 56                   RORB
    604  2     66B5 44                   LSRA
    605  2     66B6 56                   RORB
    606  2     66B7 44                   LSRA
    607  2     66B8 56                   RORB
    608  2     66B9 44                   LSRA
    609  2     66BA 56                   RORB
    610  2     66BB 44                   LSRA
    611  2     66BC 56                   RORB
    612  5     66BD F7   66C5            STB Hero_AirDragSUB+2       * STB >>
    613  6     66C0 FC   6B0D            LDD HERO_X_SPEED
    614        66C3               Hero_AirDragSUB
    615  4     66C3 83   0000            SUBD #$0000
    616  6     66C6 FD   6B0D            STD HERO_X_SPEED
    617
    618        66C9               Hero_JumpCut
    619                           * Maj ysp Jump cut
    620  6     66C9 FC   6B11            LDD HERO_Y_SPEED
    621  7     66CC 7D   6627            TST JOY_BTN_STATUS   * si le bouto>>
    622  3     66CF 26   09              BNE Hero_JumpGravity
    623  8     66D1 10B3 6B07            CMPD HERO_AIR_JUMP_CUT      * et s>>
    624  3     66D5 2C   03              BGE Hero_JumpGravity
    625  6     66D7 FC   6B07            LDD HERO_AIR_JUMP_CUT       * ysp >>
    626
    627        66DA               Hero_JumpGravity
    628                           * Maj ysp with gravity
    629  7     66DA F3   6B01            ADDD HERO_AIR_Y_GRAVITY     * ajou>>
    630
    631        66DD               Hero_JumpCapTopYSpeed
    632                           * Top ysp
    633  8     66DD 10B3 6AF7            CMPD HERO_Y_TOP_SPEED       * si l>>
    634  3     66E1 2F   03              BLE Hero_JumpPosUpdate
    635  6     66E3 FC   6AF7            LDD HERO_Y_TOP_SPEED * on repositi>>
    636
    637        66E6               Hero_JumpPosUpdate
    638  6     66E6 FD   6B11            STD HERO_Y_SPEED
    639                            
    640                           * Maj X et Y pos
    641  4     66E9 7E   67F1            JMP Hero_MoveUpdatePosJump * rempl>>
    642
    643                           * Gestion a Terre
    644                           ********************************
    645
    646        66EC               Hero_OnGround
    647  5     66EC B6   6626            LDA JOY_DIR_STATUS
    648  2     66EF 81   0B              CMPA #JOY_G
    649  3     66F1 26   02              BNE Hero_NotLeft
    650  3     66F3 20   71              BRA Hero_MoveLeft
    651
    652        66F5               Hero_NotLeft                   * XREF: He>>
    653  2     66F5 81   07              CMPA #JOY_D
    654  3     66F7 26   03              BNE Hero_NotLeftOrRight
    655  4     66F9 7E   67AA            JMP Hero_MoveRight
    656
    657        66FC               Hero_NotLeftOrRight            * XREF: He>>
    658  6     66FC FC   6B0B            LDD HERO_G_SPEED
    659  5     66FF 1083 0000            CMPD #$0000
    660  6     6703 1027 00E1            LBEQ Hero_MoveUpdatePos  * Si la v>>
    661  3     6707 2D   32              BLT Hero_NotLeftOrRight_00 * se de>>
    662  7     6709 B3   6AFD            SUBD HERO_FRICTION     * se deplac>>
    663  5     670C 1083 0000            CMPD #$0000
    664  3     6710 2E   12              BGT Hero_NotLeftOrRight_01 * si on>>
    665  3     6712 CC   0000            LDD #$0000
    666  6     6715 FD   6B0B            STD HERO_G_SPEED
    667  6     6718 FD   6B0F            STD HERO_X_SPS
    668  3     671B 8E   697A            LDX #HERO_IDLE_R        * Charge a>>
    669  6     671E BF   6B15            STX HERO_ANIMATION_ADR      * Sauv>>
    670
    671  4     6721 7E   67E8            JMP Hero_MoveUpdatePos
    672        6724               Hero_NotLeftOrRight_01
    673  5     6724 1083 0600            CMPD #HERO_JOG_SPD_LIMIT
    674  3     6728 2C   0B              BGE Hero_NotLeftOrRight_02
    675  6     672A FD   6B0B            STD HERO_G_SPEED
    676  3     672D 8E   6937            LDX #HERO_WALK_R        * Charge a>>
    677  6     6730 BF   6B15            STX HERO_ANIMATION_ADR      * Sauv>>
    678
    679  3     6733 20   03              BRA Hero_NotLeftOrRight_03
    680        6735               Hero_NotLeftOrRight_02
    681  6     6735 FD   6B0B            STD HERO_G_SPEED
    682        6738               Hero_NotLeftOrRight_03
    683  4     6738 7E   67E8            JMP Hero_MoveUpdatePos
    684        673B               Hero_NotLeftOrRight_00
    685  7     673B F3   6AFD            ADDD HERO_FRICTION     * se deplac>>
    686  3     673E 24   0F              BCC Hero_NotLeftOrRight_11 * si on>>
    687  3     6740 CC   0000            LDD #$0000
    688  6     6743 FD   6B0B            STD HERO_G_SPEED
    689  3     6746 8E   6AE9            LDX #HERO_IDLE_L        * Charge a>>
    690  6     6749 BF   6B15            STX HERO_ANIMATION_ADR      * Sauv>>
    691
    692  4     674C 7E   67E8            JMP Hero_MoveUpdatePos
    693        674F               Hero_NotLeftOrRight_11
    694  5     674F 1083 FA00            CMPD #HERO_JOG_NEG_SPD_LIMIT
    695  3     6753 2F   0B              BLE Hero_NotLeftOrRight_12
    696  6     6755 FD   6B0B            STD HERO_G_SPEED
    697  3     6758 8E   69BF            LDX #HERO_WALK_L        * Charge a>>
    698  6     675B BF   6B15            STX HERO_ANIMATION_ADR      * Sauv>>
    699
    700  3     675E 20   03              BRA Hero_NotLeftOrRight_13
    701        6760               Hero_NotLeftOrRight_12
    702  6     6760 FD   6B0B            STD HERO_G_SPEED
    703        6763               Hero_NotLeftOrRight_13
    704  4     6763 7E   67E8            JMP Hero_MoveUpdatePos
    705
    706        6766               Hero_MoveLeft                      * XREF>>
    707  6     6766 FC   6B0B            LDD HERO_G_SPEED            * Char>>
    708  5     6769 1083 0000            CMPD #$0000                 * Test>>
    709  3     676D 2F   11              BLE Hero_MoveLeft_00        * BRAN>>
    710  7     676F B3   6AFB            SUBD HERO_DECELERATION      * orie>>
    711  3     6772 24   06              BCC Hero_MoveLeft_03        * BRAN>>
    712  3     6774 CC   0000            LDD #$0000
    713  7     6777 B3   6AFB            SUBD HERO_DECELERATION      * si l>>
    714        677A               Hero_MoveLeft_03
    715  6     677A FD   6B0B            STD HERO_G_SPEED            * On s>>
    716  4     677D 7E   67E8            JMP Hero_MoveUpdatePos            >>
    717        6780               Hero_MoveLeft_00                         >>
    718  8     6780 10B3 6AF5            CMPD HERO_X_NEG_TOP_SPEED   * Comp>>
    719  3     6784 27   62              BEQ Hero_MoveUpdatePos      * vite>>
    720  7     6786 B3   6AF9            SUBD HERO_ACCELERATION      * acce>>
    721  8     6789 10B3 6AF5            CMPD HERO_X_NEG_TOP_SPEED   * Comp>>
    722  3     678D 2E   0F              BGT Hero_MoveLeft_01        * BRAN>>
    723  3     678F 8E   6A59            LDX #HERO_RUN_L        * Charge an>>
    724  6     6792 BF   6B15            STX HERO_ANIMATION_ADR      * Sauv>>
    725
    726  6     6795 FC   6AF5            LDD HERO_X_NEG_TOP_SPEED    * Limi>>
    727  6     6798 FD   6B0B            STD HERO_G_SPEED            * Enre>>
    728  4     679B 7E   67E8            JMP Hero_MoveUpdatePos      * Mise>>
    729        679E               Hero_MoveLeft_01
    730  6     679E FD   6B0B            STD HERO_G_SPEED            * Enre>>
    731  3     67A1 8E   69BF            LDX #HERO_WALK_L        * Charge a>>
    732  6     67A4 BF   6B15            STX HERO_ANIMATION_ADR      * Sauv>>
    733
    734  4     67A7 7E   67E8            JMP Hero_MoveUpdatePos
    735
    736        67AA               Hero_MoveRight                  * XREF: H>>
    737  6     67AA FC   6B0B            LDD HERO_G_SPEED        * Chargeme>>
    738  5     67AD 1083 0000            CMPD #$0000                 * Test>>
    739  3     67B1 2C   0E              BGE Hero_MoveRight_00       * BRAN>>
    740  7     67B3 F3   6AFB            ADDD HERO_DECELERATION      * orie>>
    741  3     67B6 24   03              BCC Hero_MoveRight_03       * BRAN>>
    742  6     67B8 FC   6AFB            LDD HERO_DECELERATION   * si la vi>>
    743        67BB               Hero_MoveRight_03
    744  6     67BB FD   6B0B            STD HERO_G_SPEED        * On stock>>
    745  4     67BE 7E   67E8            JMP Hero_MoveUpdatePos            >>
    746        67C1               Hero_MoveRight_00                  * Orie>>
    747  8     67C1 10B3 6AF3            CMPD HERO_X_TOP_SPEED             >>
    748  3     67C5 27   21              BEQ Hero_MoveUpdatePos      * vite>>
    749  7     67C7 F3   6AF9            ADDD HERO_ACCELERATION      * acce>>
    750  8     67CA 10B3 6AF3            CMPD HERO_X_TOP_SPEED             >>
    751  3     67CE 2D   0F              BLT Hero_MoveRight_01       * BRAN>>
    752  3     67D0 8E   6986            LDX #HERO_RUN_R                   >>
    753  6     67D3 BF   6B15            STX HERO_ANIMATION_ADR      * Sauv>>
    754
    755  6     67D6 FC   6AF3            LDD HERO_X_TOP_SPEED        * Limi>>
    756  6     67D9 FD   6B0B            STD HERO_G_SPEED            * Enre>>
    757  4     67DC 7E   67E8            JMP Hero_MoveUpdatePos            >>
    758        67DF               Hero_MoveRight_01
    759  6     67DF FD   6B0B            STD HERO_G_SPEED                  >>
    760  3     67E2 8E   6937            LDX #HERO_WALK_R                  >>
    761  6     67E5 BF   6B15            STX HERO_ANIMATION_ADR            >>
    762
    763                           *****************************************>>
    764                           * Mise a jour de la vitesse X et Y a part>>
    765                           *****************************************>>
    766
    767        67E8               Hero_MoveUpdatePos
    768  6     67E8 FC   6B0B            LDD HERO_G_SPEED                  >>
    769                           * TODO MAJ HERO_X_SPEED : xsp = gsp*cos(a>>
    770                           * TODO MAJ HERO_Y_SPEED : ysp = gsp*-sin(>>
    771  6     67EB FD   6B0D            STD HERO_X_SPEED
    772  7     67EE 7F   6B11            CLR HERO_Y_SPEED
    773
    774                           *****************************************>>
    775                           * Mise a jour de la position X et Y a par>>
    776                           *****************************************>>
    777
    778                           * Coordonnees X
    779                           ***************
    780
    781        67F1               Hero_MoveUpdatePosJump
    782  6     67F1 FC   6B0D            LDD HERO_X_SPEED
    783  3     67F4 2C   0D              BGE Hero_MoveUpdateXPos_00        >>
    784  2     67F6 86   C0              LDA #$C0                          >>
    785  5     67F8 B7   6820            STA Hero_MoveUpdateXPos_00C       >>
    786  3     67FB CC   0000            LDD #$0000
    787  7     67FE B3   6B0D            SUBD HERO_X_SPEED                 >>
    788  3     6801 20   08              BRA Hero_MoveUpdateXPos_00A
    789        6803               Hero_MoveUpdateXPos_00
    790  2     6803 86   CB              LDA #$CB                          >>
    791  5     6805 B7   6820            STA Hero_MoveUpdateXPos_00C       >>
    792  6     6808 FC   6B0D            LDD HERO_X_SPEED
    793        680B               Hero_MoveUpdateXPos_00A
    794  7     680B F3   6B0F            ADDD HERO_X_SPS                   >>
    795  5     680E B7   6817            STA Hero_MoveUpdateXPos_00B+1     >>
    796  2     6811 84   03              ANDA #$03                         >>
    797  6     6813 FD   6B0F            STD HERO_X_SPS                    >>
    798        6816               Hero_MoveUpdateXPos_00B
    799  2     6816 C6   00              LDB #$00                          >>
    800  2     6818 54                   LSRB                              >>
    801  2     6819 54                   LSRB                              >>
    802  5     681A F7   6821            STB Hero_MoveUpdateXPos_00C+1     >>
    803  5     681D F6   6B09            LDB HERO_X_POS
    804        6820               Hero_MoveUpdateXPos_00C
    805  2     6820 CB   00              ADDB #$00                         >>
    806        6822               Hero_MoveUpdateXPos_01
    807  2     6822 C1   50              CMPB #$50                         >>
    808  3     6824 2F   02              BLE Hero_MoveUpdateXPos_02  * Bute>>
    809  2     6826 C6   50              LDB #$50                          >>
    810        6828               Hero_MoveUpdateXPos_02
    811  2     6828 C1   0C           CMPB #$0C                            >>
    812  3     682A 2C   02              BGE Hero_MoveUpdateXPos_03  * Bute>>
    813  2     682C C6   0C              LDB #$0C                          >>
    814        682E               Hero_MoveUpdateXPos_03
    815  5     682E F7   6B09            STB HERO_X_POS
    816
    817                           * Coordonnees Y
    818                           ***************
    819
    820  6     6831 FC   6B11            LDD HERO_Y_SPEED                  >>
    821  3     6834 2C   0D              BGE Hero_MoveUpdateYPos_00        >>
    822  2     6836 86   C0              LDA #$C0                          >>
    823  5     6838 B7   6857            STA Hero_MoveUpdateYPos_00C       >>
    824  3     683B CC   0000            LDD #$0000
    825  7     683E B3   6B11            SUBD HERO_Y_SPEED                 >>
    826  3     6841 20   08              BRA Hero_MoveUpdateYPos_00A
    827        6843               Hero_MoveUpdateYPos_00
    828  2     6843 86   CB              LDA #$CB                          >>
    829  5     6845 B7   6857            STA Hero_MoveUpdateYPos_00C       >>
    830  6     6848 FC   6B11            LDD HERO_Y_SPEED
    831        684B               Hero_MoveUpdateYPos_00A
    832  7     684B F3   6B13            ADDD HERO_Y_SPS                   >>
    833  5     684E F7   6B14            STB HERO_Y_SPS+1                  >>
    834  5     6851 B7   6858            STA Hero_MoveUpdateYPos_00C+1     >>
    835  5     6854 F6   6B0A            LDB HERO_Y_POS
    836        6857               Hero_MoveUpdateYPos_00C
    837  2     6857 CB   00              ADDB #$00                         >>
    838        6859               Hero_MoveUpdateYPos_01
    839  2     6859 C1   A2              CMPB #$A2                         >>
    840  3     685B 23   1A              BLS Hero_MoveUpdateYPos_03        >>
    841  2     685D C6   A2              LDB #$A2                          >>
    842  7     685F 7D   6629            TST HERO_ISJUMPING
    843  3     6862 27   13              BEQ Hero_MoveUpdateYPos_03  * pas >>
    844  5     6864 F7   6B0A            STB HERO_Y_POS
    845                           * si retombe au sol on repositionne anima>>
    846  7     6867 7F   6629            CLR HERO_ISJUMPING
    847  6     686A FC   6B0D            LDD HERO_X_SPEED
    848  6     686D FD   6B0B            STD HERO_G_SPEED
    849  3     6870 8E   697A            LDX #HERO_IDLE_R                  >>
    850  6     6873 BF   6B15            STX HERO_ANIMATION_ADR            >>
    851  5     6876 39                   RTS
    852        6877               Hero_MoveUpdateYPos_03
    853  5     6877 F7   6B0A            STB HERO_Y_POS
    854  5     687A 39                   RTS
    855
    856                           * TODO : Braking Animation
    857                           * Sonic enters his braking animation when>>
    858                           * In Sonic 1 and Sonic CD, he then stays >>
    859                           * In the other 3 games, Sonic returns to >>
    860
    861        687B               Compute_Position
    862  5     687B B6   6B09            LDA HERO_X_POS
    863  2     687E 44                   LSRA
    864  3     687F 25   17              BCS Compute_Position_01
    865  5     6881 B7   68B3            STA Compute_Position_02+1
    866  2     6884 86   28              LDA #$28
    867  5     6886 F6   6B0A            LDB HERO_Y_POS
    868  2     6889 5A                   DECB
    869  11    688A 3D                   MUL
    870  7     688B F3   68B2            ADDD Compute_Position_02
    871  6     688E FD   9F00            STD HERO_POS
    872  4     6891 C3   2000            ADDD #$2000                       >>
    873  6     6894 FD   9F02            STD HERO_POS+2
    874  5     6897 39                   RTS
    875        6898               Compute_Position_01
    876  5     6898 B7   68B3            STA Compute_Position_02+1
    877  2     689B 86   28              LDA #$28
    878  5     689D F6   6B0A            LDB HERO_Y_POS
    879  2     68A0 5A                   DECB
    880  11    68A1 3D                   MUL
    881  7     68A2 F3   68B2            ADDD Compute_Position_02
    882  4     68A5 C3   2000            ADDD #$2000
    883  6     68A8 FD   9F00            STD HERO_POS
    884  4     68AB 83   1FFF            SUBD #$1FFF
    885  6     68AE FD   9F02            STD HERO_POS+2
    886  5     68B1 39                   RTS
    887        68B2               Compute_Position_02
    888        68B2 0000                 FDB $0000
    889
    890                           *****************************************>>
    891                           * HERO Animations nb Cycles
    892                           * -------------------------
    893                           * Note: Speed abs +0, rel +8, rel cap +10>>
    894                           *
    895                           * Chargement nouvelle animation
    896                           *    nouvelle frame = 109 a 119
    897                           *
    898                           * Chargement frame suivante
    899                           *    frame identique = 15
    900                           * ou frame suivante  = 116 a 126
    901                           *
    902                           * Chargement frame suivante avec branchem>>
    903                           *    nouvelle frame = 165 a 175
    904                           * ou frame suivante = 172 a 182
    905                           *
    906                           * Chargement frame suivante avec retour s>>
    907                           *    nouvelle frame = 167 a 177
    908                           * ou frame suivante = 174 a 184
    909                           *****************************************>>
    910
    911        68B4               HERO_ANIMATION_LOAD                      >>
    912  6     68B4 BF   6B15            STX HERO_ANIMATION_ADR
    913  6     68B7 BF   6B19            STX HERO_ANIMATION_RTN_ADR
    914  7     68BA 7F   6B25            CLR HERO_ANIMATION_IMC            >>
    915        68BD               HERO_ANIMATION_LOAD_00
    916  5+1   68BD EC   1E              LDD -2,X                          >>
    917  2     68BF 81   00              CMPA #$00                         >>
    918  3     68C1 27   16              BEQ HERO_ANIMATION_LOAD_01
    919  5     68C3 B6   6B0B            LDA HERO_G_SPEED              * G_>>
    920  3     68C6 2C   08              BGE HERO_ANIMATION_LOAD_01A
    921  3     68C8 CC   0000            LDD #$0000
    922  7     68CB B3   6B0B            SUBD HERO_G_SPEED                 >>
    923  4+1   68CE E6   1F              LDB -1,X                          >>
    924        68D0               HERO_ANIMATION_LOAD_01A
    925  5     68D0 B7   68D4            STA HERO_ANIMATION_LOAD_01B+1 * Au>>
    926        68D3               HERO_ANIMATION_LOAD_01B
    927  2     68D3 C0   00              SUBB #$00                         >>
    928  3     68D5 24   02              BCC HERO_ANIMATION_LOAD_01
    929  2     68D7 C6   01              LDB #$01                          >>
    930                            
    931        68D9               HERO_ANIMATION_LOAD_01
    932  5     68D9 F7   6B27            STB HERO_ANIMATION_FRR            >>
    933  5     68DC B6   6B25            LDA HERO_ANIMATION_IMC
    934  2     68DF C6   05              LDB #$05
    935  11    68E1 3D                   MUL
    936  7     68E2 F3   6B15            ADDD HERO_ANIMATION_ADR
    937  6     68E5 1F   02              TFR D,Y
    938  4+0   68E7 E6   A4              LDB ,Y
    939  2     68E9 C1   1F              CMPB #$1F                         >>
    940  3     68EB 22   1C              BHI HERO_ANIMATION_LOAD_NOPAGE
    941  5     68ED B6   6B1B            LDA HERO_ANIMATION_PAG
    942  5     68F0 F7   6B1B            STB HERO_ANIMATION_PAG
    943  5     68F3 B1   6B1C            CMPA HERO_ANIMATION_PAG_REF
    944  3     68F6 27   03              BEQ HERO_ANIMATION_LOAD_02
    945  7     68F8 7C   6B1B            INC HERO_ANIMATION_PAG        * si>>
    946        68FB               HERO_ANIMATION_LOAD_02
    947  5     68FB F7   6B1C            STB HERO_ANIMATION_PAG_REF    * on>>
    948  5+1   68FE AE   21              LDX 1,Y
    949  6     6900 BF   6B23            STX HERO_ANIMATION_DRW
    950  5+1   6903 AE   23              LDX 3,Y
    951  6     6905 BF   6B21            STX HERO_ANIMATION_DEL+2
    952  5     6908 39                   RTS
    953        6909               HERO_ANIMATION_LOAD_NOPAGE
    954  2     6909 C1   FF              CMPB #$FF
    955  3     690B 26   0C              BNE HERO_ANIMATION_LOAD_FE
    956  5+1   690D AE   23              LDX 3,Y
    957  6     690F BF   6B25            STX HERO_ANIMATION_IMC            >>
    958  5+1   6912 AE   21              LDX 1,Y
    959  6     6914 BF   6B15            STX HERO_ANIMATION_ADR
    960  3     6917 20   A4              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    961        6919               HERO_ANIMATION_LOAD_FE
    962  6     6919 BE   6B19            LDX HERO_ANIMATION_RTN_ADR  * RETU>>
    963  6     691C BF   6B15            STX HERO_ANIMATION_ADR
    964  5     691F F6   6B26            LDB HERO_ANIMATION_RTN_IMC
    965  5     6922 F7   6B25            STB HERO_ANIMATION_IMC
    966  3     6925 20   96              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    967
    968        6927               HERO_ANIMATION_NEXT
    969  7     6927 7A   6B27            DEC HERO_ANIMATION_FRR
    970  3     692A 2F   01              BLE HERO_ANIMATION_NEXT_00  * BRAN>>
    971  5     692C 39                   RTS
    972        692D               HERO_ANIMATION_NEXT_00
    973  7     692D 7C   6B25            INC HERO_ANIMATION_IMC
    974  6     6930 BE   6B15            LDX HERO_ANIMATION_ADR
    975  3     6933 20   88              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    976                            
    977                           *   SAMPLE CODE ANIMATION
    978                           *      ---------------------
    979                           *      FDB $0018            * 00 Absolute>>
    980                           *HERO_IDLE_L
    981                           *      FCB $01                     * Page>>
    982                           *      FDB $A000            * Adresse drw>>
    983                           *      FDB $A000            * Adresse del>>
    984                           *
    985                           *      FCB $FF                     * FF S>>
    986                           *      FDB HERO_IDLE-C * adresse animatio>>
    987                           *      FDB $0301            * 03 image ci>>
    988                           *
    989                           *      FCB $FE                     * FE R>>
    990                           *
    991                           *      LDX #HERO_IDLE_R
    992                           *      JSR HERO_ANIMATION_LOAD
    993                           *
    994                           *      JSR HERO_ANIMATION_NEXT
    995
    996                           *****************************************>>
    997                           * ANIMATION Scripts
    998                           *****************************************>>
    999
   1000
   1001
   1002        6935 0106                 FDB $0106
   1003        6937               HERO_WALK_R
   1004        6937 04                   FCB $04
   1005        6938 D7A2                 FDB $D7A2
   1006        693A DD5E                 FDB $DD5E
   1007        693C 04                   FCB $04
   1008        693D CEA1                 FDB $CEA1
   1009        693F D4D4                 FDB $D4D4
   1010        6941 06                   FCB $06
   1011        6942 D565                 FDB $D565
   1012        6944 DCB7                 FDB $DCB7
   1013        6946 0E                   FCB $0E
   1014        6947 D4F0                 FDB $D4F0
   1015        6949 DC6B                 FDB $DC6B
   1016        694B 10                   FCB $10
   1017        694C D55D                 FDB $D55D
   1018        694E DCB3                 FDB $DCB3
   1019        6950 0A                   FCB $0A
   1020        6951 D5BC                 FDB $D5BC
   1021        6953 DCCB                 FDB $DCCB
   1022        6955 04                   FCB $04
   1023        6956 C590                 FDB $C590
   1024        6958 CBDC                 FDB $CBDC
   1025        695A 04                   FCB $04
   1026        695B BBEE                 FDB $BBEE
   1027        695D C293                 FDB $C293
   1028        695F 04                   FCB $04
   1029        6960 B281                 FDB $B281
   1030        6962 B8FE                 FDB $B8FE
   1031        6964 12                   FCB $12
   1032        6965 D535                 FDB $D535
   1033        6967 DCAD                 FDB $DCAD
   1034        6969 12                   FCB $12
   1035        696A CA90                 FDB $CA90
   1036        696C D1F4                 FDB $D1F4
   1037        696E 04                   FCB $04
   1038        696F A910                 FDB $A910
   1039        6971 AF93                 FDB $AF93
   1040        6973 FF                   FCB $FF
   1041        6974 6937                 FDB HERO_WALK_R
   1042        6976 0000                 FDB $0000
   1043
   1044        6978 0018                 FDB $0018
   1045        697A               HERO_IDLE_R
   1046        697A 06                   FCB $06
   1047        697B CC24                 FDB $CC24
   1048        697D D289                 FDB $D289
   1049        697F FF                   FCB $FF
   1050        6980 697A                 FDB HERO_IDLE_R
   1051        6982 0000                 FDB $0000
   1052
   1053        6984 0106                 FDB $0106
   1054        6986               HERO_RUN_R
   1055        6986 12                   FCB $12
   1056        6987 BFAE                 FDB $BFAE
   1057        6989 C74B                 FDB $C74B
   1058        698B 06                   FCB $06
   1059        698C C2A0                 FDB $C2A0
   1060        698E C93E                 FDB $C93E
   1061        6990 04                   FCB $04
   1062        6991 A000                 FDB $A000
   1063        6993 A648                 FDB $A648
   1064        6995 06                   FCB $06
   1065        6996 B999                 FDB $B999
   1066        6998 BFD1                 FDB $BFD1
   1067        699A 0C                   FCB $0C
   1068        699B D590                 FDB $D590
   1069        699D DCB7                 FDB $DCB7
   1070        699F 16                   FCB $16
   1071        69A0 C3DD                 FDB $C3DD
   1072        69A2 CBCF                 FDB $CBCF
   1073        69A4 06                   FCB $06
   1074        69A5 B0F3                 FDB $B0F3
   1075        69A7 B6DE                 FDB $B6DE
   1076        69A9 06                   FCB $06
   1077        69AA A856                 FDB $A856
   1078        69AC AE43                 FDB $AE43
   1079        69AE 08                   FCB $08
   1080        69AF D704                 FDB $D704
   1081        69B1 DD2A                 FDB $DD2A
   1082        69B3 08                   FCB $08
   1083        69B4 CCFF                 FDB $CCFF
   1084        69B6 D3EE                 FDB $D3EE
   1085        69B8 FF                   FCB $FF
   1086        69B9 6986                 FDB HERO_RUN_R
   1087        69BB 0000                 FDB $0000
   1088
   1089        69BD 0106                 FDB $0106
   1090        69BF               HERO_WALK_L
   1091        69BF 06                   FCB $06
   1092        69C0 A000                 FDB $A000
   1093        69C2 A5BC                 FDB $A5BC
   1094        69C4 08                   FCB $08
   1095        69C5 C3FE                 FDB $C3FE
   1096        69C7 CA31                 FDB $CA31
   1097        69C9 12                   FCB $12
   1098        69CA B530                 FDB $B530
   1099        69CC BC79                 FDB $BC79
   1100        69CE 12                   FCB $12
   1101        69CF AA78                 FDB $AA78
   1102        69D1 B1F3                 FDB $B1F3
   1103        69D3 12                   FCB $12
   1104        69D4 A000                 FDB $A000
   1105        69D6 A74D                 FDB $A74D
   1106        69D8 10                   FCB $10
   1107        69D9 CB41                 FDB $CB41
   1108        69DB D250                 FDB $D250
   1109        69DD 08                   FCB $08
   1110        69DE BAED                 FDB $BAED
   1111        69E0 C139                 FDB $C139
   1112        69E2 0A                   FCB $0A
   1113        69E3 CC16                 FDB $CC16
   1114        69E5 D2BE                 FDB $D2BE
   1115        69E7 08                   FCB $08
   1116        69E8 B180                 FDB $B180
   1117        69EA B7FD                 FDB $B7FD
   1118        69EC 14                   FCB $14
   1119        69ED D541                 FDB $D541
   1120        69EF DCB1                 FDB $DCB1
   1121        69F1 14                   FCB $14
   1122        69F2 CA9C                 FDB $CA9C
   1123        69F4 D200                 FDB $D200
   1124        69F6 0A                   FCB $0A
   1125        69F7 C2A1                 FDB $C2A1
   1126        69F9 C927                 FDB $C927
   1127        69FB FF                   FCB $FF
   1128        69FC 69BF                 FDB HERO_WALK_L
   1129        69FE 0000                 FDB $0000
   1130
   1131        6A00 0104                 FDB $0104
   1132        6A02               HERO_JUMP_R
   1133        6A02 08                   FCB $08
   1134        6A03 A8C0                 FDB $A8C0
   1135        6A05 AEA8                 FDB $AEA8
   1136        6A07 08                   FCB $08
   1137        6A08 A000                 FDB $A000
   1138        6A0A A5E8                 FDB $A5E8
   1139        6A0C 0A                   FCB $0A
   1140        6A0D BA7B                 FDB $BA7B
   1141        6A0F C014                 FDB $C014
   1142        6A11 0A                   FCB $0A
   1143        6A12 B1F3                 FDB $B1F3
   1144        6A14 B7D2                 FDB $B7D2
   1145        6A16 08                   FCB $08
   1146        6A17 A8C0                 FDB $A8C0
   1147        6A19 AEA8                 FDB $AEA8
   1148        6A1B 08                   FCB $08
   1149        6A1C A000                 FDB $A000
   1150        6A1E A5E8                 FDB $A5E8
   1151        6A20 0A                   FCB $0A
   1152        6A21 A8E5                 FDB $A8E5
   1153        6A23 AF30                 FDB $AF30
   1154        6A25 0A                   FCB $0A
   1155        6A26 A000                 FDB $A000
   1156        6A28 A630                 FDB $A630
   1157        6A2A 08                   FCB $08
   1158        6A2B A8C0                 FDB $A8C0
   1159        6A2D AEA8                 FDB $AEA8
   1160        6A2F 08                   FCB $08
   1161        6A30 A000                 FDB $A000
   1162        6A32 A5E8                 FDB $A5E8
   1163        6A34 0C                   FCB $0C
   1164        6A35 CC40                 FDB $CC40
   1165        6A37 D2BE                 FDB $D2BE
   1166        6A39 0C                   FCB $0C
   1167        6A3A C3CC                 FDB $C3CC
   1168        6A3C C996                 FDB $C996
   1169        6A3E 08                   FCB $08
   1170        6A3F A8C0                 FDB $A8C0
   1171        6A41 AEA8                 FDB $AEA8
   1172        6A43 08                   FCB $08
   1173        6A44 A000                 FDB $A000
   1174        6A46 A5E8                 FDB $A5E8
   1175        6A48 0C                   FCB $0C
   1176        6A49 BB05                 FDB $BB05
   1177        6A4B C11D                 FDB $C11D
   1178        6A4D 0C                   FCB $0C
   1179        6A4E B298                 FDB $B298
   1180        6A50 B86D                 FDB $B86D
   1181        6A52 FF                   FCB $FF
   1182        6A53 6A02                 FDB HERO_JUMP_R
   1183        6A55 0000                 FDB $0000
   1184
   1185        6A57 0106                 FDB $0106
   1186        6A59               HERO_RUN_L
   1187        6A59 14                   FCB $14
   1188        6A5A BFAE                 FDB $BFAE
   1189        6A5C C754                 FDB $C754
   1190        6A5E 0C                   FCB $0C
   1191        6A5F A910                 FDB $A910
   1192        6A61 AFB1                 FDB $AFB1
   1193        6A63 0C                   FCB $0C
   1194        6A64 A000                 FDB $A000
   1195        6A66 A648                 FDB $A648
   1196        6A68 0E                   FCB $0E
   1197        6A69 CBE1                 FDB $CBE1
   1198        6A6B D21F                 FDB $D21F
   1199        6A6D 14                   FCB $14
   1200        6A6E B556                 FDB $B556
   1201        6A70 BC83                 FDB $BC83
   1202        6A72 14                   FCB $14
   1203        6A73 AA09                 FDB $AA09
   1204        6A75 B1EF                 FDB $B1EF
   1205        6A77 0E                   FCB $0E
   1206        6A78 C337                 FDB $C337
   1207        6A7A C925                 FDB $C925
   1208        6A7C 0E                   FCB $0E
   1209        6A7D BA9A                 FDB $BA9A
   1210        6A7F C087                 FDB $C087
   1211        6A81 0E                   FCB $0E
   1212        6A82 B1A8                 FDB $B1A8
   1213        6A84 B7D1                 FDB $B7D1
   1214        6A86 14                   FCB $14
   1215        6A87 A000                 FDB $A000
   1216        6A89 A6F2                 FDB $A6F2
   1217        6A8B FF                   FCB $FF
   1218        6A8C 6A59                 FDB HERO_RUN_L
   1219        6A8E 0000                 FDB $0000
   1220
   1221        6A90 0104                 FDB $0104
   1222        6A92               HERO_JUMP_L
   1223        6A92 0E                   FCB $0E
   1224        6A93 A8D4                 FDB $A8D4
   1225        6A95 AECB                 FDB $AECB
   1226        6A97 0E                   FCB $0E
   1227        6A98 A000                 FDB $A000
   1228        6A9A A5F7                 FDB $A5F7
   1229        6A9C 10                   FCB $10
   1230        6A9D C317                 FDB $C317
   1231        6A9F C8B3                 FDB $C8B3
   1232        6AA1 10                   FCB $10
   1233        6AA2 BA8F                 FDB $BA8F
   1234        6AA4 C06E                 FDB $C06E
   1235        6AA6 0E                   FCB $0E
   1236        6AA7 A8D4                 FDB $A8D4
   1237        6AA9 AECB                 FDB $AECB
   1238        6AAB 0E                   FCB $0E
   1239        6AAC A000                 FDB $A000
   1240        6AAE A5F7                 FDB $A5F7
   1241        6AB0 10                   FCB $10
   1242        6AB1 B17D                 FDB $B17D
   1243        6AB3 B7CB                 FDB $B7CB
   1244        6AB5 10                   FCB $10
   1245        6AB6 A878                 FDB $A878
   1246        6AB8 AEC0                 FDB $AEC0
   1247        6ABA 0E                   FCB $0E
   1248        6ABB A8D4                 FDB $A8D4
   1249        6ABD AECB                 FDB $AECB
   1250        6ABF 0E                   FCB $0E
   1251        6AC0 A000                 FDB $A000
   1252        6AC2 A5F7                 FDB $A5F7
   1253        6AC4 16                   FCB $16
   1254        6AC5 BA85                 FDB $BA85
   1255        6AC7 C109                 FDB $C109
   1256        6AC9 10                   FCB $10
   1257        6ACA A000                 FDB $A000
   1258        6ACC A5CD                 FDB $A5CD
   1259        6ACE 0E                   FCB $0E
   1260        6ACF A8D4                 FDB $A8D4
   1261        6AD1 AECB                 FDB $AECB
   1262        6AD3 0E                   FCB $0E
   1263        6AD4 A000                 FDB $A000
   1264        6AD6 A5F7                 FDB $A5F7
   1265        6AD8 16                   FCB $16
   1266        6AD9 B1B2                 FDB $B1B2
   1267        6ADB B7D3                 FDB $B7D3
   1268        6ADD 16                   FCB $16
   1269        6ADE A941                 FDB $A941
   1270        6AE0 AF19                 FDB $AF19
   1271        6AE2 FF                   FCB $FF
   1272        6AE3 6A92                 FDB HERO_JUMP_L
   1273        6AE5 0000                 FDB $0000
   1274
   1275        6AE7 0018                 FDB $0018
   1276        6AE9               HERO_IDLE_L
   1277        6AE9 16                   FCB $16
   1278        6AEA A000                 FDB $A000
   1279        6AEC A665                 FDB $A665
   1280        6AEE FF                   FCB $FF
   1281        6AEF 6AE9                 FDB HERO_IDLE_L
   1282        6AF1 0000                 FDB $0000
   1283                            
   1284                           *****************************************>>
   1285                           * HERO Variables
   1286                           *****************************************>>
   1287
   1288        6AF3               HERO_X_TOP_SPEED
   1289        6AF3 0600                 FDB $0600        * 0600 vitesse X >>
   1290        6AF5               HERO_X_NEG_TOP_SPEED
   1291        6AF5 FA00                 FDB $FA00        * FA00 vitesse X >>
   1292        6AF7               HERO_Y_TOP_SPEED
   1293        6AF7 1000                 FDB $1000        * 0010 vitesse Y >>
   1294        6AF9               HERO_ACCELERATION
   1295        6AF9 000C                 FDB $000C        * 000C constante >>
   1296        6AFB               HERO_DECELERATION
   1297        6AFB 0080                 FDB $0080        * 0080 constante >>
   1298        6AFD               HERO_FRICTION
   1299        6AFD 000C                 FDB $000C        * 000C constante >>
   1300        6AFF               HERO_AIR_X_ACCELERATION
   1301        6AFF 0018                 FDB $0018        * 0018 constate a>>
   1302        6B01               HERO_AIR_Y_GRAVITY
   1303        6B01 0038                 FDB $0038        * 0038 constante >>
   1304        6B03               HERO_AIR_X_DRAG
   1305        6B03 00F8                 FDB $00F8        * 00F8 constante >>
   1306        6B05               HERO_AIR_JUMP_VEL
   1307        6B05 F980                 FDB $F980             * F980 const>>
   1308        6B07               HERO_AIR_JUMP_CUT
   1309        6B07 FC00                 FDB $FC00             * FC constan>>
   1310                            
   1311                           *HERO_WALK_SPD_LIMIT EQU $0400           >>
   1312                           *HERO_WALK_NEG_SPD_LIMIT EQU $FC00  * FC0>>
   1313                  0600     HERO_JOG_SPD_LIMIT EQU $0600        * 060>>
   1314                  FA00     HERO_JOG_NEG_SPD_LIMIT EQU $FA00    * FA0>>
   1315
   1316        6B09               HERO_X_POS
   1317        6B09 18                   FCB $18                     * Hori>>
   1318        6B0A               HERO_Y_POS
   1319        6B0A A2                   FCB $A2                     * Vert>>
   1320        6B0B               HERO_G_SPEED
   1321        6B0B 0000                 FDB $0000            * Ground Spee>>
   1322        6B0D               HERO_X_SPEED
   1323        6B0D 0000                 FDB $0000            * Horizontal >>
   1324        6B0F               HERO_X_SPS
   1325        6B0F 0000                 FDB $0000            * Subpixel X >>
   1326        6B11               HERO_Y_SPEED
   1327        6B11 0000                 FDB $0000            * Vertical Sp>>
   1328        6B13               HERO_Y_SPS
   1329        6B13 0000                 FDB $0000            * Subpixel Y >>
   1330                            
   1331        6B15               HERO_ANIMATION_ADR
   1332        6B15 0000                 FDB $0000        * Animation coura>>
   1333        6B17               HERO_ANIMATION_ADR_OLD
   1334        6B17 0000                 FDB $0000        * Sauvegarde anci>>
   1335        6B19               HERO_ANIMATION_RTN_ADR
   1336        6B19 0000                 FDB $0000        * Animation coura>>
   1337        6B1B               HERO_ANIMATION_PAG
   1338        6B1B 00                   FCB $00          * Animation coura>>
   1339        6B1C               HERO_ANIMATION_PAG_REF
   1340        6B1C 00                   FCB $00          * Animation coura>>
   1341        6B1D               HERO_ANIMATION_PAG_DEL
   1342        6B1D 00                   FCB $00        * Animation courant>>
   1343        6B1E 00                   FCB $00        * Animation courant>>
   1344        6B1F               HERO_ANIMATION_DEL
   1345        6B1F 0000                 FDB $0000        * Animation coura>>
   1346        6B21 0000                 FDB $0000        * Animation coura>>
   1347        6B23               HERO_ANIMATION_DRW
   1348        6B23 0000                 FDB $0000        * Animation coura>>
   1349        6B25               HERO_ANIMATION_IMC
   1350        6B25 00                   FCB $00          * Animation coura>>
   1351        6B26               HERO_ANIMATION_RTN_IMC
   1352        6B26 00                   FCB $00          * Animation coura>>
   1353        6B27               HERO_ANIMATION_FRR
   1354        6B27 00                   FCB $00          * Animation coura>>

000000 Total Errors

000155 Total Symbols
     0x          Label 6300 BEGIN
     0x          Label 653F CLR_CART
     1x          Label 6558 CLR_CART_2
     1x          Label 6574 CLR_CART_3
     2x          Label 687B Compute_Position
     1x          Label 6898 Compute_Position_01
     4x          Label 68B2 Compute_Position_02
     3x          Label 6345 CPPAGE_LOOP
     1x          Equ   0014 DEBUTECRANA
     1x          Equ   2014 DEBUTECRANB
     1x          Equ   622C DK_dernier_bloc_a_ecrire
     1x          Equ   6213 DK_destination
     1x          Equ   6205 DK_lecture
     1x          Equ   620A DK_piste
     2x          Equ   620F DK_secteur
     0x          Label 657A DRAW_RAM_DATA_TO_CART_160x200
     1x          Label 6587 DRAW_RAM_DATA_TO_CART_160x200A
     1x          Label 65E2 DRAW_RAM_DATA_TO_CART_160x200A_E
     1x          Label 65B8 DRAW_RAM_DATA_TO_CART_160x200B
     1x          Equ   1F40 FINECRANA
     1x          Equ   3F40 FINECRANB
     1x          Label 6608 FINTABPALETTE
     2x          Label 6AF9 HERO_ACCELERATION
     3x          Label 66C3 Hero_AirDragSUB
     2x          Label 6B07 HERO_AIR_JUMP_CUT
     1x          Label 6B05 HERO_AIR_JUMP_VEL
     2x          Label 6AFF HERO_AIR_X_ACCELERATION
     0x          Label 6B03 HERO_AIR_X_DRAG
     1x          Label 6B01 HERO_AIR_Y_GRAVITY
     2x          Label 665D Hero_alreadyJumping
    16x          Label 6B15 HERO_ANIMATION_ADR
     3x          Label 6B17 HERO_ANIMATION_ADR_OLD
     4x          Label 6B1F HERO_ANIMATION_DEL
     3x          Label 6B23 HERO_ANIMATION_DRW
     2x          Label 6B27 HERO_ANIMATION_FRR
     5x          Label 6B25 HERO_ANIMATION_IMC
     2x          Label 68B4 HERO_ANIMATION_LOAD
     3x          Label 68BD HERO_ANIMATION_LOAD_00
     2x          Label 68D9 HERO_ANIMATION_LOAD_01
     1x          Label 68D0 HERO_ANIMATION_LOAD_01A
     1x          Label 68D3 HERO_ANIMATION_LOAD_01B
     1x          Label 68FB HERO_ANIMATION_LOAD_02
     1x          Label 6919 HERO_ANIMATION_LOAD_FE
     1x          Label 6909 HERO_ANIMATION_LOAD_NOPAGE
     1x          Label 6927 HERO_ANIMATION_NEXT
     1x          Label 692D HERO_ANIMATION_NEXT_00
     6x          Label 6B1B HERO_ANIMATION_PAG
     4x          Label 6B1D HERO_ANIMATION_PAG_DEL
     3x          Label 6B1C HERO_ANIMATION_PAG_REF
     2x          Label 6B19 HERO_ANIMATION_RTN_ADR
     1x          Label 6B26 HERO_ANIMATION_RTN_IMC
     4x          Label 6AFB HERO_DECELERATION
     2x          Label 6AFD HERO_FRICTION
    20x          Label 6B0B HERO_G_SPEED
     2x          Label 6AE9 HERO_IDLE_L
     4x          Label 697A HERO_IDLE_R
     5x          Label 6629 HERO_ISJUMPING
     1x          Equ   FA00 HERO_JOG_NEG_SPD_LIMIT
     1x          Equ   0600 HERO_JOG_SPD_LIMIT
     1x          Label 6648 Hero_Jump
     1x          Label 6674 Hero_JumpAccelD
     1x          Label 667C Hero_JumpAccelG
     1x          Label 668B Hero_JumpAirDrag
     1x          Label 66B3 Hero_JumpAirDragCommon
     1x          Label 66AB Hero_JumpAirDragPositive
     2x          Label 6682 Hero_JumpCapTopXSpeed
     0x          Label 66DD Hero_JumpCapTopYSpeed
     2x          Label 66C9 Hero_JumpCut
     2x          Label 66DA Hero_JumpGravity
     1x          Label 6645 Hero_JumpLeft
     1x          Label 66E6 Hero_JumpPosUpdate
     2x          Label 6A92 HERO_JUMP_L
     2x          Label 6A02 HERO_JUMP_R
     1x          Label 662A Hero_Move
     1x          Label 6766 Hero_MoveLeft
     1x          Label 6780 Hero_MoveLeft_00
     1x          Label 679E Hero_MoveLeft_01
     1x          Label 677A Hero_MoveLeft_03
     1x          Label 67AA Hero_MoveRight
     1x          Label 67C1 Hero_MoveRight_00
     1x          Label 67DF Hero_MoveRight_01
     1x          Label 67BB Hero_MoveRight_03
    12x          Label 67E8 Hero_MoveUpdatePos
     1x          Label 67F1 Hero_MoveUpdatePosJump
     1x          Label 6803 Hero_MoveUpdateXPos_00
     1x          Label 680B Hero_MoveUpdateXPos_00A
     1x          Label 6816 Hero_MoveUpdateXPos_00B
     3x          Label 6820 Hero_MoveUpdateXPos_00C
     0x          Label 6822 Hero_MoveUpdateXPos_01
     1x          Label 6828 Hero_MoveUpdateXPos_02
     1x          Label 682E Hero_MoveUpdateXPos_03
     1x          Label 6843 Hero_MoveUpdateYPos_00
     1x          Label 684B Hero_MoveUpdateYPos_00A
     3x          Label 6857 Hero_MoveUpdateYPos_00C
     0x          Label 6859 Hero_MoveUpdateYPos_01
     2x          Label 6877 Hero_MoveUpdateYPos_03
     1x          Label 66F5 Hero_NotLeft
     1x          Label 66FC Hero_NotLeftOrRight
     1x          Label 673B Hero_NotLeftOrRight_00
     1x          Label 6724 Hero_NotLeftOrRight_01
     1x          Label 6735 Hero_NotLeftOrRight_02
     1x          Label 6738 Hero_NotLeftOrRight_03
     1x          Label 674F Hero_NotLeftOrRight_11
     1x          Label 6760 Hero_NotLeftOrRight_12
     1x          Label 6763 Hero_NotLeftOrRight_13
     1x          Label 66EC Hero_OnGround
     4x          Equ   9F00 HERO_POS
     2x          Label 6A59 HERO_RUN_L
     2x          Label 6986 HERO_RUN_R
     3x          Label 69BF HERO_WALK_L
     3x          Label 6937 HERO_WALK_R
     3x          Label 6AF5 HERO_X_NEG_TOP_SPEED
     3x          Label 6B09 HERO_X_POS
    15x          Label 6B0D HERO_X_SPEED
     4x          Label 6B0F HERO_X_SPS
     5x          Label 6AF3 HERO_X_TOP_SPEED
     5x          Label 6B0A HERO_Y_POS
     8x          Label 6B11 HERO_Y_SPEED
     3x          Label 6B13 HERO_Y_SPS
     2x          Label 6AF7 HERO_Y_TOP_SPEED
     0x          Label 6394 INIT_VID
     0x          Equ   0040 JOY_A
     0x          Equ   000D JOY_B
     0x          Equ   0005 JOY_BD
     0x          Equ   0009 JOY_BG
     4x          Label 6627 JOY_BTN_STATUS
     1x          Label 6628 JOY_BTN_STATUS_OLD
     0x          Equ   000F JOY_C
     2x          Equ   0007 JOY_D
     3x          Label 6626 JOY_DIR_STATUS
     2x          Equ   000B JOY_G
     0x          Equ   000E JOY_H
     0x          Equ   0006 JOY_HD
     0x          Equ   000A JOY_HG
     1x          Label 6608 JOY_READ
     6x          Label 6332 LDPAGE_LOOP
     1x          Label 63DC MAIN
     1x          Label 63E9 MAIN_0
     1x          Label 6405 MAIN_1
     1x          Label 640B MAIN_2
     2x          Label 644C MEM_COPY_DATA_TO_CART
     2x          Label 6532 MEM_COPY_DATA_TO_CART_E
     1x          Label 6452 MEM_COPY_DATA_TO_CART_LOOP
     1x          Label 653A MEM_COPY_DATA_TO_CART_S
     1x          Label 6370 PAGEINIT
     1x          Label 636E PAGEINITNEXT
     0x          Label 6381 PAGENEXT
     3x          Label 641D SCRC
     3x          Label 6437 SCRC0
     1x          Label 630A SETBLACKPALETTE
     1x          Label 63A7 SETPALETTE
     1x          Label 65E8 TABPALETTE
     1x          Label 6441 VSYNC
     1x          Label 6441 VSYNC_1
     1x          Label 6446 VSYNC_2

