/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : ./input/CODE/MAIN.ASS.TMP
 * Fichier destination : TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     20481
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        6300                      ORG $6300
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17
     18                  6205     DK_lecture               EQU $6205 * rout>>
     19                  620A     DK_piste                 EQU $620A * 2B n>>
     20                  620F     DK_secteur               EQU $620F * 1B n>>
     21                  6213     DK_destination           EQU $6213 * 2B d>>
     22                  622C     DK_dernier_bloc_a_ecrire EQU $622C * 2B f>>
     23
     24                  0014     DEBUTECRANA EQU $0014 * test pour fin sta>>
     25                  1F40     FINECRANA   EQU $1F40 * fin de la RAM A v>>
     26                  2014     DEBUTECRANB EQU $2014 * test pour fin sta>>
     27                  3F40     FINECRANB   EQU $3F40 * fin de la RAM B v>>
     28
     29                  0005     JOY_BD EQU $05 * Bas Droite
     30                  0006     JOY_HD EQU $06 * Haut Droite
     31                  0007     JOY_D  EQU $07 * Droite
     32                  0009     JOY_BG EQU $09 * Bas Gauche
     33                  000A     JOY_HG EQU $0A * Haut Gauche
     34                  000B     JOY_G  EQU $0B * Gauche
     35                  000D     JOY_B  EQU $0D * Bas
     36                  000E     JOY_H  EQU $0E * Haut
     37                  000F     JOY_C  EQU $0F * Centre
     38
     39                  9F00     HERO_POS EQU $9F00 * HERO Position
     40
     41                           *****************************************>>
     42                           * Debut du programme
     43                           *****************************************>>
     44        6300               BEGIN
     45  2     6300 1A   50              ORCC #$50     * a documenter (inte>>
     46
     47  3     6302 CC   1F40            LDD #FINECRANA
     48  6     6305 FD   9F00            STD HERO_POS
     49  3     6308 CC   3F40            LDD #FINECRANB
     50  6     630B FD   9F02            STD HERO_POS+2
     51
     52                           *****************************************>>
     53                           * Chargement des pages memoire
     54                           *****************************************>>
     55                                  * Chargement des pages depuis la d>>
     56                                  **********************************>>
     57                            
     58  3     630E CC   0004            LDD #$0004
     59  6     6311 FD   620A            STD DK_piste
     60  2     6314 86   01              LDA #$01
     61  5     6316 B7   620F            STA DK_secteur
     62  3     6319 CC   DF00            LDD #$DF00
     63  6     631C FD   622C            STD DK_dernier_bloc_a_ecrire
     64                            
     65        631F               LDPAGE_LOOP
     66  2     631F C6   00              LDB #$00
     67  5     6321 F7   E7E5            STB $E7E5 * Selection de la page e>>
     68                            
     69  2     6324 86   01              LDA #$01
     70  5     6326 B7   620F            STA DK_secteur
     71  3     6329 CC   A000            LDD #$A000
     72  6     632C FD   6213            STD DK_destination
     73  8     632F BD   6205            JSR DK_lecture
     74                            
     75                                  * Duplication de la page p en p+1
     76                                  *********************************
     77        6332               CPPAGE_LOOP
     78  2     6332 C6   62              LDB #$62                       * O>>
     79  5     6334 F7   E7E6            STB $E7E6                      * e>>
     80
     81  3     6337 CE   A000         LDU #$A000                     * Sour>>
     82  4     633A 108E 4040         LDY #$4000+64                  * Dest>>
     83  7     633E 10BF 6524            STY MEM_COPY_DATA_TO_CART_E+2
     84  4     6342 108E 2040         LDY #$2000+64                  * Dest>>
     85  8     6346 BD   643C         JSR MEM_COPY_DATA_TO_CART      * Copi>>
     86                            
     87  3     6349 CE   C000         LDU #$C000                     * Sour>>
     88  4     634C 108E 2040         LDY #$2000+64                  * Dest>>
     89  7     6350 10BF 6524            STY MEM_COPY_DATA_TO_CART_E+2
     90  4     6354 108E 0040         LDY #$0000+64                  * Dest>>
     91  8     6358 BD   643C         JSR MEM_COPY_DATA_TO_CART      * Copi>>
     92
     93        635B               PAGEINITNEXT
     94  3     635B 20   00           BRA PAGEINIT
     95
     96        635D               PAGEINIT
     97  2     635D 86   04              LDA #$04
     98  5     635F B7   6320            STA LDPAGE_LOOP+1
     99  2     6362 86   65           LDA #$65
    100  5     6364 B7   6333         STA CPPAGE_LOOP+1
    101  2     6367 86   11           LDA #$11
    102  5     6369 B7   635C            STA PAGEINITNEXT+1
    103  3     636C 20   B1           BRA LDPAGE_LOOP
    104
    105        636E               PAGENEXT
    106  7     636E 7C   6333         INC CPPAGE_LOOP+1
    107  7     6371 7C   6333            INC CPPAGE_LOOP+1
    108  7     6374 7C   6320            INC LDPAGE_LOOP+1
    109  7     6377 7C   6320            INC LDPAGE_LOOP+1
    110  5     637A F6   6320            LDB LDPAGE_LOOP+1
    111  2     637D C1   16              CMPB #$16
    112  3     637F 23   9E              BLS LDPAGE_LOOP
    113                            
    114                           *****************************************>>
    115                           * Initialisation de la routine de commuta>>
    116                           *****************************************>>
    117        6381               INIT_VID
    118  5     6381 F6   6081            LDB $6081 * A documenter
    119  2     6384 CA   10              ORB #$10  * mettre le bit d4 a 1
    120  5     6386 F7   6081            STB $6081
    121  5     6389 F7   E7E7            STB $E7E7
    122  8     638C BD   640C            JSR SCRC     * page 2 en RAM Carto>>
    123                           *      JSR CLR_CART * effacement page 2
    124                           *      JSR SCRC     * page 0 en RAM Carto>>
    125                           *      JSR CLR_CART * effacement page 0
    126                           *      JSR SCRC     * page 2 en RAM Carto>>
    127
    128                           *****************************************>>
    129                           * Initialisation du mode video
    130                           *****************************************>>
    131  2     638F 86   7B              LDA #$7B      * passage en mode 16>>
    132  5     6391 B7   E7DC            STA $E7DC
    133
    134                           *****************************************>>
    135                           * Initialisation de la palette de couleur>>
    136                           *****************************************>>
    137  4     6394 108E 65DA            LDY #TABPALETTE
    138  2     6398 4F                   CLRA
    139        6399               SETPALETTE
    140  5+1   6399 34   02              PSHS A
    141  2     639B 48                   ASLA
    142  5     639C B7   E7DB            STA $E7DB
    143  5+3   639F EC   A1              LDD ,Y++
    144  5     63A1 F7   E7DA            STB $E7DA
    145  5     63A4 B7   E7DA            STA $E7DA
    146  5+1   63A7 35   02              PULS A
    147  2     63A9 4C                   INCA
    148  5     63AA 108C 65FA            CMPY #FINTABPALETTE
    149  3     63AE 26   E9              BNE    SETPALETTE
    150
    151                           *****************************************>>
    152                           * Initialisation des sprites
    153                           *****************************************>>
    154  3     63B0 8E   685F            LDX #HERO_IDLE_R
    155  6     63B3 BF   6942            STX HERO_ANIMATION_ADR_OLD
    156  8     63B6 BD   679D            JSR HERO_ANIMATION_LOAD
    157
    158                           *****************************************>>
    159                           * Boucle principale
    160                           *****************************************>>
    161
    162                                  * Init routine effacement sprite
    163  5     63B9 F6   6946            LDB HERO_ANIMATION_PAG            >>
    164  5     63BC F7   6948            STB HERO_ANIMATION_PAG_DEL
    165  5     63BF F7   E7E5            STB $E7E5                         >>
    166  7+3   63C2 AD   9F 694E         JSR [HERO_ANIMATION_DRW]          >>
    167  8     63C6 BD   640C            JSR SCRC
    168  3     63C9 20   0D              BRA MAIN_0
    169                            
    170        63CB               MAIN
    171                                  * Effacement et affichage des spri>>
    172  6     63CB FC   6948            LDD HERO_ANIMATION_PAG_DEL        >>
    173  5     63CE F7   6948            STB HERO_ANIMATION_PAG_DEL
    174  5     63D1 B7   E7E5            STA $E7E5                         >>
    175  7+3   63D4 AD   9F 694A         JSR [HERO_ANIMATION_DEL]          >>
    176        63D8               MAIN_0
    177  6     63D8 FC   694C            LDD HERO_ANIMATION_DEL+2          >>
    178  6     63DB FD   694A            STD HERO_ANIMATION_DEL
    179
    180                                  * Gestion des deplacements
    181  8     63DE BD   65FA            JSR JOY_READ
    182  8     63E1 BD   6614            JSR Hero_Move
    183  8     63E4 BD   6764            JSR Compute_Position
    184  6     63E7 BE   6940            LDX HERO_ANIMATION_ADR
    185  7     63EA BC   6942            CMPX HERO_ANIMATION_ADR_OLD
    186  3     63ED 26   05              BNE MAIN_1
    187  8     63EF BD   680C            JSR HERO_ANIMATION_NEXT
    188  3     63F2 20   06              BRA MAIN_2
    189        63F4               MAIN_1
    190  6     63F4 BF   6942            STX HERO_ANIMATION_ADR_OLD
    191  8     63F7 BD   679D            JSR HERO_ANIMATION_LOAD
    192        63FA               MAIN_2
    193                            
    194  5     63FA F6   6946            LDB HERO_ANIMATION_PAG            >>
    195  5     63FD F7   6949            STB HERO_ANIMATION_PAG_DEL+1
    196  5     6400 F7   E7E5            STB $E7E5                         >>
    197  7+3   6403 AD   9F 694E         JSR [HERO_ANIMATION_DRW]          >>
    198                            
    199  8     6407 BD   640C            JSR SCRC                          >>
    200  3     640A 20   BF              BRA MAIN
    201
    202                           *****************************************>>
    203                           * Changement de page ESPACE ECRAN (affich>>
    204                           *      $E7DD determine la page affichee d>>
    205                           *      D7=0 D6=0 D5=0 D4=0 (#$0_) : page >>
    206                           *      D7=0 D6=1 D5=0 D4=0 (#$4_) : page >>
    207                           *      D7=1 D6=0 D5=0 D4=0 (#$8_) : page >>
    208                           *      D7=1 D6=1 D5=0 D4=0 (#$C_) : page >>
    209                           *   D3 D2 D1 D0  (#$_0 a #$_F) : couleur >>
    210                           *   Remarque : D5 et D4 utilisable unique>>
    211                           *
    212                           * Changement de page ESPACE CARTOUCHE (ec>>
    213                           *      $E7E6 determine la page affichee d>>
    214                           *   D5 : 1 = espace cartouche recouvert p>>
    215                           *   D4 : 0 = CAS1N valide : banques 0-15 >>
    216                           *      D5=1 D4=0 D3=0 D2=0 D1=0 D0=0 (#$6>>
    217                           *   ...
    218                           *      D5=1 D4=0 D3=1 D2=1 D1=1 D0=1 (#$6>>
    219                           *      D5=1 D4=1 D3=0 D2=0 D1=0 D0=0 (#$7>>
    220                           *   ...
    221                           *      D5=1 D4=1 D3=1 D2=1 D1=1 D0=1 (#$7>>
    222                           *****************************************>>
    223        640C               SCRC
    224  8     640C BD   6431            JSR VSYNC
    225
    226  5     640F F6   6428            LDB SCRC0+1
    227  2     6412 C4   01              ANDB #$01
    228  5     6414 FB   6947            ADDB HERO_ANIMATION_PAG_REF
    229  5     6417 F7   6946            STB HERO_ANIMATION_PAG
    230                            
    231  5     641A F6   6428            LDB SCRC0+1   * charge la valeur d>>
    232  2     641D C4   80              ANDB #$80     * permute #$00 ou #$>>
    233  2     641F CA   00              ORB #$00      * recharger la coule>>
    234  5     6421 F7   E7DD            STB $E7DD     * changement page da>>
    235  7     6424 73   6428            COM SCRC0+1   * modification du co>>
    236        6427               SCRC0
    237  2     6427 C6   00              LDB #$00
    238  2     6429 C4   02              ANDB #$02     * permute #$60 ou #$>>
    239  2     642B CA   60              ORB #$60      * espace cartouche r>>
    240  5     642D F7   E7E6            STB $E7E6     * changement page da>>
    241  5     6430 39                   RTS                  * E7E6 D5=1 p>>
    242                                                       * CAS1N : ban>>
    243
    244                           *****************************************>>
    245                           * Attente VBL
    246                           *****************************************>>
    247        6431               VSYNC
    248        6431               VSYNC_1
    249  7     6431 7D   E7E7            TST    $E7E7
    250  3     6434 2A   FB              BPL    VSYNC_1
    251        6436               VSYNC_2
    252  7     6436 7D   E7E7            TST    $E7E7
    253  3     6439 2B   FB              BMI    VSYNC_2
    254  5     643B 39                   RTS
    255
    256                           *****************************************>>
    257                           * Copie Memoire de la zone donnee vers ca>>
    258                           * Cycles en fonction de l'implementation
    259                           * 256 octets (-128 a 127) x 64  boucles (>>
    260                           * 128 octets (-64  a 63)  x 128 boucles (>>
    261                           * 32  octets (-16  a 15)  x 512 boucles (>>
    262                           *****************************************>>
    263                            
    264        643C               MEM_COPY_DATA_TO_CART
    265  7     643C 10FF 652C        STS MEM_COPY_DATA_TO_CART_S+2  * sauve>>
    266  6     6440 1F   34          TFR U,S
    267        6442               MEM_COPY_DATA_TO_CART_LOOP
    268  5+6   6442 35   56          PULS       D,X,U
    269  5+1   6444 ED   A8 C0       STD -64,Y
    270  5+1   6447 AF   A8 C2       STX -62,Y
    271  5+1   644A EF   A8 C4       STU -60,Y
    272  5+6   644D 35   56          PULS       D,X,U
    273  5+1   644F ED   A8 C6       STD -58,Y
    274  5+1   6452 AF   A8 C8       STX -56,Y
    275  5+1   6455 EF   A8 CA       STU -54,Y
    276  5+6   6458 35   56          PULS       D,X,U
    277  5+1   645A ED   A8 CC       STD -52,Y
    278  5+1   645D AF   A8 CE       STX -50,Y
    279  5+1   6460 EF   A8 D0       STU -48,Y
    280  5+6   6463 35   56          PULS       D,X,U
    281  5+1   6465 ED   A8 D2       STD -46,Y
    282  5+1   6468 AF   A8 D4       STX -44,Y
    283  5+1   646B EF   A8 D6       STU -42,Y
    284  5+6   646E 35   56          PULS       D,X,U
    285  5+1   6470 ED   A8 D8       STD -40,Y
    286  5+1   6473 AF   A8 DA       STX -38,Y
    287  5+1   6476 EF   A8 DC       STU -36,Y
    288  5+6   6479 35   56          PULS       D,X,U
    289  5+1   647B ED   A8 DE       STD -34,Y
    290  5+1   647E AF   A8 E0       STX -32,Y
    291  5+1   6481 EF   A8 E2       STU -30,Y
    292  5+6   6484 35   56          PULS       D,X,U
    293  5+1   6486 ED   A8 E4       STD -28,Y
    294  5+1   6489 AF   A8 E6       STX -26,Y
    295  5+1   648C EF   A8 E8       STU -24,Y
    296  5+6   648F 35   56          PULS       D,X,U
    297  5+1   6491 ED   A8 EA       STD -22,Y
    298  5+1   6494 AF   A8 EC       STX -20,Y
    299  5+1   6497 EF   A8 EE       STU -18,Y
    300  5+6   649A 35   56          PULS       D,X,U
    301  5+1   649C ED   30          STD -16,Y
    302  5+1   649E AF   32          STX -14,Y
    303  5+1   64A0 EF   34          STU -12,Y
    304  5+6   64A2 35   56          PULS       D,X,U
    305  5+1   64A4 ED   36          STD -10,Y
    306  5+1   64A6 AF   38          STX -8,Y
    307  5+1   64A8 EF   3A          STU -6,Y
    308  5+6   64AA 35   56          PULS       D,X,U
    309  5+1   64AC ED   3C          STD -4,Y
    310  5+1   64AE AF   3E          STX -2,Y
    311  5+0   64B0 EF   A4          STU ,Y
    312  5+6   64B2 35   56          PULS       D,X,U
    313  5+1   64B4 ED   22          STD 2,Y
    314  5+1   64B6 AF   24          STX 4,Y
    315  5+1   64B8 EF   26          STU 6,Y
    316  5+6   64BA 35   56          PULS       D,X,U
    317  5+1   64BC ED   28          STD 8,Y
    318  5+1   64BE AF   2A          STX 10,Y
    319  5+1   64C0 EF   2C          STU 12,Y
    320  5+6   64C2 35   56          PULS       D,X,U
    321  5+1   64C4 ED   2E          STD 14,Y
    322  5+1   64C6 AF   A8 10       STX 16,Y
    323  5+1   64C9 EF   A8 12       STU 18,Y
    324  5+6   64CC 35   56          PULS       D,X,U
    325  5+1   64CE ED   A8 14       STD 20,Y
    326  5+1   64D1 AF   A8 16       STX 22,Y
    327  5+1   64D4 EF   A8 18       STU 24,Y
    328  5+6   64D7 35   56          PULS       D,X,U
    329  5+1   64D9 ED   A8 1A       STD 26,Y
    330  5+1   64DC AF   A8 1C       STX 28,Y
    331  5+1   64DF EF   A8 1E       STU 30,Y
    332  5+6   64E2 35   56          PULS       D,X,U
    333  5+1   64E4 ED   A8 20       STD 32,Y
    334  5+1   64E7 AF   A8 22       STX 34,Y
    335  5+1   64EA EF   A8 24       STU 36,Y
    336  5+6   64ED 35   56          PULS       D,X,U
    337  5+1   64EF ED   A8 26       STD 38,Y
    338  5+1   64F2 AF   A8 28       STX 40,Y
    339  5+1   64F5 EF   A8 2A       STU 42,Y
    340  5+6   64F8 35   56          PULS       D,X,U
    341  5+1   64FA ED   A8 2C       STD 44,Y
    342  5+1   64FD AF   A8 2E       STX 46,Y
    343  5+1   6500 EF   A8 30       STU 48,Y
    344  5+6   6503 35   56          PULS       D,X,U
    345  5+1   6505 ED   A8 32       STD 50,Y
    346  5+1   6508 AF   A8 34       STX 52,Y
    347  5+1   650B EF   A8 36       STU 54,Y
    348  5+6   650E 35   56          PULS       D,X,U
    349  5+1   6510 ED   A8 38       STD 56,Y
    350  5+1   6513 AF   A8 3A       STX 58,Y
    351  5+1   6516 EF   A8 3C       STU 60,Y
    352  5+2   6519 35   06          PULS       D
    353  5+1   651B ED   A8 3E       STD 62,Y
    354  4+4   651E 31   A9 0080     LEAY 128,Y
    355        6522               MEM_COPY_DATA_TO_CART_E
    356  5     6522 108C 00C0        CMPY    #$00C0
    357  6     6526 1026 FF18        LBNE    MEM_COPY_DATA_TO_CART_LOOP
    358        652A               MEM_COPY_DATA_TO_CART_S
    359  4     652A 10CE 0000        LDS     #$0000    * Rechargement du po>>
    360  5     652E 39               RTS
    361
    362                           *****************************************>>
    363                           * Effacement memoire Cartouche (27000 cy)>>
    364                           *****************************************>>
    365        652F               CLR_CART
    366  5+3   652F 34   48           PSHS U,DP
    367  7     6531 10FF 6566         STS CLR_CART_3+2
    368  4     6535 10CE 4000         LDS #$4000
    369  3     6539 CE   0C0C         LDU #$0C0C
    370  4     653C 108E 0C0C         LDY #$0C0C
    371  3     6540 8E   0C0C         LDX #$0C0C
    372  3     6543 CC   0C0C         LDD #$0C0C
    373  6     6546 1F   8B           TFR A,DP
    374        6548               CLR_CART_2
    375  5+9   6548 34   7E           PSHS U,Y,X,DP,B,A
    376  5+9   654A 34   7E           PSHS U,Y,X,DP,B,A
    377  5+9   654C 34   7E           PSHS U,Y,X,DP,B,A
    378  5+9   654E 34   7E           PSHS U,Y,X,DP,B,A
    379  5+9   6550 34   7E           PSHS U,Y,X,DP,B,A
    380  5+9   6552 34   7E           PSHS U,Y,X,DP,B,A
    381  5+9   6554 34   7E           PSHS U,Y,X,DP,B,A
    382  5+9   6556 34   7E           PSHS U,Y,X,DP,B,A
    383  5+9   6558 34   7E           PSHS U,Y,X,DP,B,A
    384  5+9   655A 34   7E           PSHS U,Y,X,DP,B,A
    385  5     655C 118C 0004         CMPS #$0004
    386  3     6560 26   E6           BNE CLR_CART_2
    387  5+4   6562 34   60           PSHS U,Y
    388        6564               CLR_CART_3
    389  4     6564 10CE 0000         LDS #$0000
    390  5+3   6568 35   48           PULS DP,U
    391  5     656A 39                RTS
    392                            
    393                           *****************************************>>
    394                           * Affichage de l arriere plan 57900 cycle>>
    395                           *****************************************>>
    396        656B               DRAW_RAM_DATA_TO_CART_160x200
    397  5+3   656B 34   48              PSHS U,DP            * sauvegarde >>
    398  7     656D 10FF 65D5            STS DRAW_RAM_DATA_TO_CART_160x200A>>
    399                            
    400  4     6571 10CE 1F40            LDS #FINECRANA       * init pointe>>
    401  3     6575 CE   A000            LDU #$A000
    402
    403        6578               DRAW_RAM_DATA_TO_CART_160x200A
    404  5+7   6578 37   3E              PULU A,B,DP,X,Y
    405  5+7   657A 34   3E              PSHS Y,X,DP,B,A
    406  5+7   657C 37   3E              PULU A,B,DP,X,Y
    407  5+7   657E 34   3E              PSHS Y,X,DP,B,A
    408  5+7   6580 37   3E              PULU A,B,DP,X,Y
    409  5+7   6582 34   3E              PSHS Y,X,DP,B,A
    410  5+7   6584 37   3E              PULU A,B,DP,X,Y
    411  5+7   6586 34   3E              PSHS Y,X,DP,B,A
    412  5+7   6588 37   3E              PULU A,B,DP,X,Y
    413  5+7   658A 34   3E              PSHS Y,X,DP,B,A
    414  5+7   658C 37   3E              PULU A,B,DP,X,Y
    415  5+7   658E 34   3E              PSHS Y,X,DP,B,A
    416  5     6590 118C 0014            CMPS #DEBUTECRANA
    417  3     6594 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200A>>
    418  5+7   6596 37   3E              PULU A,B,DP,X,Y
    419  5+7   6598 34   3E              PSHS Y,X,DP,B,A
    420  5+7   659A 37   3E              PULU A,B,DP,X,Y
    421  5+7   659C 34   3E              PSHS Y,X,DP,B,A
    422  5+6   659E 37   3C              PULU B,DP,X,Y
    423  5+6   65A0 34   3C              PSHS Y,X,DP,B
    424
    425  4     65A2 10CE 3F40            LDS #FINECRANB       * init pointe>>
    426  3     65A6 CE   C000            LDU #$C000
    427
    428        65A9               DRAW_RAM_DATA_TO_CART_160x200B
    429  5+7   65A9 37   3E              PULU A,B,DP,X,Y
    430  5+7   65AB 34   3E              PSHS Y,X,DP,B,A
    431  5+7   65AD 37   3E              PULU A,B,DP,X,Y
    432  5+7   65AF 34   3E              PSHS Y,X,DP,B,A
    433  5+7   65B1 37   3E              PULU A,B,DP,X,Y
    434  5+7   65B3 34   3E              PSHS Y,X,DP,B,A
    435  5+7   65B5 37   3E              PULU A,B,DP,X,Y
    436  5+7   65B7 34   3E              PSHS Y,X,DP,B,A
    437  5+7   65B9 37   3E              PULU A,B,DP,X,Y
    438  5+7   65BB 34   3E              PSHS Y,X,DP,B,A
    439  5+7   65BD 37   3E              PULU A,B,DP,X,Y
    440  5+7   65BF 34   3E              PSHS Y,X,DP,B,A
    441  5     65C1 118C 2014            CMPS #DEBUTECRANB
    442  3     65C5 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200B>>
    443  5+7   65C7 37   3E              PULU A,B,DP,X,Y
    444  5+7   65C9 34   3E              PSHS Y,X,DP,B,A
    445  5+7   65CB 37   3E              PULU A,B,DP,X,Y
    446  5+7   65CD 34   3E              PSHS Y,X,DP,B,A
    447  5+6   65CF 37   3C              PULU B,DP,X,Y
    448  5+6   65D1 34   3C              PSHS Y,X,DP,B
    449        65D3               DRAW_RAM_DATA_TO_CART_160x200A_E
    450  4     65D3 10CE 0000            LDS  #$0000 * rechargement des reg>>
    451  5+3   65D7 35   48              PULS U,DP
    452  5     65D9 39                   RTS
    453
    454                           *****************************************>>
    455                           * Palette de 16 couleurs
    456                           *****************************************>>
    457        65DA               TABPALETTE
    458        65DA 0000                 FDB $0000     * index:1  R:0   V:0>>
    459        65DC 0004                 FDB $0004     * index:2  R:138 V:2>>
    460        65DE 047D                 FDB $047d     * index:3  R:236 V:1>>
    461        65E0 0028                 FDB $0028     * index:4  R:188 V:9>>
    462        65E2 006A                 FDB $006a     * index:5  R:206 V:1>>
    463        65E4 01A7                 FDB $01a7     * index:6  R:168 V:2>>
    464        65E6 0061                 FDB $0061     * index:7  R:75  V:1>>
    465        65E8 0020                 FDB $0020     * index:8  R:16  V:9>>
    466        65EA 0000                 FDB $0000     * index:9  R:0   V:1>>
    467        65EC 0010                 FDB $0010     * index:10 R:0   V:4>>
    468        65EE 0220                 FDB $0220     * index:11 R:22  V:8>>
    469        65F0 0B82                 FDB $0b82     * index:12 R:104 V:1>>
    470        65F2 0DDD                 FDB $0ddd     * index:13 R:239 V:2>>
    471        65F4 0D30                 FDB $0d30     * index:14 R:12  V:1>>
    472        65F6 0700                 FDB $0700     * index:15 R:13  V:3>>
    473        65F8 0001                 FDB $0001     * index:16 R:52  V:8>>
    474        65FA               FINTABPALETTE
    475
    476                           *****************************************>>
    477                           * Get joystick parameters
    478                           *****************************************>>
    479        65FA               JOY_READ
    480  3     65FA 8E   E7CF            ldx    #$e7cf
    481  4     65FD 108E E7CD            ldy    #$e7cd
    482  3     6601 CC   400F            ldd    #$400f
    483  5     6604 F4   E7CC            andb   >$e7cc     * Read position
    484  5     6607 F7   6612            stb    JOY_DIR_STATUS
    485  4+0   660A A4   A4              anda   ,y         * Read button
    486  2     660C 88   40              eora   #$40
    487  5     660E B7   6613            sta    JOY_BTN_STATUS
    488  5     6611 39                   RTS
    489        6612               JOY_DIR_STATUS
    490        6612 00                   FCB $00 * Position Pad
    491        6613               JOY_BTN_STATUS
    492        6613 00                   FCB $00 * 40 Bouton A enfonce
    493
    494                           *****************************************>>
    495                           * Subroutine to      make HERO walk/run
    496                           *****************************************>>
    497        6614               Hero_Move
    498  5     6614 B6   6612            LDA JOY_DIR_STATUS
    499  2     6617 81   0B              CMPA #JOY_G
    500  3     6619 26   02              BNE Hero_NotLeft
    501  3     661B 20   71              BRA Hero_MoveLeft
    502
    503        661D               Hero_NotLeft                   * XREF: He>>
    504  2     661D 81   07              CMPA #JOY_D
    505  3     661F 26   03              BNE Hero_NotLeftOrRight
    506  5     6621 16   00AE            LBRA Hero_MoveRight
    507
    508        6624               Hero_NotLeftOrRight            * XREF: He>>
    509  6     6624 FC   692C            LDD HERO_G_SPEED
    510  5     6627 1083 0000            CMPD #$0000
    511  6     662B 1027 00E1            LBEQ Hero_MoveUpdatePos  * Si la v>>
    512  3     662F 2D   32              BLT Hero_NotLeftOrRight_00 * se de>>
    513  7     6631 B3   693E            SUBD HERO_FRICTION     * se deplac>>
    514  5     6634 1083 0000            CMPD #$0000
    515  3     6638 2E   12              BGT Hero_NotLeftOrRight_01 * si on>>
    516  3     663A CC   0000            LDD #$0000
    517  6     663D FD   692C            STD HERO_G_SPEED
    518  6     6640 FD   6930            STD HERO_X_SPS
    519  3     6643 8E   685F            LDX #HERO_IDLE_R        * Charge a>>
    520  6     6646 BF   6940            STX HERO_ANIMATION_ADR      * Sauv>>
    521
    522  5     6649 16   00C4            LBRA Hero_MoveUpdatePos
    523        664C               Hero_NotLeftOrRight_01
    524  5     664C 1083 0180            CMPD #HERO_JOG_SPD_LIMIT
    525  3     6650 2C   0B              BGE Hero_NotLeftOrRight_02
    526  6     6652 FD   692C            STD HERO_G_SPEED
    527  3     6655 8E   681C            LDX #HERO_WALK_R        * Charge a>>
    528  6     6658 BF   6940            STX HERO_ANIMATION_ADR      * Sauv>>
    529
    530  3     665B 20   03              BRA Hero_NotLeftOrRight_03
    531        665D               Hero_NotLeftOrRight_02
    532  6     665D FD   692C            STD HERO_G_SPEED
    533        6660               Hero_NotLeftOrRight_03
    534  5     6660 16   00AD            LBRA Hero_MoveUpdatePos
    535        6663               Hero_NotLeftOrRight_00
    536  7     6663 F3   693E            ADDD HERO_FRICTION     * se deplac>>
    537  3     6666 24   0F              BCC Hero_NotLeftOrRight_11 * si on>>
    538  3     6668 CC   0000            LDD #$0000
    539  6     666B FD   692C            STD HERO_G_SPEED
    540  3     666E 8E   6920            LDX #HERO_IDLE_L        * Charge a>>
    541  6     6671 BF   6940            STX HERO_ANIMATION_ADR      * Sauv>>
    542
    543  5     6674 16   0099            LBRA Hero_MoveUpdatePos
    544        6677               Hero_NotLeftOrRight_11
    545  5     6677 1083 FE80            CMPD #HERO_JOG_NEG_SPD_LIMIT
    546  3     667B 2F   0B              BLE Hero_NotLeftOrRight_12
    547  6     667D FD   692C            STD HERO_G_SPEED
    548  3     6680 8E   68A4            LDX #HERO_WALK_L        * Charge a>>
    549  6     6683 BF   6940            STX HERO_ANIMATION_ADR      * Sauv>>
    550
    551  3     6686 20   03              BRA Hero_NotLeftOrRight_13
    552        6688               Hero_NotLeftOrRight_12
    553  6     6688 FD   692C            STD HERO_G_SPEED
    554        668B               Hero_NotLeftOrRight_13
    555  5     668B 16   0082            LBRA Hero_MoveUpdatePos
    556
    557        668E               Hero_MoveLeft                      * XREF>>
    558  6     668E FC   692C            LDD HERO_G_SPEED            * Char>>
    559  5     6691 1083 0000            CMPD #$0000                 * Test>>
    560  3     6695 2F   11              BLE Hero_MoveLeft_00        * BRAN>>
    561  7     6697 B3   693C            SUBD HERO_DECELERATION      * orie>>
    562  3     669A 24   06              BCC Hero_MoveLeft_03        * BRAN>>
    563  3     669C CC   0000            LDD #$0000
    564  7     669F B3   693C            SUBD HERO_DECELERATION      * si l>>
    565        66A2               Hero_MoveLeft_03
    566  6     66A2 FD   692C            STD HERO_G_SPEED            * On s>>
    567  5     66A5 16   0068            LBRA Hero_MoveUpdatePos           >>
    568        66A8               Hero_MoveLeft_00                         >>
    569  8     66A8 10B3 6938            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    570  3     66AC 27   62              BEQ Hero_MoveUpdatePos      * vite>>
    571  7     66AE B3   693A            SUBD HERO_ACCELERATION      * acce>>
    572  8     66B1 10B3 6938            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    573  3     66B5 2E   0F              BGT Hero_MoveLeft_01        * BRAN>>
    574  3     66B7 8E   68E7            LDX #HERO_RUN_L        * Charge an>>
    575  6     66BA BF   6940            STX HERO_ANIMATION_ADR      * Sauv>>
    576
    577  6     66BD FC   6938            LDD HERO_NEG_TOP_SPEED      * Limi>>
    578  6     66C0 FD   692C            STD HERO_G_SPEED            * Enre>>
    579  5     66C3 16   004A            LBRA Hero_MoveUpdatePos     * Mise>>
    580        66C6               Hero_MoveLeft_01
    581  6     66C6 FD   692C            STD HERO_G_SPEED            * Enre>>
    582  3     66C9 8E   68A4            LDX #HERO_WALK_L        * Charge a>>
    583  6     66CC BF   6940            STX HERO_ANIMATION_ADR      * Sauv>>
    584
    585  5     66CF 16   003E            LBRA Hero_MoveUpdatePos
    586
    587        66D2               Hero_MoveRight                  * XREF: H>>
    588  6     66D2 FC   692C            LDD HERO_G_SPEED        * Chargeme>>
    589  5     66D5 1083 0000            CMPD #$0000                 * Test>>
    590  3     66D9 2C   0E              BGE Hero_MoveRight_00       * BRAN>>
    591  7     66DB F3   693C            ADDD HERO_DECELERATION      * orie>>
    592  3     66DE 24   03              BCC Hero_MoveRight_03       * BRAN>>
    593  6     66E0 FC   693C            LDD HERO_DECELERATION   * si la vi>>
    594        66E3               Hero_MoveRight_03
    595  6     66E3 FD   692C            STD HERO_G_SPEED        * On stock>>
    596  5     66E6 16   0027            LBRA Hero_MoveUpdatePos           >>
    597        66E9               Hero_MoveRight_00                  * Orie>>
    598  8     66E9 10B3 6936            CMPD HERO_TOP_SPEED         * Comp>>
    599  3     66ED 27   21              BEQ Hero_MoveUpdatePos      * vite>>
    600  7     66EF F3   693A            ADDD HERO_ACCELERATION      * acce>>
    601  8     66F2 10B3 6936            CMPD HERO_TOP_SPEED         * Comp>>
    602  3     66F6 2D   0F              BLT Hero_MoveRight_01       * BRAN>>
    603  3     66F8 8E   686B            LDX #HERO_RUN_R                   >>
    604  6     66FB BF   6940            STX HERO_ANIMATION_ADR      * Sauv>>
    605
    606  6     66FE FC   6936            LDD HERO_TOP_SPEED          * Limi>>
    607  6     6701 FD   692C            STD HERO_G_SPEED            * Enre>>
    608  5     6704 16   0009            LBRA Hero_MoveUpdatePos           >>
    609        6707               Hero_MoveRight_01
    610  6     6707 FD   692C            STD HERO_G_SPEED            * Enre>>
    611  3     670A 8E   681C            LDX #HERO_WALK_R        * Charge a>>
    612  6     670D BF   6940            STX HERO_ANIMATION_ADR      * Sauv>>
    613
    614
    615        6710               Hero_MoveUpdatePos
    616  6     6710 FC   692C            LDD HERO_G_SPEED            * Char>>
    617  6     6713 FD   692E            STD HERO_X_SPEED        * Stockage>>
    618  5     6716 1083 0000            CMPD #$0000                 * Test>>
    619  3     671A 2D   0E              BLT Hero_MoveUpdatePos_00   * BRAN>>
    620  7     671C F3   6930            ADDD HERO_X_SPS         * Ajout du>>
    621  5     671F F7   6931            STB HERO_X_SPS+1            * sauv>>
    622  6     6722 1F   89              TFR A,B                     * Divi>>
    623  5     6724 FB   692A            ADDB HERO_X_POS                   >>
    624  3     6727 20   18              BRA Hero_MoveUpdatePos_01
    625        6729               Hero_MoveUpdatePos_V00
    626        6729 00                   FCB $00
    627        672A               Hero_MoveUpdatePos_00
    628  3     672A CC   0000            LDD #$0000
    629  7     672D B3   692E            SUBD HERO_X_SPEED           * La v>>
    630  7     6730 F3   6930            ADDD HERO_X_SPS         * Ajout du>>
    631  5     6733 F7   6931            STB HERO_X_SPS+1            * sauv>>
    632  6     6736 1F   89              TFR A,B                     * Divi>>
    633  5     6738 F7   6729            STB Hero_MoveUpdatePos_V00
    634  5     673B F6   692A            LDB HERO_X_POS
    635  5     673E F0   6729            SUBB Hero_MoveUpdatePos_V00 * Ajou>>
    636        6741               Hero_MoveUpdatePos_01
    637  2     6741 C1   50              CMPB #$50                         >>
    638  3     6743 2F   02              BLE Hero_MoveUpdatePos_02   * Bute>>
    639  2     6745 C6   50              LDB #$50                          >>
    640        6747               Hero_MoveUpdatePos_02
    641  2     6747 C1   0C           CMPB #$0C                            >>
    642  3     6749 2C   02              BGE Hero_MoveUpdatePos_03   * Bute>>
    643  2     674B C6   0C              LDB #$0C                          >>
    644        674D               Hero_MoveUpdatePos_03
    645  5     674D F7   692A            STB HERO_X_POS
    646  2     6750 C6   00              LDB #$00
    647  5     6752 F7   6930            STB HERO_X_SPS                    >>
    648  3     6755 CC   0000            LDD #$0000                  * TODO>>
    649  6     6758 FD   6932            STD HERO_Y_SPEED
    650  6     675B 1F   89              TFR A,B                     * divi>>
    651  5     675D FB   692B            ADDB HERO_Y_POS
    652  5     6760 F7   692B            STB HERO_Y_POS
    653  5     6763 39                   RTS
    654
    655                           * TODO : Braking Animation
    656                           * Sonic enters his braking animation when>>
    657                           * In Sonic 1 and Sonic CD, he then stays >>
    658                           * In the other 3 games, Sonic returns to >>
    659
    660        6764               Compute_Position
    661  5     6764 B6   692A            LDA HERO_X_POS
    662  2     6767 44                   LSRA
    663  3     6768 25   17              BCS Compute_Position_01
    664  5     676A B7   679C            STA Compute_Position_02+1
    665  2     676D 86   28              LDA #$28
    666  5     676F F6   692B            LDB HERO_Y_POS
    667  2     6772 5A                   DECB
    668  11    6773 3D                   MUL
    669  7     6774 F3   679B            ADDD Compute_Position_02
    670  6     6777 FD   9F00            STD HERO_POS
    671  4     677A C3   2000            ADDD #$2000                       >>
    672  6     677D FD   9F02            STD HERO_POS+2
    673  5     6780 39                   RTS
    674        6781               Compute_Position_01
    675  5     6781 B7   679C            STA Compute_Position_02+1
    676  2     6784 86   28              LDA #$28
    677  5     6786 F6   692B            LDB HERO_Y_POS
    678  2     6789 5A                   DECB
    679  11    678A 3D                   MUL
    680  7     678B F3   679B            ADDD Compute_Position_02
    681  4     678E C3   2000            ADDD #$2000
    682  6     6791 FD   9F00            STD HERO_POS
    683  4     6794 83   1FFF            SUBD #$1FFF
    684  6     6797 FD   9F02            STD HERO_POS+2
    685  5     679A 39                   RTS
    686        679B               Compute_Position_02
    687        679B 0000                 FDB $0000
    688
    689                           *****************************************>>
    690                           * HERO Animations
    691                           * ---------------
    692                           * Note: Speed abs +0, rel +8, rel cap +10>>
    693                           *
    694                           * Chargement nouvelle animation
    695                           *    nouvelle frame = 109 a 119
    696                           *
    697                           * Chargement frame suivante
    698                           *    frame identique = 15
    699                           * ou frame suivante  = 116 a 126
    700                           *
    701                           * Chargement frame suivante avec branchem>>
    702                           *    nouvelle frame = 165 a 175
    703                           * ou frame suivante = 172 a 182
    704                           *
    705                           * Chargement frame suivante avec retour s>>
    706                           *    nouvelle frame = 167 a 177
    707                           * ou frame suivante = 174 a 184
    708                           *****************************************>>
    709
    710        679D               HERO_ANIMATION_LOAD                      >>
    711  6     679D BF   6940            STX HERO_ANIMATION_ADR
    712  6     67A0 BF   6944            STX HERO_ANIMATION_RTN_ADR
    713  7     67A3 7F   6950            CLR HERO_ANIMATION_IMC            >>
    714        67A6               HERO_ANIMATION_LOAD_00
    715  5+1   67A6 EC   1E              LDD -2,X                          >>
    716  2     67A8 81   00              CMPA #$00                         >>
    717  3     67AA 27   12              BEQ HERO_ANIMATION_LOAD_01
    718  5     67AC B6   692C            LDA HERO_G_SPEED
    719  3     67AF 2C   02              BGE HERO_ANIMATION_LOAD_01A
    720  2     67B1 40                   NEGA                          * va>>
    721  2     67B2 4A                   DECA
    722        67B3               HERO_ANIMATION_LOAD_01A
    723  2     67B3 48                   LSLA
    724  2     67B4 48                   LSLA                          * mu>>
    725  5     67B5 B7   67B9            STA HERO_ANIMATION_LOAD_01A+6 * Au>>
    726  2     67B8 C0   00              SUBB #$00                         >>
    727  3     67BA 24   02              BCC HERO_ANIMATION_LOAD_01
    728  2     67BC C6   01              LDB #$01                          >>
    729        67BE               HERO_ANIMATION_LOAD_01
    730  5     67BE F7   6952            STB HERO_ANIMATION_FRR            >>
    731  5     67C1 B6   6950            LDA HERO_ANIMATION_IMC
    732  2     67C4 C6   05              LDB #$05
    733  11    67C6 3D                   MUL
    734  7     67C7 F3   6940            ADDD HERO_ANIMATION_ADR
    735  6     67CA 1F   02              TFR D,Y
    736  4+0   67CC E6   A4              LDB ,Y
    737  2     67CE C1   1F              CMPB #$1F                         >>
    738  3     67D0 22   1C              BHI HERO_ANIMATION_LOAD_NOPAGE
    739  5     67D2 B6   6946            LDA HERO_ANIMATION_PAG
    740  5     67D5 F7   6946            STB HERO_ANIMATION_PAG
    741  5     67D8 B1   6947            CMPA HERO_ANIMATION_PAG_REF
    742  3     67DB 27   03              BEQ HERO_ANIMATION_LOAD_02
    743  7     67DD 7C   6946            INC HERO_ANIMATION_PAG        * si>>
    744        67E0               HERO_ANIMATION_LOAD_02
    745  5     67E0 F7   6947            STB HERO_ANIMATION_PAG_REF    * on>>
    746  5+1   67E3 AE   21              LDX 1,Y
    747  6     67E5 BF   694E            STX HERO_ANIMATION_DRW
    748  5+1   67E8 AE   23              LDX 3,Y
    749  6     67EA BF   694C            STX HERO_ANIMATION_DEL+2
    750  5     67ED 39                   RTS
    751        67EE               HERO_ANIMATION_LOAD_NOPAGE
    752  2     67EE C1   FF              CMPB #$FF
    753  3     67F0 26   0C              BNE HERO_ANIMATION_LOAD_FE
    754  5+1   67F2 AE   23              LDX 3,Y
    755  6     67F4 BF   6950            STX HERO_ANIMATION_IMC            >>
    756  5+1   67F7 AE   21              LDX 1,Y
    757  6     67F9 BF   6940            STX HERO_ANIMATION_ADR
    758  3     67FC 20   A8              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    759        67FE               HERO_ANIMATION_LOAD_FE
    760  6     67FE BE   6944            LDX HERO_ANIMATION_RTN_ADR  * RETU>>
    761  6     6801 BF   6940            STX HERO_ANIMATION_ADR
    762  5     6804 F6   6951            LDB HERO_ANIMATION_RTN_IMC
    763  5     6807 F7   6950            STB HERO_ANIMATION_IMC
    764  3     680A 20   9A              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    765
    766        680C               HERO_ANIMATION_NEXT
    767  7     680C 7A   6952            DEC HERO_ANIMATION_FRR
    768  3     680F 27   01              BEQ HERO_ANIMATION_NEXT_00  * BRAN>>
    769  5     6811 39                   RTS
    770        6812               HERO_ANIMATION_NEXT_00
    771  7     6812 7C   6950            INC HERO_ANIMATION_IMC
    772  6     6815 BE   6940            LDX HERO_ANIMATION_ADR
    773  3     6818 20   8C              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    774                            
    775                           *   SAMPLE CODE ANIMATION
    776                           *      ---------------------
    777                           *      FDB $0018            * 00 Absolute>>
    778                           *HERO_IDLE_L
    779                           *      FCB $01                     * Page>>
    780                           *      FDB $A000            * Adresse drw>>
    781                           *      FDB $A000            * Adresse del>>
    782                           *
    783                           *      FCB $FF                     * FF S>>
    784                           *      FDB HERO_IDLE-C * adresse animatio>>
    785                           *      FDB $0301            * 03 image ci>>
    786                           *
    787                           *      FCB $FE                     * FE R>>
    788                           *
    789                           *      LDX #HERO_IDLE_R
    790                           *      JSR HERO_ANIMATION_LOAD
    791                           *
    792                           *      JSR HERO_ANIMATION_NEXT
    793
    794                           *****************************************>>
    795                           * ANIMATION Scripts
    796                           *****************************************>>
    797
    798
    799
    800        681A 0108                 FDB $0108
    801        681C               HERO_WALK_R
    802        681C 04                   FCB $04
    803        681D D7C5                 FDB $D7C5
    804        681F DD62                 FDB $DD62
    805        6821 04                   FCB $04
    806        6822 CED0                 FDB $CED0
    807        6824 D502                 FDB $D502
    808        6826 0C                   FCB $0C
    809        6827 D475                 FDB $D475
    810        6829 DBAE                 FDB $DBAE
    811        682B 0C                   FCB $0C
    812        682C C9EB                 FDB $C9EB
    813        682E D14E                 FDB $D14E
    814        6830 0C                   FCB $0C
    815        6831 BF8C                 FDB $BF8C
    816        6833 C6D1                 FDB $C6D1
    817        6835 04                   FCB $04
    818        6836 C4D3                 FDB $C4D3
    819        6838 CBD4                 FDB $CBD4
    820        683A 04                   FCB $04
    821        683B BC1A                 FDB $BC1A
    822        683D C22A                 FDB $C22A
    823        683F 04                   FCB $04
    824        6840 B2BF                 FDB $B2BF
    825        6842 B939                 FDB $B939
    826        6844 04                   FCB $04
    827        6845 A97B                 FDB $A97B
    828        6847 AFE3                 FDB $AFE3
    829        6849 0C                   FCB $0C
    830        684A B519                 FDB $B519
    831        684C BC5B                 FDB $BC5B
    832        684E 0C                   FCB $0C
    833        684F AACB                 FDB $AACB
    834        6851 B1F8                 FDB $B1F8
    835        6853 04                   FCB $04
    836        6854 A000                 FDB $A000
    837        6856 A695                 FDB $A695
    838        6858 FF                   FCB $FF
    839        6859 681C                 FDB HERO_WALK_R
    840        685B 0000                 FDB $0000
    841
    842        685D 0018                 FDB $0018
    843        685F               HERO_IDLE_R
    844        685F 06                   FCB $06
    845        6860 D656                 FDB $D656
    846        6862 DCD5                 FDB $DCD5
    847        6864 FF                   FCB $FF
    848        6865 685F                 FDB HERO_IDLE_R
    849        6867 0000                 FDB $0000
    850
    851        6869 0108                 FDB $0108
    852        686B               HERO_RUN_R
    853        686B 0C                   FCB $0C
    854        686C A000                 FDB $A000
    855        686E A795                 FDB $A795
    856        6870 06                   FCB $06
    857        6871 CD08                 FDB $CD08
    858        6873 D386                 FDB $D386
    859        6875 06                   FCB $06
    860        6876 C3DB                 FDB $C3DB
    861        6878 CA41                 FDB $CA41
    862        687A 06                   FCB $06
    863        687B BB41                 FDB $BB41
    864        687D C130                 FDB $C130
    865        687F 0E                   FCB $0E
    866        6880 D430                 FDB $D430
    867        6882 DB5A                 FDB $DB5A
    868        6884 0E                   FCB $0E
    869        6885 C927                 FDB $C927
    870        6887 D0E4                 FDB $D0E4
    871        6889 06                   FCB $06
    872        688A B237                 FDB $B237
    873        688C B878                 FDB $B878
    874        688E 06                   FCB $06
    875        688F A91E                 FDB $A91E
    876        6891 AF76                 FDB $AF76
    877        6893 06                   FCB $06
    878        6894 A000                 FDB $A000
    879        6896 A654                 FDB $A654
    880        6898 08                   FCB $08
    881        6899 D5F9                 FDB $D5F9
    882        689B DCE1                 FDB $DCE1
    883        689D FF                   FCB $FF
    884        689E 686B                 FDB HERO_RUN_R
    885        68A0 0000                 FDB $0000
    886
    887        68A2 0108                 FDB $0108
    888        68A4               HERO_WALK_L
    889        68A4 08                   FCB $08
    890        68A5 CDD4                 FDB $CDD4
    891        68A7 D371                 FDB $D371
    892        68A9 08                   FCB $08
    893        68AA C4DF                 FDB $C4DF
    894        68AC CB11                 FDB $CB11
    895        68AE 0E                   FCB $0E
    896        68AF BEDA                 FDB $BEDA
    897        68B1 C60A                 FDB $C60A
    898        68B3 0E                   FCB $0E
    899        68B4 B450                 FDB $B450
    900        68B6 BBB3                 FDB $BBB3
    901        68B8 0E                   FCB $0E
    902        68B9 A9FD                 FDB $A9FD
    903        68BB B139                 FDB $B139
    904        68BD 0E                   FCB $0E
    905        68BE A000                 FDB $A000
    906        68C0 A701                 FDB $A701
    907        68C2 08                   FCB $08
    908        68C3 BC26                 FDB $BC26
    909        68C5 C236                 FDB $C236
    910        68C7 08                   FCB $08
    911        68C8 B2C7                 FDB $B2C7
    912        68CA B944                 FDB $B944
    913        68CC 08                   FCB $08
    914        68CD A97F                 FDB $A97F
    915        68CF AFEA                 FDB $AFEA
    916        68D1 10                   FCB $10
    917        68D2 D450                 FDB $D450
    918        68D4 DB8A                 FDB $DB8A
    919        68D6 10                   FCB $10
    920        68D7 C9FE                 FDB $C9FE
    921        68D9 D12E                 FDB $D12E
    922        68DB 08                   FCB $08
    923        68DC A000                 FDB $A000
    924        68DE A698                 FDB $A698
    925        68E0 FF                   FCB $FF
    926        68E1 68A4                 FDB HERO_WALK_L
    927        68E3 0000                 FDB $0000
    928
    929        68E5 0108                 FDB $0108
    930        68E7               HERO_RUN_L
    931        68E7 10                   FCB $10
    932        68E8 BF27                 FDB $BF27
    933        68EA C6C5                 FDB $C6C5
    934        68EC 0A                   FCB $0A
    935        68ED D66A                 FDB $D66A
    936        68EF DCEB                 FDB $DCEB
    937        68F1 0A                   FCB $0A
    938        68F2 CD3D                 FDB $CD3D
    939        68F4 D3A3                 FDB $D3A3
    940        68F6 0A                   FCB $0A
    941        68F7 C49B                 FDB $C49B
    942        68F9 CA90                 FDB $CA90
    943        68FB 10                   FCB $10
    944        68FC B4E3                 FDB $B4E3
    945        68FE BC0D                 FDB $BC0D
    946        6900 10                   FCB $10
    947        6901 A9EA                 FDB $A9EA
    948        6903 B19B                 FDB $B19B
    949        6905 0A                   FCB $0A
    950        6906 BB8D                 FDB $BB8D
    951        6908 C1D1                 FDB $C1D1
    952        690A 0A                   FCB $0A
    953        690B B274                 FDB $B274
    954        690D B8CC                 FDB $B8CC
    955        690F 0A                   FCB $0A
    956        6910 A95A                 FDB $A95A
    957        6912 AFAB                 FDB $AFAB
    958        6914 10                   FCB $10
    959        6915 A000                 FDB $A000
    960        6917 A6E2                 FDB $A6E2
    961        6919 FF                   FCB $FF
    962        691A 68E7                 FDB HERO_RUN_L
    963        691C 0000                 FDB $0000
    964
    965        691E 0018                 FDB $0018
    966        6920               HERO_IDLE_L
    967        6920 0A                   FCB $0A
    968        6921 A000                 FDB $A000
    969        6923 A67F                 FDB $A67F
    970        6925 FF                   FCB $FF
    971        6926 6920                 FDB HERO_IDLE_L
    972        6928 0000                 FDB $0000
    973                            
    974                           *****************************************>>
    975                           * HERO Variables
    976                           *****************************************>>
    977                  0100     HERO_WALK_SPD_LIMIT EQU $0100          * >>
    978                  FF00     HERO_WALK_NEG_SPD_LIMIT EQU $FF00      * >>
    979                  0180     HERO_JOG_SPD_LIMIT  EQU $0180          * >>
    980                  FE80     HERO_JOG_NEG_SPD_LIMIT  EQU $FE80      * >>
    981        692A               HERO_X_POS
    982        692A 18                   FCB $18                     * Hori>>
    983        692B               HERO_Y_POS
    984        692B A2                   FCB $A2                     * Vert>>
    985        692C               HERO_G_SPEED         * Ground Speed
    986        692C 0000                 FDB $0000            * First byte >>
    987        692E               HERO_X_SPEED
    988        692E 0000                 FDB $0000            * Horizontal >>
    989        6930               HERO_X_SPS
    990        6930 0000                 FDB $0000            * Subpixel X >>
    991        6932               HERO_Y_SPEED
    992        6932 0000                 FDB $0000            * Vertical Sp>>
    993        6934               HERO_Y_SPS
    994        6934 0000                 FDB $0000            * Subpixel Y >>
    995        6936               HERO_TOP_SPEED
    996        6936 0180                 FDB $0180        * 0600 vitesse ma>>
    997        6938               HERO_NEG_TOP_SPEED
    998        6938 FE80                 FDB $FE80        * FA00 vitesse ma>>
    999        693A               HERO_ACCELERATION
   1000        693A 0003                 FDB $0003        * 000C constante >>
   1001        693C               HERO_DECELERATION
   1002        693C 0020                 FDB $0020        * 0080 constante >>
   1003        693E               HERO_FRICTION
   1004        693E 0003                 FDB $0003        * 000C constante >>
   1005        6940               HERO_ANIMATION_ADR
   1006        6940 0000                 FDB $0000        * Animation coura>>
   1007        6942               HERO_ANIMATION_ADR_OLD
   1008        6942 0000                 FDB $0000        * Sauvegarde anci>>
   1009        6944               HERO_ANIMATION_RTN_ADR
   1010        6944 0000                 FDB $0000        * Animation coura>>
   1011        6946               HERO_ANIMATION_PAG
   1012        6946 00                   FCB $00          * Animation coura>>
   1013        6947               HERO_ANIMATION_PAG_REF
   1014        6947 00                   FCB $00          * Animation coura>>
   1015        6948               HERO_ANIMATION_PAG_DEL
   1016        6948 00                   FCB $00        * Animation courant>>
   1017        6949 00                   FCB $00        * Animation courant>>
   1018        694A               HERO_ANIMATION_DEL
   1019        694A 0000                 FDB $0000        * Animation coura>>
   1020        694C 0000                 FDB $0000        * Animation coura>>
   1021        694E               HERO_ANIMATION_DRW
   1022        694E 0000                 FDB $0000        * Animation coura>>
   1023        6950               HERO_ANIMATION_IMC
   1024        6950 00                   FCB $00          * Animation coura>>
   1025        6951               HERO_ANIMATION_RTN_IMC
   1026        6951 00                   FCB $00          * Animation coura>>
   1027        6952               HERO_ANIMATION_FRR
   1028        6952 00                   FCB $00          * Animation coura>>

000000 Total Errors

000121 Total Symbols
     0x          Label 6300 BEGIN
     0x          Label 652F CLR_CART
     1x          Label 6548 CLR_CART_2
     1x          Label 6564 CLR_CART_3
     1x          Label 6764 Compute_Position
     1x          Label 6781 Compute_Position_01
     4x          Label 679B Compute_Position_02
     3x          Label 6332 CPPAGE_LOOP
     1x          Equ   0014 DEBUTECRANA
     1x          Equ   2014 DEBUTECRANB
     1x          Equ   622C DK_dernier_bloc_a_ecrire
     1x          Equ   6213 DK_destination
     1x          Equ   6205 DK_lecture
     1x          Equ   620A DK_piste
     2x          Equ   620F DK_secteur
     0x          Label 656B DRAW_RAM_DATA_TO_CART_160x200
     1x          Label 6578 DRAW_RAM_DATA_TO_CART_160x200A
     1x          Label 65D3 DRAW_RAM_DATA_TO_CART_160x200A_E
     1x          Label 65A9 DRAW_RAM_DATA_TO_CART_160x200B
     2x          Equ   1F40 FINECRANA
     2x          Equ   3F40 FINECRANB
     1x          Label 65FA FINTABPALETTE
     2x          Label 693A HERO_ACCELERATION
    14x          Label 6940 HERO_ANIMATION_ADR
     3x          Label 6942 HERO_ANIMATION_ADR_OLD
     4x          Label 694A HERO_ANIMATION_DEL
     3x          Label 694E HERO_ANIMATION_DRW
     2x          Label 6952 HERO_ANIMATION_FRR
     5x          Label 6950 HERO_ANIMATION_IMC
     2x          Label 679D HERO_ANIMATION_LOAD
     3x          Label 67A6 HERO_ANIMATION_LOAD_00
     2x          Label 67BE HERO_ANIMATION_LOAD_01
     2x          Label 67B3 HERO_ANIMATION_LOAD_01A
     1x          Label 67E0 HERO_ANIMATION_LOAD_02
     1x          Label 67FE HERO_ANIMATION_LOAD_FE
     1x          Label 67EE HERO_ANIMATION_LOAD_NOPAGE
     1x          Label 680C HERO_ANIMATION_NEXT
     1x          Label 6812 HERO_ANIMATION_NEXT_00
     6x          Label 6946 HERO_ANIMATION_PAG
     4x          Label 6948 HERO_ANIMATION_PAG_DEL
     3x          Label 6947 HERO_ANIMATION_PAG_REF
     2x          Label 6944 HERO_ANIMATION_RTN_ADR
     1x          Label 6951 HERO_ANIMATION_RTN_IMC
     4x          Label 693C HERO_DECELERATION
     2x          Label 693E HERO_FRICTION
    17x          Label 692C HERO_G_SPEED
     2x          Label 6920 HERO_IDLE_L
     3x          Label 685F HERO_IDLE_R
     1x          Equ   FE80 HERO_JOG_NEG_SPD_LIMIT
     1x          Equ   0180 HERO_JOG_SPD_LIMIT
     1x          Label 6614 Hero_Move
     1x          Label 668E Hero_MoveLeft
     1x          Label 66A8 Hero_MoveLeft_00
     1x          Label 66C6 Hero_MoveLeft_01
     1x          Label 66A2 Hero_MoveLeft_03
     1x          Label 66D2 Hero_MoveRight
     1x          Label 66E9 Hero_MoveRight_00
     1x          Label 6707 Hero_MoveRight_01
     1x          Label 66E3 Hero_MoveRight_03
    12x          Label 6710 Hero_MoveUpdatePos
     1x          Label 672A Hero_MoveUpdatePos_00
     1x          Label 6741 Hero_MoveUpdatePos_01
     1x          Label 6747 Hero_MoveUpdatePos_02
     1x          Label 674D Hero_MoveUpdatePos_03
     2x          Label 6729 Hero_MoveUpdatePos_V00
     3x          Label 6938 HERO_NEG_TOP_SPEED
     1x          Label 661D Hero_NotLeft
     1x          Label 6624 Hero_NotLeftOrRight
     1x          Label 6663 Hero_NotLeftOrRight_00
     1x          Label 664C Hero_NotLeftOrRight_01
     1x          Label 665D Hero_NotLeftOrRight_02
     1x          Label 6660 Hero_NotLeftOrRight_03
     1x          Label 6677 Hero_NotLeftOrRight_11
     1x          Label 6688 Hero_NotLeftOrRight_12
     1x          Label 668B Hero_NotLeftOrRight_13
     6x          Equ   9F00 HERO_POS
     2x          Label 68E7 HERO_RUN_L
     2x          Label 686B HERO_RUN_R
     3x          Label 6936 HERO_TOP_SPEED
     3x          Label 68A4 HERO_WALK_L
     0x          Equ   FF00 HERO_WALK_NEG_SPD_LIMIT
     3x          Label 681C HERO_WALK_R
     0x          Equ   0100 HERO_WALK_SPD_LIMIT
     4x          Label 692A HERO_X_POS
     2x          Label 692E HERO_X_SPEED
     6x          Label 6930 HERO_X_SPS
     4x          Label 692B HERO_Y_POS
     1x          Label 6932 HERO_Y_SPEED
     0x          Label 6934 HERO_Y_SPS
     0x          Label 6381 INIT_VID
     0x          Equ   000D JOY_B
     0x          Equ   0005 JOY_BD
     0x          Equ   0009 JOY_BG
     1x          Label 6613 JOY_BTN_STATUS
     0x          Equ   000F JOY_C
     1x          Equ   0007 JOY_D
     2x          Label 6612 JOY_DIR_STATUS
     1x          Equ   000B JOY_G
     0x          Equ   000E JOY_H
     0x          Equ   0006 JOY_HD
     0x          Equ   000A JOY_HG
     1x          Label 65FA JOY_READ
     6x          Label 631F LDPAGE_LOOP
     1x          Label 63CB MAIN
     1x          Label 63D8 MAIN_0
     1x          Label 63F4 MAIN_1
     1x          Label 63FA MAIN_2
     2x          Label 643C MEM_COPY_DATA_TO_CART
     2x          Label 6522 MEM_COPY_DATA_TO_CART_E
     1x          Label 6442 MEM_COPY_DATA_TO_CART_LOOP
     1x          Label 652A MEM_COPY_DATA_TO_CART_S
     1x          Label 635D PAGEINIT
     1x          Label 635B PAGEINITNEXT
     0x          Label 636E PAGENEXT
     3x          Label 640C SCRC
     3x          Label 6427 SCRC0
     1x          Label 6399 SETPALETTE
     1x          Label 65DA TABPALETTE
     1x          Label 6431 VSYNC
     1x          Label 6431 VSYNC_1
     1x          Label 6436 VSYNC_2

