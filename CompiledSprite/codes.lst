/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : ./input/CODE/MAIN.ASS.TMP
 * Fichier destination : TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     22655
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        6300                      ORG $6300
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17
     18                  6205     DK_lecture               EQU $6205 * rout>>
     19                  620A     DK_piste                 EQU $620A * 2B n>>
     20                  620F     DK_secteur               EQU $620F * 1B n>>
     21                  6213     DK_destination           EQU $6213 * 2B d>>
     22                  622C     DK_dernier_bloc_a_ecrire EQU $622C * 2B f>>
     23
     24                  0014     DEBUTECRANA EQU $0014 * test pour fin sta>>
     25                  1F40     FINECRANA   EQU $1F40 * fin de la RAM A v>>
     26                  2014     DEBUTECRANB EQU $2014 * test pour fin sta>>
     27                  3F40     FINECRANB   EQU $3F40 * fin de la RAM B v>>
     28
     29                  0005     JOY_BD EQU $05 * Bas Droite
     30                  0006     JOY_HD EQU $06 * Haut Droite
     31                  0007     JOY_D  EQU $07 * Droite
     32                  0009     JOY_BG EQU $09 * Bas Gauche
     33                  000A     JOY_HG EQU $0A * Haut Gauche
     34                  000B     JOY_G  EQU $0B * Gauche
     35                  000D     JOY_B  EQU $0D * Bas
     36                  000E     JOY_H  EQU $0E * Haut
     37                  000F     JOY_C  EQU $0F * Centre
     38
     39                  9F00     HERO_POS EQU $9F00 * Emplacement memoire >>
     40
     41                           *****************************************>>
     42                           * Debut du programme
     43                           *****************************************>>
     44        6300               BEGIN
     45  2     6300 1A   50              ORCC #$50     * a documenter (inte>>
     46                            
     47                           *****************************************>>
     48                           * Initialisation du mode video
     49                           *****************************************>>
     50  2     6302 86   7B              LDA #$7B      * passage en mode 16>>
     51  5     6304 B7   E7DC            STA $E7DC
     52
     53  3     6307 CC   0000            LDD #$0000
     54        630A               SETBLACKPALETTE
     55  5     630A B7   E7DB            STA $E7DB     * determine l'indice>>
     56  5     630D F7   E7DA            STB $E7DA     * set de la couleur >>
     57  5     6310 F7   E7DA            STB $E7DA   * set de la couleur Bl>>
     58  2     6313 8B   02              ADDA #$02     * increment de l'ind>>
     59  2     6315 81   20              CMPA #$20     * si on atteint 32 s>>
     60  3     6317 26   F1              BNE    SETBLACKPALETTE
     61                            
     62                                  * Bordure initialisee avec couleur>>
     63  5     6319 F6   E7DD         LDB $E7DD
     64  2     631C C4   F0              ANDB #$F0
     65  5     631E F7   E7DD            STB $E7DD
     66
     67                           *****************************************>>
     68                           * Chargement des pages memoire
     69                           *****************************************>>
     70                                  * Chargement des pages depuis la d>>
     71                                  **********************************>>
     72                            
     73  3     6321 CC   0004            LDD #$0004
     74  6     6324 FD   620A            STD DK_piste
     75  2     6327 86   01              LDA #$01
     76  5     6329 B7   620F            STA DK_secteur
     77  3     632C CC   DF00            LDD #$DF00
     78  6     632F FD   622C            STD DK_dernier_bloc_a_ecrire
     79                            
     80        6332               LDPAGE_LOOP
     81  2     6332 C6   00              LDB #$00
     82  5     6334 F7   E7E5            STB $E7E5 * Selection de la page e>>
     83                            
     84  2     6337 86   01              LDA #$01
     85  5     6339 B7   620F            STA DK_secteur
     86  3     633C CC   A000            LDD #$A000
     87  6     633F FD   6213            STD DK_destination
     88  8     6342 BD   6205            JSR DK_lecture
     89                            
     90                                  * Duplication de la page p en p+1
     91                                  *********************************
     92        6345               CPPAGE_LOOP
     93  2     6345 C6   62              LDB #$62                       * O>>
     94  5     6347 F7   E7E6            STB $E7E6                      * e>>
     95
     96  3     634A CE   A000         LDU #$A000                     * Sour>>
     97  4     634D 108E 4040         LDY #$4000+64                  * Dest>>
     98  7     6351 10BF 6535            STY MEM_COPY_DATA_TO_CART_E+2
     99  4     6355 108E 2040         LDY #$2000+64                  * Dest>>
    100  8     6359 BD   644D         JSR MEM_COPY_DATA_TO_CART      * Copi>>
    101                            
    102  3     635C CE   C000         LDU #$C000                     * Sour>>
    103  4     635F 108E 2040         LDY #$2000+64                  * Dest>>
    104  7     6363 10BF 6535            STY MEM_COPY_DATA_TO_CART_E+2
    105  4     6367 108E 0040         LDY #$0000+64                  * Dest>>
    106  8     636B BD   644D         JSR MEM_COPY_DATA_TO_CART      * Copi>>
    107
    108        636E               PAGEINITNEXT
    109  3     636E 20   00           BRA PAGEINIT
    110
    111        6370               PAGEINIT
    112  2     6370 86   04              LDA #$04
    113  5     6372 B7   6333            STA LDPAGE_LOOP+1
    114  2     6375 86   65           LDA #$65
    115  5     6377 B7   6346         STA CPPAGE_LOOP+1
    116  2     637A 86   11           LDA #$11
    117  5     637C B7   636F            STA PAGEINITNEXT+1
    118  3     637F 20   B1           BRA LDPAGE_LOOP
    119
    120        6381               PAGENEXT
    121  7     6381 7C   6346         INC CPPAGE_LOOP+1
    122  7     6384 7C   6346            INC CPPAGE_LOOP+1
    123  7     6387 7C   6333            INC LDPAGE_LOOP+1
    124  7     638A 7C   6333            INC LDPAGE_LOOP+1
    125  5     638D F6   6333            LDB LDPAGE_LOOP+1
    126  2     6390 C1   16              CMPB #$16
    127  3     6392 23   9E              BLS LDPAGE_LOOP
    128
    129                           *****************************************>>
    130                           * Initialisation de la routine de commuta>>
    131                           *****************************************>>
    132        6394               INIT_VID
    133  5     6394 F6   6081            LDB $6081 * A documenter
    134  2     6397 CA   10              ORB #$10  * mettre le bit d4 a 1
    135  5     6399 F7   6081            STB $6081
    136  5     639C F7   E7E7            STB $E7E7
    137  8     639F BD   641D            JSR SCRC     * page 2 en RAM Carto>>
    138
    139                           *****************************************>>
    140                           * Initialisation de la palette de couleur>>
    141                           *****************************************>>
    142                           * Ecriture en $E7DB de l'adresse ou sera >>
    143                           *
    144                           * les adresses vont de deux en deux car i>>
    145                           * couleur: 0, adresse: 00
    146                           * couleur: 1, adresse: 02
    147                           * couleur: 2, adresse: 04
    148                           * ...
    149                           *
    150                           * Deux ecritures en $E7DA (auto-increment>>
    151                           *                          positionnee en>>
    152                           *
    153                           *                             V V V V    >>
    154                           * Premiere adresse        fondamentale V >>
    155                           *
    156                           * Deuxieme adresse            X X X M    >>
    157                           * auto-incrementee        bit de marquage>>
    158                           *
    159                           * Piste d'optim pour changer plus de coul>>
    160                           * ne changer que la moditie des donnees d>>
    161                           *****************************************>>
    162
    163  4     63A2 108E 65EB            LDY #TABPALETTE
    164  2     63A6 4F                   CLRA                        * regi>>
    165        63A7               SETPALETTE
    166  5+1   63A7 34   02              PSHS A                      * sauv>>
    167  2     63A9 48                   ASLA                        * mult>>
    168  5     63AA B7   E7DB            STA $E7DB                   * dete>>
    169  5+3   63AD EC   A1              LDD ,Y++                    * char>>
    170  5     63AF F7   E7DA            STB $E7DA                   * set >>
    171  5     63B2 B7   E7DA            STA $E7DA           * set de la co>>
    172  5+1   63B5 35   02              PULS A                      * rech>>
    173  2     63B7 4C                   INCA                        * et i>>
    174  5     63B8 108C 660B            CMPY #FINTABPALETTE * test fin de >>
    175  3     63BC 26   E9              BNE    SETPALETTE      * on rebouc>>
    176
    177                           *****************************************>>
    178                           * Initialisation des sprites
    179                           *****************************************>>
    180  3     63BE 8E   6861            LDX #HERO_IDLE_R
    181  6     63C1 BF   69F2            STX HERO_ANIMATION_ADR_OLD
    182  8     63C4 BD   679B            JSR HERO_ANIMATION_LOAD
    183
    184                           *****************************************>>
    185                           * Boucle principale
    186                           *****************************************>>
    187
    188                                  * Init routine effacement sprite
    189  8     63C7 BD   6762            JSR Compute_Position
    190  5     63CA F6   69F6            LDB HERO_ANIMATION_PAG            >>
    191  5     63CD F7   69F8            STB HERO_ANIMATION_PAG_DEL
    192  5     63D0 F7   E7E5            STB $E7E5                         >>
    193  7+3   63D3 AD   9F 69FE         JSR [HERO_ANIMATION_DRW]          >>
    194  8     63D7 BD   641D            JSR SCRC
    195  3     63DA 20   0D              BRA MAIN_0
    196                            
    197        63DC               MAIN
    198                                  * Effacement et affichage des spri>>
    199  6     63DC FC   69F8            LDD HERO_ANIMATION_PAG_DEL        >>
    200  5     63DF F7   69F8            STB HERO_ANIMATION_PAG_DEL
    201  5     63E2 B7   E7E5            STA $E7E5                         >>
    202  7+3   63E5 AD   9F 69FA         JSR [HERO_ANIMATION_DEL]          >>
    203        63E9               MAIN_0
    204  6     63E9 FC   69FC            LDD HERO_ANIMATION_DEL+2          >>
    205  6     63EC FD   69FA            STD HERO_ANIMATION_DEL
    206
    207                                  * Gestion des deplacements
    208  8     63EF BD   660B            JSR JOY_READ
    209  8     63F2 BD   6625            JSR Hero_Move
    210  8     63F5 BD   6762            JSR Compute_Position
    211  6     63F8 BE   69F0            LDX HERO_ANIMATION_ADR
    212  7     63FB BC   69F2            CMPX HERO_ANIMATION_ADR_OLD
    213  3     63FE 26   05              BNE MAIN_1
    214  8     6400 BD   680E            JSR HERO_ANIMATION_NEXT
    215  3     6403 20   06              BRA MAIN_2
    216        6405               MAIN_1
    217  6     6405 BF   69F2            STX HERO_ANIMATION_ADR_OLD
    218  8     6408 BD   679B            JSR HERO_ANIMATION_LOAD
    219        640B               MAIN_2
    220                            
    221  5     640B F6   69F6            LDB HERO_ANIMATION_PAG            >>
    222  5     640E F7   69F9            STB HERO_ANIMATION_PAG_DEL+1
    223  5     6411 F7   E7E5            STB $E7E5                         >>
    224  7+3   6414 AD   9F 69FE         JSR [HERO_ANIMATION_DRW]          >>
    225                            
    226  8     6418 BD   641D            JSR SCRC                          >>
    227  3     641B 20   BF              BRA MAIN
    228
    229                           *****************************************>>
    230                           * Changement de page ESPACE ECRAN (affich>>
    231                           *      $E7DD determine la page affichee d>>
    232                           *      D7=0 D6=0 D5=0 D4=0 (#$0_) : page >>
    233                           *      D7=0 D6=1 D5=0 D4=0 (#$4_) : page >>
    234                           *      D7=1 D6=0 D5=0 D4=0 (#$8_) : page >>
    235                           *      D7=1 D6=1 D5=0 D4=0 (#$C_) : page >>
    236                           *   D3 D2 D1 D0  (#$_0 a #$_F) : couleur >>
    237                           *   Remarque : D5 et D4 utilisable unique>>
    238                           *
    239                           * Changement de page ESPACE CARTOUCHE (ec>>
    240                           *      $E7E6 determine la page affichee d>>
    241                           *   D5 : 1 = espace cartouche recouvert p>>
    242                           *   D4 : 0 = CAS1N valide : banques 0-15 >>
    243                           *      D5=1 D4=0 D3=0 D2=0 D1=0 D0=0 (#$6>>
    244                           *   ...
    245                           *      D5=1 D4=0 D3=1 D2=1 D1=1 D0=1 (#$6>>
    246                           *      D5=1 D4=1 D3=0 D2=0 D1=0 D0=0 (#$7>>
    247                           *   ...
    248                           *      D5=1 D4=1 D3=1 D2=1 D1=1 D0=1 (#$7>>
    249                           *****************************************>>
    250        641D               SCRC
    251  8     641D BD   6442            JSR VSYNC
    252
    253  5     6420 F6   6439            LDB SCRC0+1
    254  2     6423 C4   01              ANDB #$01
    255  5     6425 FB   69F7            ADDB HERO_ANIMATION_PAG_REF
    256  5     6428 F7   69F6            STB HERO_ANIMATION_PAG
    257                            
    258  5     642B F6   6439            LDB SCRC0+1   * charge la valeur d>>
    259  2     642E C4   80              ANDB #$80     * permute #$00 ou #$>>
    260  2     6430 CA   00              ORB #$00      * recharger la coule>>
    261  5     6432 F7   E7DD            STB $E7DD     * changement page da>>
    262  7     6435 73   6439            COM SCRC0+1   * modification du co>>
    263        6438               SCRC0
    264  2     6438 C6   00              LDB #$00
    265  2     643A C4   02              ANDB #$02     * permute #$60 ou #$>>
    266  2     643C CA   60              ORB #$60      * espace cartouche r>>
    267  5     643E F7   E7E6            STB $E7E6     * changement page da>>
    268  5     6441 39                   RTS                  * E7E6 D5=1 p>>
    269                                                       * CAS1N : ban>>
    270
    271                           *****************************************>>
    272                           * Attente VBL
    273                           *****************************************>>
    274        6442               VSYNC
    275        6442               VSYNC_1
    276  7     6442 7D   E7E7            TST    $E7E7
    277  3     6445 2A   FB              BPL    VSYNC_1
    278        6447               VSYNC_2
    279  7     6447 7D   E7E7            TST    $E7E7
    280  3     644A 2B   FB              BMI    VSYNC_2
    281  5     644C 39                   RTS
    282
    283                           *****************************************>>
    284                           * Copie Memoire de la zone donnee vers ca>>
    285                           * Cycles en fonction de l'implementation
    286                           * 256 octets (-128 a 127) x 64  boucles (>>
    287                           * 128 octets (-64  a 63)  x 128 boucles (>>
    288                           * 32  octets (-16  a 15)  x 512 boucles (>>
    289                           *****************************************>>
    290                            
    291        644D               MEM_COPY_DATA_TO_CART
    292  7     644D 10FF 653D        STS MEM_COPY_DATA_TO_CART_S+2  * sauve>>
    293  6     6451 1F   34          TFR U,S
    294        6453               MEM_COPY_DATA_TO_CART_LOOP
    295  5+6   6453 35   56          PULS       D,X,U
    296  5+1   6455 ED   A8 C0       STD -64,Y
    297  5+1   6458 AF   A8 C2       STX -62,Y
    298  5+1   645B EF   A8 C4       STU -60,Y
    299  5+6   645E 35   56          PULS       D,X,U
    300  5+1   6460 ED   A8 C6       STD -58,Y
    301  5+1   6463 AF   A8 C8       STX -56,Y
    302  5+1   6466 EF   A8 CA       STU -54,Y
    303  5+6   6469 35   56          PULS       D,X,U
    304  5+1   646B ED   A8 CC       STD -52,Y
    305  5+1   646E AF   A8 CE       STX -50,Y
    306  5+1   6471 EF   A8 D0       STU -48,Y
    307  5+6   6474 35   56          PULS       D,X,U
    308  5+1   6476 ED   A8 D2       STD -46,Y
    309  5+1   6479 AF   A8 D4       STX -44,Y
    310  5+1   647C EF   A8 D6       STU -42,Y
    311  5+6   647F 35   56          PULS       D,X,U
    312  5+1   6481 ED   A8 D8       STD -40,Y
    313  5+1   6484 AF   A8 DA       STX -38,Y
    314  5+1   6487 EF   A8 DC       STU -36,Y
    315  5+6   648A 35   56          PULS       D,X,U
    316  5+1   648C ED   A8 DE       STD -34,Y
    317  5+1   648F AF   A8 E0       STX -32,Y
    318  5+1   6492 EF   A8 E2       STU -30,Y
    319  5+6   6495 35   56          PULS       D,X,U
    320  5+1   6497 ED   A8 E4       STD -28,Y
    321  5+1   649A AF   A8 E6       STX -26,Y
    322  5+1   649D EF   A8 E8       STU -24,Y
    323  5+6   64A0 35   56          PULS       D,X,U
    324  5+1   64A2 ED   A8 EA       STD -22,Y
    325  5+1   64A5 AF   A8 EC       STX -20,Y
    326  5+1   64A8 EF   A8 EE       STU -18,Y
    327  5+6   64AB 35   56          PULS       D,X,U
    328  5+1   64AD ED   30          STD -16,Y
    329  5+1   64AF AF   32          STX -14,Y
    330  5+1   64B1 EF   34          STU -12,Y
    331  5+6   64B3 35   56          PULS       D,X,U
    332  5+1   64B5 ED   36          STD -10,Y
    333  5+1   64B7 AF   38          STX -8,Y
    334  5+1   64B9 EF   3A          STU -6,Y
    335  5+6   64BB 35   56          PULS       D,X,U
    336  5+1   64BD ED   3C          STD -4,Y
    337  5+1   64BF AF   3E          STX -2,Y
    338  5+0   64C1 EF   A4          STU ,Y
    339  5+6   64C3 35   56          PULS       D,X,U
    340  5+1   64C5 ED   22          STD 2,Y
    341  5+1   64C7 AF   24          STX 4,Y
    342  5+1   64C9 EF   26          STU 6,Y
    343  5+6   64CB 35   56          PULS       D,X,U
    344  5+1   64CD ED   28          STD 8,Y
    345  5+1   64CF AF   2A          STX 10,Y
    346  5+1   64D1 EF   2C          STU 12,Y
    347  5+6   64D3 35   56          PULS       D,X,U
    348  5+1   64D5 ED   2E          STD 14,Y
    349  5+1   64D7 AF   A8 10       STX 16,Y
    350  5+1   64DA EF   A8 12       STU 18,Y
    351  5+6   64DD 35   56          PULS       D,X,U
    352  5+1   64DF ED   A8 14       STD 20,Y
    353  5+1   64E2 AF   A8 16       STX 22,Y
    354  5+1   64E5 EF   A8 18       STU 24,Y
    355  5+6   64E8 35   56          PULS       D,X,U
    356  5+1   64EA ED   A8 1A       STD 26,Y
    357  5+1   64ED AF   A8 1C       STX 28,Y
    358  5+1   64F0 EF   A8 1E       STU 30,Y
    359  5+6   64F3 35   56          PULS       D,X,U
    360  5+1   64F5 ED   A8 20       STD 32,Y
    361  5+1   64F8 AF   A8 22       STX 34,Y
    362  5+1   64FB EF   A8 24       STU 36,Y
    363  5+6   64FE 35   56          PULS       D,X,U
    364  5+1   6500 ED   A8 26       STD 38,Y
    365  5+1   6503 AF   A8 28       STX 40,Y
    366  5+1   6506 EF   A8 2A       STU 42,Y
    367  5+6   6509 35   56          PULS       D,X,U
    368  5+1   650B ED   A8 2C       STD 44,Y
    369  5+1   650E AF   A8 2E       STX 46,Y
    370  5+1   6511 EF   A8 30       STU 48,Y
    371  5+6   6514 35   56          PULS       D,X,U
    372  5+1   6516 ED   A8 32       STD 50,Y
    373  5+1   6519 AF   A8 34       STX 52,Y
    374  5+1   651C EF   A8 36       STU 54,Y
    375  5+6   651F 35   56          PULS       D,X,U
    376  5+1   6521 ED   A8 38       STD 56,Y
    377  5+1   6524 AF   A8 3A       STX 58,Y
    378  5+1   6527 EF   A8 3C       STU 60,Y
    379  5+2   652A 35   06          PULS       D
    380  5+1   652C ED   A8 3E       STD 62,Y
    381  4+4   652F 31   A9 0080     LEAY 128,Y
    382        6533               MEM_COPY_DATA_TO_CART_E
    383  5     6533 108C 00C0        CMPY    #$00C0
    384  6     6537 1026 FF18        LBNE    MEM_COPY_DATA_TO_CART_LOOP
    385        653B               MEM_COPY_DATA_TO_CART_S
    386  4     653B 10CE 0000        LDS     #$0000    * Rechargement du po>>
    387  5     653F 39               RTS
    388
    389                           *****************************************>>
    390                           * Effacement memoire Cartouche (27000 cy)>>
    391                           *****************************************>>
    392        6540               CLR_CART
    393  5+3   6540 34   48           PSHS U,DP
    394  7     6542 10FF 6577         STS CLR_CART_3+2
    395  4     6546 10CE 4000         LDS #$4000
    396  3     654A CE   0C0C         LDU #$0C0C
    397  4     654D 108E 0C0C         LDY #$0C0C
    398  3     6551 8E   0C0C         LDX #$0C0C
    399  3     6554 CC   0C0C         LDD #$0C0C
    400  6     6557 1F   8B           TFR A,DP
    401        6559               CLR_CART_2
    402  5+9   6559 34   7E           PSHS U,Y,X,DP,B,A
    403  5+9   655B 34   7E           PSHS U,Y,X,DP,B,A
    404  5+9   655D 34   7E           PSHS U,Y,X,DP,B,A
    405  5+9   655F 34   7E           PSHS U,Y,X,DP,B,A
    406  5+9   6561 34   7E           PSHS U,Y,X,DP,B,A
    407  5+9   6563 34   7E           PSHS U,Y,X,DP,B,A
    408  5+9   6565 34   7E           PSHS U,Y,X,DP,B,A
    409  5+9   6567 34   7E           PSHS U,Y,X,DP,B,A
    410  5+9   6569 34   7E           PSHS U,Y,X,DP,B,A
    411  5+9   656B 34   7E           PSHS U,Y,X,DP,B,A
    412  5     656D 118C 0004         CMPS #$0004
    413  3     6571 26   E6           BNE CLR_CART_2
    414  5+4   6573 34   60           PSHS U,Y
    415        6575               CLR_CART_3
    416  4     6575 10CE 0000         LDS #$0000
    417  5+3   6579 35   48           PULS DP,U
    418  5     657B 39                RTS
    419                            
    420                           *****************************************>>
    421                           * Affichage de l arriere plan 57900 cycle>>
    422                           *****************************************>>
    423        657C               DRAW_RAM_DATA_TO_CART_160x200
    424  5+3   657C 34   48              PSHS U,DP            * sauvegarde >>
    425  7     657E 10FF 65E6            STS DRAW_RAM_DATA_TO_CART_160x200A>>
    426                            
    427  4     6582 10CE 1F40            LDS #FINECRANA       * init pointe>>
    428  3     6586 CE   A000            LDU #$A000
    429
    430        6589               DRAW_RAM_DATA_TO_CART_160x200A
    431  5+7   6589 37   3E              PULU A,B,DP,X,Y
    432  5+7   658B 34   3E              PSHS Y,X,DP,B,A
    433  5+7   658D 37   3E              PULU A,B,DP,X,Y
    434  5+7   658F 34   3E              PSHS Y,X,DP,B,A
    435  5+7   6591 37   3E              PULU A,B,DP,X,Y
    436  5+7   6593 34   3E              PSHS Y,X,DP,B,A
    437  5+7   6595 37   3E              PULU A,B,DP,X,Y
    438  5+7   6597 34   3E              PSHS Y,X,DP,B,A
    439  5+7   6599 37   3E              PULU A,B,DP,X,Y
    440  5+7   659B 34   3E              PSHS Y,X,DP,B,A
    441  5+7   659D 37   3E              PULU A,B,DP,X,Y
    442  5+7   659F 34   3E              PSHS Y,X,DP,B,A
    443  5     65A1 118C 0014            CMPS #DEBUTECRANA
    444  3     65A5 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200A>>
    445  5+7   65A7 37   3E              PULU A,B,DP,X,Y
    446  5+7   65A9 34   3E              PSHS Y,X,DP,B,A
    447  5+7   65AB 37   3E              PULU A,B,DP,X,Y
    448  5+7   65AD 34   3E              PSHS Y,X,DP,B,A
    449  5+6   65AF 37   3C              PULU B,DP,X,Y
    450  5+6   65B1 34   3C              PSHS Y,X,DP,B
    451
    452  4     65B3 10CE 3F40            LDS #FINECRANB       * init pointe>>
    453  3     65B7 CE   C000            LDU #$C000
    454
    455        65BA               DRAW_RAM_DATA_TO_CART_160x200B
    456  5+7   65BA 37   3E              PULU A,B,DP,X,Y
    457  5+7   65BC 34   3E              PSHS Y,X,DP,B,A
    458  5+7   65BE 37   3E              PULU A,B,DP,X,Y
    459  5+7   65C0 34   3E              PSHS Y,X,DP,B,A
    460  5+7   65C2 37   3E              PULU A,B,DP,X,Y
    461  5+7   65C4 34   3E              PSHS Y,X,DP,B,A
    462  5+7   65C6 37   3E              PULU A,B,DP,X,Y
    463  5+7   65C8 34   3E              PSHS Y,X,DP,B,A
    464  5+7   65CA 37   3E              PULU A,B,DP,X,Y
    465  5+7   65CC 34   3E              PSHS Y,X,DP,B,A
    466  5+7   65CE 37   3E              PULU A,B,DP,X,Y
    467  5+7   65D0 34   3E              PSHS Y,X,DP,B,A
    468  5     65D2 118C 2014            CMPS #DEBUTECRANB
    469  3     65D6 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200B>>
    470  5+7   65D8 37   3E              PULU A,B,DP,X,Y
    471  5+7   65DA 34   3E              PSHS Y,X,DP,B,A
    472  5+7   65DC 37   3E              PULU A,B,DP,X,Y
    473  5+7   65DE 34   3E              PSHS Y,X,DP,B,A
    474  5+6   65E0 37   3C              PULU B,DP,X,Y
    475  5+6   65E2 34   3C              PSHS Y,X,DP,B
    476        65E4               DRAW_RAM_DATA_TO_CART_160x200A_E
    477  4     65E4 10CE 0000            LDS  #$0000 * rechargement des reg>>
    478  5+3   65E8 35   48              PULS U,DP
    479  5     65EA 39                   RTS
    480
    481                           *****************************************>>
    482                           * Palette de 16 couleurs
    483                           *****************************************>>
    484        65EB               TABPALETTE
    485        65EB 0000                 FDB $0000     * index:1  R:0   V:0>>
    486        65ED 0004                 FDB $0004     * index:2  R:139 V:2>>
    487        65EF 047D                 FDB $047d     * index:3  R:236 V:1>>
    488        65F1 0028                 FDB $0028     * index:4  R:189 V:9>>
    489        65F3 006A                 FDB $006a     * index:5  R:206 V:1>>
    490        65F5 01A6                 FDB $01a6     * index:6  R:167 V:2>>
    491        65F7 0061                 FDB $0061     * index:7  R:75  V:1>>
    492        65F9 0020                 FDB $0020     * index:8  R:16  V:9>>
    493        65FB 0010                 FDB $0010     * index:9  R:0   V:4>>
    494        65FD 0220                 FDB $0220     * index:10 R:22  V:8>>
    495        65FF 0B82                 FDB $0b82     * index:11 R:103 V:1>>
    496        6601 0DDD                 FDB $0ddd     * index:12 R:239 V:2>>
    497        6603 0D30                 FDB $0d30     * index:13 R:9   V:1>>
    498        6605 0700                 FDB $0700     * index:14 R:12  V:3>>
    499        6607 0001                 FDB $0001     * index:15 R:53  V:7>>
    500        6609 000C                 FDB $000c     * index:16 R:225 V:0>>
    501        660B               FINTABPALETTE
    502
    503                           *****************************************>>
    504                           * Get joystick parameters
    505                           *****************************************>>
    506        660B               JOY_READ
    507  3     660B 8E   E7CF            ldx    #$e7cf
    508  4     660E 108E E7CD            ldy    #$e7cd
    509  3     6612 CC   400F            ldd    #$400f
    510  5     6615 F4   E7CC            andb   >$e7cc     * Read position
    511  5     6618 F7   6623            stb    JOY_DIR_STATUS
    512  4+0   661B A4   A4              anda   ,y         * Read button
    513  2     661D 88   40              eora   #$40
    514  5     661F B7   6624            sta    JOY_BTN_STATUS
    515  5     6622 39                   RTS
    516        6623               JOY_DIR_STATUS
    517        6623 00                   FCB $00 * Position Pad
    518        6624               JOY_BTN_STATUS
    519        6624 00                   FCB $00 * 40 Bouton A enfonce
    520
    521                           *****************************************>>
    522                           * Subroutine to      make HERO walk/run
    523                           *****************************************>>
    524        6625               Hero_Move
    525  5     6625 B6   6623            LDA JOY_DIR_STATUS
    526  2     6628 81   0B              CMPA #JOY_G
    527  3     662A 26   02              BNE Hero_NotLeft
    528  3     662C 20   71              BRA Hero_MoveLeft
    529
    530        662E               Hero_NotLeft                   * XREF: He>>
    531  2     662E 81   07              CMPA #JOY_D
    532  3     6630 26   03              BNE Hero_NotLeftOrRight
    533  5     6632 16   00AE            LBRA Hero_MoveRight
    534
    535        6635               Hero_NotLeftOrRight            * XREF: He>>
    536  6     6635 FC   69DC            LDD HERO_G_SPEED
    537  5     6638 1083 0000            CMPD #$0000
    538  6     663C 1027 00E1            LBEQ Hero_MoveUpdatePos  * Si la v>>
    539  3     6640 2D   32              BLT Hero_NotLeftOrRight_00 * se de>>
    540  7     6642 B3   69EE            SUBD HERO_FRICTION     * se deplac>>
    541  5     6645 1083 0000            CMPD #$0000
    542  3     6649 2E   12              BGT Hero_NotLeftOrRight_01 * si on>>
    543  3     664B CC   0000            LDD #$0000
    544  6     664E FD   69DC            STD HERO_G_SPEED
    545  6     6651 FD   69E0            STD HERO_X_SPS
    546  3     6654 8E   6861            LDX #HERO_IDLE_R        * Charge a>>
    547  6     6657 BF   69F0            STX HERO_ANIMATION_ADR      * Sauv>>
    548
    549  5     665A 16   00C4            LBRA Hero_MoveUpdatePos
    550        665D               Hero_NotLeftOrRight_01
    551  5     665D 1083 0600            CMPD #HERO_JOG_SPD_LIMIT
    552  3     6661 2C   0B              BGE Hero_NotLeftOrRight_02
    553  6     6663 FD   69DC            STD HERO_G_SPEED
    554  3     6666 8E   681E            LDX #HERO_WALK_R        * Charge a>>
    555  6     6669 BF   69F0            STX HERO_ANIMATION_ADR      * Sauv>>
    556
    557  3     666C 20   03              BRA Hero_NotLeftOrRight_03
    558        666E               Hero_NotLeftOrRight_02
    559  6     666E FD   69DC            STD HERO_G_SPEED
    560        6671               Hero_NotLeftOrRight_03
    561  5     6671 16   00AD            LBRA Hero_MoveUpdatePos
    562        6674               Hero_NotLeftOrRight_00
    563  7     6674 F3   69EE            ADDD HERO_FRICTION     * se deplac>>
    564  3     6677 24   0F              BCC Hero_NotLeftOrRight_11 * si on>>
    565  3     6679 CC   0000            LDD #$0000
    566  6     667C FD   69DC            STD HERO_G_SPEED
    567  3     667F 8E   69D0            LDX #HERO_IDLE_L        * Charge a>>
    568  6     6682 BF   69F0            STX HERO_ANIMATION_ADR      * Sauv>>
    569
    570  5     6685 16   0099            LBRA Hero_MoveUpdatePos
    571        6688               Hero_NotLeftOrRight_11
    572  5     6688 1083 FA00            CMPD #HERO_JOG_NEG_SPD_LIMIT
    573  3     668C 2F   0B              BLE Hero_NotLeftOrRight_12
    574  6     668E FD   69DC            STD HERO_G_SPEED
    575  3     6691 8E   68A6            LDX #HERO_WALK_L        * Charge a>>
    576  6     6694 BF   69F0            STX HERO_ANIMATION_ADR      * Sauv>>
    577
    578  3     6697 20   03              BRA Hero_NotLeftOrRight_13
    579        6699               Hero_NotLeftOrRight_12
    580  6     6699 FD   69DC            STD HERO_G_SPEED
    581        669C               Hero_NotLeftOrRight_13
    582  5     669C 16   0082            LBRA Hero_MoveUpdatePos
    583
    584        669F               Hero_MoveLeft                      * XREF>>
    585  6     669F FC   69DC            LDD HERO_G_SPEED            * Char>>
    586  5     66A2 1083 0000            CMPD #$0000                 * Test>>
    587  3     66A6 2F   11              BLE Hero_MoveLeft_00        * BRAN>>
    588  7     66A8 B3   69EC            SUBD HERO_DECELERATION      * orie>>
    589  3     66AB 24   06              BCC Hero_MoveLeft_03        * BRAN>>
    590  3     66AD CC   0000            LDD #$0000
    591  7     66B0 B3   69EC            SUBD HERO_DECELERATION      * si l>>
    592        66B3               Hero_MoveLeft_03
    593  6     66B3 FD   69DC            STD HERO_G_SPEED            * On s>>
    594  5     66B6 16   0068            LBRA Hero_MoveUpdatePos           >>
    595        66B9               Hero_MoveLeft_00                         >>
    596  8     66B9 10B3 69E8            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    597  3     66BD 27   62              BEQ Hero_MoveUpdatePos      * vite>>
    598  7     66BF B3   69EA            SUBD HERO_ACCELERATION      * acce>>
    599  8     66C2 10B3 69E8            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    600  3     66C6 2E   0F              BGT Hero_MoveLeft_01        * BRAN>>
    601  3     66C8 8E   6940            LDX #HERO_RUN_L        * Charge an>>
    602  6     66CB BF   69F0            STX HERO_ANIMATION_ADR      * Sauv>>
    603
    604  6     66CE FC   69E8            LDD HERO_NEG_TOP_SPEED      * Limi>>
    605  6     66D1 FD   69DC            STD HERO_G_SPEED            * Enre>>
    606  5     66D4 16   004A            LBRA Hero_MoveUpdatePos     * Mise>>
    607        66D7               Hero_MoveLeft_01
    608  6     66D7 FD   69DC            STD HERO_G_SPEED            * Enre>>
    609  3     66DA 8E   68A6            LDX #HERO_WALK_L        * Charge a>>
    610  6     66DD BF   69F0            STX HERO_ANIMATION_ADR      * Sauv>>
    611
    612  5     66E0 16   003E            LBRA Hero_MoveUpdatePos
    613
    614        66E3               Hero_MoveRight                  * XREF: H>>
    615  6     66E3 FC   69DC            LDD HERO_G_SPEED        * Chargeme>>
    616  5     66E6 1083 0000            CMPD #$0000                 * Test>>
    617  3     66EA 2C   0E              BGE Hero_MoveRight_00       * BRAN>>
    618  7     66EC F3   69EC            ADDD HERO_DECELERATION      * orie>>
    619  3     66EF 24   03              BCC Hero_MoveRight_03       * BRAN>>
    620  6     66F1 FC   69EC            LDD HERO_DECELERATION   * si la vi>>
    621        66F4               Hero_MoveRight_03
    622  6     66F4 FD   69DC            STD HERO_G_SPEED        * On stock>>
    623  5     66F7 16   0027            LBRA Hero_MoveUpdatePos           >>
    624        66FA               Hero_MoveRight_00                  * Orie>>
    625  8     66FA 10B3 69E6            CMPD HERO_TOP_SPEED         * Comp>>
    626  3     66FE 27   21              BEQ Hero_MoveUpdatePos      * vite>>
    627  7     6700 F3   69EA            ADDD HERO_ACCELERATION      * acce>>
    628  8     6703 10B3 69E6            CMPD HERO_TOP_SPEED         * Comp>>
    629  3     6707 2D   0F              BLT Hero_MoveRight_01       * BRAN>>
    630  3     6709 8E   686D            LDX #HERO_RUN_R                   >>
    631  6     670C BF   69F0            STX HERO_ANIMATION_ADR      * Sauv>>
    632
    633  6     670F FC   69E6            LDD HERO_TOP_SPEED          * Limi>>
    634  6     6712 FD   69DC            STD HERO_G_SPEED            * Enre>>
    635  5     6715 16   0009            LBRA Hero_MoveUpdatePos           >>
    636        6718               Hero_MoveRight_01
    637  6     6718 FD   69DC            STD HERO_G_SPEED                  >>
    638  3     671B 8E   681E            LDX #HERO_WALK_R                  >>
    639  6     671E BF   69F0            STX HERO_ANIMATION_ADR            >>
    640
    641                           *****************************************>>
    642                           * Mise a jour de la position X et Y a par>>
    643                           *****************************************>>
    644
    645        6721               Hero_MoveUpdatePos
    646  6     6721 FC   69DC            LDD HERO_G_SPEED                  >>
    647  3     6724 2C   0D              BGE Hero_MoveUpdatePos_00         >>
    648  2     6726 86   C0              LDA #$C0                          >>
    649  5     6728 B7   6750            STA Hero_MoveUpdatePos_00C        >>
    650  3     672B CC   0000            LDD #$0000
    651  7     672E B3   69DC            SUBD HERO_G_SPEED                 >>
    652  3     6731 20   08              BRA Hero_MoveUpdatePos_00A
    653        6733               Hero_MoveUpdatePos_00
    654  2     6733 86   CB              LDA #$CB                          >>
    655  5     6735 B7   6750            STA Hero_MoveUpdatePos_00C        >>
    656  6     6738 FC   69DC            LDD HERO_G_SPEED
    657        673B               Hero_MoveUpdatePos_00A
    658  7     673B F3   69E0            ADDD HERO_X_SPS                   >>
    659  5     673E B7   6747            STA Hero_MoveUpdatePos_00B+1      >>
    660  2     6741 84   03              ANDA #$03                         >>
    661  6     6743 FD   69E0            STD HERO_X_SPS                    >>
    662        6746               Hero_MoveUpdatePos_00B
    663  2     6746 C6   00              LDB #$00                          >>
    664  2     6748 54                   LSRB                              >>
    665  2     6749 54                   LSRB                              >>
    666  5     674A F7   6751            STB Hero_MoveUpdatePos_00C+1      >>
    667  5     674D F6   69DA            LDB HERO_X_POS
    668        6750               Hero_MoveUpdatePos_00C
    669  2     6750 CB   00              ADDB #$00                         >>
    670        6752               Hero_MoveUpdatePos_01
    671  2     6752 C1   50              CMPB #$50                         >>
    672  3     6754 2F   02              BLE Hero_MoveUpdatePos_02   * Bute>>
    673  2     6756 C6   50              LDB #$50                          >>
    674        6758               Hero_MoveUpdatePos_02
    675  2     6758 C1   0C           CMPB #$0C                            >>
    676  3     675A 2C   02              BGE Hero_MoveUpdatePos_03   * Bute>>
    677  2     675C C6   0C              LDB #$0C                          >>
    678        675E               Hero_MoveUpdatePos_03
    679  5     675E F7   69DA            STB HERO_X_POS
    680                           * TODO MAJ HERO_X_SPEED : xsp = gsp*cos(a>>
    681                           * TODO MAJ HERO_Y_SPEED : ysp = gsp*-sin(>>
    682                           * TODO MAJ HERO_Y_POS
    683  5     6761 39                   RTS
    684
    685                           * TODO : Braking Animation
    686                           * Sonic enters his braking animation when>>
    687                           * In Sonic 1 and Sonic CD, he then stays >>
    688                           * In the other 3 games, Sonic returns to >>
    689
    690        6762               Compute_Position
    691  5     6762 B6   69DA            LDA HERO_X_POS
    692  2     6765 44                   LSRA
    693  3     6766 25   17              BCS Compute_Position_01
    694  5     6768 B7   679A            STA Compute_Position_02+1
    695  2     676B 86   28              LDA #$28
    696  5     676D F6   69DB            LDB HERO_Y_POS
    697  2     6770 5A                   DECB
    698  11    6771 3D                   MUL
    699  7     6772 F3   6799            ADDD Compute_Position_02
    700  6     6775 FD   9F00            STD HERO_POS
    701  4     6778 C3   2000            ADDD #$2000                       >>
    702  6     677B FD   9F02            STD HERO_POS+2
    703  5     677E 39                   RTS
    704        677F               Compute_Position_01
    705  5     677F B7   679A            STA Compute_Position_02+1
    706  2     6782 86   28              LDA #$28
    707  5     6784 F6   69DB            LDB HERO_Y_POS
    708  2     6787 5A                   DECB
    709  11    6788 3D                   MUL
    710  7     6789 F3   6799            ADDD Compute_Position_02
    711  4     678C C3   2000            ADDD #$2000
    712  6     678F FD   9F00            STD HERO_POS
    713  4     6792 83   1FFF            SUBD #$1FFF
    714  6     6795 FD   9F02            STD HERO_POS+2
    715  5     6798 39                   RTS
    716        6799               Compute_Position_02
    717        6799 0000                 FDB $0000
    718
    719                           *****************************************>>
    720                           * HERO Animations
    721                           * ---------------
    722                           * Note: Speed abs +0, rel +8, rel cap +10>>
    723                           *
    724                           * Chargement nouvelle animation
    725                           *    nouvelle frame = 109 a 119
    726                           *
    727                           * Chargement frame suivante
    728                           *    frame identique = 15
    729                           * ou frame suivante  = 116 a 126
    730                           *
    731                           * Chargement frame suivante avec branchem>>
    732                           *    nouvelle frame = 165 a 175
    733                           * ou frame suivante = 172 a 182
    734                           *
    735                           * Chargement frame suivante avec retour s>>
    736                           *    nouvelle frame = 167 a 177
    737                           * ou frame suivante = 174 a 184
    738                           *****************************************>>
    739
    740        679B               HERO_ANIMATION_LOAD                      >>
    741  6     679B BF   69F0            STX HERO_ANIMATION_ADR
    742  6     679E BF   69F4            STX HERO_ANIMATION_RTN_ADR
    743  7     67A1 7F   6A00            CLR HERO_ANIMATION_IMC            >>
    744        67A4               HERO_ANIMATION_LOAD_00
    745  5+1   67A4 EC   1E              LDD -2,X                          >>
    746  2     67A6 81   00              CMPA #$00                         >>
    747  3     67A8 27   16              BEQ HERO_ANIMATION_LOAD_01
    748  5     67AA B6   69DC            LDA HERO_G_SPEED              * G_>>
    749  3     67AD 2C   08              BGE HERO_ANIMATION_LOAD_01A
    750  3     67AF CC   0000            LDD #$0000
    751  7     67B2 B3   69DC            SUBD HERO_G_SPEED                 >>
    752  4+1   67B5 E6   1F              LDB -1,X                          >>
    753        67B7               HERO_ANIMATION_LOAD_01A
    754  5     67B7 B7   67BB            STA HERO_ANIMATION_LOAD_01B+1 * Au>>
    755        67BA               HERO_ANIMATION_LOAD_01B
    756  2     67BA C0   00              SUBB #$00                         >>
    757  3     67BC 24   02              BCC HERO_ANIMATION_LOAD_01
    758  2     67BE C6   01              LDB #$01                          >>
    759                            
    760        67C0               HERO_ANIMATION_LOAD_01
    761  5     67C0 F7   6A02            STB HERO_ANIMATION_FRR            >>
    762  5     67C3 B6   6A00            LDA HERO_ANIMATION_IMC
    763  2     67C6 C6   05              LDB #$05
    764  11    67C8 3D                   MUL
    765  7     67C9 F3   69F0            ADDD HERO_ANIMATION_ADR
    766  6     67CC 1F   02              TFR D,Y
    767  4+0   67CE E6   A4              LDB ,Y
    768  2     67D0 C1   1F              CMPB #$1F                         >>
    769  3     67D2 22   1C              BHI HERO_ANIMATION_LOAD_NOPAGE
    770  5     67D4 B6   69F6            LDA HERO_ANIMATION_PAG
    771  5     67D7 F7   69F6            STB HERO_ANIMATION_PAG
    772  5     67DA B1   69F7            CMPA HERO_ANIMATION_PAG_REF
    773  3     67DD 27   03              BEQ HERO_ANIMATION_LOAD_02
    774  7     67DF 7C   69F6            INC HERO_ANIMATION_PAG        * si>>
    775        67E2               HERO_ANIMATION_LOAD_02
    776  5     67E2 F7   69F7            STB HERO_ANIMATION_PAG_REF    * on>>
    777  5+1   67E5 AE   21              LDX 1,Y
    778  6     67E7 BF   69FE            STX HERO_ANIMATION_DRW
    779  5+1   67EA AE   23              LDX 3,Y
    780  6     67EC BF   69FC            STX HERO_ANIMATION_DEL+2
    781  5     67EF 39                   RTS
    782        67F0               HERO_ANIMATION_LOAD_NOPAGE
    783  2     67F0 C1   FF              CMPB #$FF
    784  3     67F2 26   0C              BNE HERO_ANIMATION_LOAD_FE
    785  5+1   67F4 AE   23              LDX 3,Y
    786  6     67F6 BF   6A00            STX HERO_ANIMATION_IMC            >>
    787  5+1   67F9 AE   21              LDX 1,Y
    788  6     67FB BF   69F0            STX HERO_ANIMATION_ADR
    789  3     67FE 20   A4              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    790        6800               HERO_ANIMATION_LOAD_FE
    791  6     6800 BE   69F4            LDX HERO_ANIMATION_RTN_ADR  * RETU>>
    792  6     6803 BF   69F0            STX HERO_ANIMATION_ADR
    793  5     6806 F6   6A01            LDB HERO_ANIMATION_RTN_IMC
    794  5     6809 F7   6A00            STB HERO_ANIMATION_IMC
    795  3     680C 20   96              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    796
    797        680E               HERO_ANIMATION_NEXT
    798  7     680E 7A   6A02            DEC HERO_ANIMATION_FRR
    799  3     6811 2F   01              BLE HERO_ANIMATION_NEXT_00  * BRAN>>
    800  5     6813 39                   RTS
    801        6814               HERO_ANIMATION_NEXT_00
    802  7     6814 7C   6A00            INC HERO_ANIMATION_IMC
    803  6     6817 BE   69F0            LDX HERO_ANIMATION_ADR
    804  3     681A 20   88              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    805                            
    806                           *   SAMPLE CODE ANIMATION
    807                           *      ---------------------
    808                           *      FDB $0018            * 00 Absolute>>
    809                           *HERO_IDLE_L
    810                           *      FCB $01                     * Page>>
    811                           *      FDB $A000            * Adresse drw>>
    812                           *      FDB $A000            * Adresse del>>
    813                           *
    814                           *      FCB $FF                     * FF S>>
    815                           *      FDB HERO_IDLE-C * adresse animatio>>
    816                           *      FDB $0301            * 03 image ci>>
    817                           *
    818                           *      FCB $FE                     * FE R>>
    819                           *
    820                           *      LDX #HERO_IDLE_R
    821                           *      JSR HERO_ANIMATION_LOAD
    822                           *
    823                           *      JSR HERO_ANIMATION_NEXT
    824
    825                           *****************************************>>
    826                           * ANIMATION Scripts
    827                           *****************************************>>
    828
    829
    830
    831        681C 0106                 FDB $0106
    832        681E               HERO_WALK_R
    833        681E 04                   FCB $04
    834        681F D77F                 FDB $D77F
    835        6821 DD34                 FDB $DD34
    836        6823 04                   FCB $04
    837        6824 CE8C                 FDB $CE8C
    838        6826 D4B8                 FDB $D4B8
    839        6828 06                   FCB $06
    840        6829 D578                 FDB $D578
    841        682B DCC3                 FDB $DCC3
    842        682D 0C                   FCB $0C
    843        682E D511                 FDB $D511
    844        6830 DC85                 FDB $DC85
    845        6832 0E                   FCB $0E
    846        6833 D4D8                 FDB $D4D8
    847        6835 DC27                 FDB $DC27
    848        6837 08                   FCB $08
    849        6838 D5E7                 FDB $D5E7
    850        683A DCEF                 FDB $DCEF
    851        683C 04                   FCB $04
    852        683D C589                 FDB $C589
    853        683F CBCE                 FDB $CBCE
    854        6841 04                   FCB $04
    855        6842 BBF5                 FDB $BBF5
    856        6844 C293                 FDB $C293
    857        6846 04                   FCB $04
    858        6847 B296                 FDB $B296
    859        6849 B90C                 FDB $B90C
    860        684B 12                   FCB $12
    861        684C D503                 FDB $D503
    862        684E DC74                 FDB $DC74
    863        6850 10                   FCB $10
    864        6851 D565                 FDB $D565
    865        6853 DCC2                 FDB $DCC2
    866        6855 04                   FCB $04
    867        6856 A933                 FDB $A933
    868        6858 AFAF                 FDB $AFAF
    869        685A FF                   FCB $FF
    870        685B 681E                 FDB HERO_WALK_R
    871        685D 0000                 FDB $0000
    872
    873        685F 0018                 FDB $0018
    874        6861               HERO_IDLE_R
    875        6861 04                   FCB $04
    876        6862 A000                 FDB $A000
    877        6864 A65E                 FDB $A65E
    878        6866 FF                   FCB $FF
    879        6867 6861                 FDB HERO_IDLE_R
    880        6869 0000                 FDB $0000
    881
    882        686B 0106                 FDB $0106
    883        686D               HERO_RUN_R
    884        686D 12                   FCB $12
    885        686E CA2F                 FDB $CA2F
    886        6870 D1C5                 FDB $D1C5
    887        6872 06                   FCB $06
    888        6873 CC02                 FDB $CC02
    889        6875 D299                 FDB $D299
    890        6877 06                   FCB $06
    891        6878 C300                 FDB $C300
    892        687A C941                 FDB $C941
    893        687C 06                   FCB $06
    894        687D BA07                 FDB $BA07
    895        687F C038                 FDB $C038
    896        6881 0A                   FCB $0A
    897        6882 D5A2                 FDB $D5A2
    898        6884 DCC2                 FDB $DCC2
    899        6886 14                   FCB $14
    900        6887 D44A                 FDB $D44A
    901        6889 DC35                 FDB $DC35
    902        688B 06                   FCB $06
    903        688C B16F                 FDB $B16F
    904        688E B753                 FDB $B753
    905        6890 06                   FCB $06
    906        6891 A8E0                 FDB $A8E0
    907        6893 AEC6                 FDB $AEC6
    908        6895 06                   FCB $06
    909        6896 A000                 FDB $A000
    910        6898 A61F                 FDB $A61F
    911        689A 0A                   FCB $0A
    912        689B CBAB                 FDB $CBAB
    913        689D D293                 FDB $D293
    914        689F FF                   FCB $FF
    915        68A0 686D                 FDB HERO_RUN_R
    916        68A2 0000                 FDB $0000
    917
    918        68A4 0106                 FDB $0106
    919        68A6               HERO_WALK_L
    920        68A6 08                   FCB $08
    921        68A7 CD9F                 FDB $CD9F
    922        68A9 D354                 FDB $D354
    923        68AB 08                   FCB $08
    924        68AC C4AC                 FDB $C4AC
    925        68AE CAD8                 FDB $CAD8
    926        68B0 12                   FCB $12
    927        68B1 BFBF                 FDB $BFBF
    928        68B3 C701                 FDB $C701
    929        68B5 12                   FCB $12
    930        68B6 B515                 FDB $B515
    931        68B8 BC89                 FDB $BC89
    932        68BA 12                   FCB $12
    933        68BB AAAB                 FDB $AAAB
    934        68BD B1F1                 FDB $B1F1
    935        68BF 10                   FCB $10
    936        68C0 CB57                 FDB $CB57
    937        68C2 D25F                 FDB $D25F
    938        68C4 08                   FCB $08
    939        68C5 BBA9                 FDB $BBA9
    940        68C7 C1EE                 FDB $C1EE
    941        68C9 08                   FCB $08
    942        68CA B211                 FDB $B211
    943        68CC B8B2                 FDB $B8B2
    944        68CE 08                   FCB $08
    945        68CF A8B2                 FDB $A8B2
    946        68D1 AF28                 FDB $AF28
    947        68D3 12                   FCB $12
    948        68D4 A000                 FDB $A000
    949        68D6 A769                 FDB $A769
    950        68D8 14                   FCB $14
    951        68D9 C9B3                 FDB $C9B3
    952        68DB D110                 FDB $D110
    953        68DD 0A                   FCB $0A
    954        68DE C244                 FDB $C244
    955        68E0 C8C3                 FDB $C8C3
    956        68E2 FF                   FCB $FF
    957        68E3 68A6                 FDB HERO_WALK_L
    958        68E5 0000                 FDB $0000
    959
    960        68E7 0103                 FDB $0103
    961        68E9               HERO_JUMP_R
    962        68E9 08                   FCB $08
    963        68EA A000                 FDB $A000
    964        68EC A5E1                 FDB $A5E1
    965        68EE 0A                   FCB $0A
    966        68EF B992                 FDB $B992
    967        68F1 BF73                 FDB $BF73
    968        68F3 0A                   FCB $0A
    969        68F4 B17A                 FDB $B17A
    970        68F6 B70C                 FDB $B70C
    971        68F8 0A                   FCB $0A
    972        68F9 A900                 FDB $A900
    973        68FB AED8                 FDB $AED8
    974        68FD 08                   FCB $08
    975        68FE A000                 FDB $A000
    976        6900 A5E1                 FDB $A5E1
    977        6902 0A                   FCB $0A
    978        6903 B992                 FDB $B992
    979        6905 BF73                 FDB $BF73
    980        6907 0A                   FCB $0A
    981        6908 A000                 FDB $A000
    982        690A A644                 FDB $A644
    983        690C 0C                   FCB $0C
    984        690D CC3A                 FDB $CC3A
    985        690F D263                 FDB $D263
    986        6911 08                   FCB $08
    987        6912 A000                 FDB $A000
    988        6914 A5E1                 FDB $A5E1
    989        6916 0A                   FCB $0A
    990        6917 B992                 FDB $B992
    991        6919 BF73                 FDB $BF73
    992        691B 0C                   FCB $0C
    993        691C C2F8                 FDB $C2F8
    994        691E C96F                 FDB $C96F
    995        6920 0C                   FCB $0C
    996        6921 BA92                 FDB $BA92
    997        6923 C055                 FDB $C055
    998        6925 08                   FCB $08
    999        6926 A000                 FDB $A000
   1000        6928 A5E1                 FDB $A5E1
   1001        692A 0A                   FCB $0A
   1002        692B B992                 FDB $B992
   1003        692D BF73                 FDB $BF73
   1004        692F 0C                   FCB $0C
   1005        6930 B1D9                 FDB $B1D9
   1006        6932 B7EA                 FDB $B7EA
   1007        6934 0C                   FCB $0C
   1008        6935 A97A                 FDB $A97A
   1009        6937 AF48                 FDB $AF48
   1010        6939 FF                   FCB $FF
   1011        693A 68E9                 FDB HERO_JUMP_R
   1012        693C 0000                 FDB $0000
   1013
   1014        693E 0106                 FDB $0106
   1015        6940               HERO_RUN_L
   1016        6940 14                   FCB $14
   1017        6941 BED3                 FDB $BED3
   1018        6943 C672                 FDB $C672
   1019        6945 0C                   FCB $0C
   1020        6946 A000                 FDB $A000
   1021        6948 A69A                 FDB $A69A
   1022        694A 0E                   FCB $0E
   1023        694B CBD6                 FDB $CBD6
   1024        694D D217                 FDB $D217
   1025        694F 0E                   FCB $0E
   1026        6950 C2D5                 FDB $C2D5
   1027        6952 C90C                 FDB $C90C
   1028        6954 14                   FCB $14
   1029        6955 B489                 FDB $B489
   1030        6957 BBAF                 FDB $BBAF
   1031        6959 14                   FCB $14
   1032        695A A94A                 FDB $A94A
   1033        695C B129                 FDB $B129
   1034        695E 0E                   FCB $0E
   1035        695F BA39                 FDB $BA39
   1036        6961 C020                 FDB $C020
   1037        6963 0E                   FCB $0E
   1038        6964 B1AA                 FDB $B1AA
   1039        6966 B790                 FDB $B790
   1040        6968 0E                   FCB $0E
   1041        6969 A8C6                 FDB $A8C6
   1042        696B AEE8                 FDB $AEE8
   1043        696D 16                   FCB $16
   1044        696E C2C5                 FDB $C2C5
   1045        6970 C9B0                 FDB $C9B0
   1046        6972 FF                   FCB $FF
   1047        6973 6940                 FDB HERO_RUN_L
   1048        6975 0000                 FDB $0000
   1049
   1050        6977 0103                 FDB $0103
   1051        6979               HERO_JUMP_L
   1052        6979 0E                   FCB $0E
   1053        697A A000                 FDB $A000
   1054        697C A5F0                 FDB $A5F0
   1055        697E 10                   FCB $10
   1056        697F C291                 FDB $C291
   1057        6981 C881                 FDB $C881
   1058        6983 10                   FCB $10
   1059        6984 BA75                 FDB $BA75
   1060        6986 C00A                 FDB $C00A
   1061        6988 10                   FCB $10
   1062        6989 B1FB                 FDB $B1FB
   1063        698B B7D3                 FDB $B7D3
   1064        698D 0E                   FCB $0E
   1065        698E A000                 FDB $A000
   1066        6990 A5F0                 FDB $A5F0
   1067        6992 10                   FCB $10
   1068        6993 C291                 FDB $C291
   1069        6995 C881                 FDB $C881
   1070        6997 10                   FCB $10
   1071        6998 A8F7                 FDB $A8F7
   1072        699A AF3E                 FDB $AF3E
   1073        699C 10                   FCB $10
   1074        699D A000                 FDB $A000
   1075        699F A641                 FDB $A641
   1076        69A1 0E                   FCB $0E
   1077        69A2 A000                 FDB $A000
   1078        69A4 A5F0                 FDB $A5F0
   1079        69A6 10                   FCB $10
   1080        69A7 C291                 FDB $C291
   1081        69A9 C881                 FDB $C881
   1082        69AB 14                   FCB $14
   1083        69AC A000                 FDB $A000
   1084        69AE A67D                 FDB $A67D
   1085        69B0 16                   FCB $16
   1086        69B1 BA5B                 FDB $BA5B
   1087        69B3 C021                 FDB $C021
   1088        69B5 0E                   FCB $0E
   1089        69B6 A000                 FDB $A000
   1090        69B8 A5F0                 FDB $A5F0
   1091        69BA 10                   FCB $10
   1092        69BB C291                 FDB $C291
   1093        69BD C881                 FDB $C881
   1094        69BF 16                   FCB $16
   1095        69C0 B196                 FDB $B196
   1096        69C2 B7B0                 FDB $B7B0
   1097        69C4 16                   FCB $16
   1098        69C5 A933                 FDB $A933
   1099        69C7 AF04                 FDB $AF04
   1100        69C9 FF                   FCB $FF
   1101        69CA 6979                 FDB HERO_JUMP_L
   1102        69CC 0000                 FDB $0000
   1103
   1104        69CE 0018                 FDB $0018
   1105        69D0               HERO_IDLE_L
   1106        69D0 16                   FCB $16
   1107        69D1 A000                 FDB $A000
   1108        69D3 A65E                 FDB $A65E
   1109        69D5 FF                   FCB $FF
   1110        69D6 69D0                 FDB HERO_IDLE_L
   1111        69D8 0000                 FDB $0000
   1112                            
   1113                           *****************************************>>
   1114                           * HERO Variables
   1115                           *****************************************>>
   1116                           *HERO_WALK_SPD_LIMIT EQU $0400         * >>
   1117                           *HERO_WALK_NEG_SPD_LIMIT EQU $FC00     * >>
   1118                  0600     HERO_JOG_SPD_LIMIT  EQU $0600          * >>
   1119                  FA00     HERO_JOG_NEG_SPD_LIMIT  EQU $FA00      * >>
   1120        69DA               HERO_X_POS
   1121        69DA 18                   FCB $18                     * Hori>>
   1122        69DB               HERO_Y_POS
   1123        69DB A2                   FCB $A2                     * Vert>>
   1124        69DC               HERO_G_SPEED         * Ground Speed
   1125        69DC 0000                 FDB $0000            * First byte >>
   1126        69DE               HERO_X_SPEED
   1127        69DE 0000                 FDB $0000            * Horizontal >>
   1128        69E0               HERO_X_SPS
   1129        69E0 0000                 FDB $0000            * Subpixel X >>
   1130        69E2               HERO_Y_SPEED
   1131        69E2 0000                 FDB $0000            * Vertical Sp>>
   1132        69E4               HERO_Y_SPS
   1133        69E4 0000                 FDB $0000            * Subpixel Y >>
   1134        69E6               HERO_TOP_SPEED
   1135        69E6 0600                 FDB $0600        * 0600 vitesse ma>>
   1136        69E8               HERO_NEG_TOP_SPEED
   1137        69E8 FA00                 FDB $FA00        * FA00 vitesse ma>>
   1138        69EA               HERO_ACCELERATION
   1139        69EA 000C                 FDB $000C        * 000C constante >>
   1140        69EC               HERO_DECELERATION
   1141        69EC 0080                 FDB $0080        * 0080 constante >>
   1142        69EE               HERO_FRICTION
   1143        69EE 000C                 FDB $000C        * 000C constante >>
   1144        69F0               HERO_ANIMATION_ADR
   1145        69F0 0000                 FDB $0000        * Animation coura>>
   1146        69F2               HERO_ANIMATION_ADR_OLD
   1147        69F2 0000                 FDB $0000        * Sauvegarde anci>>
   1148        69F4               HERO_ANIMATION_RTN_ADR
   1149        69F4 0000                 FDB $0000        * Animation coura>>
   1150        69F6               HERO_ANIMATION_PAG
   1151        69F6 00                   FCB $00          * Animation coura>>
   1152        69F7               HERO_ANIMATION_PAG_REF
   1153        69F7 00                   FCB $00          * Animation coura>>
   1154        69F8               HERO_ANIMATION_PAG_DEL
   1155        69F8 00                   FCB $00        * Animation courant>>
   1156        69F9 00                   FCB $00        * Animation courant>>
   1157        69FA               HERO_ANIMATION_DEL
   1158        69FA 0000                 FDB $0000        * Animation coura>>
   1159        69FC 0000                 FDB $0000        * Animation coura>>
   1160        69FE               HERO_ANIMATION_DRW
   1161        69FE 0000                 FDB $0000        * Animation coura>>
   1162        6A00               HERO_ANIMATION_IMC
   1163        6A00 00                   FCB $00          * Animation coura>>
   1164        6A01               HERO_ANIMATION_RTN_IMC
   1165        6A01 00                   FCB $00          * Animation coura>>
   1166        6A02               HERO_ANIMATION_FRR
   1167        6A02 00                   FCB $00          * Animation coura>>

000000 Total Errors

000125 Total Symbols
     0x          Label 6300 BEGIN
     0x          Label 6540 CLR_CART
     1x          Label 6559 CLR_CART_2
     1x          Label 6575 CLR_CART_3
     2x          Label 6762 Compute_Position
     1x          Label 677F Compute_Position_01
     4x          Label 6799 Compute_Position_02
     3x          Label 6345 CPPAGE_LOOP
     1x          Equ   0014 DEBUTECRANA
     1x          Equ   2014 DEBUTECRANB
     1x          Equ   622C DK_dernier_bloc_a_ecrire
     1x          Equ   6213 DK_destination
     1x          Equ   6205 DK_lecture
     1x          Equ   620A DK_piste
     2x          Equ   620F DK_secteur
     0x          Label 657C DRAW_RAM_DATA_TO_CART_160x200
     1x          Label 6589 DRAW_RAM_DATA_TO_CART_160x200A
     1x          Label 65E4 DRAW_RAM_DATA_TO_CART_160x200A_E
     1x          Label 65BA DRAW_RAM_DATA_TO_CART_160x200B
     1x          Equ   1F40 FINECRANA
     1x          Equ   3F40 FINECRANB
     1x          Label 660B FINTABPALETTE
     2x          Label 69EA HERO_ACCELERATION
    14x          Label 69F0 HERO_ANIMATION_ADR
     3x          Label 69F2 HERO_ANIMATION_ADR_OLD
     4x          Label 69FA HERO_ANIMATION_DEL
     3x          Label 69FE HERO_ANIMATION_DRW
     2x          Label 6A02 HERO_ANIMATION_FRR
     5x          Label 6A00 HERO_ANIMATION_IMC
     2x          Label 679B HERO_ANIMATION_LOAD
     3x          Label 67A4 HERO_ANIMATION_LOAD_00
     2x          Label 67C0 HERO_ANIMATION_LOAD_01
     1x          Label 67B7 HERO_ANIMATION_LOAD_01A
     1x          Label 67BA HERO_ANIMATION_LOAD_01B
     1x          Label 67E2 HERO_ANIMATION_LOAD_02
     1x          Label 6800 HERO_ANIMATION_LOAD_FE
     1x          Label 67F0 HERO_ANIMATION_LOAD_NOPAGE
     1x          Label 680E HERO_ANIMATION_NEXT
     1x          Label 6814 HERO_ANIMATION_NEXT_00
     6x          Label 69F6 HERO_ANIMATION_PAG
     4x          Label 69F8 HERO_ANIMATION_PAG_DEL
     3x          Label 69F7 HERO_ANIMATION_PAG_REF
     2x          Label 69F4 HERO_ANIMATION_RTN_ADR
     1x          Label 6A01 HERO_ANIMATION_RTN_IMC
     4x          Label 69EC HERO_DECELERATION
     2x          Label 69EE HERO_FRICTION
    20x          Label 69DC HERO_G_SPEED
     2x          Label 69D0 HERO_IDLE_L
     3x          Label 6861 HERO_IDLE_R
     1x          Equ   FA00 HERO_JOG_NEG_SPD_LIMIT
     1x          Equ   0600 HERO_JOG_SPD_LIMIT
     1x          Label 6979 HERO_JUMP_L
     1x          Label 68E9 HERO_JUMP_R
     1x          Label 6625 Hero_Move
     1x          Label 669F Hero_MoveLeft
     1x          Label 66B9 Hero_MoveLeft_00
     1x          Label 66D7 Hero_MoveLeft_01
     1x          Label 66B3 Hero_MoveLeft_03
     1x          Label 66E3 Hero_MoveRight
     1x          Label 66FA Hero_MoveRight_00
     1x          Label 6718 Hero_MoveRight_01
     1x          Label 66F4 Hero_MoveRight_03
    12x          Label 6721 Hero_MoveUpdatePos
     1x          Label 6733 Hero_MoveUpdatePos_00
     1x          Label 673B Hero_MoveUpdatePos_00A
     1x          Label 6746 Hero_MoveUpdatePos_00B
     3x          Label 6750 Hero_MoveUpdatePos_00C
     0x          Label 6752 Hero_MoveUpdatePos_01
     1x          Label 6758 Hero_MoveUpdatePos_02
     1x          Label 675E Hero_MoveUpdatePos_03
     3x          Label 69E8 HERO_NEG_TOP_SPEED
     1x          Label 662E Hero_NotLeft
     1x          Label 6635 Hero_NotLeftOrRight
     1x          Label 6674 Hero_NotLeftOrRight_00
     1x          Label 665D Hero_NotLeftOrRight_01
     1x          Label 666E Hero_NotLeftOrRight_02
     1x          Label 6671 Hero_NotLeftOrRight_03
     1x          Label 6688 Hero_NotLeftOrRight_11
     1x          Label 6699 Hero_NotLeftOrRight_12
     1x          Label 669C Hero_NotLeftOrRight_13
     4x          Equ   9F00 HERO_POS
     2x          Label 6940 HERO_RUN_L
     2x          Label 686D HERO_RUN_R
     3x          Label 69E6 HERO_TOP_SPEED
     3x          Label 68A6 HERO_WALK_L
     3x          Label 681E HERO_WALK_R
     3x          Label 69DA HERO_X_POS
     0x          Label 69DE HERO_X_SPEED
     3x          Label 69E0 HERO_X_SPS
     2x          Label 69DB HERO_Y_POS
     0x          Label 69E2 HERO_Y_SPEED
     0x          Label 69E4 HERO_Y_SPS
     0x          Label 6394 INIT_VID
     0x          Equ   000D JOY_B
     0x          Equ   0005 JOY_BD
     0x          Equ   0009 JOY_BG
     1x          Label 6624 JOY_BTN_STATUS
     0x          Equ   000F JOY_C
     1x          Equ   0007 JOY_D
     2x          Label 6623 JOY_DIR_STATUS
     1x          Equ   000B JOY_G
     0x          Equ   000E JOY_H
     0x          Equ   0006 JOY_HD
     0x          Equ   000A JOY_HG
     1x          Label 660B JOY_READ
     6x          Label 6332 LDPAGE_LOOP
     1x          Label 63DC MAIN
     1x          Label 63E9 MAIN_0
     1x          Label 6405 MAIN_1
     1x          Label 640B MAIN_2
     2x          Label 644D MEM_COPY_DATA_TO_CART
     2x          Label 6533 MEM_COPY_DATA_TO_CART_E
     1x          Label 6453 MEM_COPY_DATA_TO_CART_LOOP
     1x          Label 653B MEM_COPY_DATA_TO_CART_S
     1x          Label 6370 PAGEINIT
     1x          Label 636E PAGEINITNEXT
     0x          Label 6381 PAGENEXT
     3x          Label 641D SCRC
     3x          Label 6438 SCRC0
     1x          Label 630A SETBLACKPALETTE
     1x          Label 63A7 SETPALETTE
     1x          Label 65EB TABPALETTE
     1x          Label 6442 VSYNC
     1x          Label 6442 VSYNC_1
     1x          Label 6447 VSYNC_2

