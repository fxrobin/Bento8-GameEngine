/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : TEST1X10.asm
 * Fichier destination : TEST1X10.BIN
 * Contenu :
 *     Main     0:TEST1X10.asm 6055
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        A000                      ORG $A000
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17                  0000     DEBUTECRANA EQU $0000       * debut de la>>
     18                  1F40     FINECRANA EQU $1F40  * fin de la RAM A vi>>
     19                  2000     DEBUTECRANB EQU $2000       * debut de la>>
     20                  3F40     FINECRANB EQU $3F40  * fin de la RAM B vi>>
     21
     22        A000 0000          SSAVE FDB $0000
     23
     24                           *****************************************>>
     25                           * Debut du programme
     26                           *****************************************>>
     27  2     A002 1A   50              ORCC #$50     * a documenter (inte>>
     28                            
     29  2     A004 86   7B              LDA #$7B      * passage en mode 16>>
     30  5     A006 B7   E7DC            STA $E7DC
     31
     32                           *****************************************>>
     33                           * Initialisation de la palette de couleur>>
     34                           *****************************************>>
     35  4     A009 108E A247            LDY #TABPALETTE
     36  2     A00D 4F                   CLRA
     37        A00E               SETPALETTE
     38  5+1   A00E 34   02              PSHS A
     39  2     A010 48                   ASLA
     40  5     A011 B7   E7DB            STA $E7DB
     41  5+3   A014 EC   A1              LDD ,Y++
     42  5     A016 F7   E7DA            STB $E7DA
     43  5     A019 B7   E7DA            STA $E7DA
     44  5+1   A01C 35   02              PULS A
     45  2     A01E 4C                   INCA
     46  5     A01F 108C A267            CMPY #FINTABPALETTE
     47  3     A023 26   E9              BNE    SETPALETTE
     48                            
     49                           *****************************************>>
     50                           * Initialisation de la couleur de bordure>>
     51                           *****************************************>>
     52        A025               INITBORD
     53  2     A025 86   04              LDA    #$04   * couleur 4
     54  5     A027 B7   E7DD            STA    $E7DD
     55
     56                           *****************************************>>
     57                           * Initialisation de la routine de commuta>>
     58                           *****************************************>>
     59  5     A02A F6   6081            LDB $6081
     60  2     A02D CA   10              ORB #$10
     61  5     A02F F7   6081            STB $6081
     62  5     A032 F7   E7E7            STB $E7E7
     63
     64                           *****************************************>>
     65                           * Effacement ecran (les deux pages)
     66                           *****************************************>>
     67  8     A035 BD   A04C            JSR SCRC
     68  8     A038 BD   A063            JSR EFF
     69  8     A03B BD   A04C            JSR SCRC
     70  8     A03E BD   A063            JSR EFF
     71
     72                           *****************************************>>
     73                           * Boucle principale
     74                           *****************************************>>
     75        A041               MAIN
     76  8     A041 BD   A072            JSR DRAWBCKGRN
     77                                  *LDX >POS_TEST1X100000
     78                                  *LEAX -1,X
     79                                  *STX >POS_TEST1X100000
     80  8     A044 BD   A0B5            JSR DRAW_TEST1X100000
     81  8     A047 BD   A04C            JSR SCRC        * changement de pa>>
     82  3     A04A 20   F5              BRA MAIN
     83
     84                           *****************************************>>
     85                           * Changement de page ecran
     86                           *****************************************>>
     87        A04C               SCRC
     88  5     A04C F6   A05A            LDB SCRC0+1
     89  2     A04F C4   80              ANDB #$80          * BANK1 utilise>>
     90  2     A051 CA   0A              ORB #$0A           * contour ecran>>
     91  5     A053 F7   E7DD            STB $E7DD
     92  7     A056 73   A05A            COM SCRC0+1
     93        A059               SCRC0
     94  2     A059 C6   00              LDB #$00
     95  2     A05B C4   02              ANDB #$02          * page RAM no0 >>
     96  2     A05D CA   60              ORB #$60           * espace cartou>>
     97  5     A05F F7   E7E6            STB $E7E6
     98  5     A062 39                   RTS
     99
    100                           *****************************************>>
    101                           * Effacement de l ecran
    102                           *****************************************>>
    103        A063               EFF
    104  2     A063 86   AA              LDA #$AA  * couleur fond
    105  4     A065 108E 0000            LDY #$0000
    106        A069               EFF_RAM
    107  4+2   A069 A7   A0              STA ,Y+
    108  5     A06B 108C 3FFF            CMPY #$3FFF
    109  3     A06F 26   F8              BNE EFF_RAM
    110  5     A071 39                   RTS
    111
    112                           *****************************************>>
    113                           * Affichage de l arriere plan xxx cycles
    114                           *****************************************>>
    115        A072               DRAWBCKGRN
    116  5+3   A072 34   48              PSHS U,DP            * sauvegarde >>
    117  7     A074 10FF A000            STS >SSAVE
    118                            
    119  4     A078 10CE 1F40            LDS #FINECRANA       * init pointe>>
    120  3     A07C CE   A267            LDU #TILEBCKGRNDA
    121  5+7   A07F 37   3E              PULU X,Y,DP,D
    122
    123        A081               DRWBCKGRNDA
    124  5+7   A081 34   3E              PSHS X,Y,DP,D
    125  5+7   A083 34   3E              PSHS X,Y,DP,D
    126  5+7   A085 34   3E              PSHS X,Y,DP,D
    127  5+7   A087 34   3E              PSHS X,Y,DP,D
    128  5+7   A089 34   3E              PSHS X,Y,DP,D
    129  5+5   A08B 34   38              PSHS X,Y,DP
    130  5     A08D 118C 0000            CMPS #DEBUTECRANA
    131  3     A091 26   EE              BNE DRWBCKGRNDA
    132                            
    133  4     A093 10CE 3F40            LDS #FINECRANB       * init pointe>>
    134  3     A097 CE   A26F            LDU #TILEBCKGRNDB
    135  5+7   A09A 37   3E              PULU X,Y,DP,D
    136
    137        A09C               DRWBCKGRNDB
    138  5+7   A09C 34   3E              PSHS X,Y,DP,D
    139  5+7   A09E 34   3E              PSHS X,Y,DP,D
    140  5+7   A0A0 34   3E              PSHS X,Y,DP,D
    141  5+7   A0A2 34   3E              PSHS X,Y,DP,D
    142  5+7   A0A4 34   3E              PSHS X,Y,DP,D
    143  5+5   A0A6 34   38              PSHS X,Y,DP
    144  5     A0A8 118C 2000            CMPS #DEBUTECRANB
    145  3     A0AC 26   EE              BNE DRWBCKGRNDB
    146                            
    147  7     A0AE 10FE A000            LDS  >SSAVE          * rechargemen>>
    148  5+3   A0B2 35   48              PULS U,DP
    149  5     A0B4 39                   RTS
    150
    151                           *****************************************>>
    152                           * Affiche un computed sprite en xxx cycle>>
    153                           *****************************************>>
    154        A0B5               DRAW_TEST1X100000
    155  5+3   A0B5 34   48              PSHS U,DP
    156  7     A0B7 10FF A000            STS >SSAVE
    157
    158  7     A0BB 10FE A245            LDS >POS_TEST1X100000
    159  3     A0BF CE   A21F            LDU #DATA_TEST1X100000_1
    160
    161  4+1   A0C2 32   7F              LEAS -1,S
    162  2     A0C4 86   F0              LDA  #$F0
    163  4+0   A0C6 A4   E4              ANDA ,S
    164  4+2   A0C8 AB   C0              ADDA ,U+
    165  4+0   A0CA A7   E4              STA  ,S
    166  4+1   A0CC 32   E8 D9           LEAS -39,S
    167  5+1   A0CF 37   02              PULU A
    168  5+1   A0D1 34   02              PSHS A
    169  4+1   A0D3 32   E8 D9           LEAS -39,S
    170  5+1   A0D6 34   02              PSHS A
    171  4+1   A0D8 32   E8 D9           LEAS -39,S
    172  5+1   A0DB 37   02              PULU A
    173  5+1   A0DD 34   02              PSHS A
    174  4+1   A0DF 32   E8 D9           LEAS -39,S
    175  5+1   A0E2 37   02              PULU A
    176  5+1   A0E4 34   02              PSHS A
    177  4+1   A0E6 32   E8 8B           LEAS -117,S
    178  2     A0E9 86   F0              LDA  #$F0
    179  4+0   A0EB A4   E4              ANDA ,S
    180  4+2   A0ED AB   C0              ADDA ,U+
    181  4+0   A0EF A7   E4              STA  ,S
    182  4+1   A0F1 32   E8 B2           LEAS -78,S
    183  2     A0F4 86   F0              LDA  #$F0
    184  4+0   A0F6 A4   E4              ANDA ,S
    185  4+2   A0F8 AB   C0              ADDA ,U+
    186  4+0   A0FA A7   E4              STA  ,S
    187  4+1   A0FC 32   E8 D9           LEAS -39,S
    188  5+1   A0FF 37   02              PULU A
    189  5+1   A101 34   02              PSHS A
    190  4+1   A103 32   E8 D9           LEAS -39,S
    191  2     A106 86   F0              LDA  #$F0
    192  4+0   A108 A4   E4              ANDA ,S
    193  4+2   A10A AB   C0              ADDA ,U+
    194  4+0   A10C A7   E4              STA  ,S
    195  4+1   A10E 32   E8 D9           LEAS -39,S
    196  5+1   A111 37   02              PULU A
    197  5+1   A113 34   02              PSHS A
    198  4+1   A115 32   7F              LEAS -1,S
    199  5+1   A117 37   02              PULU A
    200  5+1   A119 34   02              PSHS A
    201  4+1   A11B 32   E8 D9           LEAS -39,S
    202  2     A11E 86   F0              LDA  #$F0
    203  4+0   A120 A4   E4              ANDA ,S
    204  4+2   A122 AB   C0              ADDA ,U+
    205  4+0   A124 A7   E4              STA  ,S
    206  4+1   A126 32   E8 D9           LEAS -39,S
    207  5+1   A129 37   02              PULU A
    208  5+1   A12B 34   02              PSHS A
    209  4+1   A12D 32   7F              LEAS -1,S
    210  2     A12F 86   F0              LDA  #$F0
    211  4+0   A131 A4   E4              ANDA ,S
    212  4+2   A133 AB   C0              ADDA ,U+
    213  4+0   A135 A7   E4              STA  ,S
    214  4+1   A137 32   E8 D9           LEAS -39,S
    215  5+1   A13A 37   02              PULU A
    216  5+1   A13C 34   02              PSHS A
    217  4+1   A13E 32   7F              LEAS -1,S
    218  5+1   A140 37   02              PULU A
    219  5+1   A142 34   02              PSHS A
    220  4+1   A144 32   E8 D9           LEAS -39,S
    221  5+1   A147 37   02              PULU A
    222  5+1   A149 34   02              PSHS A
    223  4+1   A14B 32   E8 D9           LEAS -39,S
    224  2     A14E 86   0F              LDA  #$0F
    225  4+0   A150 A4   E4              ANDA ,S
    226  4+2   A152 AB   C0              ADDA ,U+
    227  4+0   A154 A7   E4              STA  ,S
    228  4+1   A156 32   E8 D9           LEAS -39,S
    229
    230  7     A159 10FE A245            LDS >POS_TEST1X100000
    231  4+4   A15D 32   E9 2000         LEAS 8192,S
    232  3     A161 CE   A231            LDU #DATA_TEST1X100000_2
    233
    234  4+1   A164 32   7F              LEAS -1,S
    235  5+1   A166 37   02              PULU A
    236  5+1   A168 34   02              PSHS A
    237  4+1   A16A 32   E8 D8           LEAS -40,S *-40
    238  2     A16D 86   F0              LDA  #$F0
    239  4+0   A16F A4   E4              ANDA ,S
    240  4+2   A171 AB   C0              ADDA ,U+
    241  4+0   A173 A7   E4              STA  ,S
    242  4+1   A175 32   E8 D9           LEAS -39,S
    243  2     A178 86   F0              LDA  #$F0
    244  4+0   A17A A4   E4              ANDA ,S
    245  4+2   A17C AB   C0              ADDA ,U+
    246  4+0   A17E A7   E4              STA  ,S
    247  4+1   A180 32   E8 D9           LEAS -39,S
    248  2     A183 86   0F              LDA  #$0F
    249  4+0   A185 A4   E4              ANDA ,S
    250  4+2   A187 AB   C0              ADDA ,U+
    251  4+0   A189 A7   E4              STA  ,S
    252  4+1   A18B 32   E8 D9           LEAS -39,S
    253  2     A18E 86   0F              LDA  #$0F
    254  4+0   A190 A4   E4              ANDA ,S
    255  4+2   A192 AB   C0              ADDA ,U+
    256  4+0   A194 A7   E4              STA  ,S
    257  4+1   A196 32   7F              LEAS -1,S
    258  2     A198 86   0F              LDA  #$0F
    259  4+0   A19A A4   E4              ANDA ,S
    260  4+2   A19C AB   C0              ADDA ,U+
    261  4+0   A19E A7   E4              STA  ,S
    262  4+1   A1A0 32   E8 D9           LEAS -39,S
    263  2     A1A3 86   0F              LDA  #$0F
    264  4+0   A1A5 A4   E4              ANDA ,S
    265  4+2   A1A7 AB   C0              ADDA ,U+
    266  4+0   A1A9 A7   E4              STA  ,S
    267  4+1   A1AB 32   E8 D8           LEAS -40,S
    268  2     A1AE 86   0F              LDA  #$0F
    269  4+0   A1B0 A4   E4              ANDA ,S
    270  4+2   A1B2 AB   C0              ADDA ,U+
    271  4+0   A1B4 A7   E4              STA  ,S
    272  4+1   A1B6 32   7F              LEAS -1,S
    273  5+1   A1B8 37   02              PULU A
    274  5+1   A1BA 34   02              PSHS A
    275  4+1   A1BC 32   E8 D9           LEAS -39,S
    276  2     A1BF 86   0F              LDA  #$0F
    277  4+0   A1C1 A4   E4              ANDA ,S
    278  4+2   A1C3 AB   C0              ADDA ,U+
    279  4+0   A1C5 A7   E4              STA  ,S
    280  4+1   A1C7 32   7F              LEAS -1,S
    281  5+1   A1C9 37   02              PULU A
    282  5+1   A1CB 34   02              PSHS A
    283  4+1   A1CD 32   E8 D8           LEAS -40,S
    284  5+1   A1D0 37   02              PULU A
    285  5+1   A1D2 34   02              PSHS A
    286  4+1   A1D4 32   7F              LEAS -1,S
    287  5+1   A1D6 37   02              PULU A
    288  5+1   A1D8 34   02              PSHS A
    289  4+1   A1DA 32   E8 D8           LEAS -40,S
    290  2     A1DD 86   0F              LDA  #$0F
    291  4+0   A1DF A4   E4              ANDA ,S
    292  4+2   A1E1 AB   C0              ADDA ,U+
    293  4+0   A1E3 A7   E4              STA  ,S
    294  4+1   A1E5 32   7F              LEAS -1,S
    295  5+1   A1E7 37   02              PULU A
    296  5+1   A1E9 34   02              PSHS A
    297  4+1   A1EB 32   E8 D9           LEAS -39,S
    298  5+1   A1EE 37   02              PULU A
    299  5+1   A1F0 34   02              PSHS A
    300  4+1   A1F2 32   7F              LEAS -1,S
    301  5+1   A1F4 37   02              PULU A
    302  5+1   A1F6 34   02              PSHS A
    303  4+1   A1F8 32   E8 D9           LEAS -39,S
    304  5+1   A1FB 37   02              PULU A
    305  5+1   A1FD 34   02              PSHS A
    306  4+1   A1FF 32   E8 D9           LEAS -39,S
    307  2     A202 86   F0              LDA  #$F0
    308  4+0   A204 A4   E4              ANDA ,S
    309  4+2   A206 AB   C0              ADDA ,U+
    310  4+0   A208 A7   E4              STA  ,S
    311  4+1   A20A 32   E8 D9           LEAS -39,S
    312  2     A20D 86   F0              LDA  #$F0
    313  4+0   A20F A4   E4              ANDA ,S
    314  4+2   A211 AB   C0              ADDA ,U+
    315  4+0   A213 A7   E4              STA  ,S
    316  4+1   A215 32   E8 8C           LEAS -116,S
    317
    318  7     A218 10FE A000            LDS  >SSAVE
    319  5+3   A21C 35   48              PULS U,DP
    320  5     A21E 39                   RTS
    321
    322        A21F               DATA_TEST1X100000_1
    323        A21F 0566                 FDB $0566
    324        A221 86A6                 FDB $86a6
    325        A223 0305                 FDB $0305
    326        A225 370A                 FDB $370a
    327        A227 3783                 FDB $3783
    328        A229 0888                 FDB $0888
    329        A22B 0A88                 FDB $0a88
    330        A22D 6714                 FDB $6714
    331        A22F 2000                 FDB $2000
    332        A231               DATA_TEST1X100000_2
    333        A231 9509                 FDB $9509
    334        A233 08A0                 FDB $08a0
    335        A235 50A0                 FDB $50a0
    336        A237 A030                 FDB $a030
    337        A239 8A30                 FDB $8a30
    338        A23B AA65                 FDB $aa65
    339        A23D 3860                 FDB $3860
    340        A23F 8866                 FDB $8866
    341        A241 AA88                 FDB $aa88
    342        A243 0A0B                 FDB $0a0b
    343        A245               POS_TEST1X100000
    344        A245 1F40                 FDB $1F40
    345
    346        A247               TABPALETTE
    347        A247 0000                 FDB $0000     * index:0  R:0   V:0>>
    348        A249 0500                 FDB $0500     * index:1  R:0   V:0>>
    349        A24B 0F20                 FDB $0f20     * index:2  R:0   V:1>>
    350        A24D 0000                 FDB $0000     * index:3  R:49  V:1>>
    351        A24F 0FA0                 FDB $0fa0     * index:4  R:82  V:2>>
    352        A251 0101                 FDB $0101     * index:5  R:99  V:8>>
    353        A253 0002                 FDB $0002     * index:6  R:140 V:8>>
    354        A255 0333                 FDB $0333     * index:7  R:156 V:1>>
    355        A257 0016                 FDB $0016     * index:8  R:189 V:1>>
    356        A259 0888                 FDB $0888     * index:9  R:206 V:2>>
    357        A25B 036A                 FDB $036a     * index:10 R:222 V:1>>
    358        A25D 0FFF                 FDB $0fff     * index:11 R:255 V:2>>
    359        A25F 0FFF                 FDB $0fff     * index:12 R:255 V:2>>
    360        A261 0FFF                 FDB $0fff     * index:13 R:255 V:2>>
    361        A263 02AF                 FDB $02af     * index:14 R:255 V:2>>
    362        A265 0146                 FDB $0146     * index:15 R:186 V:1>>
    363        A267               FINTABPALETTE
    364                           *****************************************>>
    365                           * Tile arriere plan
    366                           *****************************************>>
    367        A267               TILEBCKGRNDA
    368        A267 EEEE                 FDB $eeee
    369        A269 EEEE                 FDB $eeee
    370        A26B EEEE                 FDB $eeee
    371        A26D EEEE                 FDB $eeee
    372
    373        A26F               TILEBCKGRNDB
    374        A26F FFFF                 FDB $ffff
    375        A271 FFFF                 FDB $ffff
    376        A273 FFFF                 FDB $ffff
    377        A275 FFFF                 FDB $ffff

000000 Total Errors

000023 Total Symbols
     1x          Label A21F DATA_TEST1X100000_1
     1x          Label A231 DATA_TEST1X100000_2
     1x          Equ   0000 DEBUTECRANA
     1x          Equ   2000 DEBUTECRANB
     1x          Label A072 DRAWBCKGRN
     1x          Label A0B5 DRAW_TEST1X100000
     1x          Label A081 DRWBCKGRNDA
     1x          Label A09C DRWBCKGRNDB
     2x          Label A063 EFF
     1x          Label A069 EFF_RAM
     1x          Equ   1F40 FINECRANA
     1x          Equ   3F40 FINECRANB
     1x          Label A267 FINTABPALETTE
     0x          Label A025 INITBORD
     1x          Label A041 MAIN
     2x          Label A245 POS_TEST1X100000
     3x          Label A04C SCRC
     2x          Label A059 SCRC0
     1x          Label A00E SETPALETTE
     4x          Label A000 SSAVE
     1x          Label A247 TABPALETTE
     1x          Label A267 TILEBCKGRNDA
     1x          Label A26F TILEBCKGRNDB

