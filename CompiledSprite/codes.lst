/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : ./input/CODE/MAIN.ASS.TMP
 * Fichier destination : TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     21997
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        6300                      ORG $6300
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17
     18                  6205     DK_lecture               EQU $6205 * rout>>
     19                  620A     DK_piste                 EQU $620A * 2B n>>
     20                  620F     DK_secteur               EQU $620F * 1B n>>
     21                  6213     DK_destination           EQU $6213 * 2B d>>
     22                  622C     DK_dernier_bloc_a_ecrire EQU $622C * 2B f>>
     23
     24                  0014     DEBUTECRANA EQU $0014 * test pour fin sta>>
     25                  1F40     FINECRANA   EQU $1F40 * fin de la RAM A v>>
     26                  2014     DEBUTECRANB EQU $2014 * test pour fin sta>>
     27                  3F40     FINECRANB   EQU $3F40 * fin de la RAM B v>>
     28
     29                  0005     JOY_BD EQU $05 * Bas Droite
     30                  0006     JOY_HD EQU $06 * Haut Droite
     31                  0007     JOY_D  EQU $07 * Droite
     32                  0009     JOY_BG EQU $09 * Bas Gauche
     33                  000A     JOY_HG EQU $0A * Haut Gauche
     34                  000B     JOY_G  EQU $0B * Gauche
     35                  000D     JOY_B  EQU $0D * Bas
     36                  000E     JOY_H  EQU $0E * Haut
     37                  000F     JOY_C  EQU $0F * Centre
     38
     39                  9F00     HERO_POS EQU $9F00 * HERO Position
     40
     41                           *****************************************>>
     42                           * Debut du programme
     43                           *****************************************>>
     44        6300               BEGIN
     45  2     6300 1A   50              ORCC #$50     * a documenter (inte>>
     46
     47  3     6302 CC   1F40            LDD #FINECRANA
     48  6     6305 FD   9F00            STD HERO_POS
     49  3     6308 CC   3F40            LDD #FINECRANB
     50  6     630B FD   9F02            STD HERO_POS+2
     51                            
     52                           *****************************************>>
     53                           * Initialisation du mode video
     54                           *****************************************>>
     55  2     630E 86   7B              LDA #$7B      * passage en mode 16>>
     56  5     6310 B7   E7DC            STA $E7DC
     57
     58                           *****************************************>>
     59                           * Initialisation de la palette de couleur>>
     60                           *****************************************>>
     61  4     6313 108E 65DA            LDY #TABPALETTE
     62  2     6317 4F                   CLRA
     63        6318               SETPALETTE
     64  5+1   6318 34   02              PSHS A
     65  2     631A 48                   ASLA
     66  5     631B B7   E7DB            STA $E7DB
     67  5+3   631E EC   A1              LDD ,Y++
     68  5     6320 F7   E7DA            STB $E7DA
     69  5     6323 B7   E7DA            STA $E7DA
     70  5+1   6326 35   02              PULS A
     71  2     6328 4C                   INCA
     72  5     6329 108C 65FA            CMPY #FINTABPALETTE
     73  3     632D 26   E9              BNE    SETPALETTE
     74
     75                           *****************************************>>
     76                           * Chargement des pages memoire
     77                           *****************************************>>
     78                                  * Chargement des pages depuis la d>>
     79                                  **********************************>>
     80                            
     81  3     632F CC   0004            LDD #$0004
     82  6     6332 FD   620A            STD DK_piste
     83  2     6335 86   01              LDA #$01
     84  5     6337 B7   620F            STA DK_secteur
     85  3     633A CC   DF00            LDD #$DF00
     86  6     633D FD   622C            STD DK_dernier_bloc_a_ecrire
     87                            
     88        6340               LDPAGE_LOOP
     89  2     6340 C6   00              LDB #$00
     90  5     6342 F7   E7E5            STB $E7E5 * Selection de la page e>>
     91                            
     92  2     6345 86   01              LDA #$01
     93  5     6347 B7   620F            STA DK_secteur
     94  3     634A CC   A000            LDD #$A000
     95  6     634D FD   6213            STD DK_destination
     96  8     6350 BD   6205            JSR DK_lecture
     97                            
     98                                  * Duplication de la page p en p+1
     99                                  *********************************
    100        6353               CPPAGE_LOOP
    101  2     6353 C6   62              LDB #$62                       * O>>
    102  5     6355 F7   E7E6            STB $E7E6                      * e>>
    103
    104  3     6358 CE   A000         LDU #$A000                     * Sour>>
    105  4     635B 108E 4040         LDY #$4000+64                  * Dest>>
    106  7     635F 10BF 6524            STY MEM_COPY_DATA_TO_CART_E+2
    107  4     6363 108E 2040         LDY #$2000+64                  * Dest>>
    108  8     6367 BD   643C         JSR MEM_COPY_DATA_TO_CART      * Copi>>
    109                            
    110  3     636A CE   C000         LDU #$C000                     * Sour>>
    111  4     636D 108E 2040         LDY #$2000+64                  * Dest>>
    112  7     6371 10BF 6524            STY MEM_COPY_DATA_TO_CART_E+2
    113  4     6375 108E 0040         LDY #$0000+64                  * Dest>>
    114  8     6379 BD   643C         JSR MEM_COPY_DATA_TO_CART      * Copi>>
    115
    116        637C               PAGEINITNEXT
    117  3     637C 20   00           BRA PAGEINIT
    118
    119        637E               PAGEINIT
    120  2     637E 86   04              LDA #$04
    121  5     6380 B7   6341            STA LDPAGE_LOOP+1
    122  2     6383 86   65           LDA #$65
    123  5     6385 B7   6354         STA CPPAGE_LOOP+1
    124  2     6388 86   11           LDA #$11
    125  5     638A B7   637D            STA PAGEINITNEXT+1
    126  3     638D 20   B1           BRA LDPAGE_LOOP
    127
    128        638F               PAGENEXT
    129  7     638F 7C   6354         INC CPPAGE_LOOP+1
    130  7     6392 7C   6354            INC CPPAGE_LOOP+1
    131  7     6395 7C   6341            INC LDPAGE_LOOP+1
    132  7     6398 7C   6341            INC LDPAGE_LOOP+1
    133  5     639B F6   6341            LDB LDPAGE_LOOP+1
    134  2     639E C1   16              CMPB #$16
    135  3     63A0 23   9E              BLS LDPAGE_LOOP
    136                            
    137                           *****************************************>>
    138                           * Initialisation de la routine de commuta>>
    139                           *****************************************>>
    140        63A2               INIT_VID
    141  5     63A2 F6   6081            LDB $6081 * A documenter
    142  2     63A5 CA   10              ORB #$10  * mettre le bit d4 a 1
    143  5     63A7 F7   6081            STB $6081
    144  5     63AA F7   E7E7            STB $E7E7
    145  8     63AD BD   640C            JSR SCRC     * page 2 en RAM Carto>>
    146                           *      JSR CLR_CART * effacement page 2
    147                           *      JSR SCRC     * page 0 en RAM Carto>>
    148                           *      JSR CLR_CART * effacement page 0
    149                           *      JSR SCRC     * page 2 en RAM Carto>>
    150
    151                           *****************************************>>
    152                           * Initialisation des sprites
    153                           *****************************************>>
    154  3     63B0 8E   686B            LDX #HERO_IDLE_R
    155  6     63B3 BF   69FD            STX HERO_ANIMATION_ADR_OLD
    156  8     63B6 BD   679D            JSR HERO_ANIMATION_LOAD
    157
    158                           *****************************************>>
    159                           * Boucle principale
    160                           *****************************************>>
    161
    162                                  * Init routine effacement sprite
    163  5     63B9 F6   6A01            LDB HERO_ANIMATION_PAG            >>
    164  5     63BC F7   6A03            STB HERO_ANIMATION_PAG_DEL
    165  5     63BF F7   E7E5            STB $E7E5                         >>
    166  7+3   63C2 AD   9F 6A09         JSR [HERO_ANIMATION_DRW]          >>
    167  8     63C6 BD   640C            JSR SCRC
    168  3     63C9 20   0D              BRA MAIN_0
    169                            
    170        63CB               MAIN
    171                                  * Effacement et affichage des spri>>
    172  6     63CB FC   6A03            LDD HERO_ANIMATION_PAG_DEL        >>
    173  5     63CE F7   6A03            STB HERO_ANIMATION_PAG_DEL
    174  5     63D1 B7   E7E5            STA $E7E5                         >>
    175  7+3   63D4 AD   9F 6A05         JSR [HERO_ANIMATION_DEL]          >>
    176        63D8               MAIN_0
    177  6     63D8 FC   6A07            LDD HERO_ANIMATION_DEL+2          >>
    178  6     63DB FD   6A05            STD HERO_ANIMATION_DEL
    179
    180                                  * Gestion des deplacements
    181  8     63DE BD   65FA            JSR JOY_READ
    182  8     63E1 BD   6614            JSR Hero_Move
    183  8     63E4 BD   6764            JSR Compute_Position
    184  6     63E7 BE   69FB            LDX HERO_ANIMATION_ADR
    185  7     63EA BC   69FD            CMPX HERO_ANIMATION_ADR_OLD
    186  3     63ED 26   05              BNE MAIN_1
    187  8     63EF BD   6818            JSR HERO_ANIMATION_NEXT
    188  3     63F2 20   06              BRA MAIN_2
    189        63F4               MAIN_1
    190  6     63F4 BF   69FD            STX HERO_ANIMATION_ADR_OLD
    191  8     63F7 BD   679D            JSR HERO_ANIMATION_LOAD
    192        63FA               MAIN_2
    193                            
    194  5     63FA F6   6A01            LDB HERO_ANIMATION_PAG            >>
    195  5     63FD F7   6A04            STB HERO_ANIMATION_PAG_DEL+1
    196  5     6400 F7   E7E5            STB $E7E5                         >>
    197  7+3   6403 AD   9F 6A09         JSR [HERO_ANIMATION_DRW]          >>
    198                            
    199  8     6407 BD   640C            JSR SCRC                          >>
    200  3     640A 20   BF              BRA MAIN
    201
    202                           *****************************************>>
    203                           * Changement de page ESPACE ECRAN (affich>>
    204                           *      $E7DD determine la page affichee d>>
    205                           *      D7=0 D6=0 D5=0 D4=0 (#$0_) : page >>
    206                           *      D7=0 D6=1 D5=0 D4=0 (#$4_) : page >>
    207                           *      D7=1 D6=0 D5=0 D4=0 (#$8_) : page >>
    208                           *      D7=1 D6=1 D5=0 D4=0 (#$C_) : page >>
    209                           *   D3 D2 D1 D0  (#$_0 a #$_F) : couleur >>
    210                           *   Remarque : D5 et D4 utilisable unique>>
    211                           *
    212                           * Changement de page ESPACE CARTOUCHE (ec>>
    213                           *      $E7E6 determine la page affichee d>>
    214                           *   D5 : 1 = espace cartouche recouvert p>>
    215                           *   D4 : 0 = CAS1N valide : banques 0-15 >>
    216                           *      D5=1 D4=0 D3=0 D2=0 D1=0 D0=0 (#$6>>
    217                           *   ...
    218                           *      D5=1 D4=0 D3=1 D2=1 D1=1 D0=1 (#$6>>
    219                           *      D5=1 D4=1 D3=0 D2=0 D1=0 D0=0 (#$7>>
    220                           *   ...
    221                           *      D5=1 D4=1 D3=1 D2=1 D1=1 D0=1 (#$7>>
    222                           *****************************************>>
    223        640C               SCRC
    224  8     640C BD   6431            JSR VSYNC
    225
    226  5     640F F6   6428            LDB SCRC0+1
    227  2     6412 C4   01              ANDB #$01
    228  5     6414 FB   6A02            ADDB HERO_ANIMATION_PAG_REF
    229  5     6417 F7   6A01            STB HERO_ANIMATION_PAG
    230                            
    231  5     641A F6   6428            LDB SCRC0+1   * charge la valeur d>>
    232  2     641D C4   80              ANDB #$80     * permute #$00 ou #$>>
    233  2     641F CA   00              ORB #$00      * recharger la coule>>
    234  5     6421 F7   E7DD            STB $E7DD     * changement page da>>
    235  7     6424 73   6428            COM SCRC0+1   * modification du co>>
    236        6427               SCRC0
    237  2     6427 C6   00              LDB #$00
    238  2     6429 C4   02              ANDB #$02     * permute #$60 ou #$>>
    239  2     642B CA   60              ORB #$60      * espace cartouche r>>
    240  5     642D F7   E7E6            STB $E7E6     * changement page da>>
    241  5     6430 39                   RTS                  * E7E6 D5=1 p>>
    242                                                       * CAS1N : ban>>
    243
    244                           *****************************************>>
    245                           * Attente VBL
    246                           *****************************************>>
    247        6431               VSYNC
    248        6431               VSYNC_1
    249  7     6431 7D   E7E7            TST    $E7E7
    250  3     6434 2A   FB              BPL    VSYNC_1
    251        6436               VSYNC_2
    252  7     6436 7D   E7E7            TST    $E7E7
    253  3     6439 2B   FB              BMI    VSYNC_2
    254  5     643B 39                   RTS
    255
    256                           *****************************************>>
    257                           * Copie Memoire de la zone donnee vers ca>>
    258                           * Cycles en fonction de l'implementation
    259                           * 256 octets (-128 a 127) x 64  boucles (>>
    260                           * 128 octets (-64  a 63)  x 128 boucles (>>
    261                           * 32  octets (-16  a 15)  x 512 boucles (>>
    262                           *****************************************>>
    263                            
    264        643C               MEM_COPY_DATA_TO_CART
    265  7     643C 10FF 652C        STS MEM_COPY_DATA_TO_CART_S+2  * sauve>>
    266  6     6440 1F   34          TFR U,S
    267        6442               MEM_COPY_DATA_TO_CART_LOOP
    268  5+6   6442 35   56          PULS       D,X,U
    269  5+1   6444 ED   A8 C0       STD -64,Y
    270  5+1   6447 AF   A8 C2       STX -62,Y
    271  5+1   644A EF   A8 C4       STU -60,Y
    272  5+6   644D 35   56          PULS       D,X,U
    273  5+1   644F ED   A8 C6       STD -58,Y
    274  5+1   6452 AF   A8 C8       STX -56,Y
    275  5+1   6455 EF   A8 CA       STU -54,Y
    276  5+6   6458 35   56          PULS       D,X,U
    277  5+1   645A ED   A8 CC       STD -52,Y
    278  5+1   645D AF   A8 CE       STX -50,Y
    279  5+1   6460 EF   A8 D0       STU -48,Y
    280  5+6   6463 35   56          PULS       D,X,U
    281  5+1   6465 ED   A8 D2       STD -46,Y
    282  5+1   6468 AF   A8 D4       STX -44,Y
    283  5+1   646B EF   A8 D6       STU -42,Y
    284  5+6   646E 35   56          PULS       D,X,U
    285  5+1   6470 ED   A8 D8       STD -40,Y
    286  5+1   6473 AF   A8 DA       STX -38,Y
    287  5+1   6476 EF   A8 DC       STU -36,Y
    288  5+6   6479 35   56          PULS       D,X,U
    289  5+1   647B ED   A8 DE       STD -34,Y
    290  5+1   647E AF   A8 E0       STX -32,Y
    291  5+1   6481 EF   A8 E2       STU -30,Y
    292  5+6   6484 35   56          PULS       D,X,U
    293  5+1   6486 ED   A8 E4       STD -28,Y
    294  5+1   6489 AF   A8 E6       STX -26,Y
    295  5+1   648C EF   A8 E8       STU -24,Y
    296  5+6   648F 35   56          PULS       D,X,U
    297  5+1   6491 ED   A8 EA       STD -22,Y
    298  5+1   6494 AF   A8 EC       STX -20,Y
    299  5+1   6497 EF   A8 EE       STU -18,Y
    300  5+6   649A 35   56          PULS       D,X,U
    301  5+1   649C ED   30          STD -16,Y
    302  5+1   649E AF   32          STX -14,Y
    303  5+1   64A0 EF   34          STU -12,Y
    304  5+6   64A2 35   56          PULS       D,X,U
    305  5+1   64A4 ED   36          STD -10,Y
    306  5+1   64A6 AF   38          STX -8,Y
    307  5+1   64A8 EF   3A          STU -6,Y
    308  5+6   64AA 35   56          PULS       D,X,U
    309  5+1   64AC ED   3C          STD -4,Y
    310  5+1   64AE AF   3E          STX -2,Y
    311  5+0   64B0 EF   A4          STU ,Y
    312  5+6   64B2 35   56          PULS       D,X,U
    313  5+1   64B4 ED   22          STD 2,Y
    314  5+1   64B6 AF   24          STX 4,Y
    315  5+1   64B8 EF   26          STU 6,Y
    316  5+6   64BA 35   56          PULS       D,X,U
    317  5+1   64BC ED   28          STD 8,Y
    318  5+1   64BE AF   2A          STX 10,Y
    319  5+1   64C0 EF   2C          STU 12,Y
    320  5+6   64C2 35   56          PULS       D,X,U
    321  5+1   64C4 ED   2E          STD 14,Y
    322  5+1   64C6 AF   A8 10       STX 16,Y
    323  5+1   64C9 EF   A8 12       STU 18,Y
    324  5+6   64CC 35   56          PULS       D,X,U
    325  5+1   64CE ED   A8 14       STD 20,Y
    326  5+1   64D1 AF   A8 16       STX 22,Y
    327  5+1   64D4 EF   A8 18       STU 24,Y
    328  5+6   64D7 35   56          PULS       D,X,U
    329  5+1   64D9 ED   A8 1A       STD 26,Y
    330  5+1   64DC AF   A8 1C       STX 28,Y
    331  5+1   64DF EF   A8 1E       STU 30,Y
    332  5+6   64E2 35   56          PULS       D,X,U
    333  5+1   64E4 ED   A8 20       STD 32,Y
    334  5+1   64E7 AF   A8 22       STX 34,Y
    335  5+1   64EA EF   A8 24       STU 36,Y
    336  5+6   64ED 35   56          PULS       D,X,U
    337  5+1   64EF ED   A8 26       STD 38,Y
    338  5+1   64F2 AF   A8 28       STX 40,Y
    339  5+1   64F5 EF   A8 2A       STU 42,Y
    340  5+6   64F8 35   56          PULS       D,X,U
    341  5+1   64FA ED   A8 2C       STD 44,Y
    342  5+1   64FD AF   A8 2E       STX 46,Y
    343  5+1   6500 EF   A8 30       STU 48,Y
    344  5+6   6503 35   56          PULS       D,X,U
    345  5+1   6505 ED   A8 32       STD 50,Y
    346  5+1   6508 AF   A8 34       STX 52,Y
    347  5+1   650B EF   A8 36       STU 54,Y
    348  5+6   650E 35   56          PULS       D,X,U
    349  5+1   6510 ED   A8 38       STD 56,Y
    350  5+1   6513 AF   A8 3A       STX 58,Y
    351  5+1   6516 EF   A8 3C       STU 60,Y
    352  5+2   6519 35   06          PULS       D
    353  5+1   651B ED   A8 3E       STD 62,Y
    354  4+4   651E 31   A9 0080     LEAY 128,Y
    355        6522               MEM_COPY_DATA_TO_CART_E
    356  5     6522 108C 00C0        CMPY    #$00C0
    357  6     6526 1026 FF18        LBNE    MEM_COPY_DATA_TO_CART_LOOP
    358        652A               MEM_COPY_DATA_TO_CART_S
    359  4     652A 10CE 0000        LDS     #$0000    * Rechargement du po>>
    360  5     652E 39               RTS
    361
    362                           *****************************************>>
    363                           * Effacement memoire Cartouche (27000 cy)>>
    364                           *****************************************>>
    365        652F               CLR_CART
    366  5+3   652F 34   48           PSHS U,DP
    367  7     6531 10FF 6566         STS CLR_CART_3+2
    368  4     6535 10CE 4000         LDS #$4000
    369  3     6539 CE   0C0C         LDU #$0C0C
    370  4     653C 108E 0C0C         LDY #$0C0C
    371  3     6540 8E   0C0C         LDX #$0C0C
    372  3     6543 CC   0C0C         LDD #$0C0C
    373  6     6546 1F   8B           TFR A,DP
    374        6548               CLR_CART_2
    375  5+9   6548 34   7E           PSHS U,Y,X,DP,B,A
    376  5+9   654A 34   7E           PSHS U,Y,X,DP,B,A
    377  5+9   654C 34   7E           PSHS U,Y,X,DP,B,A
    378  5+9   654E 34   7E           PSHS U,Y,X,DP,B,A
    379  5+9   6550 34   7E           PSHS U,Y,X,DP,B,A
    380  5+9   6552 34   7E           PSHS U,Y,X,DP,B,A
    381  5+9   6554 34   7E           PSHS U,Y,X,DP,B,A
    382  5+9   6556 34   7E           PSHS U,Y,X,DP,B,A
    383  5+9   6558 34   7E           PSHS U,Y,X,DP,B,A
    384  5+9   655A 34   7E           PSHS U,Y,X,DP,B,A
    385  5     655C 118C 0004         CMPS #$0004
    386  3     6560 26   E6           BNE CLR_CART_2
    387  5+4   6562 34   60           PSHS U,Y
    388        6564               CLR_CART_3
    389  4     6564 10CE 0000         LDS #$0000
    390  5+3   6568 35   48           PULS DP,U
    391  5     656A 39                RTS
    392                            
    393                           *****************************************>>
    394                           * Affichage de l arriere plan 57900 cycle>>
    395                           *****************************************>>
    396        656B               DRAW_RAM_DATA_TO_CART_160x200
    397  5+3   656B 34   48              PSHS U,DP            * sauvegarde >>
    398  7     656D 10FF 65D5            STS DRAW_RAM_DATA_TO_CART_160x200A>>
    399                            
    400  4     6571 10CE 1F40            LDS #FINECRANA       * init pointe>>
    401  3     6575 CE   A000            LDU #$A000
    402
    403        6578               DRAW_RAM_DATA_TO_CART_160x200A
    404  5+7   6578 37   3E              PULU A,B,DP,X,Y
    405  5+7   657A 34   3E              PSHS Y,X,DP,B,A
    406  5+7   657C 37   3E              PULU A,B,DP,X,Y
    407  5+7   657E 34   3E              PSHS Y,X,DP,B,A
    408  5+7   6580 37   3E              PULU A,B,DP,X,Y
    409  5+7   6582 34   3E              PSHS Y,X,DP,B,A
    410  5+7   6584 37   3E              PULU A,B,DP,X,Y
    411  5+7   6586 34   3E              PSHS Y,X,DP,B,A
    412  5+7   6588 37   3E              PULU A,B,DP,X,Y
    413  5+7   658A 34   3E              PSHS Y,X,DP,B,A
    414  5+7   658C 37   3E              PULU A,B,DP,X,Y
    415  5+7   658E 34   3E              PSHS Y,X,DP,B,A
    416  5     6590 118C 0014            CMPS #DEBUTECRANA
    417  3     6594 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200A>>
    418  5+7   6596 37   3E              PULU A,B,DP,X,Y
    419  5+7   6598 34   3E              PSHS Y,X,DP,B,A
    420  5+7   659A 37   3E              PULU A,B,DP,X,Y
    421  5+7   659C 34   3E              PSHS Y,X,DP,B,A
    422  5+6   659E 37   3C              PULU B,DP,X,Y
    423  5+6   65A0 34   3C              PSHS Y,X,DP,B
    424
    425  4     65A2 10CE 3F40            LDS #FINECRANB       * init pointe>>
    426  3     65A6 CE   C000            LDU #$C000
    427
    428        65A9               DRAW_RAM_DATA_TO_CART_160x200B
    429  5+7   65A9 37   3E              PULU A,B,DP,X,Y
    430  5+7   65AB 34   3E              PSHS Y,X,DP,B,A
    431  5+7   65AD 37   3E              PULU A,B,DP,X,Y
    432  5+7   65AF 34   3E              PSHS Y,X,DP,B,A
    433  5+7   65B1 37   3E              PULU A,B,DP,X,Y
    434  5+7   65B3 34   3E              PSHS Y,X,DP,B,A
    435  5+7   65B5 37   3E              PULU A,B,DP,X,Y
    436  5+7   65B7 34   3E              PSHS Y,X,DP,B,A
    437  5+7   65B9 37   3E              PULU A,B,DP,X,Y
    438  5+7   65BB 34   3E              PSHS Y,X,DP,B,A
    439  5+7   65BD 37   3E              PULU A,B,DP,X,Y
    440  5+7   65BF 34   3E              PSHS Y,X,DP,B,A
    441  5     65C1 118C 2014            CMPS #DEBUTECRANB
    442  3     65C5 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200B>>
    443  5+7   65C7 37   3E              PULU A,B,DP,X,Y
    444  5+7   65C9 34   3E              PSHS Y,X,DP,B,A
    445  5+7   65CB 37   3E              PULU A,B,DP,X,Y
    446  5+7   65CD 34   3E              PSHS Y,X,DP,B,A
    447  5+6   65CF 37   3C              PULU B,DP,X,Y
    448  5+6   65D1 34   3C              PSHS Y,X,DP,B
    449        65D3               DRAW_RAM_DATA_TO_CART_160x200A_E
    450  4     65D3 10CE 0000            LDS  #$0000 * rechargement des reg>>
    451  5+3   65D7 35   48              PULS U,DP
    452  5     65D9 39                   RTS
    453
    454                           *****************************************>>
    455                           * Palette de 16 couleurs
    456                           *****************************************>>
    457        65DA               TABPALETTE
    458        65DA 0000                 FDB $0000     * index:1  R:0   V:0>>
    459        65DC 0004                 FDB $0004     * index:2  R:139 V:2>>
    460        65DE 047D                 FDB $047d     * index:3  R:236 V:1>>
    461        65E0 0028                 FDB $0028     * index:4  R:189 V:9>>
    462        65E2 006A                 FDB $006a     * index:5  R:206 V:1>>
    463        65E4 01A6                 FDB $01a6     * index:6  R:167 V:2>>
    464        65E6 0061                 FDB $0061     * index:7  R:75  V:1>>
    465        65E8 0020                 FDB $0020     * index:8  R:16  V:9>>
    466        65EA 0010                 FDB $0010     * index:9  R:0   V:4>>
    467        65EC 0220                 FDB $0220     * index:10 R:22  V:8>>
    468        65EE 0B82                 FDB $0b82     * index:11 R:103 V:1>>
    469        65F0 0DDD                 FDB $0ddd     * index:12 R:239 V:2>>
    470        65F2 0D30                 FDB $0d30     * index:13 R:9   V:1>>
    471        65F4 0700                 FDB $0700     * index:14 R:12  V:3>>
    472        65F6 0001                 FDB $0001     * index:15 R:53  V:7>>
    473        65F8 000C                 FDB $000c     * index:16 R:225 V:0>>
    474        65FA               FINTABPALETTE
    475
    476                           *****************************************>>
    477                           * Get joystick parameters
    478                           *****************************************>>
    479        65FA               JOY_READ
    480  3     65FA 8E   E7CF            ldx    #$e7cf
    481  4     65FD 108E E7CD            ldy    #$e7cd
    482  3     6601 CC   400F            ldd    #$400f
    483  5     6604 F4   E7CC            andb   >$e7cc     * Read position
    484  5     6607 F7   6612            stb    JOY_DIR_STATUS
    485  4+0   660A A4   A4              anda   ,y         * Read button
    486  2     660C 88   40              eora   #$40
    487  5     660E B7   6613            sta    JOY_BTN_STATUS
    488  5     6611 39                   RTS
    489        6612               JOY_DIR_STATUS
    490        6612 00                   FCB $00 * Position Pad
    491        6613               JOY_BTN_STATUS
    492        6613 00                   FCB $00 * 40 Bouton A enfonce
    493
    494                           *****************************************>>
    495                           * Subroutine to      make HERO walk/run
    496                           *****************************************>>
    497        6614               Hero_Move
    498  5     6614 B6   6612            LDA JOY_DIR_STATUS
    499  2     6617 81   0B              CMPA #JOY_G
    500  3     6619 26   02              BNE Hero_NotLeft
    501  3     661B 20   71              BRA Hero_MoveLeft
    502
    503        661D               Hero_NotLeft                   * XREF: He>>
    504  2     661D 81   07              CMPA #JOY_D
    505  3     661F 26   03              BNE Hero_NotLeftOrRight
    506  5     6621 16   00AE            LBRA Hero_MoveRight
    507
    508        6624               Hero_NotLeftOrRight            * XREF: He>>
    509  6     6624 FC   69E6            LDD HERO_G_SPEED
    510  5     6627 1083 0000            CMPD #$0000
    511  6     662B 1027 00E1            LBEQ Hero_MoveUpdatePos  * Si la v>>
    512  3     662F 2D   32              BLT Hero_NotLeftOrRight_00 * se de>>
    513  7     6631 B3   69F9            SUBD HERO_FRICTION     * se deplac>>
    514  5     6634 1083 0000            CMPD #$0000
    515  3     6638 2E   12              BGT Hero_NotLeftOrRight_01 * si on>>
    516  3     663A CC   0000            LDD #$0000
    517  6     663D FD   69E6            STD HERO_G_SPEED
    518  6     6640 FD   69EB            STD HERO_X_SPS
    519  3     6643 8E   686B            LDX #HERO_IDLE_R        * Charge a>>
    520  6     6646 BF   69FB            STX HERO_ANIMATION_ADR      * Sauv>>
    521
    522  5     6649 16   00C4            LBRA Hero_MoveUpdatePos
    523        664C               Hero_NotLeftOrRight_01
    524  5     664C 1083 0180            CMPD #HERO_JOG_SPD_LIMIT
    525  3     6650 2C   0B              BGE Hero_NotLeftOrRight_02
    526  6     6652 FD   69E6            STD HERO_G_SPEED
    527  3     6655 8E   6828            LDX #HERO_WALK_R        * Charge a>>
    528  6     6658 BF   69FB            STX HERO_ANIMATION_ADR      * Sauv>>
    529
    530  3     665B 20   03              BRA Hero_NotLeftOrRight_03
    531        665D               Hero_NotLeftOrRight_02
    532  6     665D FD   69E6            STD HERO_G_SPEED
    533        6660               Hero_NotLeftOrRight_03
    534  5     6660 16   00AD            LBRA Hero_MoveUpdatePos
    535        6663               Hero_NotLeftOrRight_00
    536  7     6663 F3   69F9            ADDD HERO_FRICTION     * se deplac>>
    537  3     6666 24   0F              BCC Hero_NotLeftOrRight_11 * si on>>
    538  3     6668 CC   0000            LDD #$0000
    539  6     666B FD   69E6            STD HERO_G_SPEED
    540  3     666E 8E   69DA            LDX #HERO_IDLE_L        * Charge a>>
    541  6     6671 BF   69FB            STX HERO_ANIMATION_ADR      * Sauv>>
    542
    543  5     6674 16   0099            LBRA Hero_MoveUpdatePos
    544        6677               Hero_NotLeftOrRight_11
    545  5     6677 1083 FE80            CMPD #HERO_JOG_NEG_SPD_LIMIT
    546  3     667B 2F   0B              BLE Hero_NotLeftOrRight_12
    547  6     667D FD   69E6            STD HERO_G_SPEED
    548  3     6680 8E   68B0            LDX #HERO_WALK_L        * Charge a>>
    549  6     6683 BF   69FB            STX HERO_ANIMATION_ADR      * Sauv>>
    550
    551  3     6686 20   03              BRA Hero_NotLeftOrRight_13
    552        6688               Hero_NotLeftOrRight_12
    553  6     6688 FD   69E6            STD HERO_G_SPEED
    554        668B               Hero_NotLeftOrRight_13
    555  5     668B 16   0082            LBRA Hero_MoveUpdatePos
    556
    557        668E               Hero_MoveLeft                      * XREF>>
    558  6     668E FC   69E6            LDD HERO_G_SPEED            * Char>>
    559  5     6691 1083 0000            CMPD #$0000                 * Test>>
    560  3     6695 2F   11              BLE Hero_MoveLeft_00        * BRAN>>
    561  7     6697 B3   69F7            SUBD HERO_DECELERATION      * orie>>
    562  3     669A 24   06              BCC Hero_MoveLeft_03        * BRAN>>
    563  3     669C CC   0000            LDD #$0000
    564  7     669F B3   69F7            SUBD HERO_DECELERATION      * si l>>
    565        66A2               Hero_MoveLeft_03
    566  6     66A2 FD   69E6            STD HERO_G_SPEED            * On s>>
    567  5     66A5 16   0068            LBRA Hero_MoveUpdatePos           >>
    568        66A8               Hero_MoveLeft_00                         >>
    569  8     66A8 10B3 69F3            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    570  3     66AC 27   62              BEQ Hero_MoveUpdatePos      * vite>>
    571  7     66AE B3   69F5            SUBD HERO_ACCELERATION      * acce>>
    572  8     66B1 10B3 69F3            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    573  3     66B5 2E   0F              BGT Hero_MoveLeft_01        * BRAN>>
    574  3     66B7 8E   694A            LDX #HERO_RUN_L        * Charge an>>
    575  6     66BA BF   69FB            STX HERO_ANIMATION_ADR      * Sauv>>
    576
    577  6     66BD FC   69F3            LDD HERO_NEG_TOP_SPEED      * Limi>>
    578  6     66C0 FD   69E6            STD HERO_G_SPEED            * Enre>>
    579  5     66C3 16   004A            LBRA Hero_MoveUpdatePos     * Mise>>
    580        66C6               Hero_MoveLeft_01
    581  6     66C6 FD   69E6            STD HERO_G_SPEED            * Enre>>
    582  3     66C9 8E   68B0            LDX #HERO_WALK_L        * Charge a>>
    583  6     66CC BF   69FB            STX HERO_ANIMATION_ADR      * Sauv>>
    584
    585  5     66CF 16   003E            LBRA Hero_MoveUpdatePos
    586
    587        66D2               Hero_MoveRight                  * XREF: H>>
    588  6     66D2 FC   69E6            LDD HERO_G_SPEED        * Chargeme>>
    589  5     66D5 1083 0000            CMPD #$0000                 * Test>>
    590  3     66D9 2C   0E              BGE Hero_MoveRight_00       * BRAN>>
    591  7     66DB F3   69F7            ADDD HERO_DECELERATION      * orie>>
    592  3     66DE 24   03              BCC Hero_MoveRight_03       * BRAN>>
    593  6     66E0 FC   69F7            LDD HERO_DECELERATION   * si la vi>>
    594        66E3               Hero_MoveRight_03
    595  6     66E3 FD   69E6            STD HERO_G_SPEED        * On stock>>
    596  5     66E6 16   0027            LBRA Hero_MoveUpdatePos           >>
    597        66E9               Hero_MoveRight_00                  * Orie>>
    598  8     66E9 10B3 69F1            CMPD HERO_TOP_SPEED         * Comp>>
    599  3     66ED 27   21              BEQ Hero_MoveUpdatePos      * vite>>
    600  7     66EF F3   69F5            ADDD HERO_ACCELERATION      * acce>>
    601  8     66F2 10B3 69F1            CMPD HERO_TOP_SPEED         * Comp>>
    602  3     66F6 2D   0F              BLT Hero_MoveRight_01       * BRAN>>
    603  3     66F8 8E   6877            LDX #HERO_RUN_R                   >>
    604  6     66FB BF   69FB            STX HERO_ANIMATION_ADR      * Sauv>>
    605
    606  6     66FE FC   69F1            LDD HERO_TOP_SPEED          * Limi>>
    607  6     6701 FD   69E6            STD HERO_G_SPEED            * Enre>>
    608  5     6704 16   0009            LBRA Hero_MoveUpdatePos           >>
    609        6707               Hero_MoveRight_01
    610  6     6707 FD   69E6            STD HERO_G_SPEED            * Enre>>
    611  3     670A 8E   6828            LDX #HERO_WALK_R        * Charge a>>
    612  6     670D BF   69FB            STX HERO_ANIMATION_ADR      * Sauv>>
    613
    614
    615        6710               Hero_MoveUpdatePos
    616  6     6710 FC   69E6            LDD HERO_G_SPEED            * Char>>
    617  6     6713 FD   69E9            STD HERO_X_SPEED        * Stockage>>
    618  5     6716 1083 0000            CMPD #$0000                 * Test>>
    619  3     671A 2D   0E              BLT Hero_MoveUpdatePos_00   * BRAN>>
    620  7     671C F3   69EB            ADDD HERO_X_SPS         * Ajout du>>
    621  5     671F F7   69EC            STB HERO_X_SPS+1            * sauv>>
    622  6     6722 1F   89              TFR A,B                     * Divi>>
    623  5     6724 FB   69E4            ADDB HERO_X_POS                   >>
    624  3     6727 20   18              BRA Hero_MoveUpdatePos_01
    625        6729               Hero_MoveUpdatePos_V00
    626        6729 00                   FCB $00
    627        672A               Hero_MoveUpdatePos_00
    628  3     672A CC   0000            LDD #$0000
    629  7     672D B3   69E9            SUBD HERO_X_SPEED           * La v>>
    630  7     6730 F3   69EB            ADDD HERO_X_SPS         * Ajout du>>
    631  5     6733 F7   69EC            STB HERO_X_SPS+1            * sauv>>
    632  6     6736 1F   89              TFR A,B                     * Divi>>
    633  5     6738 F7   6729            STB Hero_MoveUpdatePos_V00
    634  5     673B F6   69E4            LDB HERO_X_POS
    635  5     673E F0   6729            SUBB Hero_MoveUpdatePos_V00 * Ajou>>
    636        6741               Hero_MoveUpdatePos_01
    637  2     6741 C1   50              CMPB #$50                         >>
    638  3     6743 2F   02              BLE Hero_MoveUpdatePos_02   * Bute>>
    639  2     6745 C6   50              LDB #$50                          >>
    640        6747               Hero_MoveUpdatePos_02
    641  2     6747 C1   0C           CMPB #$0C                            >>
    642  3     6749 2C   02              BGE Hero_MoveUpdatePos_03   * Bute>>
    643  2     674B C6   0C              LDB #$0C                          >>
    644        674D               Hero_MoveUpdatePos_03
    645  5     674D F7   69E4            STB HERO_X_POS
    646  2     6750 C6   00              LDB #$00
    647  5     6752 F7   69EB            STB HERO_X_SPS                    >>
    648  3     6755 CC   0000            LDD #$0000                  * TODO>>
    649  6     6758 FD   69ED            STD HERO_Y_SPEED
    650  6     675B 1F   89              TFR A,B                     * divi>>
    651  5     675D FB   69E5            ADDB HERO_Y_POS
    652  5     6760 F7   69E5            STB HERO_Y_POS
    653  5     6763 39                   RTS
    654
    655                           * TODO : Braking Animation
    656                           * Sonic enters his braking animation when>>
    657                           * In Sonic 1 and Sonic CD, he then stays >>
    658                           * In the other 3 games, Sonic returns to >>
    659
    660        6764               Compute_Position
    661  5     6764 B6   69E4            LDA HERO_X_POS
    662  2     6767 44                   LSRA
    663  3     6768 25   17              BCS Compute_Position_01
    664  5     676A B7   679C            STA Compute_Position_02+1
    665  2     676D 86   28              LDA #$28
    666  5     676F F6   69E5            LDB HERO_Y_POS
    667  2     6772 5A                   DECB
    668  11    6773 3D                   MUL
    669  7     6774 F3   679B            ADDD Compute_Position_02
    670  6     6777 FD   9F00            STD HERO_POS
    671  4     677A C3   2000            ADDD #$2000                       >>
    672  6     677D FD   9F02            STD HERO_POS+2
    673  5     6780 39                   RTS
    674        6781               Compute_Position_01
    675  5     6781 B7   679C            STA Compute_Position_02+1
    676  2     6784 86   28              LDA #$28
    677  5     6786 F6   69E5            LDB HERO_Y_POS
    678  2     6789 5A                   DECB
    679  11    678A 3D                   MUL
    680  7     678B F3   679B            ADDD Compute_Position_02
    681  4     678E C3   2000            ADDD #$2000
    682  6     6791 FD   9F00            STD HERO_POS
    683  4     6794 83   1FFF            SUBD #$1FFF
    684  6     6797 FD   9F02            STD HERO_POS+2
    685  5     679A 39                   RTS
    686        679B               Compute_Position_02
    687        679B 0000                 FDB $0000
    688
    689                           *****************************************>>
    690                           * HERO Animations
    691                           * ---------------
    692                           * Note: Speed abs +0, rel +8, rel cap +10>>
    693                           *
    694                           * Chargement nouvelle animation
    695                           *    nouvelle frame = 109 a 119
    696                           *
    697                           * Chargement frame suivante
    698                           *    frame identique = 15
    699                           * ou frame suivante  = 116 a 126
    700                           *
    701                           * Chargement frame suivante avec branchem>>
    702                           *    nouvelle frame = 165 a 175
    703                           * ou frame suivante = 172 a 182
    704                           *
    705                           * Chargement frame suivante avec retour s>>
    706                           *    nouvelle frame = 167 a 177
    707                           * ou frame suivante = 174 a 184
    708                           *****************************************>>
    709
    710        679D               HERO_ANIMATION_LOAD                      >>
    711  6     679D BF   69FB            STX HERO_ANIMATION_ADR
    712  6     67A0 BF   69FF            STX HERO_ANIMATION_RTN_ADR
    713  7     67A3 7F   6A0B            CLR HERO_ANIMATION_IMC            >>
    714        67A6               HERO_ANIMATION_LOAD_00
    715  5+1   67A6 EC   1E              LDD -2,X                          >>
    716  2     67A8 81   00              CMPA #$00                         >>
    717  3     67AA 27   1E              BEQ HERO_ANIMATION_LOAD_01
    718                            
    719  6     67AC FC   69E6            LDD HERO_G_SPEED              * G_>>
    720  3     67AF 2C   03              BGE HERO_ANIMATION_LOAD_01A
    721  2     67B1 40                   NEGA                          * va>>
    722  2     67B2 4A                   DECA                          * de>>
    723  2     67B3 50                   NEGB
    724                            
    725        67B4               HERO_ANIMATION_LOAD_01A
    726  2     67B4 48                   LSLA
    727  2     67B5 48                   LSLA
    728  5     67B6 B7   69E8            STA HERO_G_SPEED_4X           * Mu>>
    729                            
    730  2     67B9 86   04              LDA #$04                      * Mu>>
    731  11    67BB 3D                   MUL                           * po>>
    732  5     67BC BB   69E8            ADDA HERO_G_SPEED_4X
    733                            
    734  4+1   67BF E6   1F              LDB -1,X
    735  5     67C1 B7   67C5            STA HERO_ANIMATION_LOAD_01B+1 * Au>>
    736        67C4               HERO_ANIMATION_LOAD_01B
    737  2     67C4 C0   00              SUBB #$00                         >>
    738  3     67C6 24   02              BCC HERO_ANIMATION_LOAD_01
    739  2     67C8 C6   01              LDB #$01                          >>
    740                            
    741        67CA               HERO_ANIMATION_LOAD_01
    742  5     67CA F7   6A0D            STB HERO_ANIMATION_FRR            >>
    743  5     67CD B6   6A0B            LDA HERO_ANIMATION_IMC
    744  2     67D0 C6   05              LDB #$05
    745  11    67D2 3D                   MUL
    746  7     67D3 F3   69FB            ADDD HERO_ANIMATION_ADR
    747  6     67D6 1F   02              TFR D,Y
    748  4+0   67D8 E6   A4              LDB ,Y
    749  2     67DA C1   1F              CMPB #$1F                         >>
    750  3     67DC 22   1C              BHI HERO_ANIMATION_LOAD_NOPAGE
    751  5     67DE B6   6A01            LDA HERO_ANIMATION_PAG
    752  5     67E1 F7   6A01            STB HERO_ANIMATION_PAG
    753  5     67E4 B1   6A02            CMPA HERO_ANIMATION_PAG_REF
    754  3     67E7 27   03              BEQ HERO_ANIMATION_LOAD_02
    755  7     67E9 7C   6A01            INC HERO_ANIMATION_PAG        * si>>
    756        67EC               HERO_ANIMATION_LOAD_02
    757  5     67EC F7   6A02            STB HERO_ANIMATION_PAG_REF    * on>>
    758  5+1   67EF AE   21              LDX 1,Y
    759  6     67F1 BF   6A09            STX HERO_ANIMATION_DRW
    760  5+1   67F4 AE   23              LDX 3,Y
    761  6     67F6 BF   6A07            STX HERO_ANIMATION_DEL+2
    762  5     67F9 39                   RTS
    763        67FA               HERO_ANIMATION_LOAD_NOPAGE
    764  2     67FA C1   FF              CMPB #$FF
    765  3     67FC 26   0C              BNE HERO_ANIMATION_LOAD_FE
    766  5+1   67FE AE   23              LDX 3,Y
    767  6     6800 BF   6A0B            STX HERO_ANIMATION_IMC            >>
    768  5+1   6803 AE   21              LDX 1,Y
    769  6     6805 BF   69FB            STX HERO_ANIMATION_ADR
    770  3     6808 20   9C              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    771        680A               HERO_ANIMATION_LOAD_FE
    772  6     680A BE   69FF            LDX HERO_ANIMATION_RTN_ADR  * RETU>>
    773  6     680D BF   69FB            STX HERO_ANIMATION_ADR
    774  5     6810 F6   6A0C            LDB HERO_ANIMATION_RTN_IMC
    775  5     6813 F7   6A0B            STB HERO_ANIMATION_IMC
    776  3     6816 20   8E              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    777
    778        6818               HERO_ANIMATION_NEXT
    779  7     6818 7A   6A0D            DEC HERO_ANIMATION_FRR
    780  3     681B 27   01              BEQ HERO_ANIMATION_NEXT_00  * BRAN>>
    781  5     681D 39                   RTS
    782        681E               HERO_ANIMATION_NEXT_00
    783  7     681E 7C   6A0B            INC HERO_ANIMATION_IMC
    784  6     6821 BE   69FB            LDX HERO_ANIMATION_ADR
    785  3     6824 20   80              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    786                            
    787                           *   SAMPLE CODE ANIMATION
    788                           *      ---------------------
    789                           *      FDB $0018            * 00 Absolute>>
    790                           *HERO_IDLE_L
    791                           *      FCB $01                     * Page>>
    792                           *      FDB $A000            * Adresse drw>>
    793                           *      FDB $A000            * Adresse del>>
    794                           *
    795                           *      FCB $FF                     * FF S>>
    796                           *      FDB HERO_IDLE-C * adresse animatio>>
    797                           *      FDB $0301            * 03 image ci>>
    798                           *
    799                           *      FCB $FE                     * FE R>>
    800                           *
    801                           *      LDX #HERO_IDLE_R
    802                           *      JSR HERO_ANIMATION_LOAD
    803                           *
    804                           *      JSR HERO_ANIMATION_NEXT
    805
    806                           *****************************************>>
    807                           * ANIMATION Scripts
    808                           *****************************************>>
    809
    810
    811
    812        6826 0108                 FDB $0108
    813        6828               HERO_WALK_R
    814        6828 04                   FCB $04
    815        6829 D77F                 FDB $D77F
    816        682B DD34                 FDB $DD34
    817        682D 04                   FCB $04
    818        682E CE8C                 FDB $CE8C
    819        6830 D4B8                 FDB $D4B8
    820        6832 06                   FCB $06
    821        6833 D578                 FDB $D578
    822        6835 DCC3                 FDB $DCC3
    823        6837 0C                   FCB $0C
    824        6838 D511                 FDB $D511
    825        683A DC85                 FDB $DC85
    826        683C 0E                   FCB $0E
    827        683D D4D8                 FDB $D4D8
    828        683F DC27                 FDB $DC27
    829        6841 08                   FCB $08
    830        6842 D5E7                 FDB $D5E7
    831        6844 DCEF                 FDB $DCEF
    832        6846 04                   FCB $04
    833        6847 C589                 FDB $C589
    834        6849 CBCE                 FDB $CBCE
    835        684B 04                   FCB $04
    836        684C BBF5                 FDB $BBF5
    837        684E C293                 FDB $C293
    838        6850 04                   FCB $04
    839        6851 B296                 FDB $B296
    840        6853 B90C                 FDB $B90C
    841        6855 12                   FCB $12
    842        6856 D503                 FDB $D503
    843        6858 DC74                 FDB $DC74
    844        685A 10                   FCB $10
    845        685B D565                 FDB $D565
    846        685D DCC2                 FDB $DCC2
    847        685F 04                   FCB $04
    848        6860 A933                 FDB $A933
    849        6862 AFAF                 FDB $AFAF
    850        6864 FF                   FCB $FF
    851        6865 6828                 FDB HERO_WALK_R
    852        6867 0000                 FDB $0000
    853
    854        6869 0018                 FDB $0018
    855        686B               HERO_IDLE_R
    856        686B 04                   FCB $04
    857        686C A000                 FDB $A000
    858        686E A65E                 FDB $A65E
    859        6870 FF                   FCB $FF
    860        6871 686B                 FDB HERO_IDLE_R
    861        6873 0000                 FDB $0000
    862
    863        6875 0108                 FDB $0108
    864        6877               HERO_RUN_R
    865        6877 12                   FCB $12
    866        6878 CA2F                 FDB $CA2F
    867        687A D1C5                 FDB $D1C5
    868        687C 06                   FCB $06
    869        687D CC02                 FDB $CC02
    870        687F D299                 FDB $D299
    871        6881 06                   FCB $06
    872        6882 C300                 FDB $C300
    873        6884 C941                 FDB $C941
    874        6886 06                   FCB $06
    875        6887 BA07                 FDB $BA07
    876        6889 C038                 FDB $C038
    877        688B 0A                   FCB $0A
    878        688C D5A2                 FDB $D5A2
    879        688E DCC2                 FDB $DCC2
    880        6890 14                   FCB $14
    881        6891 D44A                 FDB $D44A
    882        6893 DC35                 FDB $DC35
    883        6895 06                   FCB $06
    884        6896 B16F                 FDB $B16F
    885        6898 B753                 FDB $B753
    886        689A 06                   FCB $06
    887        689B A8E0                 FDB $A8E0
    888        689D AEC6                 FDB $AEC6
    889        689F 06                   FCB $06
    890        68A0 A000                 FDB $A000
    891        68A2 A61F                 FDB $A61F
    892        68A4 0A                   FCB $0A
    893        68A5 CBAB                 FDB $CBAB
    894        68A7 D293                 FDB $D293
    895        68A9 FF                   FCB $FF
    896        68AA 6877                 FDB HERO_RUN_R
    897        68AC 0000                 FDB $0000
    898
    899        68AE 0108                 FDB $0108
    900        68B0               HERO_WALK_L
    901        68B0 08                   FCB $08
    902        68B1 CD9F                 FDB $CD9F
    903        68B3 D354                 FDB $D354
    904        68B5 08                   FCB $08
    905        68B6 C4AC                 FDB $C4AC
    906        68B8 CAD8                 FDB $CAD8
    907        68BA 12                   FCB $12
    908        68BB BFBF                 FDB $BFBF
    909        68BD C701                 FDB $C701
    910        68BF 12                   FCB $12
    911        68C0 B515                 FDB $B515
    912        68C2 BC89                 FDB $BC89
    913        68C4 12                   FCB $12
    914        68C5 AAAB                 FDB $AAAB
    915        68C7 B1F1                 FDB $B1F1
    916        68C9 10                   FCB $10
    917        68CA CB57                 FDB $CB57
    918        68CC D25F                 FDB $D25F
    919        68CE 08                   FCB $08
    920        68CF BBA9                 FDB $BBA9
    921        68D1 C1EE                 FDB $C1EE
    922        68D3 08                   FCB $08
    923        68D4 B211                 FDB $B211
    924        68D6 B8B2                 FDB $B8B2
    925        68D8 08                   FCB $08
    926        68D9 A8B2                 FDB $A8B2
    927        68DB AF28                 FDB $AF28
    928        68DD 12                   FCB $12
    929        68DE A000                 FDB $A000
    930        68E0 A769                 FDB $A769
    931        68E2 14                   FCB $14
    932        68E3 C9B3                 FDB $C9B3
    933        68E5 D110                 FDB $D110
    934        68E7 0A                   FCB $0A
    935        68E8 C244                 FDB $C244
    936        68EA C8C3                 FDB $C8C3
    937        68EC FF                   FCB $FF
    938        68ED 68B0                 FDB HERO_WALK_L
    939        68EF 0000                 FDB $0000
    940
    941        68F1 0001                 FDB $0001
    942        68F3               HERO_JUMP_R
    943        68F3 08                   FCB $08
    944        68F4 A000                 FDB $A000
    945        68F6 A5E1                 FDB $A5E1
    946        68F8 0A                   FCB $0A
    947        68F9 B992                 FDB $B992
    948        68FB BF73                 FDB $BF73
    949        68FD 0A                   FCB $0A
    950        68FE B17A                 FDB $B17A
    951        6900 B70C                 FDB $B70C
    952        6902 0A                   FCB $0A
    953        6903 A900                 FDB $A900
    954        6905 AED8                 FDB $AED8
    955        6907 08                   FCB $08
    956        6908 A000                 FDB $A000
    957        690A A5E1                 FDB $A5E1
    958        690C 0A                   FCB $0A
    959        690D B992                 FDB $B992
    960        690F BF73                 FDB $BF73
    961        6911 0A                   FCB $0A
    962        6912 A000                 FDB $A000
    963        6914 A644                 FDB $A644
    964        6916 0C                   FCB $0C
    965        6917 CC3A                 FDB $CC3A
    966        6919 D263                 FDB $D263
    967        691B 08                   FCB $08
    968        691C A000                 FDB $A000
    969        691E A5E1                 FDB $A5E1
    970        6920 0A                   FCB $0A
    971        6921 B992                 FDB $B992
    972        6923 BF73                 FDB $BF73
    973        6925 0C                   FCB $0C
    974        6926 C2F8                 FDB $C2F8
    975        6928 C96F                 FDB $C96F
    976        692A 0C                   FCB $0C
    977        692B BA92                 FDB $BA92
    978        692D C055                 FDB $C055
    979        692F 08                   FCB $08
    980        6930 A000                 FDB $A000
    981        6932 A5E1                 FDB $A5E1
    982        6934 0A                   FCB $0A
    983        6935 B992                 FDB $B992
    984        6937 BF73                 FDB $BF73
    985        6939 0C                   FCB $0C
    986        693A B1D9                 FDB $B1D9
    987        693C B7EA                 FDB $B7EA
    988        693E 0C                   FCB $0C
    989        693F A97A                 FDB $A97A
    990        6941 AF48                 FDB $AF48
    991        6943 FF                   FCB $FF
    992        6944 68F3                 FDB HERO_JUMP_R
    993        6946 0000                 FDB $0000
    994
    995        6948 0108                 FDB $0108
    996        694A               HERO_RUN_L
    997        694A 14                   FCB $14
    998        694B BED3                 FDB $BED3
    999        694D C672                 FDB $C672
   1000        694F 0C                   FCB $0C
   1001        6950 A000                 FDB $A000
   1002        6952 A69A                 FDB $A69A
   1003        6954 0E                   FCB $0E
   1004        6955 CBD6                 FDB $CBD6
   1005        6957 D217                 FDB $D217
   1006        6959 0E                   FCB $0E
   1007        695A C2D5                 FDB $C2D5
   1008        695C C90C                 FDB $C90C
   1009        695E 14                   FCB $14
   1010        695F B489                 FDB $B489
   1011        6961 BBAF                 FDB $BBAF
   1012        6963 14                   FCB $14
   1013        6964 A94A                 FDB $A94A
   1014        6966 B129                 FDB $B129
   1015        6968 0E                   FCB $0E
   1016        6969 BA39                 FDB $BA39
   1017        696B C020                 FDB $C020
   1018        696D 0E                   FCB $0E
   1019        696E B1AA                 FDB $B1AA
   1020        6970 B790                 FDB $B790
   1021        6972 0E                   FCB $0E
   1022        6973 A8C6                 FDB $A8C6
   1023        6975 AEE8                 FDB $AEE8
   1024        6977 16                   FCB $16
   1025        6978 C2C5                 FDB $C2C5
   1026        697A C9B0                 FDB $C9B0
   1027        697C FF                   FCB $FF
   1028        697D 694A                 FDB HERO_RUN_L
   1029        697F 0000                 FDB $0000
   1030
   1031        6981 0001                 FDB $0001
   1032        6983               HERO_JUMP_L
   1033        6983 0E                   FCB $0E
   1034        6984 A000                 FDB $A000
   1035        6986 A5F0                 FDB $A5F0
   1036        6988 10                   FCB $10
   1037        6989 C291                 FDB $C291
   1038        698B C881                 FDB $C881
   1039        698D 10                   FCB $10
   1040        698E BA75                 FDB $BA75
   1041        6990 C00A                 FDB $C00A
   1042        6992 10                   FCB $10
   1043        6993 B1FB                 FDB $B1FB
   1044        6995 B7D3                 FDB $B7D3
   1045        6997 0E                   FCB $0E
   1046        6998 A000                 FDB $A000
   1047        699A A5F0                 FDB $A5F0
   1048        699C 10                   FCB $10
   1049        699D C291                 FDB $C291
   1050        699F C881                 FDB $C881
   1051        69A1 10                   FCB $10
   1052        69A2 A8F7                 FDB $A8F7
   1053        69A4 AF3E                 FDB $AF3E
   1054        69A6 10                   FCB $10
   1055        69A7 A000                 FDB $A000
   1056        69A9 A641                 FDB $A641
   1057        69AB 0E                   FCB $0E
   1058        69AC A000                 FDB $A000
   1059        69AE A5F0                 FDB $A5F0
   1060        69B0 10                   FCB $10
   1061        69B1 C291                 FDB $C291
   1062        69B3 C881                 FDB $C881
   1063        69B5 14                   FCB $14
   1064        69B6 A000                 FDB $A000
   1065        69B8 A67D                 FDB $A67D
   1066        69BA 16                   FCB $16
   1067        69BB BA5B                 FDB $BA5B
   1068        69BD C021                 FDB $C021
   1069        69BF 0E                   FCB $0E
   1070        69C0 A000                 FDB $A000
   1071        69C2 A5F0                 FDB $A5F0
   1072        69C4 10                   FCB $10
   1073        69C5 C291                 FDB $C291
   1074        69C7 C881                 FDB $C881
   1075        69C9 16                   FCB $16
   1076        69CA B196                 FDB $B196
   1077        69CC B7B0                 FDB $B7B0
   1078        69CE 16                   FCB $16
   1079        69CF A933                 FDB $A933
   1080        69D1 AF04                 FDB $AF04
   1081        69D3 FF                   FCB $FF
   1082        69D4 6983                 FDB HERO_JUMP_L
   1083        69D6 0000                 FDB $0000
   1084
   1085        69D8 0018                 FDB $0018
   1086        69DA               HERO_IDLE_L
   1087        69DA 16                   FCB $16
   1088        69DB A000                 FDB $A000
   1089        69DD A65E                 FDB $A65E
   1090        69DF FF                   FCB $FF
   1091        69E0 69DA                 FDB HERO_IDLE_L
   1092        69E2 0000                 FDB $0000
   1093                            
   1094                           *****************************************>>
   1095                           * HERO Variables
   1096                           *****************************************>>
   1097                           *HERO_WALK_SPD_LIMIT EQU $0100          *>>
   1098                           *HERO_WALK_NEG_SPD_LIMIT EQU $FE00      *>>
   1099                  0180     HERO_JOG_SPD_LIMIT  EQU $0180          * >>
   1100                  FE80     HERO_JOG_NEG_SPD_LIMIT  EQU $FE80      * >>
   1101        69E4               HERO_X_POS
   1102        69E4 18                   FCB $18                     * Hori>>
   1103        69E5               HERO_Y_POS
   1104        69E5 A2                   FCB $A2                     * Vert>>
   1105        69E6               HERO_G_SPEED         * Ground Speed
   1106        69E6 0000                 FDB $0000            * First byte >>
   1107        69E8               HERO_G_SPEED_4X             * Ground Spee>>
   1108        69E8 00                   FCB $00
   1109        69E9               HERO_X_SPEED
   1110        69E9 0000                 FDB $0000            * Horizontal >>
   1111        69EB               HERO_X_SPS
   1112        69EB 0000                 FDB $0000            * Subpixel X >>
   1113        69ED               HERO_Y_SPEED
   1114        69ED 0000                 FDB $0000            * Vertical Sp>>
   1115        69EF               HERO_Y_SPS
   1116        69EF 0000                 FDB $0000            * Subpixel Y >>
   1117        69F1               HERO_TOP_SPEED
   1118        69F1 0180                 FDB $0180        * 0600 vitesse ma>>
   1119        69F3               HERO_NEG_TOP_SPEED
   1120        69F3 FE80                 FDB $FE80        * FA00 vitesse ma>>
   1121        69F5               HERO_ACCELERATION
   1122        69F5 0003                 FDB $0003        * 000C constante >>
   1123        69F7               HERO_DECELERATION
   1124        69F7 0020                 FDB $0020        * 0080 constante >>
   1125        69F9               HERO_FRICTION
   1126        69F9 0003                 FDB $0003        * 000C constante >>
   1127        69FB               HERO_ANIMATION_ADR
   1128        69FB 0000                 FDB $0000        * Animation coura>>
   1129        69FD               HERO_ANIMATION_ADR_OLD
   1130        69FD 0000                 FDB $0000        * Sauvegarde anci>>
   1131        69FF               HERO_ANIMATION_RTN_ADR
   1132        69FF 0000                 FDB $0000        * Animation coura>>
   1133        6A01               HERO_ANIMATION_PAG
   1134        6A01 00                   FCB $00          * Animation coura>>
   1135        6A02               HERO_ANIMATION_PAG_REF
   1136        6A02 00                   FCB $00          * Animation coura>>
   1137        6A03               HERO_ANIMATION_PAG_DEL
   1138        6A03 00                   FCB $00        * Animation courant>>
   1139        6A04 00                   FCB $00        * Animation courant>>
   1140        6A05               HERO_ANIMATION_DEL
   1141        6A05 0000                 FDB $0000        * Animation coura>>
   1142        6A07 0000                 FDB $0000        * Animation coura>>
   1143        6A09               HERO_ANIMATION_DRW
   1144        6A09 0000                 FDB $0000        * Animation coura>>
   1145        6A0B               HERO_ANIMATION_IMC
   1146        6A0B 00                   FCB $00          * Animation coura>>
   1147        6A0C               HERO_ANIMATION_RTN_IMC
   1148        6A0C 00                   FCB $00          * Animation coura>>
   1149        6A0D               HERO_ANIMATION_FRR
   1150        6A0D 00                   FCB $00          * Animation coura>>

000000 Total Errors

000123 Total Symbols
     0x          Label 6300 BEGIN
     0x          Label 652F CLR_CART
     1x          Label 6548 CLR_CART_2
     1x          Label 6564 CLR_CART_3
     1x          Label 6764 Compute_Position
     1x          Label 6781 Compute_Position_01
     4x          Label 679B Compute_Position_02
     3x          Label 6353 CPPAGE_LOOP
     1x          Equ   0014 DEBUTECRANA
     1x          Equ   2014 DEBUTECRANB
     1x          Equ   622C DK_dernier_bloc_a_ecrire
     1x          Equ   6213 DK_destination
     1x          Equ   6205 DK_lecture
     1x          Equ   620A DK_piste
     2x          Equ   620F DK_secteur
     0x          Label 656B DRAW_RAM_DATA_TO_CART_160x200
     1x          Label 6578 DRAW_RAM_DATA_TO_CART_160x200A
     1x          Label 65D3 DRAW_RAM_DATA_TO_CART_160x200A_E
     1x          Label 65A9 DRAW_RAM_DATA_TO_CART_160x200B
     2x          Equ   1F40 FINECRANA
     2x          Equ   3F40 FINECRANB
     1x          Label 65FA FINTABPALETTE
     2x          Label 69F5 HERO_ACCELERATION
    14x          Label 69FB HERO_ANIMATION_ADR
     3x          Label 69FD HERO_ANIMATION_ADR_OLD
     4x          Label 6A05 HERO_ANIMATION_DEL
     3x          Label 6A09 HERO_ANIMATION_DRW
     2x          Label 6A0D HERO_ANIMATION_FRR
     5x          Label 6A0B HERO_ANIMATION_IMC
     2x          Label 679D HERO_ANIMATION_LOAD
     3x          Label 67A6 HERO_ANIMATION_LOAD_00
     2x          Label 67CA HERO_ANIMATION_LOAD_01
     1x          Label 67B4 HERO_ANIMATION_LOAD_01A
     1x          Label 67C4 HERO_ANIMATION_LOAD_01B
     1x          Label 67EC HERO_ANIMATION_LOAD_02
     1x          Label 680A HERO_ANIMATION_LOAD_FE
     1x          Label 67FA HERO_ANIMATION_LOAD_NOPAGE
     1x          Label 6818 HERO_ANIMATION_NEXT
     1x          Label 681E HERO_ANIMATION_NEXT_00
     6x          Label 6A01 HERO_ANIMATION_PAG
     4x          Label 6A03 HERO_ANIMATION_PAG_DEL
     3x          Label 6A02 HERO_ANIMATION_PAG_REF
     2x          Label 69FF HERO_ANIMATION_RTN_ADR
     1x          Label 6A0C HERO_ANIMATION_RTN_IMC
     4x          Label 69F7 HERO_DECELERATION
     2x          Label 69F9 HERO_FRICTION
    17x          Label 69E6 HERO_G_SPEED
     2x          Label 69E8 HERO_G_SPEED_4X
     2x          Label 69DA HERO_IDLE_L
     3x          Label 686B HERO_IDLE_R
     1x          Equ   FE80 HERO_JOG_NEG_SPD_LIMIT
     1x          Equ   0180 HERO_JOG_SPD_LIMIT
     1x          Label 6983 HERO_JUMP_L
     1x          Label 68F3 HERO_JUMP_R
     1x          Label 6614 Hero_Move
     1x          Label 668E Hero_MoveLeft
     1x          Label 66A8 Hero_MoveLeft_00
     1x          Label 66C6 Hero_MoveLeft_01
     1x          Label 66A2 Hero_MoveLeft_03
     1x          Label 66D2 Hero_MoveRight
     1x          Label 66E9 Hero_MoveRight_00
     1x          Label 6707 Hero_MoveRight_01
     1x          Label 66E3 Hero_MoveRight_03
    12x          Label 6710 Hero_MoveUpdatePos
     1x          Label 672A Hero_MoveUpdatePos_00
     1x          Label 6741 Hero_MoveUpdatePos_01
     1x          Label 6747 Hero_MoveUpdatePos_02
     1x          Label 674D Hero_MoveUpdatePos_03
     2x          Label 6729 Hero_MoveUpdatePos_V00
     3x          Label 69F3 HERO_NEG_TOP_SPEED
     1x          Label 661D Hero_NotLeft
     1x          Label 6624 Hero_NotLeftOrRight
     1x          Label 6663 Hero_NotLeftOrRight_00
     1x          Label 664C Hero_NotLeftOrRight_01
     1x          Label 665D Hero_NotLeftOrRight_02
     1x          Label 6660 Hero_NotLeftOrRight_03
     1x          Label 6677 Hero_NotLeftOrRight_11
     1x          Label 6688 Hero_NotLeftOrRight_12
     1x          Label 668B Hero_NotLeftOrRight_13
     6x          Equ   9F00 HERO_POS
     2x          Label 694A HERO_RUN_L
     2x          Label 6877 HERO_RUN_R
     3x          Label 69F1 HERO_TOP_SPEED
     3x          Label 68B0 HERO_WALK_L
     3x          Label 6828 HERO_WALK_R
     4x          Label 69E4 HERO_X_POS
     2x          Label 69E9 HERO_X_SPEED
     6x          Label 69EB HERO_X_SPS
     4x          Label 69E5 HERO_Y_POS
     1x          Label 69ED HERO_Y_SPEED
     0x          Label 69EF HERO_Y_SPS
     0x          Label 63A2 INIT_VID
     0x          Equ   000D JOY_B
     0x          Equ   0005 JOY_BD
     0x          Equ   0009 JOY_BG
     1x          Label 6613 JOY_BTN_STATUS
     0x          Equ   000F JOY_C
     1x          Equ   0007 JOY_D
     2x          Label 6612 JOY_DIR_STATUS
     1x          Equ   000B JOY_G
     0x          Equ   000E JOY_H
     0x          Equ   0006 JOY_HD
     0x          Equ   000A JOY_HG
     1x          Label 65FA JOY_READ
     6x          Label 6340 LDPAGE_LOOP
     1x          Label 63CB MAIN
     1x          Label 63D8 MAIN_0
     1x          Label 63F4 MAIN_1
     1x          Label 63FA MAIN_2
     2x          Label 643C MEM_COPY_DATA_TO_CART
     2x          Label 6522 MEM_COPY_DATA_TO_CART_E
     1x          Label 6442 MEM_COPY_DATA_TO_CART_LOOP
     1x          Label 652A MEM_COPY_DATA_TO_CART_S
     1x          Label 637E PAGEINIT
     1x          Label 637C PAGEINITNEXT
     0x          Label 638F PAGENEXT
     3x          Label 640C SCRC
     3x          Label 6427 SCRC0
     1x          Label 6318 SETPALETTE
     1x          Label 65DA TABPALETTE
     1x          Label 6431 VSYNC
     1x          Label 6431 VSYNC_1
     1x          Label 6436 VSYNC_2

