/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : ./input/CODE/MAIN.ASM
 * Fichier destination : MAIN.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     14345
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        8000                      ORG $8000
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17                  0014     DEBUTECRANA EQU $0014       * test pour f>>
     18                  1F40     FINECRANA   EQU $1F40       * fin de la R>>
     19                  2014     DEBUTECRANB EQU $2014       * test pour f>>
     20                  3F40     FINECRANB   EQU $3F40       * fin de la R>>
     21                  0005     JOY_BD EQU $05       * Bas Droite
     22                  0006     JOY_HD EQU $06       * Haut Droite
     23                  0007     JOY_D  EQU $07       * Droite
     24                  0009     JOY_BG EQU $09       * Bas Gauche
     25                  000A     JOY_HG EQU $0A       * Haut Gauche
     26                  000B     JOY_G  EQU $0B       * Gauche
     27                  000D     JOY_B  EQU $0D       * Bas
     28                  000E     JOY_H  EQU $0E       * Haut
     29                  000F     JOY_C  EQU $0F       * Centre
     30
     31        8000 0000          SSAVE FDB $0000
     32
     33                           *<ANIMATION_TABLE>
     34                           * Limite a 128 images par animations
     35
     36        8002 0018                 FDB $0018            * 00 Absolute>>
     37        8004               HERO_IDLE_L
     38        8004 01                   FCB $01                     * Page>>
     39        8005 A000                 FDB $A000            * Adresse drw>>
     40        8007 A000                 FDB $A000            * Adresse del>>
     41        8009 01                   FCB $01                     * Page>>
     42        800A A000                 FDB $A000            * Adresse drw>>
     43        800C A000                 FDB $A000            * Adresse del>>
     44        800E 01                   FCB $01                     * Page>>
     45        800F A000                 FDB $A000            * Adresse drw>>
     46        8011 A000                 FDB $A000            * Adresse del>>
     47        8013 FF                   FCB $FF                     * FF B>>
     48        8014 0000                 FDB $0000            * 00 image de>>
     49        8016 0000                 FDB $0000            * non utilise>>
     50        8018 01                   FCB $01                     * Page>>
     51        8019 A000                 FDB $A000            * Adresse drw>>
     52        801B A000                 FDB $A000            * Adresse del>>
     53        801D FF                   FCB $FF                     * FF B>>
     54        801E 0000                 FDB $0000            * 00 image de>>
     55        8020 0000                 FDB $0000            * non utilise>>
     56                            
     57        8022 0018                 FDB $0018            * 00 Absolute>>
     58        8024               HERO_IDLE_R
     59        8024 01                   FCB $01                     * Page>>
     60        8025 A000                 FDB $A000            * Adresse drw>>
     61        8027 A000                 FDB $A000            * Adresse del>>
     62        8029 01                   FCB $01                     * Page>>
     63        802A A000                 FDB $A000            * Adresse drw>>
     64        802C A000                 FDB $A000            * Adresse del>>
     65        802E 01                   FCB $01                     * Page>>
     66        802F A000                 FDB $A000            * Adresse drw>>
     67        8031 A000                 FDB $A000            * Adresse del>>
     68        8033 FE                   FCB $FE                     * FE d>>
     69        8034 0000                 FDB $0000            * 00 unused 0>>
(70) Expression Error
     70        FDB HERO_IDLE-C * adresse animation cible
     71
     72        8036 0018                 FDB $0018            * 00 Absolute>>
     73        8038               HERO_IDLE_L2
     74        8038 01                   FCB $01                     * Page>>
     75        8039 A000                 FDB $A000            * Adresse drw>>
     76        803B A000                 FDB $A000            * Adresse del>>
     77        803D FD                   FCB $FD                     * FD s>>
     78        803E 0000                 FDB $0000            * 00 unused 0>>
(79) Expression Error
     79        FDB HERO_IDLE_B * animation cible
     80        8040 01                   FCB $01                     * Page>>
     81        8041 A000                 FDB $A000            * Adresse drw>>
     82        8043 A000                 FDB $A000            * Adresse del>>
     83        8045 FF                   FCB $FF                     * FF B>>
     84        8046 0000                 FDB $000             * 01 image de>>
     85        8048 0000                 FDB $0000            * non utilise>>
     86                            
     87        804A 0018                 FDB $0018            * 00 Absolute>>
     88        804C               HERO_SUBIDLE_B
     89        804C 01                   FCB $01                     * Page>>
     90        804D A000                 FDB $A000            * Adresse drw>>
     91        804F A000                 FDB $A000            * Adresse del>>
     92        8051 00FC                 FDB $FC                     * FC r>>
     93                            
     94        8053               HERO_WALK_L
     95        8053               HERO_WALK_R
     96        8053               HERO_RUN_L
     97        8053               HERO_RUN_R
     98
     99                           *****************************************>>
    100                           * Debut du programme
    101                           *****************************************>>
    102  2     8053 1A   50              ORCC #$50     * a documenter (inte>>
    103                            
    104  2     8055 86   7B              LDA #$7B      * passage en mode 16>>
    105  5     8057 B7   E7DC            STA $E7DC
    106
    107                           *****************************************>>
    108                           * Initialisation de la palette de couleur>>
    109                           *****************************************>>
    110  4     805A 108E 82F6            LDY #TABPALETTE
    111  2     805E 4F                   CLRA
    112        805F               SETPALETTE
    113  5+1   805F 34   02              PSHS A
    114  2     8061 48                   ASLA
    115  5     8062 B7   E7DB            STA $E7DB
    116  5+3   8065 EC   A1              LDD ,Y++
    117  5     8067 F7   E7DA            STB $E7DA
    118  5     806A B7   E7DA            STA $E7DA
    119  5+1   806D 35   02              PULS A
    120  2     806F 4C                   INCA
    121  5     8070 108C 8316            CMPY #FINTABPALETTE
    122  3     8074 26   ED              BNE    SETPALETTE
    123
    124                           *****************************************>>
    125                           * Initialisation de la routine de commuta>>
    126                           *****************************************>>
    127  5     8076 F6   6081            LDB $6081 * A documenter
    128  2     8079 CA   10              ORB #$10  * mettre le bit d4 a 1
    129  5     807B F7   6081            STB $6081
    130  5     807E F7   E7E7            STB $E7E7
    131  8     8081 BD   80C5            JSR SCRC * page 2 en RAM Cartouche>>
    132
    133                           *****************************************>>
    134                           * Initialisation des deux pages videos av>>
    135                           *****************************************>>
    136  3     8084 8E   8024            LDX #HERO_IDLE_R
    137  8     8087 BD   8316            JSR HERO_ANIMATION_LOAD
    138
    139        808A 01                   FCB $01
    140        808B               INIT_SCREEN
    141  2     808B C6   03              LDB #$03                          >>
    142  5     808D F7   E7E5            STB $E7E5                         >>
    143  8     8090 BD   8287            JSR DRAW_RAM_DATA_TO_CART_160x200
    144                            
    145  5     8093 F6   8394            LDB HERO_ANIMATION_PAG            >>
    146  5     8096 F7   E7E5            STB $E7E5                         >>
    147  7+3   8099 AD   9F 8397         JSR [HERO_ANIMATION_DRW]          >>
    148                            
    149  8     809D BD   80C5            JSR SCRC                          >>
    150                                                                    >>
(151) Bad Operand
    151        DEC -1,INIT_SCREEN
    152  3     80A0 24   ED              BCC INIT_SCREEN
    153
    154                           *****************************************>>
    155                           * Boucle principale
    156                           *****************************************>>
    157        80A2               MAIN
    158                                  * Effacement et affichage des spri>>
    159  5     80A2 F6   8394            LDB HERO_ANIMATION_PAG            >>
    160  5     80A5 F7   E7E5            STB $E7E5                         >>
(161) Expression Error
    161        JSR [HERO_ANIMATION_EFF]                  * Efface le sprite>>
    162  7+3   80A8 AD   9F 8397         JSR [HERO_ANIMATION_DRW]          >>
    163
    164                                  * Gestion des deplacements
    165  8     80AC BD   80F8            JSR JOY_READ
    166  8     80AF BD   8112            JSR Hero_Move
    167  8     80B2 BD   824E            JSR Compute_Position
    168                            
    169  8     80B5 BD   836C            JSR HERO_ANIMATION_NEXT
    170
    171  8     80B8 BD   80C5            JSR SCRC                          >>
    172  3     80BB 20   E9              BRA MAIN
    173
    174                           *****************************************>>
    175                           * Changement de page ESPACE ECRAN (affich>>
    176                           *      $E7DD determine la page affichee d>>
    177                           *      D7=0 D6=0 D5=0 D4=0 (#$0_) : page >>
    178                           *      D7=0 D6=1 D5=0 D4=0 (#$4_) : page >>
    179                           *      D7=1 D6=0 D5=0 D4=0 (#$8_) : page >>
    180                           *      D7=1 D6=1 D5=0 D4=0 (#$C_) : page >>
    181                           *   D3 D2 D1 D0  (#$_0 a #$_F) : couleur >>
    182                           *   Remarque : D5 et D4 utilisable unique>>
    183                           *
    184                           * Changement de page ESPACE CARTOUCHE (ec>>
    185                           *      $E7E6 determine la page affichee d>>
    186                           *   D5 : 1 = espace cartouche recouvert p>>
    187                           *   D4 : 0 = CAS1N valide : banques 0-15 >>
    188                           *      D5=1 D4=0 D3=0 D2=0 D1=0 D0=0 (#$6>>
    189                           *   ...
    190                           *      D5=1 D4=0 D3=1 D2=1 D1=1 D0=1 (#$6>>
    191                           *      D5=1 D4=1 D3=0 D2=0 D1=0 D0=0 (#$7>>
    192                           *   ...
    193                           *      D5=1 D4=1 D3=1 D2=1 D1=1 D0=1 (#$7>>
    194                           *****************************************>>
    195        80BD               SCRC
    196  8     80BD BD   80ED            JSR VSYNC
    197
    198  5     80C0 F6   80E4            LDB SCRC0+1
    199  2     80C3 C4   01              ANDB #$01
    200  5     80C5 B6   8394            LDA HERO_ANIMATION_PAG
(201) Expression Error
    201        ADDA B
    202  5     80C8 B7   8394            STA HERO_ANIMATION_PAG
    203                            
    204  5     80CB F6   80E4            LDB SCRC0+1   * charge la valeur d>>
    205  2     80CE C4   80              ANDB #$80     * permute #$00 ou #$>>
    206  2     80D0 CA   0F              ORB #$0F      * recharger la coule>>
    207  5     80D2 F7   E7DD            STB $E7DD     * changement page da>>
    208  7     80D5 73   80E4            COM SCRC0+1   * modification du co>>
    209        80D8               SCRC0
    210  2     80D8 C6   00              LDB #$00
    211  2     80DA C4   02              ANDB #$02     * permute #$60 ou #$>>
    212  2     80DC CA   60              ORB #$60      * espace cartouche r>>
    213  5     80DE F7   E7E6            STB $E7E6     * changement page da>>
    214  5     80E1 39                   RTS                  * E7E6 D5=1 p>>
    215                                                       * CAS1N : ban>>
    216
    217                           *****************************************>>
    218                           * Attente VBL
    219                           *****************************************>>
    220        80E2               VSYNC
    221        80E2               VSYNC_1
    222  7     80E2 7D   E7E7            TST    $E7E7
    223  3     80E5 2A   06              BPL    VSYNC_1
    224        80E7               VSYNC_2
    225  7     80E7 7D   E7E7            TST    $E7E7
    226  3     80EA 2B   06              BMI    VSYNC_2
    227  5     80EC 39                   RTS
    228
    229                           ****************************************
    230                           * Get joystick parameters
    231                           ****************************************
    232        80ED               JOY_READ
    233  3     80ED 8E   E7CF            ldx    #$e7cf
    234  4     80F0 108E E7CD            ldy    #$e7cd
    235  3     80F4 CC   400F            ldd    #$400f
    236  5     80F7 F4   E7CC            andb   >$e7cc     * Read position
    237  5     80FA F7   8110            stb    JOY_DIR_STATUS
    238  4+0   80FD A4   A4              anda   ,y         * Read button
    239  2     80FF 88   40              eora   #$40
    240  5     8101 B7   8111            sta    JOY_BTN_STATUS
    241  5     8104 39                   RTS
    242        8105               JOY_DIR_STATUS
    243        8105 00                   FCB $00 * Position Pad
    244        8106               JOY_BTN_STATUS
    245        8106 00                   FCB $00 * 40 Bouton A enfonce
    246
    247                           *****************************************>>
    248                           * Subroutine to      make HERO walk/run
    249                           *****************************************>>
    250        8107               Hero_Move
    251  5     8107 B6   8110            LDA JOY_DIR_STATUS
    252  2     810A 81   0B              CMPA #JOY_G
    253  3     810C 26   0D              BNE Hero_NotLeft
    254  3     810E 20   74              BRA Hero_MoveLeft
    255
    256        8110               Hero_NotLeft                   * XREF: He>>
    257  2     8110 81   07              CMPA #JOY_D
    258  3     8112 26   0E              BNE Hero_NotLeftOrRight
    259  5     8114 16   00B1            LBRA Hero_MoveRight
    260
    261        8117               Hero_NotLeftOrRight            * XREF: He>>
    262  6     8117 FC   837C            LDD HERO_G_SPEED
    263  5     811A 1083 0000            CMPD #$0000
    264  3     811E 2D   39              BLT Hero_NotLeftOrRight_00 * se de>>
    265  7     8120 B3   838E            SUBD HERO_FRICTION     * se deplac>>
    266  3     8123 24   1D              BCC Hero_NotLeftOrRight_01 * si on>>
    267  3     8125 CC   0000            LDD #$0000
    268  6     8128 FD   837C            STD HERO_G_SPEED
    269  6     812B FD   8380            STD HERO_X_SPS
    270  3     812E 8E   8024            LDX #HERO_IDLE_R        * Charge a>>
    271  6     8131 BF   8390            STX HERO_ANIMATION_ADR      * Sauv>>
    272  5     8134 16   00CF            LBRA Hero_MoveUpdatePos
    273        8137               Hero_NotLeftOrRight_01
    274  5     8137 1083 0600            CMPD #HERO_JOG_SPD_LIMIT
    275  3     813B 2C   16              BGE Hero_NotLeftOrRight_02
    276  6     813D FD   837C            STD HERO_G_SPEED
    277  3     8140 8E   8057            LDX #HERO_WALK_R        * Charge a>>
    278  6     8143 BF   8390            STX HERO_ANIMATION_ADR      * Sauv>>
    279  3     8146 20   0E              BRA Hero_NotLeftOrRight_03
    280        8148               Hero_NotLeftOrRight_02
    281  6     8148 FD   837C            STD HERO_G_SPEED
    282        814B               Hero_NotLeftOrRight_03
    283  5     814B 16   00B8            LBRA Hero_MoveUpdatePos
    284        814E               Hero_NotLeftOrRight_00
    285  7     814E F3   838E            ADDD HERO_FRICTION     * se deplac>>
    286  3     8151 24   1A              BCC Hero_NotLeftOrRight_11 * si on>>
    287  3     8153 CC   0000            LDD #$0000
    288  6     8156 FD   837C            STD HERO_G_SPEED
    289  3     8159 8E   8004            LDX #HERO_IDLE_L        * Charge a>>
    290  6     815C BF   8390            STX HERO_ANIMATION_ADR      * Sauv>>
    291  5     815F 16   00A4            LBRA Hero_MoveUpdatePos
    292        8162               Hero_NotLeftOrRight_11
    293  5     8162 1083 0600            CMPD #HERO_JOG_SPD_LIMIT
    294  3     8166 2F   16              BLE Hero_NotLeftOrRight_12
    295  6     8168 FD   837C            STD HERO_G_SPEED
    296  3     816B 8E   8057            LDX #HERO_WALK_L        * Charge a>>
    297  6     816E BF   8390            STX HERO_ANIMATION_ADR      * Sauv>>
    298  3     8171 20   0E              BRA Hero_NotLeftOrRight_13
    299        8173               Hero_NotLeftOrRight_12
    300  6     8173 FD   837C            STD HERO_G_SPEED
    301        8176               Hero_NotLeftOrRight_13
    302  5     8176 16   008D            LBRA Hero_MoveUpdatePos
    303
    304        8179               Hero_MoveLeft                      * XREF>>
    305  6     8179 FC   837C            LDD HERO_G_SPEED            * Char>>
    306  5     817C 1083 0000            CMPD #$0000                 * Test>>
    307  3     8180 2F   1C              BLE Hero_MoveLeft_00        * BRAN>>
    308  7     8182 B3   838C            SUBD HERO_DECELERATION      * orie>>
    309  3     8185 24   11              BCC Hero_MoveLeft_03        * BRAN>>
    310  3     8187 CC   0000            LDD #$0000
    311  7     818A B3   838C            SUBD HERO_DECELERATION      * si l>>
    312        818D               Hero_MoveLeft_03
    313  6     818D FD   837C            STD HERO_G_SPEED            * On s>>
    314  5     8190 16   0073            LBRA Hero_MoveUpdatePos           >>
    315        8193               Hero_MoveLeft_00                         >>
    316                           *      CMPD #$0000                       >>
    317                           *      BNE Hero_MoveLeft_02        * BRAN>>
    318                           *      LDD #$FEFF                        >>
    319                           *Hero_MoveLeft_02
    320  8     8193 10B3 8388            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    321  3     8197 27   6D              BEQ Hero_MoveUpdatePos      * vite>>
    322  7     8199 B3   838A            SUBD HERO_ACCELERATION      * acce>>
    323  8     819C 10B3 8388            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    324  3     81A0 2E   1A              BGT Hero_MoveLeft_01        * BRAN>>
    325  3     81A2 8E   8057            LDX #HERO_RUN_L        * Charge an>>
    326  6     81A5 BF   8390            STX HERO_ANIMATION_ADR      * Sauv>>
    327  6     81A8 FC   8388            LDD HERO_NEG_TOP_SPEED      * Limi>>
    328  6     81AB FD   837C            STD HERO_G_SPEED            * Enre>>
    329  5     81AE 16   0055            LBRA Hero_MoveUpdatePos     * Mise>>
    330        81B1               Hero_MoveLeft_01
    331  6     81B1 FD   837C            STD HERO_G_SPEED            * Enre>>
    332  3     81B4 8E   8057            LDX #HERO_WALK_L        * Charge a>>
    333  6     81B7 BF   8390            STX HERO_ANIMATION_ADR      * Sauv>>
    334  5     81BA 16   0049            LBRA Hero_MoveUpdatePos
    335
    336        81BD               Hero_MoveRight                  * XREF: H>>
    337  6     81BD FC   837C            LDD HERO_G_SPEED        * Chargeme>>
    338  5     81C0 1083 0000            CMPD #$0000                 * Test>>
    339  3     81C4 2C   19              BGE Hero_MoveRight_00       * BRAN>>
    340  7     81C6 F3   838C            ADDD HERO_DECELERATION      * orie>>
    341  3     81C9 24   0E              BCC Hero_MoveRight_03       * BRAN>>
    342  6     81CB FC   838C            LDD HERO_DECELERATION   * si la vi>>
    343        81CE               Hero_MoveRight_03
    344  6     81CE FD   837C            STD HERO_G_SPEED        * On stock>>
    345  5     81D1 16   0032            LBRA Hero_MoveUpdatePos           >>
    346        81D4               Hero_MoveRight_00                  * Orie>>
    347                           *      CMPD #$0000                       >>
    348                           *      BNE Hero_MoveRight_02       * BRAN>>
    349                           *      LDD #$0100                        >>
    350                           *Hero_MoveRight_02
    351  8     81D4 10B3 8386            CMPD HERO_TOP_SPEED         * Comp>>
    352  3     81D8 27   2C              BEQ Hero_MoveUpdatePos      * vite>>
    353  7     81DA F3   838A            ADDD HERO_ACCELERATION      * acce>>
    354  8     81DD 10B3 8386            CMPD HERO_TOP_SPEED         * Comp>>
    355  3     81E1 2D   1A              BLT Hero_MoveRight_01       * BRAN>>
    356  3     81E3 8E   8057            LDX #HERO_RUN_R                   >>
    357  6     81E6 BF   8390            STX HERO_ANIMATION_ADR      * Sauv>>
    358  6     81E9 FC   8386            LDD HERO_TOP_SPEED          * Limi>>
    359  6     81EC FD   837C            STD HERO_G_SPEED            * Enre>>
    360  5     81EF 16   0014            LBRA Hero_MoveUpdatePos           >>
    361        81F2               Hero_MoveRight_01
    362  6     81F2 FD   837C            STD HERO_G_SPEED            * Enre>>
    363  3     81F5 8E   8057            LDX #HERO_WALK_R        * Charge a>>
    364  6     81F8 BF   8390            STX HERO_ANIMATION_ADR      * Sauv>>
    365
    366        81FB               Hero_MoveUpdatePos
    367  6     81FB FC   837C            LDD HERO_G_SPEED            * Char>>
    368  6     81FE FD   837E            STD HERO_X_SPEED        * Stockage>>
    369  5     8201 1083 0000            CMPD #$0000                 * Test>>
    370  3     8205 2D   19              BLT Hero_MoveUpdatePos_00   * BRAN>>
    371  7     8207 F3   8380            ADDD HERO_X_SPS         * Ajout du>>
    372  5     820A F7   8381            STB HERO_X_SPS+1            * sauv>>
    373  6     820D 1F   89              TFR A,B                     * Divi>>
    374  5     820F FB   837A            ADDB HERO_X_POS                   >>
    375  3     8212 20   23              BRA Hero_MoveUpdatePos_01
    376        8214               Hero_MoveUpdatePos_V00
    377        8214 00                   FCB $00
    378        8215               Hero_MoveUpdatePos_00
    379  3     8215 CC   0000            LDD #$0000
    380  7     8218 B3   837E            SUBD HERO_X_SPEED           * La v>>
    381  7     821B F3   8380            ADDD HERO_X_SPS         * Ajout du>>
    382  5     821E F7   8381            STB HERO_X_SPS+1            * sauv>>
    383  6     8221 1F   89              TFR A,B                     * Divi>>
    384  5     8223 F7   821F            STB Hero_MoveUpdatePos_V00
    385  5     8226 F6   837A            LDB HERO_X_POS
    386  5     8229 F0   821F            SUBB Hero_MoveUpdatePos_V00 * Ajou>>
    387        822C               Hero_MoveUpdatePos_01
    388                           *      CMPB #$50                         >>
    389                           *      BLE Hero_MoveUpdatePos_02   * Bute>>
    390                           *      LDB #$50                          >>
    391                           *Hero_MoveUpdatePos_02
    392                           *    CMPB #$0C                           >>
    393                           *      BGE Hero_MoveUpdatePos_03   * Bute>>
    394                           *      LDB #$0C                          >>
    395        822C               Hero_MoveUpdatePos_03
    396  5     822C F7   837A            STB HERO_X_POS
    397  2     822F C6   00              LDB #$00
(398) Expression Error
    398        STB TEST1X10_X_SPS                 * reste subpixel est sur >>
    399  3     8231 CC   0000            LDD #$0000                  * TODO>>
    400  6     8234 FD   8382            STD HERO_Y_SPEED
    401  6     8237 1F   89              TFR A,B                     * divi>>
    402  5     8239 FB   837B            ADDB HERO_Y_POS
    403  5     823C F7   837B            STB HERO_Y_POS
    404  5     823F 39                   RTS
    405
    406                           * TODO : Braking Animation
    407                           * Sonic enters his braking animation when>>
    408                           * In Sonic 1 and Sonic CD, he then stays >>
    409                           * In the other 3 games, Sonic returns to >>
    410
    411        8240               Compute_Position
    412  5     8240 B6   837A            LDA HERO_X_POS
    413  2     8243 44                   LSRA
    414  3     8244 25   25              BCS Compute_Position_01
    415  5     8246 B7   8286            STA Compute_Position_02+1
    416  2     8249 86   28              LDA #$28
    417  5     824B F6   837B            LDB HERO_Y_POS
    418  2     824E 5A                   DECB
    419  11    824F 3D                   MUL
    420  7     8250 F3   8285            ADDD Compute_Position_02
(421) Expression Error
    421        STD POS_HERO0000
    422  4     8253 C3   2000            ADDD #$2000
(423) Expression Error
    423        STD POS_HERO0000+2
    424  5     8256 39                   RTS
    425        8257               Compute_Position_01
    426  5     8257 B7   8286            STA Compute_Position_02+1
    427  2     825A 86   28              LDA #$28
    428  5     825C F6   837B            LDB HERO_Y_POS
    429  2     825F 5A                   DECB
    430  11    8260 3D                   MUL
    431  7     8261 F3   8285            ADDD Compute_Position_02
    432  4     8264 C3   2000            ADDD #$2000
(433) Expression Error
    433        STD POS_HERO0000
    434  4     8267 83   1FFF            SUBD #$1FFF
(435) Expression Error
    435        STD POS_HERO0000+2
    436  5     826A 39                   RTS
    437        826B               Compute_Position_02
    438        826B 0000                 FDB $0000
    439                            
    440                           *****************************************>>
    441                           * Affichage de l arriere plan xxx cycles
    442                           *****************************************>>
    443        826D               DRAW_RAM_DATA_TO_CART_160x200
    444  5+3   826D 34   48              PSHS U,DP            * sauvegarde >>
    445  7     826F 10FF 8000            STS >SSAVE
    446                            
    447  4     8273 10CE 1F40            LDS #FINECRANA       * init pointe>>
    448  3     8277 CE   A000            LDU #$A000
    449
    450        827A               DRAW_RAM_DATA_TO_CART_160x200A
    451  5+7   827A 37   3E              PULU A,B,DP,X,Y
    452  5+7   827C 34   3E              PSHS Y,X,DP,B,A
    453  5+7   827E 37   3E              PULU A,B,DP,X,Y
    454  5+7   8280 34   3E              PSHS Y,X,DP,B,A
    455  5+7   8282 37   3E              PULU A,B,DP,X,Y
    456  5+7   8284 34   3E              PSHS Y,X,DP,B,A
    457  5+7   8286 37   3E              PULU A,B,DP,X,Y
    458  5+7   8288 34   3E              PSHS Y,X,DP,B,A
    459  5+7   828A 37   3E              PULU A,B,DP,X,Y
    460  5+7   828C 34   3E              PSHS Y,X,DP,B,A
    461  5+7   828E 37   3E              PULU A,B,DP,X,Y
    462  5+7   8290 34   3E              PSHS Y,X,DP,B,A
    463  5     8292 118C 0014            CMPS #DEBUTECRANA
    464  3     8296 26   FC              BNE DRAW_RAM_DATA_TO_CART_160x200A>>
    465  5+7   8298 37   3E              PULU A,B,DP,X,Y
    466  5+7   829A 34   3E              PSHS Y,X,DP,B,A
    467  5+7   829C 37   3E              PULU A,B,DP,X,Y
    468  5+7   829E 34   3E              PSHS Y,X,DP,B,A
    469  5+6   82A0 37   3C              PULU B,DP,X,Y
    470  5+6   82A2 34   3C              PSHS Y,X,DP,B
    471
    472  4     82A4 10CE 3F40            LDS #FINECRANB       * init pointe>>
    473  3     82A8 CE   C000            LDU #$C000
    474
    475        82AB               DRAW_RAM_DATA_TO_CART_160x200B
    476  5+7   82AB 37   3E              PULU A,B,DP,X,Y
    477  5+7   82AD 34   3E              PSHS Y,X,DP,B,A
    478  5+7   82AF 37   3E              PULU A,B,DP,X,Y
    479  5+7   82B1 34   3E              PSHS Y,X,DP,B,A
    480  5+7   82B3 37   3E              PULU A,B,DP,X,Y
    481  5+7   82B5 34   3E              PSHS Y,X,DP,B,A
    482  5+7   82B7 37   3E              PULU A,B,DP,X,Y
    483  5+7   82B9 34   3E              PSHS Y,X,DP,B,A
    484  5+7   82BB 37   3E              PULU A,B,DP,X,Y
    485  5+7   82BD 34   3E              PSHS Y,X,DP,B,A
    486  5+7   82BF 37   3E              PULU A,B,DP,X,Y
    487  5+7   82C1 34   3E              PSHS Y,X,DP,B,A
    488  5     82C3 118C 2014            CMPS #DEBUTECRANB
    489  3     82C7 26   FC              BNE DRAW_RAM_DATA_TO_CART_160x200B>>
    490  5+7   82C9 37   3E              PULU A,B,DP,X,Y
    491  5+7   82CB 34   3E              PSHS Y,X,DP,B,A
    492  5+7   82CD 37   3E              PULU A,B,DP,X,Y
    493  5+7   82CF 34   3E              PSHS Y,X,DP,B,A
    494  5+6   82D1 37   3C              PULU B,DP,X,Y
    495  5+6   82D3 34   3C              PSHS Y,X,DP,B
    496
    497  7     82D5 10FE 8000            LDS  >SSAVE          * rechargemen>>
    498  5+3   82D9 35   48              PULS U,DP
    499  5     82DB 39                   RTS
    500                            
    501                           *****************************************>>
    502                           * Palette de 16 couleurs
    503                           *****************************************>>
    504        82DC               TABPALETTE
    505        82DC 0111                 FDB $0111     * index:0  R:51  V:5>>
    506        82DE 0143                 FDB $0143     * index:1  R:108 V:1>>
    507        82E0 0113                 FDB $0113     * index:2  R:107 V:5>>
    508        82E2 0484                 FDB $0484     * index:3  R:132 V:1>>
    509        82E4 0112                 FDB $0112     * index:4  R:92  V:6>>
    510        82E6 0247                 FDB $0247     * index:5  R:180 V:1>>
    511        82E8 0233                 FDB $0233     * index:6  R:116 V:1>>
    512        82EA 0177                 FDB $0177     * index:7  R:172 V:1>>
    513        82EC 0111                 FDB $0111     * index:8  R:60  V:5>>
    514        82EE 0016                 FDB $0016     * index:9  R:164 V:6>>
    515        82F0 0698                 FDB $0698     * index:10 R:187 V:1>>
    516        82F2 0344                 FDB $0344     * index:11 R:132 V:1>>
    517        82F4 0221                 FDB $0221     * index:12 R:68  V:9>>
    518        82F6 0452                 FDB $0452     * index:13 R:92  V:1>>
    519        82F8 0356                 FDB $0356     * index:14 R:164 V:1>>
    520        82FA 0125                 FDB $0125     * index:15 R:140 V:1>>
    521        82FC               FINTABPALETTE
    522
    523                           *****************************************>>
    524                           * HERO Animations
    525                           *****************************************>>
    526
    527        82FC               HERO_ANIMATION_LOAD                      >>
    528  6     82FC BF   8390            STX HERO_ANIMATION_ADR
    529  6     82FF BF   8392            STX HERO_ANIMATION_RTN_ADR
    530  7     8302 7F   8399            CLR HERO_ANIMATION_IMC            >>
    531        8305               HERO_ANIMATION_LOAD_00
    532  5+1   8305 EC   1E              LDD -2,X                          >>
    533  2     8307 81   00              CMPA #$00                         >>
    534  3     8309 27   21              BEQ HERO_ANIMATION_LOAD_01
    535  5     830B F0   837C            SUBB HERO_G_SPEED                 >>
    536  3     830E 24   1C              BCC HERO_ANIMATION_LOAD_01
    537  2     8310 C6   01              LDB #$01                          >>
    538        8312               HERO_ANIMATION_LOAD_01
    539  5     8312 F7   839B            STB HERO_ANIMATION_FRR            >>
    540  5     8315 B6   8399            LDA HERO_ANIMATION_IMC
    541  2     8318 C6   05              LDB #$05
    542  11    831A 3D                   MUL
    543  7     831B F3   8390            ADDD HERO_ANIMATION_ADR
    544  6     831E 1F   02              TFR D,Y
    545  4+0   8320 E6   A4              LDB ,Y
    546  2     8322 C1   1F              CMPB #$1F                         >>
    547  3     8324 22   28              BHI HERO_ANIMATION_LOAD_NOPAGE
    548  5     8326 F7   8394            STB HERO_ANIMATION_PAG            >>
    549  5+1   8329 AE   21              LDX 1,Y
    550  6     832B BF   8397            STX HERO_ANIMATION_DRW
    551  5+1   832E AE   23              LDX 3,Y
    552  6     8330 BF   8395            STX HERO_ANIMATION_DEL
    553  5     8333 39                   RTS
    554        8334               HERO_ANIMATION_LOAD_NOPAGE
    555  2     8334 C1   FF              CMPB #$FF
    556  3     8336 26   26              BNE HERO_ANIMATION_LOAD_FE
    557  5+1   8338 AE   23              LDX 3,Y
    558  6     833A BF   8399            STX HERO_ANIMATION_IMC            >>
    559  5+1   833D AE   21              LDX 1,Y
    560  6     833F BF   8390            STX HERO_ANIMATION_ADR
    561  3     8342 20   DB              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    562        8344               HERO_ANIMATION_LOAD_FE
    563  6     8344 BE   8392            LDX HERO_ANIMATION_RTN_ADR  * RETU>>
    564  6     8347 BF   8390            STX HERO_ANIMATION_ADR
    565  5     834A F6   839A            LDB HERO_ANIMATION_RTN_IMC
    566  5     834D F7   8399            STB HERO_ANIMATION_IMC
    567  3     8350 20   CD              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    568
    569        8352               HERO_ANIMATION_NEXT
    570  7     8352 7A   839B            DEC HERO_ANIMATION_FRR
    571  3     8355 27   1B              BEQ HERO_ANIMATION_NEXT_00  * BRAN>>
    572  5     8357 39                   RTS
    573        8358               HERO_ANIMATION_NEXT_00
    574  7     8358 7C   8399            INC HERO_ANIMATION_IMC
    575  6     835B BE   8390            LDX HERO_ANIMATION_ADR
    576  3     835E 20   BF              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    577                            
    578                           * 215 cycles total
    579                           *   SAMPLE CODE ANIMATION
    580                           *      ---------------------
    581                           *      FDB $0018            * 00 Absolute>>
    582                           *HERO_IDLE_L
    583                           *      FCB $01                     * Page>>
    584                           *      FDB $A000            * Adresse drw>>
    585                           *      FDB $A000            * Adresse del>>
    586                           *
    587                           *      FCB $FF                     * FF S>>
    588                           *      FDB HERO_IDLE-C * adresse animatio>>
    589                           *      FDB $0301            * 03 image ci>>
    590                           *
    591                           *      FCB $FE                     * FE R>>
    592                           *
    593                           *      LDX #HERO_IDLE_R
    594                           *      JSR HERO_ANIMATION_LOAD
    595                           *
    596                           *      JSR HERO_ANIMATION_NEXT
    597
    598                           *****************************************>>
    599                           * HERO Variables
    600                           *****************************************>>
    601                  0400     HERO_WALK_SPD_LIMIT EQU $0400
    602                  0600     HERO_JOG_SPD_LIMIT  EQU $0600
    603        8360               HERO_X_POS
    604        8360 50                   FCB $50                     * Hori>>
    605        8361               HERO_Y_POS
    606        8361 C8                   FCB $C8                     * Vert>>
    607        8362               HERO_G_SPEED         * Ground Speed
    608        8362 0000                 FDB $0000            * First byte >>
    609        8364               HERO_X_SPEED
    610        8364 0000                 FDB $0000            * Horizontal >>
    611        8366               HERO_X_SPS
    612        8366 0000                 FDB $0000            * Subpixel X >>
    613        8368               HERO_Y_SPEED
    614        8368 0000                 FDB $0000            * Vertical Sp>>
    615        836A               HERO_Y_SPS
    616        836A 0000                 FDB $0000            * Subpixel Y >>
    617        836C               HERO_TOP_SPEED
    618        836C 0600                 FDB $0600        * vitesse maximum>>
    619        836E               HERO_NEG_TOP_SPEED
    620        836E FA00                 FDB $FA00        * vitesse maximum>>
    621        8370               HERO_ACCELERATION
    622        8370 000C                 FDB $000C        * constante accel>>
    623        8372               HERO_DECELERATION
    624        8372 0080                 FDB $0080        * constante decel>>
    625        8374               HERO_FRICTION
    626        8374 000C                 FDB $000C        * constante de fr>>
    627        8376               HERO_ANIMATION_ADR
    628        8376 0000                 FDB $0000        * Animation coura>>
    629        8378               HERO_ANIMATION_RTN_ADR
    630        8378 0000                 FDB $0000        * Animation coura>>
    631        837A               HERO_ANIMATION_PAG
    632        837A 00                   FCB $00          * Animation coura>>
    633        837B               HERO_ANIMATION_DEL
    634        837B 0000                 FDB $0000        * Animation coura>>
    635        837D               HERO_ANIMATION_DRW
    636        837D 0000                 FDB $0000        * Animation coura>>
    637        837F               HERO_ANIMATION_IMC
    638        837F 00                   FCB $00          * Animation coura>>
    639        8380               HERO_ANIMATION_RTN_IMC
    640        8380 00                   FCB $00          * Animation coura>>
    641        8381               HERO_ANIMATION_FRR
    642        8381 00                   FCB $00          * Animation coura>>

000010 Total Errors
        Expression Error      70        FDB HERO_IDLE-C * adresse animation>>
        Expression Error      79        FDB HERO_IDLE_B * animation cible
             Bad Operand     151        DEC -1,INIT_SCREEN
        Expression Error     161        JSR [HERO_ANIMATION_EFF]           >>
        Expression Error     201        ADDA B
        Expression Error     398        STB TEST1X10_X_SPS                 >>
        Expression Error     421        STD POS_HERO0000
        Expression Error     423        STD POS_HERO0000+2
        Expression Error     433        STD POS_HERO0000
        Expression Error     435        STD POS_HERO0000+2

000100 Total Symbols
     1x Unknown  Equ   0000 B
     1x Unknown  Equ   0000 C
     1x          Label 824E Compute_Position
     1x          Label 826B Compute_Position_01
     4x          Label 8285 Compute_Position_02
     1x          Equ   0014 DEBUTECRANA
     1x          Equ   2014 DEBUTECRANB
     1x          Label 8287 DRAW_RAM_DATA_TO_CART_160x200
     1x          Label 8294 DRAW_RAM_DATA_TO_CART_160x200A
     1x          Label 82C5 DRAW_RAM_DATA_TO_CART_160x200B
     1x          Equ   1F40 FINECRANA
     1x          Equ   3F40 FINECRANB
     1x          Label 8316 FINTABPALETTE
     2x          Label 838A HERO_ACCELERATION
    13x          Label 8390 HERO_ANIMATION_ADR
     1x          Label 8395 HERO_ANIMATION_DEL
     3x          Label 8397 HERO_ANIMATION_DRW
     1x Unknown  Equ   0000 HERO_ANIMATION_EFF
     2x          Label 839B HERO_ANIMATION_FRR
     5x          Label 8399 HERO_ANIMATION_IMC
     1x          Label 8316 HERO_ANIMATION_LOAD
     3x          Label 831F HERO_ANIMATION_LOAD_00
     2x          Label 832C HERO_ANIMATION_LOAD_01
     1x          Label 835E HERO_ANIMATION_LOAD_FE
     1x          Label 834E HERO_ANIMATION_LOAD_NOPAGE
     1x          Label 836C HERO_ANIMATION_NEXT
     1x          Label 8372 HERO_ANIMATION_NEXT_00
     5x          Label 8394 HERO_ANIMATION_PAG
     2x          Label 8392 HERO_ANIMATION_RTN_ADR
     1x          Label 839A HERO_ANIMATION_RTN_IMC
     4x          Label 838C HERO_DECELERATION
     2x          Label 838E HERO_FRICTION
    17x          Label 837C HERO_G_SPEED
     1x Unknown  Equ   0000 HERO_IDLE
     1x Unknown  Equ   0000 HERO_IDLE_B
     1x          Label 8004 HERO_IDLE_L
     0x          Label 803A HERO_IDLE_L2
     2x          Label 8024 HERO_IDLE_R
     2x          Equ   0600 HERO_JOG_SPD_LIMIT
     1x          Label 8112 Hero_Move
     1x          Label 8184 Hero_MoveLeft
     1x          Label 819E Hero_MoveLeft_00
     1x          Label 81BC Hero_MoveLeft_01
     1x          Label 8198 Hero_MoveLeft_03
     1x          Label 81C8 Hero_MoveRight
     1x          Label 81DF Hero_MoveRight_00
     1x          Label 81FD Hero_MoveRight_01
     1x          Label 81D9 Hero_MoveRight_03
    11x          Label 8206 Hero_MoveUpdatePos
     1x          Label 8220 Hero_MoveUpdatePos_00
     1x          Label 8237 Hero_MoveUpdatePos_01
     0x          Label 8237 Hero_MoveUpdatePos_03
     2x          Label 821F Hero_MoveUpdatePos_V00
     3x          Label 8388 HERO_NEG_TOP_SPEED
     1x          Label 811B Hero_NotLeft
     1x          Label 8122 Hero_NotLeftOrRight
     1x          Label 8159 Hero_NotLeftOrRight_00
     1x          Label 8142 Hero_NotLeftOrRight_01
     1x          Label 8153 Hero_NotLeftOrRight_02
     1x          Label 8156 Hero_NotLeftOrRight_03
     1x          Label 816D Hero_NotLeftOrRight_11
     1x          Label 817E Hero_NotLeftOrRight_12
     1x          Label 8181 Hero_NotLeftOrRight_13
     1x          Label 8057 HERO_RUN_L
     1x          Label 8057 HERO_RUN_R
     0x          Label 8050 HERO_SUBIDLE_B
     3x          Label 8386 HERO_TOP_SPEED
     2x          Label 8057 HERO_WALK_L
     2x          Label 8057 HERO_WALK_R
     0x          Equ   0400 HERO_WALK_SPD_LIMIT
     4x          Label 837A HERO_X_POS
     2x          Label 837E HERO_X_SPEED
     5x          Label 8380 HERO_X_SPS
     4x          Label 837B HERO_Y_POS
     1x          Label 8382 HERO_Y_SPEED
     0x          Label 8384 HERO_Y_SPS
     1x          Label 808F INIT_SCREEN
     0x          Equ   000D JOY_B
     0x          Equ   0005 JOY_BD
     0x          Equ   0009 JOY_BG
     1x          Label 8111 JOY_BTN_STATUS
     0x          Equ   000F JOY_C
     1x          Equ   0007 JOY_D
     2x          Label 8110 JOY_DIR_STATUS
     1x          Equ   000B JOY_G
     0x          Equ   000E JOY_H
     0x          Equ   0006 JOY_HD
     0x          Equ   000A JOY_HG
     1x          Label 80F8 JOY_READ
     1x          Label 80A6 MAIN
     4x Unknown  Equ   0000 POS_HERO0000
     3x          Label 80C5 SCRC
     3x          Label 80E3 SCRC0
     1x          Label 8063 SETPALETTE
     2x          Label 8000 SSAVE
     1x          Label 82F6 TABPALETTE
     1x Unknown  Equ   0000 TEST1X10_X_SPS
     1x          Label 80ED VSYNC
     1x          Label 80ED VSYNC_1
     1x          Label 80F2 VSYNC_2

