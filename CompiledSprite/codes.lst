/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : ./input/CODE/MAIN.ASS.TMP
 * Fichier destination : TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     20325
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        6300                      ORG $6300
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17
     18                  6205     DK_lecture               EQU $6205 * rout>>
     19                  620A     DK_piste                 EQU $620A * 2B n>>
     20                  620F     DK_secteur               EQU $620F * 1B n>>
     21                  6213     DK_destination           EQU $6213 * 2B d>>
     22                  622C     DK_dernier_bloc_a_ecrire EQU $622C * 2B f>>
     23
     24                  0014     DEBUTECRANA EQU $0014 * test pour fin sta>>
     25                  1F40     FINECRANA   EQU $1F40 * fin de la RAM A v>>
     26                  2014     DEBUTECRANB EQU $2014 * test pour fin sta>>
     27                  3F40     FINECRANB   EQU $3F40 * fin de la RAM B v>>
     28
     29                  0005     JOY_BD EQU $05 * Bas Droite
     30                  0006     JOY_HD EQU $06 * Haut Droite
     31                  0007     JOY_D  EQU $07 * Droite
     32                  0009     JOY_BG EQU $09 * Bas Gauche
     33                  000A     JOY_HG EQU $0A * Haut Gauche
     34                  000B     JOY_G  EQU $0B * Gauche
     35                  000D     JOY_B  EQU $0D * Bas
     36                  000E     JOY_H  EQU $0E * Haut
     37                  000F     JOY_C  EQU $0F * Centre
     38
     39                  9F00     HERO_POS EQU $9F00 * HERO Position
     40
     41                           *****************************************>>
     42                           * Debut du programme
     43                           *****************************************>>
     44        6300               BEGIN
     45  2     6300 1A   50              ORCC #$50     * a documenter (inte>>
     46
     47  3     6302 CC   1F40            LDD #FINECRANA
     48  6     6305 FD   9F00            STD HERO_POS
     49  3     6308 CC   3F40            LDD #FINECRANB
     50  6     630B FD   9F02            STD HERO_POS+2
     51
     52                           *****************************************>>
     53                           * Chargement des pages memoire
     54                           *****************************************>>
     55                                  * Chargement des pages depuis la d>>
     56                                  **********************************>>
     57                            
     58  3     630E CC   0004            LDD #$0004
     59  6     6311 FD   620A            STD DK_piste
     60  2     6314 86   01              LDA #$01
     61  5     6316 B7   620F            STA DK_secteur
     62  3     6319 CC   DF00            LDD #$DF00
     63  6     631C FD   622C            STD DK_dernier_bloc_a_ecrire
     64                            
     65        631F               LDPAGE_LOOP
     66  2     631F C6   04              LDB #$04
     67  5     6321 F7   E7E5            STB $E7E5 * Selection de la page e>>
     68                            
     69  2     6324 86   01              LDA #$01
     70  5     6326 B7   620F            STA DK_secteur
     71  3     6329 CC   A000            LDD #$A000
     72  6     632C FD   6213            STD DK_destination
     73  8     632F BD   6205            JSR DK_lecture
     74                            
     75                                  * Duplication de la page p en p+1
     76                                  *********************************
     77        6332               CPPAGE_LOOP
     78  2     6332 C6   65              LDB #$65                       * O>>
     79  5     6334 F7   E7E6            STB $E7E6                      * e>>
     80
     81  3     6337 CE   A000         LDU #$A000                     * Sour>>
     82  4     633A 108E 4040         LDY #$4000+64                  * Dest>>
     83  7     633E 10BF 651D            STY MEM_COPY_DATA_TO_CART_E+2
     84  4     6342 108E 2040         LDY #$2000+64                  * Dest>>
     85  8     6346 BD   6435         JSR MEM_COPY_DATA_TO_CART      * Copi>>
     86                            
     87  3     6349 CE   C000         LDU #$C000                     * Sour>>
     88  4     634C 108E 2040         LDY #$2000+64                  * Dest>>
     89  7     6350 10BF 651D            STY MEM_COPY_DATA_TO_CART_E+2
     90  4     6354 108E 0040         LDY #$0000+64                  * Dest>>
     91  8     6358 BD   6435         JSR MEM_COPY_DATA_TO_CART      * Copi>>
     92                            
     93  7     635B 7C   6333         INC CPPAGE_LOOP+1
     94  7     635E 7C   6333            INC CPPAGE_LOOP+1
     95  7     6361 7C   6320            INC LDPAGE_LOOP+1
     96  7     6364 7C   6320            INC LDPAGE_LOOP+1
     97  5     6367 F6   6320            LDB LDPAGE_LOOP+1
     98  2     636A C1   16              CMPB #$16
     99  3     636C 23   B1              BLS LDPAGE_LOOP
    100                            
    101                           *****************************************>>
    102                           * Initialisation de la routine de commuta>>
    103                           *****************************************>>
    104        636E               INIT_VID
    105  5     636E F6   6081            LDB $6081 * A documenter
    106  2     6371 CA   10              ORB #$10  * mettre le bit d4 a 1
    107  5     6373 F7   6081            STB $6081
    108  5     6376 F7   E7E7            STB $E7E7
    109  8     6379 BD   6405            JSR SCRC     * page 2 en RAM Carto>>
    110  8     637C BD   6528            JSR CLR_CART * effacement page 2
    111  8     637F BD   6405            JSR SCRC     * page 0 en RAM Carto>>
    112  8     6382 BD   6528            JSR CLR_CART * effacement page 0
    113  8     6385 BD   6405            JSR SCRC     * page 2 en RAM Carto>>
    114
    115                           *****************************************>>
    116                           * Initialisation du mode video
    117                           *****************************************>>
    118  2     6388 86   7B              LDA #$7B      * passage en mode 16>>
    119  5     638A B7   E7DC            STA $E7DC
    120
    121                           *****************************************>>
    122                           * Initialisation de la palette de couleur>>
    123                           *****************************************>>
    124  4     638D 108E 6564            LDY #TABPALETTE
    125  2     6391 4F                   CLRA
    126        6392               SETPALETTE
    127  5+1   6392 34   02              PSHS A
    128  2     6394 48                   ASLA
    129  5     6395 B7   E7DB            STA $E7DB
    130  5+3   6398 EC   A1              LDD ,Y++
    131  5     639A F7   E7DA            STB $E7DA
    132  5     639D B7   E7DA            STA $E7DA
    133  5+1   63A0 35   02              PULS A
    134  2     63A2 4C                   INCA
    135  5     63A3 108C 6584            CMPY #FINTABPALETTE
    136  3     63A7 26   E9              BNE    SETPALETTE
    137
    138                           *****************************************>>
    139                           * Initialisation des sprites
    140                           *****************************************>>
    141  3     63A9 8E   67E6            LDX #HERO_IDLE_R
    142  6     63AC BF   68C9            STX HERO_ANIMATION_ADR_OLD
    143  8     63AF BD   6727            JSR HERO_ANIMATION_LOAD
    144
    145                           *****************************************>>
    146                           * Boucle principale
    147                           *****************************************>>
    148                                  * Init routine effacement sprite
    149  5     63B2 F6   68CD            LDB HERO_ANIMATION_PAG            >>
    150  5     63B5 F7   68CF            STB HERO_ANIMATION_PAG_DEL
    151  5     63B8 F7   E7E5            STB $E7E5                         >>
    152  7+3   63BB AD   9F 68D5         JSR [HERO_ANIMATION_DRW]          >>
    153  8     63BF BD   6405            JSR SCRC
    154  3     63C2 20   0D              BRA MAIN_0
    155                            
    156        63C4               MAIN
    157                                  * Effacement et affichage des spri>>
    158  6     63C4 FC   68CF            LDD HERO_ANIMATION_PAG_DEL        >>
    159  5     63C7 F7   68CF            STB HERO_ANIMATION_PAG_DEL
    160  5     63CA B7   E7E5            STA $E7E5                         >>
    161  7+3   63CD AD   9F 68D1         JSR [HERO_ANIMATION_DEL]          >>
    162        63D1               MAIN_0
    163  6     63D1 FC   68D3            LDD HERO_ANIMATION_DEL+2          >>
    164  6     63D4 FD   68D1            STD HERO_ANIMATION_DEL
    165
    166                                  * Gestion des deplacements
    167  8     63D7 BD   6584            JSR JOY_READ
    168  8     63DA BD   659E            JSR Hero_Move
    169  8     63DD BD   66EE            JSR Compute_Position
    170  6     63E0 BE   68C7            LDX HERO_ANIMATION_ADR
    171  7     63E3 BC   68C9            CMPX HERO_ANIMATION_ADR_OLD
    172  3     63E6 26   05              BNE MAIN_1
    173  8     63E8 BD   6793            JSR HERO_ANIMATION_NEXT
    174  3     63EB 20   06              BRA MAIN_2
    175        63ED               MAIN_1
    176  6     63ED BF   68C9            STX HERO_ANIMATION_ADR_OLD
    177  8     63F0 BD   6727            JSR HERO_ANIMATION_LOAD
    178        63F3               MAIN_2
    179                            
    180  5     63F3 F6   68CD            LDB HERO_ANIMATION_PAG            >>
    181  5     63F6 F7   68D0            STB HERO_ANIMATION_PAG_DEL+1
    182  5     63F9 F7   E7E5            STB $E7E5                         >>
    183  7+3   63FC AD   9F 68D5         JSR [HERO_ANIMATION_DRW]          >>
    184                            
    185  8     6400 BD   6405            JSR SCRC                          >>
    186  3     6403 20   BF              BRA MAIN
    187
    188                           *****************************************>>
    189                           * Changement de page ESPACE ECRAN (affich>>
    190                           *      $E7DD determine la page affichee d>>
    191                           *      D7=0 D6=0 D5=0 D4=0 (#$0_) : page >>
    192                           *      D7=0 D6=1 D5=0 D4=0 (#$4_) : page >>
    193                           *      D7=1 D6=0 D5=0 D4=0 (#$8_) : page >>
    194                           *      D7=1 D6=1 D5=0 D4=0 (#$C_) : page >>
    195                           *   D3 D2 D1 D0  (#$_0 a #$_F) : couleur >>
    196                           *   Remarque : D5 et D4 utilisable unique>>
    197                           *
    198                           * Changement de page ESPACE CARTOUCHE (ec>>
    199                           *      $E7E6 determine la page affichee d>>
    200                           *   D5 : 1 = espace cartouche recouvert p>>
    201                           *   D4 : 0 = CAS1N valide : banques 0-15 >>
    202                           *      D5=1 D4=0 D3=0 D2=0 D1=0 D0=0 (#$6>>
    203                           *   ...
    204                           *      D5=1 D4=0 D3=1 D2=1 D1=1 D0=1 (#$6>>
    205                           *      D5=1 D4=1 D3=0 D2=0 D1=0 D0=0 (#$7>>
    206                           *   ...
    207                           *      D5=1 D4=1 D3=1 D2=1 D1=1 D0=1 (#$7>>
    208                           *****************************************>>
    209        6405               SCRC
    210  8     6405 BD   642A            JSR VSYNC
    211
    212  5     6408 F6   6421            LDB SCRC0+1
    213  2     640B C4   01              ANDB #$01
    214  5     640D FB   68CE            ADDB HERO_ANIMATION_PAG_REF
    215  5     6410 F7   68CD            STB HERO_ANIMATION_PAG
    216                            
    217  5     6413 F6   6421            LDB SCRC0+1   * charge la valeur d>>
    218  2     6416 C4   80              ANDB #$80     * permute #$00 ou #$>>
    219  2     6418 CA   00              ORB #$00      * recharger la coule>>
    220  5     641A F7   E7DD            STB $E7DD     * changement page da>>
    221  7     641D 73   6421            COM SCRC0+1   * modification du co>>
    222        6420               SCRC0
    223  2     6420 C6   00              LDB #$00
    224  2     6422 C4   02              ANDB #$02     * permute #$60 ou #$>>
    225  2     6424 CA   60              ORB #$60      * espace cartouche r>>
    226  5     6426 F7   E7E6            STB $E7E6     * changement page da>>
    227  5     6429 39                   RTS                  * E7E6 D5=1 p>>
    228                                                       * CAS1N : ban>>
    229
    230                           *****************************************>>
    231                           * Attente VBL
    232                           *****************************************>>
    233        642A               VSYNC
    234        642A               VSYNC_1
    235  7     642A 7D   E7E7            TST    $E7E7
    236  3     642D 2A   FB              BPL    VSYNC_1
    237        642F               VSYNC_2
    238  7     642F 7D   E7E7            TST    $E7E7
    239  3     6432 2B   FB              BMI    VSYNC_2
    240  5     6434 39                   RTS
    241
    242                           *****************************************>>
    243                           * Copie Memoire de la zone donnee vers ca>>
    244                           * Cycles en fonction de l'implementation
    245                           * 256 octets (-128 a 127) x 64  boucles (>>
    246                           * 128 octets (-64  a 63)  x 128 boucles (>>
    247                           * 32  octets (-16  a 15)  x 512 boucles (>>
    248                           *****************************************>>
    249                            
    250        6435               MEM_COPY_DATA_TO_CART
    251  7     6435 10FF 6525        STS MEM_COPY_DATA_TO_CART_S+2  * sauve>>
    252  6     6439 1F   34          TFR U,S
    253        643B               MEM_COPY_DATA_TO_CART_LOOP
    254  5+6   643B 35   56          PULS       D,X,U
    255  5+1   643D ED   A8 C0       STD -64,Y
    256  5+1   6440 AF   A8 C2       STX -62,Y
    257  5+1   6443 EF   A8 C4       STU -60,Y
    258  5+6   6446 35   56          PULS       D,X,U
    259  5+1   6448 ED   A8 C6       STD -58,Y
    260  5+1   644B AF   A8 C8       STX -56,Y
    261  5+1   644E EF   A8 CA       STU -54,Y
    262  5+6   6451 35   56          PULS       D,X,U
    263  5+1   6453 ED   A8 CC       STD -52,Y
    264  5+1   6456 AF   A8 CE       STX -50,Y
    265  5+1   6459 EF   A8 D0       STU -48,Y
    266  5+6   645C 35   56          PULS       D,X,U
    267  5+1   645E ED   A8 D2       STD -46,Y
    268  5+1   6461 AF   A8 D4       STX -44,Y
    269  5+1   6464 EF   A8 D6       STU -42,Y
    270  5+6   6467 35   56          PULS       D,X,U
    271  5+1   6469 ED   A8 D8       STD -40,Y
    272  5+1   646C AF   A8 DA       STX -38,Y
    273  5+1   646F EF   A8 DC       STU -36,Y
    274  5+6   6472 35   56          PULS       D,X,U
    275  5+1   6474 ED   A8 DE       STD -34,Y
    276  5+1   6477 AF   A8 E0       STX -32,Y
    277  5+1   647A EF   A8 E2       STU -30,Y
    278  5+6   647D 35   56          PULS       D,X,U
    279  5+1   647F ED   A8 E4       STD -28,Y
    280  5+1   6482 AF   A8 E6       STX -26,Y
    281  5+1   6485 EF   A8 E8       STU -24,Y
    282  5+6   6488 35   56          PULS       D,X,U
    283  5+1   648A ED   A8 EA       STD -22,Y
    284  5+1   648D AF   A8 EC       STX -20,Y
    285  5+1   6490 EF   A8 EE       STU -18,Y
    286  5+6   6493 35   56          PULS       D,X,U
    287  5+1   6495 ED   30          STD -16,Y
    288  5+1   6497 AF   32          STX -14,Y
    289  5+1   6499 EF   34          STU -12,Y
    290  5+6   649B 35   56          PULS       D,X,U
    291  5+1   649D ED   36          STD -10,Y
    292  5+1   649F AF   38          STX -8,Y
    293  5+1   64A1 EF   3A          STU -6,Y
    294  5+6   64A3 35   56          PULS       D,X,U
    295  5+1   64A5 ED   3C          STD -4,Y
    296  5+1   64A7 AF   3E          STX -2,Y
    297  5+0   64A9 EF   A4          STU ,Y
    298  5+6   64AB 35   56          PULS       D,X,U
    299  5+1   64AD ED   22          STD 2,Y
    300  5+1   64AF AF   24          STX 4,Y
    301  5+1   64B1 EF   26          STU 6,Y
    302  5+6   64B3 35   56          PULS       D,X,U
    303  5+1   64B5 ED   28          STD 8,Y
    304  5+1   64B7 AF   2A          STX 10,Y
    305  5+1   64B9 EF   2C          STU 12,Y
    306  5+6   64BB 35   56          PULS       D,X,U
    307  5+1   64BD ED   2E          STD 14,Y
    308  5+1   64BF AF   A8 10       STX 16,Y
    309  5+1   64C2 EF   A8 12       STU 18,Y
    310  5+6   64C5 35   56          PULS       D,X,U
    311  5+1   64C7 ED   A8 14       STD 20,Y
    312  5+1   64CA AF   A8 16       STX 22,Y
    313  5+1   64CD EF   A8 18       STU 24,Y
    314  5+6   64D0 35   56          PULS       D,X,U
    315  5+1   64D2 ED   A8 1A       STD 26,Y
    316  5+1   64D5 AF   A8 1C       STX 28,Y
    317  5+1   64D8 EF   A8 1E       STU 30,Y
    318  5+6   64DB 35   56          PULS       D,X,U
    319  5+1   64DD ED   A8 20       STD 32,Y
    320  5+1   64E0 AF   A8 22       STX 34,Y
    321  5+1   64E3 EF   A8 24       STU 36,Y
    322  5+6   64E6 35   56          PULS       D,X,U
    323  5+1   64E8 ED   A8 26       STD 38,Y
    324  5+1   64EB AF   A8 28       STX 40,Y
    325  5+1   64EE EF   A8 2A       STU 42,Y
    326  5+6   64F1 35   56          PULS       D,X,U
    327  5+1   64F3 ED   A8 2C       STD 44,Y
    328  5+1   64F6 AF   A8 2E       STX 46,Y
    329  5+1   64F9 EF   A8 30       STU 48,Y
    330  5+6   64FC 35   56          PULS       D,X,U
    331  5+1   64FE ED   A8 32       STD 50,Y
    332  5+1   6501 AF   A8 34       STX 52,Y
    333  5+1   6504 EF   A8 36       STU 54,Y
    334  5+6   6507 35   56          PULS       D,X,U
    335  5+1   6509 ED   A8 38       STD 56,Y
    336  5+1   650C AF   A8 3A       STX 58,Y
    337  5+1   650F EF   A8 3C       STU 60,Y
    338  5+2   6512 35   06          PULS       D
    339  5+1   6514 ED   A8 3E       STD 62,Y
    340  4+4   6517 31   A9 0080     LEAY 128,Y
    341        651B               MEM_COPY_DATA_TO_CART_E
    342  5     651B 108C 00C0        CMPY    #$00C0
    343  6     651F 1026 FF18        LBNE    MEM_COPY_DATA_TO_CART_LOOP
    344        6523               MEM_COPY_DATA_TO_CART_S
    345  4     6523 10CE 0000        LDS     #$0000    * Rechargement du po>>
    346  5     6527 39               RTS
    347
    348                           *****************************************>>
    349                           * Effacement memoire Cartouche (27000 cy)>>
    350                           *****************************************>>
    351        6528               CLR_CART
    352  5+3   6528 34   48           PSHS U,DP
    353  7     652A 10FF 655F         STS CLR_CART_3+2
    354  4     652E 10CE 4000         LDS #$4000
    355  3     6532 CE   0000         LDU #$0000
    356  4     6535 108E 0000         LDY #$0000
    357  3     6539 8E   0000         LDX #$0000
    358  3     653C CC   0000         LDD #$0000
    359  6     653F 1F   8B           TFR A,DP
    360        6541               CLR_CART_2
    361  5+9   6541 34   7E           PSHS U,Y,X,DP,B,A
    362  5+9   6543 34   7E           PSHS U,Y,X,DP,B,A
    363  5+9   6545 34   7E           PSHS U,Y,X,DP,B,A
    364  5+9   6547 34   7E           PSHS U,Y,X,DP,B,A
    365  5+9   6549 34   7E           PSHS U,Y,X,DP,B,A
    366  5+9   654B 34   7E           PSHS U,Y,X,DP,B,A
    367  5+9   654D 34   7E           PSHS U,Y,X,DP,B,A
    368  5+9   654F 34   7E           PSHS U,Y,X,DP,B,A
    369  5+9   6551 34   7E           PSHS U,Y,X,DP,B,A
    370  5+9   6553 34   7E           PSHS U,Y,X,DP,B,A
    371  5     6555 118C 0004         CMPS #$0004
    372  3     6559 26   E6           BNE CLR_CART_2
    373  5+4   655B 34   60           PSHS U,Y
    374        655D               CLR_CART_3
    375  4     655D 10CE 0000         LDS #$0000
    376  5+3   6561 35   48           PULS DP,U
    377  5     6563 39                RTS
    378                            
    379                           *****************************************>>
    380                           * Affichage de l arriere plan 57900 cycle>>
    381                           *****************************************>>
    382                           *DRAW_RAM_DATA_TO_CART_160x200
    383                           *      PSHS U,DP            * sauvegarde >>
    384                           *      STS DRAW_RAM_DATA_TO_CART_160x200A>>
    385                           *
    386                           *      LDS #FINECRANA       * init pointe>>
    387                           *      LDU #$A000
    388                           *
    389                           *DRAW_RAM_DATA_TO_CART_160x200A
    390                           *      PULU A,B,DP,X,Y
    391                           *      PSHS Y,X,DP,B,A
    392                           *      PULU A,B,DP,X,Y
    393                           *      PSHS Y,X,DP,B,A
    394                           *      PULU A,B,DP,X,Y
    395                           *      PSHS Y,X,DP,B,A
    396                           *      PULU A,B,DP,X,Y
    397                           *      PSHS Y,X,DP,B,A
    398                           *      PULU A,B,DP,X,Y
    399                           *      PSHS Y,X,DP,B,A
    400                           *      PULU A,B,DP,X,Y
    401                           *      PSHS Y,X,DP,B,A
    402                           *      CMPS #DEBUTECRANA
    403                           *      BNE DRAW_RAM_DATA_TO_CART_160x200A>>
    404                           *      PULU A,B,DP,X,Y
    405                           *      PSHS Y,X,DP,B,A
    406                           *      PULU A,B,DP,X,Y
    407                           *      PSHS Y,X,DP,B,A
    408                           *      PULU B,DP,X,Y
    409                           *      PSHS Y,X,DP,B
    410                           *
    411                           *      LDS #FINECRANB       * init pointe>>
    412                           *      LDU #$C000
    413                           *
    414                           *DRAW_RAM_DATA_TO_CART_160x200B
    415                           *      PULU A,B,DP,X,Y
    416                           *      PSHS Y,X,DP,B,A
    417                           *      PULU A,B,DP,X,Y
    418                           *      PSHS Y,X,DP,B,A
    419                           *      PULU A,B,DP,X,Y
    420                           *      PSHS Y,X,DP,B,A
    421                           *      PULU A,B,DP,X,Y
    422                           *      PSHS Y,X,DP,B,A
    423                           *      PULU A,B,DP,X,Y
    424                           *      PSHS Y,X,DP,B,A
    425                           *      PULU A,B,DP,X,Y
    426                           *      PSHS Y,X,DP,B,A
    427                           *      CMPS #DEBUTECRANB
    428                           *      BNE DRAW_RAM_DATA_TO_CART_160x200B>>
    429                           *      PULU A,B,DP,X,Y
    430                           *      PSHS Y,X,DP,B,A
    431                           *      PULU A,B,DP,X,Y
    432                           *      PSHS Y,X,DP,B,A
    433                           *      PULU B,DP,X,Y
    434                           *      PSHS Y,X,DP,B
    435                           *DRAW_RAM_DATA_TO_CART_160x200A_E
    436                           *      LDS  #$0000 * rechargement des reg>>
    437                           *      PULS U,DP
    438                           *      RTS
    439
    440                           *****************************************>>
    441                           * Palette de 16 couleurs
    442                           *****************************************>>
    443        6564               TABPALETTE
    444        6564 0000                 FDB $0000     * index:0  R:0   V:0>>
    445        6566 0C30                 FDB $0c30     * index:1  R:37  V:1>>
    446        6568 0D10                 FDB $0d10     * index:2  R:0   V:1>>
    447        656A 0800                 FDB $0800     * index:3  R:34  V:4>>
    448        656C 0200                 FDB $0200     * index:4  R:1   V:0>>
    449        656E 0002                 FDB $0002     * index:5  R:123 V:2>>
    450        6570 024C                 FDB $024c     * index:6  R:236 V:1>>
    451        6572 0861                 FDB $0861     * index:7  R:104 V:1>>
    452        6574 0005                 FDB $0005     * index:8  R:182 V:7>>
    453        6576 0CC8                 FDB $0cc8     * index:9  R:209 V:2>>
    454        6578 0000                 FDB $0000     * index:10 R:0   V:2>>
    455        657A 0000                 FDB $0000     * index:11 R:45  V:1>>
    456        657C 0000                 FDB $0000     * index:12 R:0   V:0>>
    457        657E 0000                 FDB $0000     * index:13 R:0   V:0>>
    458        6580 0000                 FDB $0000     * index:14 R:0   V:0>>
    459        6582 0000                 FDB $0000     * index:15 R:0   V:0>>
    460        6584               FINTABPALETTE
    461
    462                           *****************************************>>
    463                           * Get joystick parameters
    464                           *****************************************>>
    465        6584               JOY_READ
    466  3     6584 8E   E7CF            ldx    #$e7cf
    467  4     6587 108E E7CD            ldy    #$e7cd
    468  3     658B CC   400F            ldd    #$400f
    469  5     658E F4   E7CC            andb   >$e7cc     * Read position
    470  5     6591 F7   659C            stb    JOY_DIR_STATUS
    471  4+0   6594 A4   A4              anda   ,y         * Read button
    472  2     6596 88   40              eora   #$40
    473  5     6598 B7   659D            sta    JOY_BTN_STATUS
    474  5     659B 39                   RTS
    475        659C               JOY_DIR_STATUS
    476        659C 00                   FCB $00 * Position Pad
    477        659D               JOY_BTN_STATUS
    478        659D 00                   FCB $00 * 40 Bouton A enfonce
    479
    480                           *****************************************>>
    481                           * Subroutine to      make HERO walk/run
    482                           *****************************************>>
    483        659E               Hero_Move
    484  5     659E B6   659C            LDA JOY_DIR_STATUS
    485  2     65A1 81   0B              CMPA #JOY_G
    486  3     65A3 26   02              BNE Hero_NotLeft
    487  3     65A5 20   71              BRA Hero_MoveLeft
    488
    489        65A7               Hero_NotLeft                   * XREF: He>>
    490  2     65A7 81   07              CMPA #JOY_D
    491  3     65A9 26   03              BNE Hero_NotLeftOrRight
    492  5     65AB 16   00AE            LBRA Hero_MoveRight
    493
    494        65AE               Hero_NotLeftOrRight            * XREF: He>>
    495  6     65AE FC   68B3            LDD HERO_G_SPEED
    496  5     65B1 1083 0000            CMPD #$0000
    497  6     65B5 1027 00E1            LBEQ Hero_MoveUpdatePos  * Si la v>>
    498  3     65B9 2D   32              BLT Hero_NotLeftOrRight_00 * se de>>
    499  7     65BB B3   68C5            SUBD HERO_FRICTION     * se deplac>>
    500  5     65BE 1083 0000            CMPD #$0000
    501  3     65C2 2E   12              BGT Hero_NotLeftOrRight_01 * si on>>
    502  3     65C4 CC   0000            LDD #$0000
    503  6     65C7 FD   68B3            STD HERO_G_SPEED
    504  6     65CA FD   68B7            STD HERO_X_SPS
    505  3     65CD 8E   67E6            LDX #HERO_IDLE_R        * Charge a>>
    506  6     65D0 BF   68C7            STX HERO_ANIMATION_ADR      * Sauv>>
    507
    508  5     65D3 16   00C4            LBRA Hero_MoveUpdatePos
    509        65D6               Hero_NotLeftOrRight_01
    510  5     65D6 1083 0600            CMPD #HERO_JOG_SPD_LIMIT
    511  3     65DA 2C   0B              BGE Hero_NotLeftOrRight_02
    512  6     65DC FD   68B3            STD HERO_G_SPEED
    513  3     65DF 8E   67A3            LDX #HERO_WALK_R        * Charge a>>
    514  6     65E2 BF   68C7            STX HERO_ANIMATION_ADR      * Sauv>>
    515
    516  3     65E5 20   03              BRA Hero_NotLeftOrRight_03
    517        65E7               Hero_NotLeftOrRight_02
    518  6     65E7 FD   68B3            STD HERO_G_SPEED
    519        65EA               Hero_NotLeftOrRight_03
    520  5     65EA 16   00AD            LBRA Hero_MoveUpdatePos
    521        65ED               Hero_NotLeftOrRight_00
    522  7     65ED F3   68C5            ADDD HERO_FRICTION     * se deplac>>
    523  3     65F0 24   0F              BCC Hero_NotLeftOrRight_11 * si on>>
    524  3     65F2 CC   0000            LDD #$0000
    525  6     65F5 FD   68B3            STD HERO_G_SPEED
    526  3     65F8 8E   68A7            LDX #HERO_IDLE_L        * Charge a>>
    527  6     65FB BF   68C7            STX HERO_ANIMATION_ADR      * Sauv>>
    528
    529  5     65FE 16   0099            LBRA Hero_MoveUpdatePos
    530        6601               Hero_NotLeftOrRight_11
    531  5     6601 1083 FA00            CMPD #HERO_JOG_NEG_SPD_LIMIT
    532  3     6605 2F   0B              BLE Hero_NotLeftOrRight_12
    533  6     6607 FD   68B3            STD HERO_G_SPEED
    534  3     660A 8E   682B            LDX #HERO_WALK_L        * Charge a>>
    535  6     660D BF   68C7            STX HERO_ANIMATION_ADR      * Sauv>>
    536
    537  3     6610 20   03              BRA Hero_NotLeftOrRight_13
    538        6612               Hero_NotLeftOrRight_12
    539  6     6612 FD   68B3            STD HERO_G_SPEED
    540        6615               Hero_NotLeftOrRight_13
    541  5     6615 16   0082            LBRA Hero_MoveUpdatePos
    542
    543        6618               Hero_MoveLeft                      * XREF>>
    544  6     6618 FC   68B3            LDD HERO_G_SPEED            * Char>>
    545  5     661B 1083 0000            CMPD #$0000                 * Test>>
    546  3     661F 2F   11              BLE Hero_MoveLeft_00        * BRAN>>
    547  7     6621 B3   68C3            SUBD HERO_DECELERATION      * orie>>
    548  3     6624 24   06              BCC Hero_MoveLeft_03        * BRAN>>
    549  3     6626 CC   0000            LDD #$0000
    550  7     6629 B3   68C3            SUBD HERO_DECELERATION      * si l>>
    551        662C               Hero_MoveLeft_03
    552  6     662C FD   68B3            STD HERO_G_SPEED            * On s>>
    553  5     662F 16   0068            LBRA Hero_MoveUpdatePos           >>
    554        6632               Hero_MoveLeft_00                         >>
    555  8     6632 10B3 68BF            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    556  3     6636 27   62              BEQ Hero_MoveUpdatePos      * vite>>
    557  7     6638 B3   68C1            SUBD HERO_ACCELERATION      * acce>>
    558  8     663B 10B3 68BF            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    559  3     663F 2E   0F              BGT Hero_MoveLeft_01        * BRAN>>
    560  3     6641 8E   686E            LDX #HERO_RUN_L        * Charge an>>
    561  6     6644 BF   68C7            STX HERO_ANIMATION_ADR      * Sauv>>
    562
    563  6     6647 FC   68BF            LDD HERO_NEG_TOP_SPEED      * Limi>>
    564  6     664A FD   68B3            STD HERO_G_SPEED            * Enre>>
    565  5     664D 16   004A            LBRA Hero_MoveUpdatePos     * Mise>>
    566        6650               Hero_MoveLeft_01
    567  6     6650 FD   68B3            STD HERO_G_SPEED            * Enre>>
    568  3     6653 8E   682B            LDX #HERO_WALK_L        * Charge a>>
    569  6     6656 BF   68C7            STX HERO_ANIMATION_ADR      * Sauv>>
    570
    571  5     6659 16   003E            LBRA Hero_MoveUpdatePos
    572
    573        665C               Hero_MoveRight                  * XREF: H>>
    574  6     665C FC   68B3            LDD HERO_G_SPEED        * Chargeme>>
    575  5     665F 1083 0000            CMPD #$0000                 * Test>>
    576  3     6663 2C   0E              BGE Hero_MoveRight_00       * BRAN>>
    577  7     6665 F3   68C3            ADDD HERO_DECELERATION      * orie>>
    578  3     6668 24   03              BCC Hero_MoveRight_03       * BRAN>>
    579  6     666A FC   68C3            LDD HERO_DECELERATION   * si la vi>>
    580        666D               Hero_MoveRight_03
    581  6     666D FD   68B3            STD HERO_G_SPEED        * On stock>>
    582  5     6670 16   0027            LBRA Hero_MoveUpdatePos           >>
    583        6673               Hero_MoveRight_00                  * Orie>>
    584  8     6673 10B3 68BD            CMPD HERO_TOP_SPEED         * Comp>>
    585  3     6677 27   21              BEQ Hero_MoveUpdatePos      * vite>>
    586  7     6679 F3   68C1            ADDD HERO_ACCELERATION      * acce>>
    587  8     667C 10B3 68BD            CMPD HERO_TOP_SPEED         * Comp>>
    588  3     6680 2D   0F              BLT Hero_MoveRight_01       * BRAN>>
    589  3     6682 8E   67F2            LDX #HERO_RUN_R                   >>
    590  6     6685 BF   68C7            STX HERO_ANIMATION_ADR      * Sauv>>
    591
    592  6     6688 FC   68BD            LDD HERO_TOP_SPEED          * Limi>>
    593  6     668B FD   68B3            STD HERO_G_SPEED            * Enre>>
    594  5     668E 16   0009            LBRA Hero_MoveUpdatePos           >>
    595        6691               Hero_MoveRight_01
    596  6     6691 FD   68B3            STD HERO_G_SPEED            * Enre>>
    597  3     6694 8E   67A3            LDX #HERO_WALK_R        * Charge a>>
    598  6     6697 BF   68C7            STX HERO_ANIMATION_ADR      * Sauv>>
    599
    600
    601        669A               Hero_MoveUpdatePos
    602  6     669A FC   68B3            LDD HERO_G_SPEED            * Char>>
    603  6     669D FD   68B5            STD HERO_X_SPEED        * Stockage>>
    604  5     66A0 1083 0000            CMPD #$0000                 * Test>>
    605  3     66A4 2D   0E              BLT Hero_MoveUpdatePos_00   * BRAN>>
    606  7     66A6 F3   68B7            ADDD HERO_X_SPS         * Ajout du>>
    607  5     66A9 F7   68B8            STB HERO_X_SPS+1            * sauv>>
    608  6     66AC 1F   89              TFR A,B                     * Divi>>
    609  5     66AE FB   68B1            ADDB HERO_X_POS                   >>
    610  3     66B1 20   18              BRA Hero_MoveUpdatePos_01
    611        66B3               Hero_MoveUpdatePos_V00
    612        66B3 00                   FCB $00
    613        66B4               Hero_MoveUpdatePos_00
    614  3     66B4 CC   0000            LDD #$0000
    615  7     66B7 B3   68B5            SUBD HERO_X_SPEED           * La v>>
    616  7     66BA F3   68B7            ADDD HERO_X_SPS         * Ajout du>>
    617  5     66BD F7   68B8            STB HERO_X_SPS+1            * sauv>>
    618  6     66C0 1F   89              TFR A,B                     * Divi>>
    619  5     66C2 F7   66B3            STB Hero_MoveUpdatePos_V00
    620  5     66C5 F6   68B1            LDB HERO_X_POS
    621  5     66C8 F0   66B3            SUBB Hero_MoveUpdatePos_V00 * Ajou>>
    622        66CB               Hero_MoveUpdatePos_01
    623  2     66CB C1   50              CMPB #$50                         >>
    624  3     66CD 2F   02              BLE Hero_MoveUpdatePos_02   * Bute>>
    625  2     66CF C6   50              LDB #$50                          >>
    626        66D1               Hero_MoveUpdatePos_02
    627  2     66D1 C1   0C           CMPB #$0C                            >>
    628  3     66D3 2C   02              BGE Hero_MoveUpdatePos_03   * Bute>>
    629  2     66D5 C6   0C              LDB #$0C                          >>
    630        66D7               Hero_MoveUpdatePos_03
    631  5     66D7 F7   68B1            STB HERO_X_POS
    632  2     66DA C6   00              LDB #$00
    633  5     66DC F7   68B7            STB HERO_X_SPS                    >>
    634  3     66DF CC   0000            LDD #$0000                  * TODO>>
    635  6     66E2 FD   68B9            STD HERO_Y_SPEED
    636  6     66E5 1F   89              TFR A,B                     * divi>>
    637  5     66E7 FB   68B2            ADDB HERO_Y_POS
    638  5     66EA F7   68B2            STB HERO_Y_POS
    639  5     66ED 39                   RTS
    640
    641                           * TODO : Braking Animation
    642                           * Sonic enters his braking animation when>>
    643                           * In Sonic 1 and Sonic CD, he then stays >>
    644                           * In the other 3 games, Sonic returns to >>
    645
    646        66EE               Compute_Position
    647  5     66EE B6   68B1            LDA HERO_X_POS
    648  2     66F1 44                   LSRA
    649  3     66F2 25   17              BCS Compute_Position_01
    650  5     66F4 B7   6726            STA Compute_Position_02+1
    651  2     66F7 86   28              LDA #$28
    652  5     66F9 F6   68B2            LDB HERO_Y_POS
    653  2     66FC 5A                   DECB
    654  11    66FD 3D                   MUL
    655  7     66FE F3   6725            ADDD Compute_Position_02
    656  6     6701 FD   9F00            STD HERO_POS
    657  4     6704 C3   2000            ADDD #$2000
    658  6     6707 FD   9F02            STD HERO_POS+2
    659  5     670A 39                   RTS
    660        670B               Compute_Position_01
    661  5     670B B7   6726            STA Compute_Position_02+1
    662  2     670E 86   28              LDA #$28
    663  5     6710 F6   68B2            LDB HERO_Y_POS
    664  2     6713 5A                   DECB
    665  11    6714 3D                   MUL
    666  7     6715 F3   6725            ADDD Compute_Position_02
    667  4     6718 C3   2000            ADDD #$2000
    668  6     671B FD   9F00            STD HERO_POS
    669  4     671E 83   1FFF            SUBD #$1FFF
    670  6     6721 FD   9F02            STD HERO_POS+2
    671  5     6724 39                   RTS
    672        6725               Compute_Position_02
    673        6725 0000                 FDB $0000
    674
    675                           *****************************************>>
    676                           * HERO Animations
    677                           * ---------------
    678                           * Note: Speed abs +0, rel +8, rel cap +10>>
    679                           *
    680                           * Chargement nouvelle animation
    681                           *    nouvelle frame = 109 a 119
    682                           *
    683                           * Chargement frame suivante
    684                           *    frame identique = 15
    685                           * ou frame suivante  = 116 a 126
    686                           *
    687                           * Chargement frame suivante avec branchem>>
    688                           *    nouvelle frame = 165 a 175
    689                           * ou frame suivante = 172 a 182
    690                           *
    691                           * Chargement frame suivante avec retour s>>
    692                           *    nouvelle frame = 167 a 177
    693                           * ou frame suivante = 174 a 184
    694                           *****************************************>>
    695
    696        6727               HERO_ANIMATION_LOAD                      >>
    697  6     6727 BF   68C7            STX HERO_ANIMATION_ADR
    698  6     672A BF   68CB            STX HERO_ANIMATION_RTN_ADR
    699  7     672D 7F   68D7            CLR HERO_ANIMATION_IMC            >>
    700        6730               HERO_ANIMATION_LOAD_00
    701  5+1   6730 EC   1E              LDD -2,X                          >>
    702  2     6732 81   00              CMPA #$00                         >>
    703  3     6734 27   0F              BEQ HERO_ANIMATION_LOAD_01
    704  5     6736 B6   68B3            LDA HERO_G_SPEED
    705  3     6739 2C   01              BGE HERO_ANIMATION_LOAD_01A
    706  2     673B 40                   NEGA                        * vale>>
    707        673C               HERO_ANIMATION_LOAD_01A
    708  5     673C B7   6740            STA HERO_ANIMATION_LOAD_01A+4 * Au>>
    709  2     673F C0   00              SUBB #$00                   * G_SP>>
    710  3     6741 24   02              BCC HERO_ANIMATION_LOAD_01
    711  2     6743 C6   01              LDB #$01                          >>
    712        6745               HERO_ANIMATION_LOAD_01
    713  5     6745 F7   68D9            STB HERO_ANIMATION_FRR            >>
    714  5     6748 B6   68D7            LDA HERO_ANIMATION_IMC
    715  2     674B C6   05              LDB #$05
    716  11    674D 3D                   MUL
    717  7     674E F3   68C7            ADDD HERO_ANIMATION_ADR
    718  6     6751 1F   02              TFR D,Y
    719  4+0   6753 E6   A4              LDB ,Y
    720  2     6755 C1   1F              CMPB #$1F                         >>
    721  3     6757 22   1C              BHI HERO_ANIMATION_LOAD_NOPAGE
    722  5     6759 B6   68CD            LDA HERO_ANIMATION_PAG
    723  5     675C F7   68CD            STB HERO_ANIMATION_PAG
    724  5     675F B1   68CE            CMPA HERO_ANIMATION_PAG_REF
    725  3     6762 27   03              BEQ HERO_ANIMATION_LOAD_02
    726  7     6764 7C   68CD            INC HERO_ANIMATION_PAG * si la pag>>
    727        6767               HERO_ANIMATION_LOAD_02
    728  5     6767 F7   68CE            STB HERO_ANIMATION_PAG_REF  * on s>>
    729  5+1   676A AE   21              LDX 1,Y
    730  6     676C BF   68D5            STX HERO_ANIMATION_DRW
    731  5+1   676F AE   23              LDX 3,Y
    732  6     6771 BF   68D3            STX HERO_ANIMATION_DEL+2
    733  5     6774 39                   RTS
    734        6775               HERO_ANIMATION_LOAD_NOPAGE
    735  2     6775 C1   FF              CMPB #$FF
    736  3     6777 26   0C              BNE HERO_ANIMATION_LOAD_FE
    737  5+1   6779 AE   23              LDX 3,Y
    738  6     677B BF   68D7            STX HERO_ANIMATION_IMC            >>
    739  5+1   677E AE   21              LDX 1,Y
    740  6     6780 BF   68C7            STX HERO_ANIMATION_ADR
    741  3     6783 20   AB              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    742        6785               HERO_ANIMATION_LOAD_FE
    743  6     6785 BE   68CB            LDX HERO_ANIMATION_RTN_ADR  * RETU>>
    744  6     6788 BF   68C7            STX HERO_ANIMATION_ADR
    745  5     678B F6   68D8            LDB HERO_ANIMATION_RTN_IMC
    746  5     678E F7   68D7            STB HERO_ANIMATION_IMC
    747  3     6791 20   9D              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    748
    749        6793               HERO_ANIMATION_NEXT
    750  7     6793 7A   68D9            DEC HERO_ANIMATION_FRR
    751  3     6796 27   01              BEQ HERO_ANIMATION_NEXT_00  * BRAN>>
    752  5     6798 39                   RTS
    753        6799               HERO_ANIMATION_NEXT_00
    754  7     6799 7C   68D7            INC HERO_ANIMATION_IMC
    755  6     679C BE   68C7            LDX HERO_ANIMATION_ADR
    756  3     679F 20   8F              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    757                            
    758                           *   SAMPLE CODE ANIMATION
    759                           *      ---------------------
    760                           *      FDB $0018            * 00 Absolute>>
    761                           *HERO_IDLE_L
    762                           *      FCB $01                     * Page>>
    763                           *      FDB $A000            * Adresse drw>>
    764                           *      FDB $A000            * Adresse del>>
    765                           *
    766                           *      FCB $FF                     * FF S>>
    767                           *      FDB HERO_IDLE-C * adresse animatio>>
    768                           *      FDB $0301            * 03 image ci>>
    769                           *
    770                           *      FCB $FE                     * FE R>>
    771                           *
    772                           *      LDX #HERO_IDLE_R
    773                           *      JSR HERO_ANIMATION_LOAD
    774                           *
    775                           *      JSR HERO_ANIMATION_NEXT
    776
    777                           *****************************************>>
    778                           * ANIMATION Scripts
    779                           *****************************************>>
    780
    781
    782
    783        67A1 0108                 FDB $0108
    784        67A3               HERO_WALK_R
    785        67A3 04                   FCB $04
    786        67A4 D639                 FDB $D639
    787        67A6 DBEE                 FDB $DBEE
    788        67A8 04                   FCB $04
    789        67A9 CC89                 FDB $CC89
    790        67AB D2B5                 FDB $D2B5
    791        67AD 04                   FCB $04
    792        67AE C114                 FDB $C114
    793        67B0 C85F                 FDB $C85F
    794        67B2 04                   FCB $04
    795        67B3 B55C                 FDB $B55C
    796        67B5 BCD0                 FDB $BCD0
    797        67B7 04                   FCB $04
    798        67B8 A9DC                 FDB $A9DC
    799        67BA B12B                 FDB $B12B
    800        67BC 06                   FCB $06
    801        67BD D45F                 FDB $D45F
    802        67BF DB67                 FDB $DB67
    803        67C1 04                   FCB $04
    804        67C2 A000                 FDB $A000
    805        67C4 A645                 FDB $A645
    806        67C6 06                   FCB $06
    807        67C7 CA00                 FDB $CA00
    808        67C9 D09E                 FDB $D09E
    809        67CB 06                   FCB $06
    810        67CC BFE5                 FDB $BFE5
    811        67CE C65B                 FDB $C65B
    812        67D0 06                   FCB $06
    813        67D1 B439                 FDB $B439
    814        67D3 BBAA                 FDB $BBAA
    815        67D5 08                   FCB $08
    816        67D6 D337                 FDB $D337
    817        67D8 DA94                 FDB $DA94
    818        67DA 06                   FCB $06
    819        67DB AA07                 FDB $AA07
    820        67DD B083                 FDB $B083
    821        67DF FF                   FCB $FF
    822        67E0 67A3                 FDB HERO_WALK_R
    823        67E2 0000                 FDB $0000
    824
    825        67E4 0018                 FDB $0018
    826        67E6               HERO_IDLE_R
    827        67E6 06                   FCB $06
    828        67E7 A000                 FDB $A000
    829        67E9 A65E                 FDB $A65E
    830        67EB FF                   FCB $FF
    831        67EC 67E6                 FDB HERO_IDLE_R
    832        67EE 0000                 FDB $0000
    833
    834        67F0 0108                 FDB $0108
    835        67F2               HERO_RUN_R
    836        67F2 08                   FCB $08
    837        67F3 C741                 FDB $C741
    838        67F5 CED7                 FDB $CED7
    839        67F7 08                   FCB $08
    840        67F8 BCDC                 FDB $BCDC
    841        67FA C373                 FDB $C373
    842        67FC 08                   FCB $08
    843        67FD B2F9                 FDB $B2F9
    844        67FF B93A                 FDB $B93A
    845        6801 08                   FCB $08
    846        6802 A944                 FDB $A944
    847        6804 AF75                 FDB $AF75
    848        6806 0A                   FCB $0A
    849        6807 D32B                 FDB $D32B
    850        6809 DA4B                 FDB $DA4B
    851        680B 0A                   FCB $0A
    852        680C C6AD                 FDB $C6AD
    853        680E CE98                 FDB $CE98
    854        6810 08                   FCB $08
    855        6811 A000                 FDB $A000
    856        6813 A5E4                 FDB $A5E4
    857        6815 0A                   FCB $0A
    858        6816 BD63                 FDB $BD63
    859        6818 C349                 FDB $C349
    860        681A 0A                   FCB $0A
    861        681B B3CB                 FDB $B3CB
    862        681D B9EA                 FDB $B9EA
    863        681F 0A                   FCB $0A
    864        6820 A8F4                 FDB $A8F4
    865        6822 AFDC                 FDB $AFDC
    866        6824 FF                   FCB $FF
    867        6825 67F2                 FDB HERO_RUN_R
    868        6827 0000                 FDB $0000
    869
    870        6829 0108                 FDB $0108
    871        682B               HERO_WALK_L
    872        682B 0A                   FCB $0A
    873        682C A000                 FDB $A000
    874        682E A5B5                 FDB $A5B5
    875        6830 0C                   FCB $0C
    876        6831 D62E                 FDB $D62E
    877        6833 DC5A                 FDB $DC5A
    878        6835 0C                   FCB $0C
    879        6836 CACA                 FDB $CACA
    880        6838 D20C                 FDB $D20C
    881        683A 0E                   FCB $0E
    882        683B D43C                 FDB $D43C
    883        683D DBB0                 FDB $DBB0
    884        683F 0C                   FCB $0C
    885        6840 BF59                 FDB $BF59
    886        6842 C69F                 FDB $C69F
    887        6844 0C                   FCB $0C
    888        6845 B440                 FDB $B440
    889        6847 BB48                 FDB $BB48
    890        6849 0C                   FCB $0C
    891        684A AA64                 FDB $AA64
    892        684C B0A9                 FDB $B0A9
    893        684E 0C                   FCB $0C
    894        684F A000                 FDB $A000
    895        6851 A6A1                 FDB $A6A1
    896        6853 0E                   FCB $0E
    897        6854 CA21                 FDB $CA21
    898        6856 D097                 FDB $D097
    899        6858 0E                   FCB $0E
    900        6859 BE84                 FDB $BE84
    901        685B C5ED                 FDB $C5ED
    902        685D 10                   FCB $10
    903        685E D38E                 FDB $D38E
    904        6860 DAEB                 FDB $DAEB
    905        6862 0E                   FCB $0E
    906        6863 B44D                 FDB $B44D
    907        6865 BACC                 FDB $BACC
    908        6867 FF                   FCB $FF
    909        6868 682B                 FDB HERO_WALK_L
    910        686A 0000                 FDB $0000
    911
    912        686C 0108                 FDB $0108
    913        686E               HERO_RUN_L
    914        686E 10                   FCB $10
    915        686F C789                 FDB $C789
    916        6871 CF28                 FDB $CF28
    917        6873 0E                   FCB $0E
    918        6874 A9E3                 FDB $A9E3
    919        6876 B07D                 FDB $B07D
    920        6878 0E                   FCB $0E
    921        6879 A000                 FDB $A000
    922        687B A641                 FDB $A641
    923        687D 10                   FCB $10
    924        687E BDCA                 FDB $BDCA
    925        6880 C401                 FDB $C401
    926        6882 10                   FCB $10
    927        6883 B293                 FDB $B293
    928        6885 B9B9                 FDB $B9B9
    929        6887 12                   FCB $12
    930        6888 BE80                 FDB $BE80
    931        688A C65F                 FDB $C65F
    932        688C 10                   FCB $10
    933        688D A94A                 FDB $A94A
    934        688F AF31                 FDB $AF31
    935        6891 10                   FCB $10
    936        6892 A000                 FDB $A000
    937        6894 A5E6                 FDB $A5E6
    938        6896 12                   FCB $12
    939        6897 B4E3                 FDB $B4E3
    940        6899 BB05                 FDB $BB05
    941        689B 12                   FCB $12
    942        689C AA07                 FDB $AA07
    943        689E B0F2                 FDB $B0F2
    944        68A0 FF                   FCB $FF
    945        68A1 686E                 FDB HERO_RUN_L
    946        68A3 0000                 FDB $0000
    947
    948        68A5 0018                 FDB $0018
    949        68A7               HERO_IDLE_L
    950        68A7 12                   FCB $12
    951        68A8 A000                 FDB $A000
    952        68AA A65E                 FDB $A65E
    953        68AC FF                   FCB $FF
    954        68AD 68A7                 FDB HERO_IDLE_L
    955        68AF 0000                 FDB $0000
    956                            
    957                           *****************************************>>
    958                           * HERO Variables
    959                           *****************************************>>
    960                  0400     HERO_WALK_SPD_LIMIT EQU $0400
    961                  FC00     HERO_WALK_NEG_SPD_LIMIT EQU $FC00
    962                  0600     HERO_JOG_SPD_LIMIT  EQU $0600
    963                  FA00     HERO_JOG_NEG_SPD_LIMIT  EQU $FA00
    964        68B1               HERO_X_POS
    965        68B1 50                   FCB $50                     * Hori>>
    966        68B2               HERO_Y_POS
    967        68B2 C8                   FCB $C8                     * Vert>>
    968        68B3               HERO_G_SPEED         * Ground Speed
    969        68B3 0000                 FDB $0000            * First byte >>
    970        68B5               HERO_X_SPEED
    971        68B5 0000                 FDB $0000            * Horizontal >>
    972        68B7               HERO_X_SPS
    973        68B7 0000                 FDB $0000            * Subpixel X >>
    974        68B9               HERO_Y_SPEED
    975        68B9 0000                 FDB $0000            * Vertical Sp>>
    976        68BB               HERO_Y_SPS
    977        68BB 0000                 FDB $0000            * Subpixel Y >>
    978        68BD               HERO_TOP_SPEED
    979        68BD 0600                 FDB $0600        * vitesse maximum>>
    980        68BF               HERO_NEG_TOP_SPEED
    981        68BF FA00                 FDB $FA00        * vitesse maximum>>
    982        68C1               HERO_ACCELERATION
    983        68C1 000C                 FDB $000C        * constante accel>>
    984        68C3               HERO_DECELERATION
    985        68C3 0080                 FDB $0080        * constante decel>>
    986        68C5               HERO_FRICTION
    987        68C5 000C                 FDB $000C        * constante de fr>>
    988        68C7               HERO_ANIMATION_ADR
    989        68C7 0000                 FDB $0000        * Animation coura>>
    990        68C9               HERO_ANIMATION_ADR_OLD
    991        68C9 0000                 FDB $0000        * Sauvegarde anci>>
    992        68CB               HERO_ANIMATION_RTN_ADR
    993        68CB 0000                 FDB $0000        * Animation coura>>
    994        68CD               HERO_ANIMATION_PAG
    995        68CD 00                   FCB $00          * Animation coura>>
    996        68CE               HERO_ANIMATION_PAG_REF
    997        68CE 00                   FCB $00          * Animation coura>>
    998        68CF               HERO_ANIMATION_PAG_DEL
    999        68CF 00                   FCB $00        * Animation courant>>
   1000        68D0 00                   FCB $00        * Animation courant>>
   1001        68D1               HERO_ANIMATION_DEL
   1002        68D1 0000                 FDB $0000        * Animation coura>>
   1003        68D3 0000                 FDB $0000        * Animation coura>>
   1004        68D5               HERO_ANIMATION_DRW
   1005        68D5 0000                 FDB $0000        * Animation coura>>
   1006        68D7               HERO_ANIMATION_IMC
   1007        68D7 00                   FCB $00          * Animation coura>>
   1008        68D8               HERO_ANIMATION_RTN_IMC
   1009        68D8 00                   FCB $00          * Animation coura>>
   1010        68D9               HERO_ANIMATION_FRR
   1011        68D9 00                   FCB $00          * Animation coura>>

000000 Total Errors

000114 Total Symbols
     0x          Label 6300 BEGIN
     2x          Label 6528 CLR_CART
     1x          Label 6541 CLR_CART_2
     1x          Label 655D CLR_CART_3
     1x          Label 66EE Compute_Position
     1x          Label 670B Compute_Position_01
     4x          Label 6725 Compute_Position_02
     2x          Label 6332 CPPAGE_LOOP
     0x          Equ   0014 DEBUTECRANA
     0x          Equ   2014 DEBUTECRANB
     1x          Equ   622C DK_dernier_bloc_a_ecrire
     1x          Equ   6213 DK_destination
     1x          Equ   6205 DK_lecture
     1x          Equ   620A DK_piste
     2x          Equ   620F DK_secteur
     1x          Equ   1F40 FINECRANA
     1x          Equ   3F40 FINECRANB
     1x          Label 6584 FINTABPALETTE
     2x          Label 68C1 HERO_ACCELERATION
    14x          Label 68C7 HERO_ANIMATION_ADR
     3x          Label 68C9 HERO_ANIMATION_ADR_OLD
     4x          Label 68D1 HERO_ANIMATION_DEL
     3x          Label 68D5 HERO_ANIMATION_DRW
     2x          Label 68D9 HERO_ANIMATION_FRR
     5x          Label 68D7 HERO_ANIMATION_IMC
     2x          Label 6727 HERO_ANIMATION_LOAD
     3x          Label 6730 HERO_ANIMATION_LOAD_00
     2x          Label 6745 HERO_ANIMATION_LOAD_01
     2x          Label 673C HERO_ANIMATION_LOAD_01A
     1x          Label 6767 HERO_ANIMATION_LOAD_02
     1x          Label 6785 HERO_ANIMATION_LOAD_FE
     1x          Label 6775 HERO_ANIMATION_LOAD_NOPAGE
     1x          Label 6793 HERO_ANIMATION_NEXT
     1x          Label 6799 HERO_ANIMATION_NEXT_00
     6x          Label 68CD HERO_ANIMATION_PAG
     4x          Label 68CF HERO_ANIMATION_PAG_DEL
     3x          Label 68CE HERO_ANIMATION_PAG_REF
     2x          Label 68CB HERO_ANIMATION_RTN_ADR
     1x          Label 68D8 HERO_ANIMATION_RTN_IMC
     4x          Label 68C3 HERO_DECELERATION
     2x          Label 68C5 HERO_FRICTION
    17x          Label 68B3 HERO_G_SPEED
     2x          Label 68A7 HERO_IDLE_L
     3x          Label 67E6 HERO_IDLE_R
     1x          Equ   FA00 HERO_JOG_NEG_SPD_LIMIT
     1x          Equ   0600 HERO_JOG_SPD_LIMIT
     1x          Label 659E Hero_Move
     1x          Label 6618 Hero_MoveLeft
     1x          Label 6632 Hero_MoveLeft_00
     1x          Label 6650 Hero_MoveLeft_01
     1x          Label 662C Hero_MoveLeft_03
     1x          Label 665C Hero_MoveRight
     1x          Label 6673 Hero_MoveRight_00
     1x          Label 6691 Hero_MoveRight_01
     1x          Label 666D Hero_MoveRight_03
    12x          Label 669A Hero_MoveUpdatePos
     1x          Label 66B4 Hero_MoveUpdatePos_00
     1x          Label 66CB Hero_MoveUpdatePos_01
     1x          Label 66D1 Hero_MoveUpdatePos_02
     1x          Label 66D7 Hero_MoveUpdatePos_03
     2x          Label 66B3 Hero_MoveUpdatePos_V00
     3x          Label 68BF HERO_NEG_TOP_SPEED
     1x          Label 65A7 Hero_NotLeft
     1x          Label 65AE Hero_NotLeftOrRight
     1x          Label 65ED Hero_NotLeftOrRight_00
     1x          Label 65D6 Hero_NotLeftOrRight_01
     1x          Label 65E7 Hero_NotLeftOrRight_02
     1x          Label 65EA Hero_NotLeftOrRight_03
     1x          Label 6601 Hero_NotLeftOrRight_11
     1x          Label 6612 Hero_NotLeftOrRight_12
     1x          Label 6615 Hero_NotLeftOrRight_13
     6x          Equ   9F00 HERO_POS
     2x          Label 686E HERO_RUN_L
     2x          Label 67F2 HERO_RUN_R
     3x          Label 68BD HERO_TOP_SPEED
     3x          Label 682B HERO_WALK_L
     0x          Equ   FC00 HERO_WALK_NEG_SPD_LIMIT
     3x          Label 67A3 HERO_WALK_R
     0x          Equ   0400 HERO_WALK_SPD_LIMIT
     4x          Label 68B1 HERO_X_POS
     2x          Label 68B5 HERO_X_SPEED
     6x          Label 68B7 HERO_X_SPS
     4x          Label 68B2 HERO_Y_POS
     1x          Label 68B9 HERO_Y_SPEED
     0x          Label 68BB HERO_Y_SPS
     0x          Label 636E INIT_VID
     0x          Equ   000D JOY_B
     0x          Equ   0005 JOY_BD
     0x          Equ   0009 JOY_BG
     1x          Label 659D JOY_BTN_STATUS
     0x          Equ   000F JOY_C
     1x          Equ   0007 JOY_D
     2x          Label 659C JOY_DIR_STATUS
     1x          Equ   000B JOY_G
     0x          Equ   000E JOY_H
     0x          Equ   0006 JOY_HD
     0x          Equ   000A JOY_HG
     1x          Label 6584 JOY_READ
     4x          Label 631F LDPAGE_LOOP
     1x          Label 63C4 MAIN
     1x          Label 63D1 MAIN_0
     1x          Label 63ED MAIN_1
     1x          Label 63F3 MAIN_2
     2x          Label 6435 MEM_COPY_DATA_TO_CART
     2x          Label 651B MEM_COPY_DATA_TO_CART_E
     1x          Label 643B MEM_COPY_DATA_TO_CART_LOOP
     1x          Label 6523 MEM_COPY_DATA_TO_CART_S
     5x          Label 6405 SCRC
     3x          Label 6420 SCRC0
     1x          Label 6392 SETPALETTE
     1x          Label 6564 TABPALETTE
     1x          Label 642A VSYNC
     1x          Label 642A VSYNC_1
     1x          Label 642F VSYNC_2

