/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : .\tmp\GEN-MAIN.ASM
 * Fichier destination : tmp\TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     24128
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        6300                      ORG $6300
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17
     18                  6205     DK_lecture               EQU $6205 * rout>>
     19                  620A     DK_piste                 EQU $620A * 2B n>>
     20                  620F     DK_secteur               EQU $620F * 1B n>>
     21                  6213     DK_destination           EQU $6213 * 2B d>>
     22                  622C     DK_dernier_bloc_a_ecrire EQU $622C * 2B f>>
     23
     24                  0014     DEBUTECRANA EQU $0014 * test pour fin sta>>
     25                  1F40     FINECRANA   EQU $1F40 * fin de la RAM A v>>
     26                  2014     DEBUTECRANB EQU $2014 * test pour fin sta>>
     27                  3F40     FINECRANB   EQU $3F40 * fin de la RAM B v>>
     28
     29                  0005     JOY_BD EQU $05 * Bas Droite
     30                  0006     JOY_HD EQU $06 * Haut Droite
     31                  0007     JOY_D  EQU $07 * Droite
     32                  0009     JOY_BG EQU $09 * Bas Gauche
     33                  000A     JOY_HG EQU $0A * Haut Gauche
     34                  000B     JOY_G  EQU $0B * Gauche
     35                  000D     JOY_B  EQU $0D * Bas
     36                  000E     JOY_H  EQU $0E * Haut
     37                  000F     JOY_C  EQU $0F * Centre
     38                  0040     JOY_A  EQU $40 * Bouton
     39
     40                  9F00     HERO_POS EQU $9F00 * Emplacement memoire >>
     41
     42                           *****************************************>>
     43                           * Debut du programme
     44                           *****************************************>>
     45        6300               BEGIN
     46  2     6300 1A   50              ORCC #$50     * desactive les inte>>
     47                            
     48                           *****************************************>>
     49                           * Initialisation du mode video
     50                           *****************************************>>
     51  2     6302 86   7B              LDA #$7B      * passage en mode 16>>
     52  5     6304 B7   E7DC            STA $E7DC
     53                            
     54                           *****************************************>>
     55                           * Initialisation de la palette en noir
     56                           *****************************************>>
     57
     58  3     6307 CC   0000            LDD #$0000
     59        630A               SETBLACKPALETTE
     60  5     630A B7   E7DB            STA $E7DB     * determine l'indice>>
     61  5     630D F7   E7DA            STB $E7DA     * set de la couleur >>
     62  5     6310 F7   E7DA            STB $E7DA   * set de la couleur Bl>>
     63  2     6313 8B   02              ADDA #$02     * increment de l'ind>>
     64  2     6315 81   20              CMPA #$20     * si on atteint 32 s>>
     65  3     6317 26   F1              BNE    SETBLACKPALETTE
     66                            
     67                                  * Bordure initialisee avec couleur>>
     68                                  **********************************>>
     69                            
     70  5     6319 F6   E7DD         LDB $E7DD
     71  2     631C C4   F0              ANDB #$F0
     72  5     631E F7   E7DD            STB $E7DD
     73
     74                           *****************************************>>
     75                           * Chargement des pages memoire
     76                           *****************************************>>
     77                                  * Chargement des pages depuis la d>>
     78                                  **********************************>>
     79                            
     80  3     6321 CC   0004            LDD #$0004
     81  6     6324 FD   620A            STD DK_piste
     82  2     6327 86   01              LDA #$01
     83  5     6329 B7   620F            STA DK_secteur
     84  3     632C CC   DF00            LDD #$DF00
     85  6     632F FD   622C            STD DK_dernier_bloc_a_ecrire
     86                            
     87        6332               LDPAGE_LOOP
     88  2     6332 C6   00              LDB #$00
     89  5     6334 F7   E7E5            STB $E7E5 * Selection de la page e>>
     90                            
     91  2     6337 86   01              LDA #$01
     92  5     6339 B7   620F            STA DK_secteur
     93  3     633C CC   A000            LDD #$A000
     94  6     633F FD   6213            STD DK_destination
     95  8     6342 BD   6205            JSR DK_lecture
     96                            
     97                                  * Duplication de la page p en p+1
     98                                  *********************************
     99        6345               CPPAGE_LOOP
    100  2     6345 C6   62              LDB #$62                       * O>>
    101  5     6347 F7   E7E6            STB $E7E6                      * e>>
    102
    103  3     634A CE   A000         LDU #$A000                     * Sour>>
    104  4     634D 108E 4040         LDY #$4000+64                  * Dest>>
    105  7     6351 10BF 6534            STY MEM_COPY_DATA_TO_CART_E+2
    106  4     6355 108E 2040         LDY #$2000+64                  * Dest>>
    107  8     6359 BD   644C         JSR MEM_COPY_DATA_TO_CART      * Copi>>
    108                            
    109  3     635C CE   C000         LDU #$C000                     * Sour>>
    110  4     635F 108E 2040         LDY #$2000+64                  * Dest>>
    111  7     6363 10BF 6534            STY MEM_COPY_DATA_TO_CART_E+2
    112  4     6367 108E 0040         LDY #$0000+64                  * Dest>>
    113  8     636B BD   644C         JSR MEM_COPY_DATA_TO_CART      * Copi>>
    114
    115        636E               PAGEINITNEXT
    116  3     636E 20   00           BRA PAGEINIT
    117
    118        6370               PAGEINIT
    119  2     6370 86   04              LDA #$04
    120  5     6372 B7   6333            STA LDPAGE_LOOP+1
    121  2     6375 86   65           LDA #$65
    122  5     6377 B7   6346         STA CPPAGE_LOOP+1
    123  2     637A 86   11           LDA #$11
    124  5     637C B7   636F            STA PAGEINITNEXT+1
    125  3     637F 20   B1           BRA LDPAGE_LOOP
    126
    127        6381               PAGENEXT
    128  7     6381 7C   6346         INC CPPAGE_LOOP+1
    129  7     6384 7C   6346            INC CPPAGE_LOOP+1
    130  7     6387 7C   6333            INC LDPAGE_LOOP+1
    131  7     638A 7C   6333            INC LDPAGE_LOOP+1
    132  5     638D F6   6333            LDB LDPAGE_LOOP+1
    133  2     6390 C1   16              CMPB #$16
    134  3     6392 23   9E              BLS LDPAGE_LOOP
    135
    136                           *****************************************>>
    137                           * Initialisation de la routine de commuta>>
    138                           *****************************************>>
    139        6394               INIT_VID
    140  5     6394 F6   6081            LDB $6081 * A documenter
    141  2     6397 CA   10              ORB #$10  * mettre le bit d4 a 1
    142  5     6399 F7   6081            STB $6081
    143  5     639C F7   E7E7            STB $E7E7
    144  8     639F BD   641D            JSR SCRC     * page 2 en RAM Carto>>
    145
    146                           *****************************************>>
    147                           * Initialisation de la palette de couleur>>
    148                           *****************************************>>
    149                           * Ecriture en $E7DB de l'adresse ou sera >>
    150                           *
    151                           * les adresses vont de deux en deux car i>>
    152                           * couleur: 0, adresse: 00
    153                           * couleur: 1, adresse: 02
    154                           * couleur: 2, adresse: 04
    155                           * ...
    156                           *
    157                           * Deux ecritures en $E7DA (auto-increment>>
    158                           *                          positionnee en>>
    159                           *
    160                           *                             V V V V    >>
    161                           * Premiere adresse        fondamentale V >>
    162                           *
    163                           * Deuxieme adresse            X X X M    >>
    164                           * auto-incrementee        bit de marquage>>
    165                           *
    166                           * Piste d'optim pour changer plus de coul>>
    167                           * ne changer que la moditie des donnees d>>
    168                           *****************************************>>
    169
    170  4     63A2 108E 65E8            LDY #TABPALETTE
    171  2     63A6 4F                   CLRA                        * regi>>
    172        63A7               SETPALETTE
    173  5+1   63A7 34   02              PSHS A                      * sauv>>
    174  2     63A9 48                   ASLA                        * mult>>
    175  5     63AA B7   E7DB            STA $E7DB                   * dete>>
    176  5+3   63AD EC   A1              LDD ,Y++                    * char>>
    177  5     63AF F7   E7DA            STB $E7DA                   * set >>
    178  5     63B2 B7   E7DA            STA $E7DA           * set de la co>>
    179  5+1   63B5 35   02              PULS A                      * rech>>
    180  2     63B7 4C                   INCA                        * et i>>
    181  5     63B8 108C 6608            CMPY #FINTABPALETTE * test fin de >>
    182  3     63BC 26   E9              BNE    SETPALETTE      * on rebouc>>
    183
    184                           *****************************************>>
    185                           * Initialisation des sprites
    186                           *****************************************>>
    187  3     63BE 8E   6943            LDX #HERO_IDLE_R
    188  6     63C1 BF   69B9            STX HERO_ANIMATION_ADR_OLD
    189  8     63C4 BD   68B4            JSR HERO_ANIMATION_LOAD
    190
    191                           *****************************************>>
    192                           * Boucle principale
    193                           *****************************************>>
    194
    195                                  * Init routine effacement sprite
    196  8     63C7 BD   687B            JSR Compute_Position
    197  5     63CA F6   69BD            LDB HERO_ANIMATION_PAG            >>
    198  5     63CD F7   69BF            STB HERO_ANIMATION_PAG_DEL
    199  5     63D0 F7   E7E5            STB $E7E5                         >>
    200  7+3   63D3 AD   9F 69C5         JSR [HERO_ANIMATION_DRW]          >>
    201  8     63D7 BD   641D            JSR SCRC
    202  3     63DA 20   0D              BRA MAIN_0
    203                            
    204        63DC               MAIN
    205                                  * Effacement et affichage des spri>>
    206  6     63DC FC   69BF            LDD HERO_ANIMATION_PAG_DEL        >>
    207  5     63DF F7   69BF            STB HERO_ANIMATION_PAG_DEL
    208  5     63E2 B7   E7E5            STA $E7E5                         >>
    209  7+3   63E5 AD   9F 69C1         JSR [HERO_ANIMATION_DEL]          >>
    210        63E9               MAIN_0
    211  6     63E9 FC   69C3            LDD HERO_ANIMATION_DEL+2          >>
    212  6     63EC FD   69C1            STD HERO_ANIMATION_DEL
    213
    214                                  * Gestion des deplacements
    215  8     63EF BD   6608            JSR JOY_READ
    216  8     63F2 BD   662A            JSR Hero_Move
    217  8     63F5 BD   687B            JSR Compute_Position
    218  6     63F8 BE   69B7            LDX HERO_ANIMATION_ADR
    219  7     63FB BC   69B9            CMPX HERO_ANIMATION_ADR_OLD
    220  3     63FE 26   05              BNE MAIN_1
    221  8     6400 BD   6927            JSR HERO_ANIMATION_NEXT
    222  3     6403 20   06              BRA MAIN_2
    223        6405               MAIN_1
    224  6     6405 BF   69B9            STX HERO_ANIMATION_ADR_OLD
    225  8     6408 BD   68B4            JSR HERO_ANIMATION_LOAD
    226        640B               MAIN_2
    227                            
    228  5     640B F6   69BD            LDB HERO_ANIMATION_PAG            >>
    229  5     640E F7   69C0            STB HERO_ANIMATION_PAG_DEL+1
    230  5     6411 F7   E7E5            STB $E7E5                         >>
    231  7+3   6414 AD   9F 69C5         JSR [HERO_ANIMATION_DRW]          >>
    232                            
    233  8     6418 BD   641D            JSR SCRC                          >>
    234  3     641B 20   BF              BRA MAIN
    235
    236                           *****************************************>>
    237                           * Changement de page ESPACE ECRAN (affich>>
    238                           *      $E7DD determine la page affichee d>>
    239                           *      D7=0 D6=0 D5=0 D4=0 (#$0_) : page >>
    240                           *      D7=0 D6=1 D5=0 D4=0 (#$4_) : page >>
    241                           *      D7=1 D6=0 D5=0 D4=0 (#$8_) : page >>
    242                           *      D7=1 D6=1 D5=0 D4=0 (#$C_) : page >>
    243                           *   D3 D2 D1 D0  (#$_0 a #$_F) : couleur >>
    244                           *   Remarque : D5 et D4 utilisable unique>>
    245                           *
    246                           * Changement de page ESPACE CARTOUCHE (ec>>
    247                           *      $E7E6 determine la page affichee d>>
    248                           *   D5 : 1 = espace cartouche recouvert p>>
    249                           *   D4 : 0 = CAS1N valide : banques 0-15 >>
    250                           *      D5=1 D4=0 D3=0 D2=0 D1=0 D0=0 (#$6>>
    251                           *   ...
    252                           *      D5=1 D4=0 D3=1 D2=1 D1=1 D0=1 (#$6>>
    253                           *      D5=1 D4=1 D3=0 D2=0 D1=0 D0=0 (#$7>>
    254                           *   ...
    255                           *      D5=1 D4=1 D3=1 D2=1 D1=1 D0=1 (#$7>>
    256                           *****************************************>>
    257        641D               SCRC
    258  7     641D 8D   22              BSR VSYNC
    259
    260  5     641F F6   6438            LDB SCRC0+1
    261  2     6422 C4   01              ANDB #$01
    262  5     6424 FB   69BE            ADDB HERO_ANIMATION_PAG_REF
    263  5     6427 F7   69BD            STB HERO_ANIMATION_PAG
    264                            
    265  5     642A F6   6438            LDB SCRC0+1   * charge la valeur d>>
    266  2     642D C4   80              ANDB #$80     * permute #$00 ou #$>>
    267  2     642F CA   00              ORB #$00      * recharger la coule>>
    268  5     6431 F7   E7DD            STB $E7DD     * changement page da>>
    269  7     6434 73   6438            COM SCRC0+1   * modification du co>>
    270        6437               SCRC0
    271  2     6437 C6   00              LDB #$00
    272  2     6439 C4   02              ANDB #$02     * permute #$60 ou #$>>
    273  2     643B CA   60              ORB #$60      * espace cartouche r>>
    274  5     643D F7   E7E6            STB $E7E6     * changement page da>>
    275  5     6440 39                   RTS                  * E7E6 D5=1 p>>
    276                                                       * CAS1N : ban>>
    277
    278                           *****************************************>>
    279                           * Attente VBL
    280                           *****************************************>>
    281        6441               VSYNC
    282        6441               VSYNC_1
    283  7     6441 7D   E7E7            TST    $E7E7
    284  3     6444 2A   FB              BPL    VSYNC_1
    285        6446               VSYNC_2
    286  7     6446 7D   E7E7            TST    $E7E7
    287  3     6449 2B   FB              BMI    VSYNC_2
    288  5     644B 39                   RTS
    289
    290                           *****************************************>>
    291                           * Copie Memoire de la zone donnee vers ca>>
    292                           * Cycles en fonction de l'implementation
    293                           * 256 octets (-128 a 127) x 64  boucles (>>
    294                           * 128 octets (-64  a 63)  x 128 boucles (>>
    295                           * 32  octets (-16  a 15)  x 512 boucles (>>
    296                           *****************************************>>
    297                            
    298        644C               MEM_COPY_DATA_TO_CART
    299  7     644C 10FF 653C        STS MEM_COPY_DATA_TO_CART_S+2  * sauve>>
    300  4+0   6450 32   C4          LEAS ,U * remplacement de TFR U,S (Gai>>
    301        6452               MEM_COPY_DATA_TO_CART_LOOP
    302  5+6   6452 35   56          PULS       D,X,U
    303  5+1   6454 ED   A8 C0       STD -64,Y
    304  5+1   6457 AF   A8 C2       STX -62,Y
    305  5+1   645A EF   A8 C4       STU -60,Y
    306  5+6   645D 35   56          PULS       D,X,U
    307  5+1   645F ED   A8 C6       STD -58,Y
    308  5+1   6462 AF   A8 C8       STX -56,Y
    309  5+1   6465 EF   A8 CA       STU -54,Y
    310  5+6   6468 35   56          PULS       D,X,U
    311  5+1   646A ED   A8 CC       STD -52,Y
    312  5+1   646D AF   A8 CE       STX -50,Y
    313  5+1   6470 EF   A8 D0       STU -48,Y
    314  5+6   6473 35   56          PULS       D,X,U
    315  5+1   6475 ED   A8 D2       STD -46,Y
    316  5+1   6478 AF   A8 D4       STX -44,Y
    317  5+1   647B EF   A8 D6       STU -42,Y
    318  5+6   647E 35   56          PULS       D,X,U
    319  5+1   6480 ED   A8 D8       STD -40,Y
    320  5+1   6483 AF   A8 DA       STX -38,Y
    321  5+1   6486 EF   A8 DC       STU -36,Y
    322  5+6   6489 35   56          PULS       D,X,U
    323  5+1   648B ED   A8 DE       STD -34,Y
    324  5+1   648E AF   A8 E0       STX -32,Y
    325  5+1   6491 EF   A8 E2       STU -30,Y
    326  5+6   6494 35   56          PULS       D,X,U
    327  5+1   6496 ED   A8 E4       STD -28,Y
    328  5+1   6499 AF   A8 E6       STX -26,Y
    329  5+1   649C EF   A8 E8       STU -24,Y
    330  5+6   649F 35   56          PULS       D,X,U
    331  5+1   64A1 ED   A8 EA       STD -22,Y
    332  5+1   64A4 AF   A8 EC       STX -20,Y
    333  5+1   64A7 EF   A8 EE       STU -18,Y
    334  5+6   64AA 35   56          PULS       D,X,U
    335  5+1   64AC ED   30          STD -16,Y
    336  5+1   64AE AF   32          STX -14,Y
    337  5+1   64B0 EF   34          STU -12,Y
    338  5+6   64B2 35   56          PULS       D,X,U
    339  5+1   64B4 ED   36          STD -10,Y
    340  5+1   64B6 AF   38          STX -8,Y
    341  5+1   64B8 EF   3A          STU -6,Y
    342  5+6   64BA 35   56          PULS       D,X,U
    343  5+1   64BC ED   3C          STD -4,Y
    344  5+1   64BE AF   3E          STX -2,Y
    345  5+0   64C0 EF   A4          STU ,Y
    346  5+6   64C2 35   56          PULS       D,X,U
    347  5+1   64C4 ED   22          STD 2,Y
    348  5+1   64C6 AF   24          STX 4,Y
    349  5+1   64C8 EF   26          STU 6,Y
    350  5+6   64CA 35   56          PULS       D,X,U
    351  5+1   64CC ED   28          STD 8,Y
    352  5+1   64CE AF   2A          STX 10,Y
    353  5+1   64D0 EF   2C          STU 12,Y
    354  5+6   64D2 35   56          PULS       D,X,U
    355  5+1   64D4 ED   2E          STD 14,Y
    356  5+1   64D6 AF   A8 10       STX 16,Y
    357  5+1   64D9 EF   A8 12       STU 18,Y
    358  5+6   64DC 35   56          PULS       D,X,U
    359  5+1   64DE ED   A8 14       STD 20,Y
    360  5+1   64E1 AF   A8 16       STX 22,Y
    361  5+1   64E4 EF   A8 18       STU 24,Y
    362  5+6   64E7 35   56          PULS       D,X,U
    363  5+1   64E9 ED   A8 1A       STD 26,Y
    364  5+1   64EC AF   A8 1C       STX 28,Y
    365  5+1   64EF EF   A8 1E       STU 30,Y
    366  5+6   64F2 35   56          PULS       D,X,U
    367  5+1   64F4 ED   A8 20       STD 32,Y
    368  5+1   64F7 AF   A8 22       STX 34,Y
    369  5+1   64FA EF   A8 24       STU 36,Y
    370  5+6   64FD 35   56          PULS       D,X,U
    371  5+1   64FF ED   A8 26       STD 38,Y
    372  5+1   6502 AF   A8 28       STX 40,Y
    373  5+1   6505 EF   A8 2A       STU 42,Y
    374  5+6   6508 35   56          PULS       D,X,U
    375  5+1   650A ED   A8 2C       STD 44,Y
    376  5+1   650D AF   A8 2E       STX 46,Y
    377  5+1   6510 EF   A8 30       STU 48,Y
    378  5+6   6513 35   56          PULS       D,X,U
    379  5+1   6515 ED   A8 32       STD 50,Y
    380  5+1   6518 AF   A8 34       STX 52,Y
    381  5+1   651B EF   A8 36       STU 54,Y
    382  5+6   651E 35   56          PULS       D,X,U
    383  5+1   6520 ED   A8 38       STD 56,Y
    384  5+1   6523 AF   A8 3A       STX 58,Y
    385  5+1   6526 EF   A8 3C       STU 60,Y
    386  5+2   6529 35   06          PULS       D
    387  5+1   652B ED   A8 3E       STD 62,Y
    388  4+4   652E 31   A9 0080     LEAY 128,Y
    389        6532               MEM_COPY_DATA_TO_CART_E
    390  5     6532 108C 00C0        CMPY    #$00C0
    391  6     6536 1026 FF18        LBNE    MEM_COPY_DATA_TO_CART_LOOP
    392        653A               MEM_COPY_DATA_TO_CART_S
    393  4     653A 10CE 0000        LDS     #$0000    * Rechargement du po>>
    394  5     653E 39               RTS
    395
    396                           *****************************************>>
    397                           * Effacement memoire Cartouche (27000 cy)>>
    398                           *****************************************>>
    399        653F               CLR_CART
    400  5+3   653F 34   48           PSHS U,DP
    401  7     6541 10FF 6576         STS CLR_CART_3+2
    402  4     6545 10CE 4000         LDS #$4000
    403  3     6549 CE   0C0C         LDU #$0C0C
    404  4     654C 108E 0C0C         LDY #$0C0C
    405  3     6550 8E   0C0C         LDX #$0C0C
    406  3     6553 CC   0C0C         LDD #$0C0C
    407  6     6556 1F   8B           TFR A,DP
    408        6558               CLR_CART_2
    409  5+9   6558 34   7E           PSHS U,Y,X,DP,B,A
    410  5+9   655A 34   7E           PSHS U,Y,X,DP,B,A
    411  5+9   655C 34   7E           PSHS U,Y,X,DP,B,A
    412  5+9   655E 34   7E           PSHS U,Y,X,DP,B,A
    413  5+9   6560 34   7E           PSHS U,Y,X,DP,B,A
    414  5+9   6562 34   7E           PSHS U,Y,X,DP,B,A
    415  5+9   6564 34   7E           PSHS U,Y,X,DP,B,A
    416  5+9   6566 34   7E           PSHS U,Y,X,DP,B,A
    417  5+9   6568 34   7E           PSHS U,Y,X,DP,B,A
    418  5+9   656A 34   7E           PSHS U,Y,X,DP,B,A
    419  5     656C 118C 0004         CMPS #$0004
    420  3     6570 26   E6           BNE CLR_CART_2
    421  5+4   6572 34   60           PSHS U,Y
    422        6574               CLR_CART_3
    423  4     6574 10CE 0000         LDS #$0000
    424  5+5   6578 35   C8           PULS DP,U,PC * Ajout du PC au PULS po>>
    425                            
    426                           *****************************************>>
    427                           * Affichage de l arriere plan 57900 cycle>>
    428                           *****************************************>>
    429        657A               DRAW_RAM_DATA_TO_CART_160x200
    430  5+3   657A 34   48              PSHS U,DP            * sauvegarde >>
    431  7     657C 10FF 65E4            STS DRAW_RAM_DATA_TO_CART_160x200A>>
    432                            
    433  4     6580 10CE 1F40            LDS #FINECRANA       * init pointe>>
    434  3     6584 CE   A000            LDU #$A000
    435
    436        6587               DRAW_RAM_DATA_TO_CART_160x200A
    437  5+7   6587 37   3E              PULU A,B,DP,X,Y
    438  5+7   6589 34   3E              PSHS Y,X,DP,B,A
    439  5+7   658B 37   3E              PULU A,B,DP,X,Y
    440  5+7   658D 34   3E              PSHS Y,X,DP,B,A
    441  5+7   658F 37   3E              PULU A,B,DP,X,Y
    442  5+7   6591 34   3E              PSHS Y,X,DP,B,A
    443  5+7   6593 37   3E              PULU A,B,DP,X,Y
    444  5+7   6595 34   3E              PSHS Y,X,DP,B,A
    445  5+7   6597 37   3E              PULU A,B,DP,X,Y
    446  5+7   6599 34   3E              PSHS Y,X,DP,B,A
    447  5+7   659B 37   3E              PULU A,B,DP,X,Y
    448  5+7   659D 34   3E              PSHS Y,X,DP,B,A
    449  5     659F 118C 0014            CMPS #DEBUTECRANA
    450  3     65A3 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200A>>
    451  5+7   65A5 37   3E              PULU A,B,DP,X,Y
    452  5+7   65A7 34   3E              PSHS Y,X,DP,B,A
    453  5+7   65A9 37   3E              PULU A,B,DP,X,Y
    454  5+7   65AB 34   3E              PSHS Y,X,DP,B,A
    455  5+6   65AD 37   3C              PULU B,DP,X,Y
    456  5+6   65AF 34   3C              PSHS Y,X,DP,B
    457
    458  4     65B1 10CE 3F40            LDS #FINECRANB       * init pointe>>
    459  3     65B5 CE   C000            LDU #$C000
    460
    461        65B8               DRAW_RAM_DATA_TO_CART_160x200B
    462  5+7   65B8 37   3E              PULU A,B,DP,X,Y
    463  5+7   65BA 34   3E              PSHS Y,X,DP,B,A
    464  5+7   65BC 37   3E              PULU A,B,DP,X,Y
    465  5+7   65BE 34   3E              PSHS Y,X,DP,B,A
    466  5+7   65C0 37   3E              PULU A,B,DP,X,Y
    467  5+7   65C2 34   3E              PSHS Y,X,DP,B,A
    468  5+7   65C4 37   3E              PULU A,B,DP,X,Y
    469  5+7   65C6 34   3E              PSHS Y,X,DP,B,A
    470  5+7   65C8 37   3E              PULU A,B,DP,X,Y
    471  5+7   65CA 34   3E              PSHS Y,X,DP,B,A
    472  5+7   65CC 37   3E              PULU A,B,DP,X,Y
    473  5+7   65CE 34   3E              PSHS Y,X,DP,B,A
    474  5     65D0 118C 2014            CMPS #DEBUTECRANB
    475  3     65D4 26   E2              BNE DRAW_RAM_DATA_TO_CART_160x200B>>
    476  5+7   65D6 37   3E              PULU A,B,DP,X,Y
    477  5+7   65D8 34   3E              PSHS Y,X,DP,B,A
    478  5+7   65DA 37   3E              PULU A,B,DP,X,Y
    479  5+7   65DC 34   3E              PSHS Y,X,DP,B,A
    480  5+6   65DE 37   3C              PULU B,DP,X,Y
    481  5+6   65E0 34   3C              PSHS Y,X,DP,B
    482        65E2               DRAW_RAM_DATA_TO_CART_160x200A_E
    483  4     65E2 10CE 0000            LDS  #$0000 * rechargement des reg>>
    484  5+5   65E6 35   C8              PULS DP,U,PC * Ajout du PC au PULS>>
    485
    486                           *****************************************>>
    487                           * Palette de 16 couleurs
    488                           *****************************************>>
    489
    490
    491
    492        65E8               TABPALETTE
    493        65E8 0000                 FDB $0000     * index:1  R:0   V:0>>
    494        65EA 0002                 FDB $0002     * index:2  R:139 V:2>>
    495        65EC 024C                 FDB $024c     * index:3  R:236 V:1>>
    496        65EE 0016                 FDB $0016     * index:4  R:189 V:9>>
    497        65F0 0048                 FDB $0048     * index:5  R:206 V:1>>
    498        65F2 0084                 FDB $0084     * index:6  R:167 V:2>>
    499        65F4 0040                 FDB $0040     * index:7  R:75  V:1>>
    500        65F6 0010                 FDB $0010     * index:8  R:16  V:9>>
    501        65F8 0000                 FDB $0000     * index:9  R:0   V:4>>
    502        65FA 0110                 FDB $0110     * index:10 R:22  V:8>>
    503        65FC 0A61                 FDB $0a61     * index:11 R:103 V:1>>
    504        65FE 0DDC                 FDB $0ddc     * index:12 R:239 V:2>>
    505        6600 0C10                 FDB $0c10     * index:13 R:9   V:1>>
    506        6602 0500                 FDB $0500     * index:14 R:12  V:3>>
    507        6604 0000                 FDB $0000     * index:15 R:53  V:7>>
    508        6606 000A                 FDB $000a     * index:16 R:225 V:0>>
    509        6608               FINTABPALETTE
    510
    511                           *****************************************>>
    512                           * Get joystick parameters
    513                           *****************************************>>
    514        6608               JOY_READ
    515  5     6608 B6   6627            LDA    JOY_BTN_STATUS
    516  5     660B B7   6628            STA JOY_BTN_STATUS_OLD
    517  3     660E 8E   E7CF            ldx    #$e7cf
    518  4     6611 108E E7CD            ldy    #$e7cd
    519  3     6615 CC   400F            ldd    #$400f
    520  5     6618 F4   E7CC            andb   >$e7cc     * Read position
    521  5     661B F7   6626            stb    JOY_DIR_STATUS
    522  4+0   661E A4   A4              anda   ,y         * Read button
    523  2     6620 88   40              eora   #$40
    524  5     6622 B7   6627            sta    JOY_BTN_STATUS
    525  5     6625 39                   RTS
    526        6626               JOY_DIR_STATUS
    527        6626 00                   FCB $00 * Position Pad
    528        6627               JOY_BTN_STATUS
    529        6627 00                   FCB $00 * 40 Bouton A enfonce
    530        6628               JOY_BTN_STATUS_OLD
    531        6628 00                   FCB $00 * 40 Bouton A enfonce
    532        6629               HERO_ISJUMPING
    533        6629 00                   FCB $00       * flag is jumping $0>>
    534
    535                           *****************************************>>
    536                           * Subroutine to      make HERO walk/run
    537                           *****************************************>>
    538        662A               Hero_Move
    539                           * si bouton jump: Maj ysp Jump start & ch>>
    540  6     662A FC   6627            LDD JOY_BTN_STATUS
    541  5     662D 1083 4000            CMPD #$4000
    542  3     6631 26   2A              BNE Hero_alreadyJumping     * si s>>
    543  5     6633 F6   6629            LDB HERO_ISJUMPING
    544  3     6636 26   25              BNE Hero_alreadyJumping           >>
    545  7     6638 7C   6629            INC HERO_ISJUMPING          * set >>
    546  6     663B FC   69AD            LDD HERO_G_SPEED            * char>>
    547  3     663E 2D   05              BLT Hero_JumpLeft      * si vitess>>
    548  3     6640 8E   6967            LDX #HERO_JUMP_R        * Charge a>>
    549  3     6643 20   03              BRA Hero_Jump
    550        6645               Hero_JumpLeft
    551  3     6645 8E   697F            LDX #HERO_JUMP_L        * Charge a>>
    552        6648               Hero_Jump
    553  6     6648 BF   69B7            STX HERO_ANIMATION_ADR      * Sauv>>
    554  6     664B FD   69AF            STD HERO_X_SPEED            * Init>>
    555  6     664E FC   69A7            LDD HERO_AIR_JUMP_VEL       * Init>>
    556  6     6651 FD   69B3            STD HERO_Y_SPEED
    557  3     6654 CC   0000            LDD #$0000
    558  6     6657 FD   69B1            STD HERO_X_SPS
    559  6     665A FD   69B5            STD HERO_Y_SPS
    560
    561        665D               Hero_alreadyJumping
    562                           * Maj xsp en fonction de G ou D joystick
    563  5     665D F6   6629            LDB HERO_ISJUMPING
    564  6     6660 1027 0088            LBEQ Hero_OnGround          * si u>>
    565  5     6664 B6   6626            LDA JOY_DIR_STATUS
    566  2     6667 81   07              CMPA #JOY_D
    567  3     6669 27   09              BEQ Hero_JumpAccelD
    568  2     666B 81   0B              CMPA #JOY_G
    569  3     666D 27   0D              BEQ Hero_JumpAccelG
    570  6     666F FC   69AF            LDD HERO_X_SPEED
    571  3     6672 20   0E              BRA Hero_JumpCapTopXSpeed
    572        6674               Hero_JumpAccelD
    573  6     6674 FC   69AF            LDD HERO_X_SPEED
    574  7     6677 F3   69A1            ADDD HERO_AIR_X_ACCELERATION
    575  3     667A 20   06              BRA Hero_JumpCapTopXSpeed
    576        667C               Hero_JumpAccelG
    577  6     667C FC   69AF            LDD HERO_X_SPEED
    578  7     667F B3   69A1            SUBD HERO_AIR_X_ACCELERATION
    579
    580        6682               Hero_JumpCapTopXSpeed
    581                           * Top xsp
    582  8     6682 10B3 6995            CMPD HERO_X_TOP_SPEED
    583  3     6686 2F   03              BLE Hero_JumpAirDrag
    584  6     6688 FC   6995            LDD HERO_X_TOP_SPEED
    585                            
    586        668B               Hero_JumpAirDrag
    587                           * Maj xsp Air drag
    588  6     668B FD   69AF            STD HERO_X_SPEED
    589  6     668E FC   69B3            LDD HERO_Y_SPEED     * si ysp (ysp>>
    590  3     6691 2C   36              BGE Hero_JumpCut
    591  5     6693 1083 FC00            CMPD #$FC00
    592  3     6697 2F   30              BLE Hero_JumpCut
    593  6     6699 FC   69AF            LDD HERO_X_SPEED
    594  3     669C 2C   0D              BGE Hero_JumpAirDragPositive
    595  2     669E C6   C3              LDB #$C3                          >>
    596  5     66A0 F7   66C3            STB Hero_AirDragSUB
    597  3     66A3 CC   0000            LDD #$0000
    598  7     66A6 B3   69AF            SUBD HERO_X_SPEED
    599  3     66A9 20   08              BRA Hero_JumpAirDragCommon
    600        66AB               Hero_JumpAirDragPositive
    601  2     66AB C6   83              LDB #$83                          >>
    602  5     66AD F7   66C3            STB Hero_AirDragSUB
    603  6     66B0 FC   69AF            LDD HERO_X_SPEED
    604        66B3               Hero_JumpAirDragCommon
    605  2     66B3 44                   LSRA   * Division par 32 du regist>>
    606  2     66B4 56                   RORB
    607  2     66B5 44                   LSRA
    608  2     66B6 56                   RORB
    609  2     66B7 44                   LSRA
    610  2     66B8 56                   RORB
    611  2     66B9 44                   LSRA
    612  2     66BA 56                   RORB
    613  2     66BB 44                   LSRA
    614  2     66BC 56                   RORB
    615  5     66BD F7   66C5            STB Hero_AirDragSUB+2       * STB >>
    616  6     66C0 FC   69AF            LDD HERO_X_SPEED
    617        66C3               Hero_AirDragSUB
    618  4     66C3 83   0000            SUBD #$0000
    619  6     66C6 FD   69AF            STD HERO_X_SPEED
    620
    621        66C9               Hero_JumpCut
    622                           * Maj ysp Jump cut
    623  6     66C9 FC   69B3            LDD HERO_Y_SPEED
    624  7     66CC 7D   6627            TST JOY_BTN_STATUS   * si le bouto>>
    625  3     66CF 26   09              BNE Hero_JumpGravity
    626  8     66D1 10B3 69A9            CMPD HERO_AIR_JUMP_CUT      * et s>>
    627  3     66D5 2C   03              BGE Hero_JumpGravity
    628  6     66D7 FC   69A9            LDD HERO_AIR_JUMP_CUT       * ysp >>
    629
    630        66DA               Hero_JumpGravity
    631                           * Maj ysp with gravity
    632  7     66DA F3   69A3            ADDD HERO_AIR_Y_GRAVITY     * ajou>>
    633
    634        66DD               Hero_JumpCapTopYSpeed
    635                           * Top ysp
    636  8     66DD 10B3 6999            CMPD HERO_Y_TOP_SPEED       * si l>>
    637  3     66E1 2F   03              BLE Hero_JumpPosUpdate
    638  6     66E3 FC   6999            LDD HERO_Y_TOP_SPEED * on repositi>>
    639
    640        66E6               Hero_JumpPosUpdate
    641  6     66E6 FD   69B3            STD HERO_Y_SPEED
    642                            
    643                           * Maj X et Y pos
    644  4     66E9 7E   67F1            JMP Hero_MoveUpdatePosJump * rempl>>
    645
    646                           * Gestion a Terre
    647                           ********************************
    648
    649        66EC               Hero_OnGround
    650  5     66EC B6   6626            LDA JOY_DIR_STATUS
    651  2     66EF 81   0B              CMPA #JOY_G
    652  3     66F1 26   02              BNE Hero_NotLeft
    653  3     66F3 20   71              BRA Hero_MoveLeft
    654
    655        66F5               Hero_NotLeft                   * XREF: He>>
    656  2     66F5 81   07              CMPA #JOY_D
    657  3     66F7 26   03              BNE Hero_NotLeftOrRight
    658  4     66F9 7E   67AA            JMP Hero_MoveRight
    659
    660        66FC               Hero_NotLeftOrRight            * XREF: He>>
    661  6     66FC FC   69AD            LDD HERO_G_SPEED
    662  5     66FF 1083 0000            CMPD #$0000
    663  6     6703 1027 00E1            LBEQ Hero_MoveUpdatePos  * Si la v>>
    664  3     6707 2D   32              BLT Hero_NotLeftOrRight_00 * se de>>
    665  7     6709 B3   699F            SUBD HERO_FRICTION     * se deplac>>
    666  5     670C 1083 0000            CMPD #$0000
    667  3     6710 2E   12              BGT Hero_NotLeftOrRight_01 * si on>>
    668  3     6712 CC   0000            LDD #$0000
    669  6     6715 FD   69AD            STD HERO_G_SPEED
    670  6     6718 FD   69B1            STD HERO_X_SPS
    671  3     671B 8E   6943            LDX #HERO_IDLE_R        * Charge a>>
    672  6     671E BF   69B7            STX HERO_ANIMATION_ADR      * Sauv>>
    673
    674  4     6721 7E   67E8            JMP Hero_MoveUpdatePos
    675        6724               Hero_NotLeftOrRight_01
    676  5     6724 1083 0600            CMPD #HERO_JOG_SPD_LIMIT
    677  3     6728 2C   0B              BGE Hero_NotLeftOrRight_02
    678  6     672A FD   69AD            STD HERO_G_SPEED
    679  3     672D 8E   6937            LDX #HERO_WALK_R        * Charge a>>
    680  6     6730 BF   69B7            STX HERO_ANIMATION_ADR      * Sauv>>
    681
    682  3     6733 20   03              BRA Hero_NotLeftOrRight_03
    683        6735               Hero_NotLeftOrRight_02
    684  6     6735 FD   69AD            STD HERO_G_SPEED
    685        6738               Hero_NotLeftOrRight_03
    686  4     6738 7E   67E8            JMP Hero_MoveUpdatePos
    687        673B               Hero_NotLeftOrRight_00
    688  7     673B F3   699F            ADDD HERO_FRICTION     * se deplac>>
    689  3     673E 24   0F              BCC Hero_NotLeftOrRight_11 * si on>>
    690  3     6740 CC   0000            LDD #$0000
    691  6     6743 FD   69AD            STD HERO_G_SPEED
    692  3     6746 8E   698B            LDX #HERO_IDLE_L        * Charge a>>
    693  6     6749 BF   69B7            STX HERO_ANIMATION_ADR      * Sauv>>
    694
    695  4     674C 7E   67E8            JMP Hero_MoveUpdatePos
    696        674F               Hero_NotLeftOrRight_11
    697  5     674F 1083 FA00            CMPD #HERO_JOG_NEG_SPD_LIMIT
    698  3     6753 2F   0B              BLE Hero_NotLeftOrRight_12
    699  6     6755 FD   69AD            STD HERO_G_SPEED
    700  3     6758 8E   695B            LDX #HERO_WALK_L        * Charge a>>
    701  6     675B BF   69B7            STX HERO_ANIMATION_ADR      * Sauv>>
    702
    703  3     675E 20   03              BRA Hero_NotLeftOrRight_13
    704        6760               Hero_NotLeftOrRight_12
    705  6     6760 FD   69AD            STD HERO_G_SPEED
    706        6763               Hero_NotLeftOrRight_13
    707  4     6763 7E   67E8            JMP Hero_MoveUpdatePos
    708
    709        6766               Hero_MoveLeft                      * XREF>>
    710  6     6766 FC   69AD            LDD HERO_G_SPEED            * Char>>
    711  5     6769 1083 0000            CMPD #$0000                 * Test>>
    712  3     676D 2F   11              BLE Hero_MoveLeft_00        * BRAN>>
    713  7     676F B3   699D            SUBD HERO_DECELERATION      * orie>>
    714  3     6772 24   06              BCC Hero_MoveLeft_03        * BRAN>>
    715  3     6774 CC   0000            LDD #$0000
    716  7     6777 B3   699D            SUBD HERO_DECELERATION      * si l>>
    717        677A               Hero_MoveLeft_03
    718  6     677A FD   69AD            STD HERO_G_SPEED            * On s>>
    719  4     677D 7E   67E8            JMP Hero_MoveUpdatePos            >>
    720        6780               Hero_MoveLeft_00                         >>
    721  8     6780 10B3 6997            CMPD HERO_X_NEG_TOP_SPEED   * Comp>>
    722  3     6784 27   62              BEQ Hero_MoveUpdatePos      * vite>>
    723  7     6786 B3   699B            SUBD HERO_ACCELERATION      * acce>>
    724  8     6789 10B3 6997            CMPD HERO_X_NEG_TOP_SPEED   * Comp>>
    725  3     678D 2E   0F              BGT Hero_MoveLeft_01        * BRAN>>
    726  3     678F 8E   6973            LDX #HERO_RUN_L        * Charge an>>
    727  6     6792 BF   69B7            STX HERO_ANIMATION_ADR      * Sauv>>
    728
    729  6     6795 FC   6997            LDD HERO_X_NEG_TOP_SPEED    * Limi>>
    730  6     6798 FD   69AD            STD HERO_G_SPEED            * Enre>>
    731  4     679B 7E   67E8            JMP Hero_MoveUpdatePos      * Mise>>
    732        679E               Hero_MoveLeft_01
    733  6     679E FD   69AD            STD HERO_G_SPEED            * Enre>>
    734  3     67A1 8E   695B            LDX #HERO_WALK_L        * Charge a>>
    735  6     67A4 BF   69B7            STX HERO_ANIMATION_ADR      * Sauv>>
    736
    737  4     67A7 7E   67E8            JMP Hero_MoveUpdatePos
    738
    739        67AA               Hero_MoveRight                  * XREF: H>>
    740  6     67AA FC   69AD            LDD HERO_G_SPEED        * Chargeme>>
    741  5     67AD 1083 0000            CMPD #$0000                 * Test>>
    742  3     67B1 2C   0E              BGE Hero_MoveRight_00       * BRAN>>
    743  7     67B3 F3   699D            ADDD HERO_DECELERATION      * orie>>
    744  3     67B6 24   03              BCC Hero_MoveRight_03       * BRAN>>
    745  6     67B8 FC   699D            LDD HERO_DECELERATION   * si la vi>>
    746        67BB               Hero_MoveRight_03
    747  6     67BB FD   69AD            STD HERO_G_SPEED        * On stock>>
    748  4     67BE 7E   67E8            JMP Hero_MoveUpdatePos            >>
    749        67C1               Hero_MoveRight_00                  * Orie>>
    750  8     67C1 10B3 6995            CMPD HERO_X_TOP_SPEED             >>
    751  3     67C5 27   21              BEQ Hero_MoveUpdatePos      * vite>>
    752  7     67C7 F3   699B            ADDD HERO_ACCELERATION      * acce>>
    753  8     67CA 10B3 6995            CMPD HERO_X_TOP_SPEED             >>
    754  3     67CE 2D   0F              BLT Hero_MoveRight_01       * BRAN>>
    755  3     67D0 8E   694F            LDX #HERO_RUN_R                   >>
    756  6     67D3 BF   69B7            STX HERO_ANIMATION_ADR      * Sauv>>
    757
    758  6     67D6 FC   6995            LDD HERO_X_TOP_SPEED        * Limi>>
    759  6     67D9 FD   69AD            STD HERO_G_SPEED            * Enre>>
    760  4     67DC 7E   67E8            JMP Hero_MoveUpdatePos            >>
    761        67DF               Hero_MoveRight_01
    762  6     67DF FD   69AD            STD HERO_G_SPEED                  >>
    763  3     67E2 8E   6937            LDX #HERO_WALK_R                  >>
    764  6     67E5 BF   69B7            STX HERO_ANIMATION_ADR            >>
    765
    766                           *****************************************>>
    767                           * Mise a jour de la vitesse X et Y a part>>
    768                           *****************************************>>
    769
    770        67E8               Hero_MoveUpdatePos
    771  6     67E8 FC   69AD            LDD HERO_G_SPEED                  >>
    772                           * TODO MAJ HERO_X_SPEED : xsp = gsp*cos(a>>
    773                           * TODO MAJ HERO_Y_SPEED : ysp = gsp*-sin(>>
    774  6     67EB FD   69AF            STD HERO_X_SPEED
    775  7     67EE 7F   69B3            CLR HERO_Y_SPEED
    776
    777                           *****************************************>>
    778                           * Mise a jour de la position X et Y a par>>
    779                           *****************************************>>
    780
    781                           * Coordonnees X
    782                           ***************
    783
    784        67F1               Hero_MoveUpdatePosJump
    785  6     67F1 FC   69AF            LDD HERO_X_SPEED
    786  3     67F4 2C   0D              BGE Hero_MoveUpdateXPos_00        >>
    787  2     67F6 86   C0              LDA #$C0                          >>
    788  5     67F8 B7   6820            STA Hero_MoveUpdateXPos_00C       >>
    789  3     67FB CC   0000            LDD #$0000
    790  7     67FE B3   69AF            SUBD HERO_X_SPEED                 >>
    791  3     6801 20   08              BRA Hero_MoveUpdateXPos_00A
    792        6803               Hero_MoveUpdateXPos_00
    793  2     6803 86   CB              LDA #$CB                          >>
    794  5     6805 B7   6820            STA Hero_MoveUpdateXPos_00C       >>
    795  6     6808 FC   69AF            LDD HERO_X_SPEED
    796        680B               Hero_MoveUpdateXPos_00A
    797  7     680B F3   69B1            ADDD HERO_X_SPS                   >>
    798  5     680E B7   6817            STA Hero_MoveUpdateXPos_00B+1     >>
    799  2     6811 84   03              ANDA #$03                         >>
    800  6     6813 FD   69B1            STD HERO_X_SPS                    >>
    801        6816               Hero_MoveUpdateXPos_00B
    802  2     6816 C6   00              LDB #$00                          >>
    803  2     6818 54                   LSRB                              >>
    804  2     6819 54                   LSRB                              >>
    805  5     681A F7   6821            STB Hero_MoveUpdateXPos_00C+1     >>
    806  5     681D F6   69AB            LDB HERO_X_POS
    807        6820               Hero_MoveUpdateXPos_00C
    808  2     6820 CB   00              ADDB #$00                         >>
    809        6822               Hero_MoveUpdateXPos_01
    810  2     6822 C1   50              CMPB #$50                         >>
    811  3     6824 2F   02              BLE Hero_MoveUpdateXPos_02  * Bute>>
    812  2     6826 C6   50              LDB #$50                          >>
    813        6828               Hero_MoveUpdateXPos_02
    814  2     6828 C1   0C           CMPB #$0C                            >>
    815  3     682A 2C   02              BGE Hero_MoveUpdateXPos_03  * Bute>>
    816  2     682C C6   0C              LDB #$0C                          >>
    817        682E               Hero_MoveUpdateXPos_03
    818  5     682E F7   69AB            STB HERO_X_POS
    819
    820                           * Coordonnees Y
    821                           ***************
    822
    823  6     6831 FC   69B3            LDD HERO_Y_SPEED                  >>
    824  3     6834 2C   0D              BGE Hero_MoveUpdateYPos_00        >>
    825  2     6836 86   C0              LDA #$C0                          >>
    826  5     6838 B7   6857            STA Hero_MoveUpdateYPos_00C       >>
    827  3     683B CC   0000            LDD #$0000
    828  7     683E B3   69B3            SUBD HERO_Y_SPEED                 >>
    829  3     6841 20   08              BRA Hero_MoveUpdateYPos_00A
    830        6843               Hero_MoveUpdateYPos_00
    831  2     6843 86   CB              LDA #$CB                          >>
    832  5     6845 B7   6857            STA Hero_MoveUpdateYPos_00C       >>
    833  6     6848 FC   69B3            LDD HERO_Y_SPEED
    834        684B               Hero_MoveUpdateYPos_00A
    835  7     684B F3   69B5            ADDD HERO_Y_SPS                   >>
    836  5     684E F7   69B6            STB HERO_Y_SPS+1                  >>
    837  5     6851 B7   6858            STA Hero_MoveUpdateYPos_00C+1     >>
    838  5     6854 F6   69AC            LDB HERO_Y_POS
    839        6857               Hero_MoveUpdateYPos_00C
    840  2     6857 CB   00              ADDB #$00                         >>
    841        6859               Hero_MoveUpdateYPos_01
    842  2     6859 C1   A2              CMPB #$A2                         >>
    843  3     685B 23   1A              BLS Hero_MoveUpdateYPos_03        >>
    844  2     685D C6   A2              LDB #$A2                          >>
    845  7     685F 7D   6629            TST HERO_ISJUMPING
    846  3     6862 27   13              BEQ Hero_MoveUpdateYPos_03  * pas >>
    847  5     6864 F7   69AC            STB HERO_Y_POS
    848                           * si retombe au sol on repositionne anima>>
    849  7     6867 7F   6629            CLR HERO_ISJUMPING
    850  6     686A FC   69AF            LDD HERO_X_SPEED
    851  6     686D FD   69AD            STD HERO_G_SPEED
    852  3     6870 8E   6943            LDX #HERO_IDLE_R                  >>
    853  6     6873 BF   69B7            STX HERO_ANIMATION_ADR            >>
    854  5     6876 39                   RTS
    855        6877               Hero_MoveUpdateYPos_03
    856  5     6877 F7   69AC            STB HERO_Y_POS
    857  5     687A 39                   RTS
    858
    859                           * TODO : Braking Animation
    860                           * Sonic enters his braking animation when>>
    861                           * In Sonic 1 and Sonic CD, he then stays >>
    862                           * In the other 3 games, Sonic returns to >>
    863
    864        687B               Compute_Position
    865  5     687B B6   69AB            LDA HERO_X_POS
    866  2     687E 44                   LSRA
    867  3     687F 25   17              BCS Compute_Position_01
    868  5     6881 B7   68B3            STA Compute_Position_02+1
    869  2     6884 86   28              LDA #$28
    870  5     6886 F6   69AC            LDB HERO_Y_POS
    871  2     6889 5A                   DECB
    872  11    688A 3D                   MUL
    873  7     688B F3   68B2            ADDD Compute_Position_02
    874  6     688E FD   9F00            STD HERO_POS
    875  4     6891 C3   2000            ADDD #$2000                       >>
    876  6     6894 FD   9F02            STD HERO_POS+2
    877  5     6897 39                   RTS
    878        6898               Compute_Position_01
    879  5     6898 B7   68B3            STA Compute_Position_02+1
    880  2     689B 86   28              LDA #$28
    881  5     689D F6   69AC            LDB HERO_Y_POS
    882  2     68A0 5A                   DECB
    883  11    68A1 3D                   MUL
    884  7     68A2 F3   68B2            ADDD Compute_Position_02
    885  4     68A5 C3   2000            ADDD #$2000
    886  6     68A8 FD   9F00            STD HERO_POS
    887  4     68AB 83   1FFF            SUBD #$1FFF
    888  6     68AE FD   9F02            STD HERO_POS+2
    889  5     68B1 39                   RTS
    890        68B2               Compute_Position_02
    891        68B2 0000                 FDB $0000
    892
    893                           *****************************************>>
    894                           * HERO Animations nb Cycles
    895                           * -------------------------
    896                           * Note: Speed abs +0, rel +8, rel cap +10>>
    897                           *
    898                           * Chargement nouvelle animation
    899                           *    nouvelle frame = 109 a 119
    900                           *
    901                           * Chargement frame suivante
    902                           *    frame identique = 15
    903                           * ou frame suivante  = 116 a 126
    904                           *
    905                           * Chargement frame suivante avec branchem>>
    906                           *    nouvelle frame = 165 a 175
    907                           * ou frame suivante = 172 a 182
    908                           *
    909                           * Chargement frame suivante avec retour s>>
    910                           *    nouvelle frame = 167 a 177
    911                           * ou frame suivante = 174 a 184
    912                           *****************************************>>
    913
    914        68B4               HERO_ANIMATION_LOAD                      >>
    915  6     68B4 BF   69B7            STX HERO_ANIMATION_ADR
    916  6     68B7 BF   69BB            STX HERO_ANIMATION_RTN_ADR
    917  7     68BA 7F   69C7            CLR HERO_ANIMATION_IMC            >>
    918        68BD               HERO_ANIMATION_LOAD_00
    919  5+1   68BD EC   1E              LDD -2,X                          >>
    920  2     68BF 81   00              CMPA #$00                         >>
    921  3     68C1 27   16              BEQ HERO_ANIMATION_LOAD_01
    922  5     68C3 B6   69AD            LDA HERO_G_SPEED              * G_>>
    923  3     68C6 2C   08              BGE HERO_ANIMATION_LOAD_01A
    924  3     68C8 CC   0000            LDD #$0000
    925  7     68CB B3   69AD            SUBD HERO_G_SPEED                 >>
    926  4+1   68CE E6   1F              LDB -1,X                          >>
    927        68D0               HERO_ANIMATION_LOAD_01A
    928  5     68D0 B7   68D4            STA HERO_ANIMATION_LOAD_01B+1 * Au>>
    929        68D3               HERO_ANIMATION_LOAD_01B
    930  2     68D3 C0   00              SUBB #$00                         >>
    931  3     68D5 24   02              BCC HERO_ANIMATION_LOAD_01
    932  2     68D7 C6   01              LDB #$01                          >>
    933                            
    934        68D9               HERO_ANIMATION_LOAD_01
    935  5     68D9 F7   69C9            STB HERO_ANIMATION_FRR            >>
    936  5     68DC B6   69C7            LDA HERO_ANIMATION_IMC
    937  2     68DF C6   05              LDB #$05
    938  11    68E1 3D                   MUL
    939  7     68E2 F3   69B7            ADDD HERO_ANIMATION_ADR
    940  6     68E5 1F   02              TFR D,Y
    941  4+0   68E7 E6   A4              LDB ,Y
    942  2     68E9 C1   1F              CMPB #$1F                         >>
    943  3     68EB 22   1C              BHI HERO_ANIMATION_LOAD_NOPAGE
    944  5     68ED B6   69BD            LDA HERO_ANIMATION_PAG
    945  5     68F0 F7   69BD            STB HERO_ANIMATION_PAG
    946  5     68F3 B1   69BE            CMPA HERO_ANIMATION_PAG_REF
    947  3     68F6 27   03              BEQ HERO_ANIMATION_LOAD_02
    948  7     68F8 7C   69BD            INC HERO_ANIMATION_PAG        * si>>
    949        68FB               HERO_ANIMATION_LOAD_02
    950  5     68FB F7   69BE            STB HERO_ANIMATION_PAG_REF    * on>>
    951  5+1   68FE AE   21              LDX 1,Y
    952  6     6900 BF   69C5            STX HERO_ANIMATION_DRW
    953  5+1   6903 AE   23              LDX 3,Y
    954  6     6905 BF   69C3            STX HERO_ANIMATION_DEL+2
    955  5     6908 39                   RTS
    956        6909               HERO_ANIMATION_LOAD_NOPAGE
    957  2     6909 C1   FF              CMPB #$FF
    958  3     690B 26   0C              BNE HERO_ANIMATION_LOAD_FE
    959  5+1   690D AE   23              LDX 3,Y
    960  6     690F BF   69C7            STX HERO_ANIMATION_IMC            >>
    961  5+1   6912 AE   21              LDX 1,Y
    962  6     6914 BF   69B7            STX HERO_ANIMATION_ADR
    963  3     6917 20   A4              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    964        6919               HERO_ANIMATION_LOAD_FE
    965  6     6919 BE   69BB            LDX HERO_ANIMATION_RTN_ADR  * RETU>>
    966  6     691C BF   69B7            STX HERO_ANIMATION_ADR
    967  5     691F F6   69C8            LDB HERO_ANIMATION_RTN_IMC
    968  5     6922 F7   69C7            STB HERO_ANIMATION_IMC
    969  3     6925 20   96              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    970
    971        6927               HERO_ANIMATION_NEXT
    972  7     6927 7A   69C9            DEC HERO_ANIMATION_FRR
    973  3     692A 2F   01              BLE HERO_ANIMATION_NEXT_00  * BRAN>>
    974  5     692C 39                   RTS
    975        692D               HERO_ANIMATION_NEXT_00
    976  7     692D 7C   69C7            INC HERO_ANIMATION_IMC
    977  6     6930 BE   69B7            LDX HERO_ANIMATION_ADR
    978  3     6933 20   88              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    979                            
    980                           *   SAMPLE CODE ANIMATION
    981                           *      ---------------------
    982                           *      FDB $0018            * 00 Absolute>>
    983                           *HERO_IDLE_L
    984                           *      FCB $01                     * Page>>
    985                           *      FDB $A000            * Adresse drw>>
    986                           *      FDB $A000            * Adresse del>>
    987                           *
    988                           *      FCB $FF                     * FF S>>
    989                           *      FDB HERO_IDLE-C * adresse animatio>>
    990                           *      FDB $0301            * 03 image ci>>
    991                           *
    992                           *      FCB $FE                     * FE R>>
    993                           *
    994                           *      LDX #HERO_IDLE_R
    995                           *      JSR HERO_ANIMATION_LOAD
    996                           *
    997                           *      JSR HERO_ANIMATION_NEXT
    998
    999                           *****************************************>>
   1000                           * ANIMATION Scripts
   1001                           *****************************************>>
   1002
   1003
   1004
   1005        6935 0018                 FDB $0018
   1006        6937               HERO_WALK_R
   1007        6937 04                   FCB $04
   1008        6938 A000                 FDB $A000
   1009        693A A4AF                 FDB $A4AF
   1010        693C FF                   FCB $FF
   1011        693D 6937                 FDB HERO_WALK_R
   1012        693F 0000                 FDB $0000
   1013
   1014        6941 0018                 FDB $0018
   1015        6943               HERO_IDLE_R
   1016        6943 04                   FCB $04
   1017        6944 A000                 FDB $A000
   1018        6946 A4AF                 FDB $A4AF
   1019        6948 FF                   FCB $FF
   1020        6949 6943                 FDB HERO_IDLE_R
   1021        694B 0000                 FDB $0000
   1022
   1023        694D 0018                 FDB $0018
   1024        694F               HERO_RUN_R
   1025        694F 04                   FCB $04
   1026        6950 A000                 FDB $A000
   1027        6952 A4AF                 FDB $A4AF
   1028        6954 FF                   FCB $FF
   1029        6955 694F                 FDB HERO_RUN_R
   1030        6957 0000                 FDB $0000
   1031
   1032        6959 0018                 FDB $0018
   1033        695B               HERO_WALK_L
   1034        695B 04                   FCB $04
   1035        695C A000                 FDB $A000
   1036        695E A4AF                 FDB $A4AF
   1037        6960 FF                   FCB $FF
   1038        6961 695B                 FDB HERO_WALK_L
   1039        6963 0000                 FDB $0000
   1040
   1041        6965 0018                 FDB $0018
   1042        6967               HERO_JUMP_R
   1043        6967 04                   FCB $04
   1044        6968 A000                 FDB $A000
   1045        696A A4AF                 FDB $A4AF
   1046        696C FF                   FCB $FF
   1047        696D 6967                 FDB HERO_JUMP_R
   1048        696F 0000                 FDB $0000
   1049
   1050        6971 0018                 FDB $0018
   1051        6973               HERO_RUN_L
   1052        6973 04                   FCB $04
   1053        6974 A000                 FDB $A000
   1054        6976 A4AF                 FDB $A4AF
   1055        6978 FF                   FCB $FF
   1056        6979 6973                 FDB HERO_RUN_L
   1057        697B 0000                 FDB $0000
   1058
   1059        697D 0018                 FDB $0018
   1060        697F               HERO_JUMP_L
   1061        697F 04                   FCB $04
   1062        6980 A000                 FDB $A000
   1063        6982 A4AF                 FDB $A4AF
   1064        6984 FF                   FCB $FF
   1065        6985 697F                 FDB HERO_JUMP_L
   1066        6987 0000                 FDB $0000
   1067
   1068        6989 0018                 FDB $0018
   1069        698B               HERO_IDLE_L
   1070        698B 04                   FCB $04
   1071        698C A000                 FDB $A000
   1072        698E A4AF                 FDB $A4AF
   1073        6990 FF                   FCB $FF
   1074        6991 698B                 FDB HERO_IDLE_L
   1075        6993 0000                 FDB $0000
   1076                            
   1077                           *****************************************>>
   1078                           * HERO Variables
   1079                           *****************************************>>
   1080
   1081        6995               HERO_X_TOP_SPEED
   1082        6995 0600                 FDB $0600        * 0600 vitesse X >>
   1083        6997               HERO_X_NEG_TOP_SPEED
   1084        6997 FA00                 FDB $FA00        * FA00 vitesse X >>
   1085        6999               HERO_Y_TOP_SPEED
   1086        6999 1000                 FDB $1000        * 0010 vitesse Y >>
   1087        699B               HERO_ACCELERATION
   1088        699B 000C                 FDB $000C        * 000C constante >>
   1089        699D               HERO_DECELERATION
   1090        699D 0080                 FDB $0080        * 0080 constante >>
   1091        699F               HERO_FRICTION
   1092        699F 000C                 FDB $000C        * 000C constante >>
   1093        69A1               HERO_AIR_X_ACCELERATION
   1094        69A1 0018                 FDB $0018        * 0018 constate a>>
   1095        69A3               HERO_AIR_Y_GRAVITY
   1096        69A3 0038                 FDB $0038        * 0038 constante >>
   1097        69A5               HERO_AIR_X_DRAG
   1098        69A5 00F8                 FDB $00F8        * 00F8 constante >>
   1099        69A7               HERO_AIR_JUMP_VEL
   1100        69A7 F980                 FDB $F980             * F980 const>>
   1101        69A9               HERO_AIR_JUMP_CUT
   1102        69A9 FC00                 FDB $FC00             * FC constan>>
   1103                            
   1104                           *HERO_WALK_SPD_LIMIT EQU $0400           >>
   1105                           *HERO_WALK_NEG_SPD_LIMIT EQU $FC00  * FC0>>
   1106                  0600     HERO_JOG_SPD_LIMIT EQU $0600        * 060>>
   1107                  FA00     HERO_JOG_NEG_SPD_LIMIT EQU $FA00    * FA0>>
   1108
   1109        69AB               HERO_X_POS
   1110        69AB 18                   FCB $18                     * Hori>>
   1111        69AC               HERO_Y_POS
   1112        69AC A2                   FCB $A2                     * Vert>>
   1113        69AD               HERO_G_SPEED
   1114        69AD 0000                 FDB $0000            * Ground Spee>>
   1115        69AF               HERO_X_SPEED
   1116        69AF 0000                 FDB $0000            * Horizontal >>
   1117        69B1               HERO_X_SPS
   1118        69B1 0000                 FDB $0000            * Subpixel X >>
   1119        69B3               HERO_Y_SPEED
   1120        69B3 0000                 FDB $0000            * Vertical Sp>>
   1121        69B5               HERO_Y_SPS
   1122        69B5 0000                 FDB $0000            * Subpixel Y >>
   1123                            
   1124        69B7               HERO_ANIMATION_ADR
   1125        69B7 0000                 FDB $0000        * Animation coura>>
   1126        69B9               HERO_ANIMATION_ADR_OLD
   1127        69B9 0000                 FDB $0000        * Sauvegarde anci>>
   1128        69BB               HERO_ANIMATION_RTN_ADR
   1129        69BB 0000                 FDB $0000        * Animation coura>>
   1130        69BD               HERO_ANIMATION_PAG
   1131        69BD 00                   FCB $00          * Animation coura>>
   1132        69BE               HERO_ANIMATION_PAG_REF
   1133        69BE 00                   FCB $00          * Animation coura>>
   1134        69BF               HERO_ANIMATION_PAG_DEL
   1135        69BF 00                   FCB $00        * Animation courant>>
   1136        69C0 00                   FCB $00        * Animation courant>>
   1137        69C1               HERO_ANIMATION_DEL
   1138        69C1 0000                 FDB $0000        * Animation coura>>
   1139        69C3 0000                 FDB $0000        * Animation coura>>
   1140        69C5               HERO_ANIMATION_DRW
   1141        69C5 0000                 FDB $0000        * Animation coura>>
   1142        69C7               HERO_ANIMATION_IMC
   1143        69C7 00                   FCB $00          * Animation coura>>
   1144        69C8               HERO_ANIMATION_RTN_IMC
   1145        69C8 00                   FCB $00          * Animation coura>>
   1146        69C9               HERO_ANIMATION_FRR
   1147        69C9 00                   FCB $00          * Animation coura>>

000000 Total Errors

000155 Total Symbols
     0x          Label 6300 BEGIN
     0x          Label 653F CLR_CART
     1x          Label 6558 CLR_CART_2
     1x          Label 6574 CLR_CART_3
     2x          Label 687B Compute_Position
     1x          Label 6898 Compute_Position_01
     4x          Label 68B2 Compute_Position_02
     3x          Label 6345 CPPAGE_LOOP
     1x          Equ   0014 DEBUTECRANA
     1x          Equ   2014 DEBUTECRANB
     1x          Equ   622C DK_dernier_bloc_a_ecrire
     1x          Equ   6213 DK_destination
     1x          Equ   6205 DK_lecture
     1x          Equ   620A DK_piste
     2x          Equ   620F DK_secteur
     0x          Label 657A DRAW_RAM_DATA_TO_CART_160x200
     1x          Label 6587 DRAW_RAM_DATA_TO_CART_160x200A
     1x          Label 65E2 DRAW_RAM_DATA_TO_CART_160x200A_E
     1x          Label 65B8 DRAW_RAM_DATA_TO_CART_160x200B
     1x          Equ   1F40 FINECRANA
     1x          Equ   3F40 FINECRANB
     1x          Label 6608 FINTABPALETTE
     2x          Label 699B HERO_ACCELERATION
     3x          Label 66C3 Hero_AirDragSUB
     2x          Label 69A9 HERO_AIR_JUMP_CUT
     1x          Label 69A7 HERO_AIR_JUMP_VEL
     2x          Label 69A1 HERO_AIR_X_ACCELERATION
     0x          Label 69A5 HERO_AIR_X_DRAG
     1x          Label 69A3 HERO_AIR_Y_GRAVITY
     2x          Label 665D Hero_alreadyJumping
    16x          Label 69B7 HERO_ANIMATION_ADR
     3x          Label 69B9 HERO_ANIMATION_ADR_OLD
     4x          Label 69C1 HERO_ANIMATION_DEL
     3x          Label 69C5 HERO_ANIMATION_DRW
     2x          Label 69C9 HERO_ANIMATION_FRR
     5x          Label 69C7 HERO_ANIMATION_IMC
     2x          Label 68B4 HERO_ANIMATION_LOAD
     3x          Label 68BD HERO_ANIMATION_LOAD_00
     2x          Label 68D9 HERO_ANIMATION_LOAD_01
     1x          Label 68D0 HERO_ANIMATION_LOAD_01A
     1x          Label 68D3 HERO_ANIMATION_LOAD_01B
     1x          Label 68FB HERO_ANIMATION_LOAD_02
     1x          Label 6919 HERO_ANIMATION_LOAD_FE
     1x          Label 6909 HERO_ANIMATION_LOAD_NOPAGE
     1x          Label 6927 HERO_ANIMATION_NEXT
     1x          Label 692D HERO_ANIMATION_NEXT_00
     6x          Label 69BD HERO_ANIMATION_PAG
     4x          Label 69BF HERO_ANIMATION_PAG_DEL
     3x          Label 69BE HERO_ANIMATION_PAG_REF
     2x          Label 69BB HERO_ANIMATION_RTN_ADR
     1x          Label 69C8 HERO_ANIMATION_RTN_IMC
     4x          Label 699D HERO_DECELERATION
     2x          Label 699F HERO_FRICTION
    20x          Label 69AD HERO_G_SPEED
     2x          Label 698B HERO_IDLE_L
     4x          Label 6943 HERO_IDLE_R
     5x          Label 6629 HERO_ISJUMPING
     1x          Equ   FA00 HERO_JOG_NEG_SPD_LIMIT
     1x          Equ   0600 HERO_JOG_SPD_LIMIT
     1x          Label 6648 Hero_Jump
     1x          Label 6674 Hero_JumpAccelD
     1x          Label 667C Hero_JumpAccelG
     1x          Label 668B Hero_JumpAirDrag
     1x          Label 66B3 Hero_JumpAirDragCommon
     1x          Label 66AB Hero_JumpAirDragPositive
     2x          Label 6682 Hero_JumpCapTopXSpeed
     0x          Label 66DD Hero_JumpCapTopYSpeed
     2x          Label 66C9 Hero_JumpCut
     2x          Label 66DA Hero_JumpGravity
     1x          Label 6645 Hero_JumpLeft
     1x          Label 66E6 Hero_JumpPosUpdate
     2x          Label 697F HERO_JUMP_L
     2x          Label 6967 HERO_JUMP_R
     1x          Label 662A Hero_Move
     1x          Label 6766 Hero_MoveLeft
     1x          Label 6780 Hero_MoveLeft_00
     1x          Label 679E Hero_MoveLeft_01
     1x          Label 677A Hero_MoveLeft_03
     1x          Label 67AA Hero_MoveRight
     1x          Label 67C1 Hero_MoveRight_00
     1x          Label 67DF Hero_MoveRight_01
     1x          Label 67BB Hero_MoveRight_03
    12x          Label 67E8 Hero_MoveUpdatePos
     1x          Label 67F1 Hero_MoveUpdatePosJump
     1x          Label 6803 Hero_MoveUpdateXPos_00
     1x          Label 680B Hero_MoveUpdateXPos_00A
     1x          Label 6816 Hero_MoveUpdateXPos_00B
     3x          Label 6820 Hero_MoveUpdateXPos_00C
     0x          Label 6822 Hero_MoveUpdateXPos_01
     1x          Label 6828 Hero_MoveUpdateXPos_02
     1x          Label 682E Hero_MoveUpdateXPos_03
     1x          Label 6843 Hero_MoveUpdateYPos_00
     1x          Label 684B Hero_MoveUpdateYPos_00A
     3x          Label 6857 Hero_MoveUpdateYPos_00C
     0x          Label 6859 Hero_MoveUpdateYPos_01
     2x          Label 6877 Hero_MoveUpdateYPos_03
     1x          Label 66F5 Hero_NotLeft
     1x          Label 66FC Hero_NotLeftOrRight
     1x          Label 673B Hero_NotLeftOrRight_00
     1x          Label 6724 Hero_NotLeftOrRight_01
     1x          Label 6735 Hero_NotLeftOrRight_02
     1x          Label 6738 Hero_NotLeftOrRight_03
     1x          Label 674F Hero_NotLeftOrRight_11
     1x          Label 6760 Hero_NotLeftOrRight_12
     1x          Label 6763 Hero_NotLeftOrRight_13
     1x          Label 66EC Hero_OnGround
     4x          Equ   9F00 HERO_POS
     2x          Label 6973 HERO_RUN_L
     2x          Label 694F HERO_RUN_R
     3x          Label 695B HERO_WALK_L
     3x          Label 6937 HERO_WALK_R
     3x          Label 6997 HERO_X_NEG_TOP_SPEED
     3x          Label 69AB HERO_X_POS
    15x          Label 69AF HERO_X_SPEED
     4x          Label 69B1 HERO_X_SPS
     5x          Label 6995 HERO_X_TOP_SPEED
     5x          Label 69AC HERO_Y_POS
     8x          Label 69B3 HERO_Y_SPEED
     3x          Label 69B5 HERO_Y_SPS
     2x          Label 6999 HERO_Y_TOP_SPEED
     0x          Label 6394 INIT_VID
     0x          Equ   0040 JOY_A
     0x          Equ   000D JOY_B
     0x          Equ   0005 JOY_BD
     0x          Equ   0009 JOY_BG
     4x          Label 6627 JOY_BTN_STATUS
     1x          Label 6628 JOY_BTN_STATUS_OLD
     0x          Equ   000F JOY_C
     2x          Equ   0007 JOY_D
     3x          Label 6626 JOY_DIR_STATUS
     2x          Equ   000B JOY_G
     0x          Equ   000E JOY_H
     0x          Equ   0006 JOY_HD
     0x          Equ   000A JOY_HG
     1x          Label 6608 JOY_READ
     6x          Label 6332 LDPAGE_LOOP
     1x          Label 63DC MAIN
     1x          Label 63E9 MAIN_0
     1x          Label 6405 MAIN_1
     1x          Label 640B MAIN_2
     2x          Label 644C MEM_COPY_DATA_TO_CART
     2x          Label 6532 MEM_COPY_DATA_TO_CART_E
     1x          Label 6452 MEM_COPY_DATA_TO_CART_LOOP
     1x          Label 653A MEM_COPY_DATA_TO_CART_S
     1x          Label 6370 PAGEINIT
     1x          Label 636E PAGEINITNEXT
     0x          Label 6381 PAGENEXT
     3x          Label 641D SCRC
     3x          Label 6437 SCRC0
     1x          Label 630A SETBLACKPALETTE
     1x          Label 63A7 SETPALETTE
     1x          Label 65E8 TABPALETTE
     1x          Label 6441 VSYNC
     1x          Label 6441 VSYNC_1
     1x          Label 6446 VSYNC_2

