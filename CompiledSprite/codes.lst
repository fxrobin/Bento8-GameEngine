/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : .\input\ENGINE\Obj_GetOrientationToPlayer.asm
 * Fichier destination : Obj_GetOrientationToPlayer.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     770
 *     Include  0:Constant.ASM 1541
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     14        0000                      ORG $0000
     15
     84                                  INCLUD Constant
     85                  0000     MainCharacter                 equ $0000
     86                  0000     Sidekick                      equ $0000
     87
     88                           * --------------------------------------->>
     89                           * Object Status Table offsets
     90                           * --------------------------------------->>
     91
     92                  0022     object_size                   equ $22 ; t>>
     93                  0022     next_object                   equ object_>>
     94                            
     95                  0000     id                            equ $00 ; o>>
     96                  0001     render_flags                  equ $01 ; b>>
     97                  0002     x_pos                         equ $02 ; a>>
     98                  0004     x_pixel                       equ $04 ;
     99                  0005     x_sub                         equ $05 ; a>>
    100                  0007     y_pos                         equ $07 ; a>>
    101                  0009     y_pixel                       equ $09 ;
    102                  000A     y_sub                         equ $0A ; a>>
    103                  000C     priority                      equ $0C ; 0>>
    104                  000D     width_pixels                  equ $0D
    105                  000E     mapping_frame                 equ $0E
    106                  000F     x_vel                         equ $0F ; a>>
    107                  0011     y_vel                         equ $11 ; a>>
    108                  0013     y_radius                      equ $13 ; c>>
    109                  0014     x_radius                      equ $14 ; c>>
    110                  0015     anim_frame                    equ $15
    111                  0016     anim                          equ $16
    112                  0017     prev_anim                     equ $17
    113                  0018     anim_frame_duration           equ $18 ; r>>
    114                  0019     status                        equ $19 ; n>>
    115                  001A     routine                       equ $1A
    116                  001B     routine_secondary             equ $1B
    117                  001C     objoff_01                     equ $1C ; v>>
    118                  001D     objoff_02                     equ $1D
    119                  001E     objoff_03                     equ $1E
    120                  001F     objoff_04                     equ $1F
    121                  0020     objoff_05                     equ $20
    122                  0021     collision_flags               equ $21
    123                  0022     subtype                       equ $22
    124
    125                           * --------------------------------------->>
    126                           * render_flags bitfield variables
    127                  0001     render_xmirror_mask           equ $01 ; b>>
    128                  0002     render_ymirror_mask           equ $02 ; b>>
    129                  0004     render_coordinate_mask        equ $04 ; b>>
    130                  0008     render_7_mask                 equ $08 : b>>
    131                  0010     render_ycheckonscreen_mask    equ $10 : b>>
    132                  0020     render_staticmappings_mask    equ $20 : b>>
    133                  0040     render_subobjects_mask        equ $40 ; b>>
    134                  0080     render_onscreen_mask          equ $80 ; b>>
    135
    136                           * --------------------------------------->>
    137                           * status bitfield variables
    138                  0001     status_leftfacing_mask        equ $01 ; b>>
    139                  0002     status_inair_mask             equ $02 ; b>>
    140                  0004     status_spinning_mask          equ $04 ; b>>
    141                  0008     status_onobject_mask          equ $08 ; b>>
    142                  0010     status_rolljumping_mask       equ $10 ; b>>
    143                  0020     status_pushing_mask           equ $20 ; b>>
    144                  0040     status_underwater_mask        equ $40 ; b>>
    145                  0080     status_7_mask                 equ $80 ; b>>
     17                            
     18                                                                  *;>>
     19                                                                  *;>>
     20                                                                  *;>>
     21                                                                  *;>>
     22                                                                  *;>>
     23                                                                  *;>>
     24                                                                  *;>>
     25                                                                  *;>>
     26                                                                  *;>>
     27                                                                  *;>>
     28                                                                  *;>>
     29                                                                  *;>>
     30                                                                  *;>>
     31                                                                  *;>>
     32                                                                  *;>>
     33                                                                  *;>>
     34                                                                  *;>>
     35                                                                  *;>>
     36                                                                  *;>>
     37                                                                  *;>>
     38        0000               Obj_GetOrientationToPlayer             *O>>
     39  5+4   0000 34   26               pshs  d,y
     40                                                                  * >>
     41  6     0002 109E 00               ldy   MainCharacter            * >>
     42  7     0005 10BF 0015             sty   gotp_closest_player      * >>
     43  5+1   0009 EC   22               ldd   x_pos,y
     44  6     000B FD   0019             std   gotp_player_h_distance   * >>
     45  6+1   000E A3   02               subd  x_pos,x                  * >>
     46  6     0010 FD   0019             std   gotp_player_h_distance
     47                                                                  * >>
     48                                                                  * >>
     49                                                                  * >>
     50                                                                  * >>
     51                                                                  * >>
     52                                                                  * >>
     53                                                                  * >>
     54                                                                  * >>
     55                                                                  * >>
     56                                                                  * >>
     57                                                                  *+>>
     58                                                                  * >>
     59                                                                  * >>
     60                                                                  * >>
     61                                                                  *+>>
     62                                                                  * >>
     63                                                                  * >>
     64                                                                  * >>
     65                                                                  * >>
     66                                                                  *+>>
     67  5+6   0013 35   A6               puls  d,y,pc
     68                                                                  * >>
     69                                                                  *
     70                                                                  *;>>
     71                                                                  *m>>
     72                                                                  * >>
     73                                                                  * >>
     74                                                                  * >>
     75                                                                  *+>>
     76                                                                  *e>>
     77
     78        0015 0000          gotp_closest_player    fdb   $0000     * >>
     79        0017 00            gotp_player_is_left    fcb   $00       * >>
     80        0018 00            gotp_player_is_above   fcb   $00       * >>
     81        0019 0000          gotp_player_h_distance fdb   $0000     * >>
     82        001B 0000          gotp_player_v_distance fdb   $0000     * >>
     83

000000 Total Errors

000055 Total Symbols
     0x          Equ   0016 anim
     0x          Equ   0015 anim_frame
     0x          Equ   0018 anim_frame_duration
     0x          Equ   0021 collision_flags
     1x          Label 0015 gotp_closest_player
     2x          Label 0019 gotp_player_h_distance
     0x          Label 0018 gotp_player_is_above
     0x          Label 0017 gotp_player_is_left
     0x          Label 001B gotp_player_v_distance
     0x          Equ   0000 id
     1x          Equ   0000 MainCharacter
     0x          Equ   000E mapping_frame
     0x          Equ   0022 next_object
     1x          Equ   0022 object_size
     0x          Equ   001C objoff_01
     0x          Equ   001D objoff_02
     0x          Equ   001E objoff_03
     0x          Equ   001F objoff_04
     0x          Equ   0020 objoff_05
     0x          Label 0000 Obj_GetOrientationToPlayer
     0x          Equ   0017 prev_anim
     0x          Equ   000C priority
     0x          Equ   0008 render_7_mask
     0x          Equ   0004 render_coordinate_mask
     0x          Equ   0001 render_flags
     0x          Equ   0080 render_onscreen_mask
     0x          Equ   0020 render_staticmappings_mask
     0x          Equ   0040 render_subobjects_mask
     0x          Equ   0001 render_xmirror_mask
     0x          Equ   0010 render_ycheckonscreen_mask
     0x          Equ   0002 render_ymirror_mask
     0x          Equ   001A routine
     0x          Equ   001B routine_secondary
     0x          Equ   0000 Sidekick
     0x          Equ   0019 status
     0x          Equ   0080 status_7_mask
     0x          Equ   0002 status_inair_mask
     0x          Equ   0001 status_leftfacing_mask
     0x          Equ   0008 status_onobject_mask
     0x          Equ   0020 status_pushing_mask
     0x          Equ   0010 status_rolljumping_mask
     0x          Equ   0004 status_spinning_mask
     0x          Equ   0040 status_underwater_mask
     0x          Equ   0022 subtype
     0x          Equ   000D width_pixels
     0x          Equ   0004 x_pixel
     2x          Equ   0002 x_pos
     0x          Equ   0014 x_radius
     0x          Equ   0005 x_sub
     0x          Equ   000F x_vel
     0x          Equ   0009 y_pixel
     0x          Equ   0007 y_pos
     0x          Equ   0013 y_radius
     0x          Equ   000A y_sub
     0x          Equ   0011 y_vel

