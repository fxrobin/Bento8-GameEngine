/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : ./input/CODE/MAIN.ASS.TMP
 * Fichier destination : TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     23655
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        6300                      ORG $6300
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17
     18                  6205     DK_lecture               EQU $6205 * rout>>
     19                  620A     DK_piste                 EQU $620A * 2B n>>
     20                  620F     DK_secteur               EQU $620F * 1B n>>
     21                  6213     DK_destination           EQU $6213 * 2B d>>
     22                  622C     DK_dernier_bloc_a_ecrire EQU $622C * 2B f>>
     23
     24                  0014     DEBUTECRANA EQU $0014 * test pour fin sta>>
     25                  1F40     FINECRANA   EQU $1F40 * fin de la RAM A v>>
     26                  2014     DEBUTECRANB EQU $2014 * test pour fin sta>>
     27                  3F40     FINECRANB   EQU $3F40 * fin de la RAM B v>>
     28
     29                  0005     JOY_BD EQU $05 * Bas Droite
     30                  0006     JOY_HD EQU $06 * Haut Droite
     31                  0007     JOY_D  EQU $07 * Droite
     32                  0009     JOY_BG EQU $09 * Bas Gauche
     33                  000A     JOY_HG EQU $0A * Haut Gauche
     34                  000B     JOY_G  EQU $0B * Gauche
     35                  000D     JOY_B  EQU $0D * Bas
     36                  000E     JOY_H  EQU $0E * Haut
     37                  000F     JOY_C  EQU $0F * Centre
     38
     39                  9F00     HERO_POS EQU $9F00 * HERO Position
     40
     41                           *****************************************>>
     42                           * Debut du programme
     43                           *****************************************>>
     44        6300               BEGIN
     45  2     6300 1A   50              ORCC #$50     * a documenter (inte>>
     46
     47  3     6302 CC   1F40            LDD #FINECRANA
     48  6     6305 FD   9F00            STD HERO_POS
     49  3     6308 CC   3F40            LDD #FINECRANB
     50  6     630B FD   9F02            STD HERO_POS+2
     51
     52                           *****************************************>>
     53                           * Chargement des pages memoire
     54                           *****************************************>>
     55                                  * Chargement des pages depuis la d>>
     56                                  **********************************>>
     57                            
     58  3     630E CC   0004            LDD #$0004
     59  6     6311 FD   620A            STD DK_piste
     60  2     6314 86   01              LDA #$01
     61  5     6316 B7   620F            STA DK_secteur
     62  3     6319 CC   DF00            LDD #$DF00
     63  6     631C FD   622C            STD DK_dernier_bloc_a_ecrire
     64                            
     65        631F               LDPAGE_LOOP
     66  2     631F C6   04              LDB #$04
     67  5     6321 F7   E7E5            STB $E7E5 * Selection de la page e>>
     68                            
     69  2     6324 86   01              LDA #$01
     70  5     6326 B7   620F            STA DK_secteur
     71  3     6329 CC   A000            LDD #$A000
     72  6     632C FD   6213            STD DK_destination
     73  8     632F BD   6205            JSR DK_lecture
     74                            
     75                                  * Duplication de la page p en p+1
     76                                  *********************************
     77        6332               CPPAGE_LOOP
     78  2     6332 C6   65              LDB #$65                       * O>>
     79  5     6334 F7   E7E6            STB $E7E6                      * e>>
     80
     81  3     6337 CE   A000         LDU #$A000                     * Sour>>
     82  4     633A 108E 4040         LDY #$4000+64                  * Dest>>
     83  7     633E 10BF 6512            STY MEM_COPY_DATA_TO_CART_E+2
     84  4     6342 108E 2040         LDY #$2000+64                  * Dest>>
     85  8     6346 BD   642A         JSR MEM_COPY_DATA_TO_CART      * Copi>>
     86                            
     87  3     6349 CE   C000         LDU #$C000                     * Sour>>
     88  4     634C 108E 2040         LDY #$2000+64                  * Dest>>
     89  7     6350 10BF 6512            STY MEM_COPY_DATA_TO_CART_E+2
     90  4     6354 108E 0040         LDY #$0000+64                  * Dest>>
     91  8     6358 BD   642A         JSR MEM_COPY_DATA_TO_CART      * Copi>>
     92                            
     93  7     635B 7C   6333         INC CPPAGE_LOOP+1
     94  7     635E 7C   6333            INC CPPAGE_LOOP+1
     95  7     6361 7C   6320            INC LDPAGE_LOOP+1
     96  7     6364 7C   6320            INC LDPAGE_LOOP+1
     97  5     6367 F6   6320            LDB LDPAGE_LOOP+1
     98  2     636A C1   16              CMPB #$16
     99  3     636C 23   B1              BLS LDPAGE_LOOP
    100                            
    101                           *****************************************>>
    102                           * Initialisation de la routine de commuta>>
    103                           *****************************************>>
    104        636E               INIT_VID
    105  5     636E F6   6081            LDB $6081 * A documenter
    106  2     6371 CA   10              ORB #$10  * mettre le bit d4 a 1
    107  5     6373 F7   6081            STB $6081
    108  5     6376 F7   E7E7            STB $E7E7
    109  8     6379 BD   63FA            JSR SCRC     * page 2 en RAM Carto>>
    110  8     637C BD   651D            JSR CLR_CART * effacement page 2
    111  8     637F BD   63FA            JSR SCRC     * page 0 en RAM Carto>>
    112  8     6382 BD   651D            JSR CLR_CART * effacement page 0
    113  8     6385 BD   63FA            JSR SCRC     * page 2 en RAM Carto>>
    114
    115                           *****************************************>>
    116                           * Initialisation du mode video
    117                           *****************************************>>
    118  2     6388 86   7B              LDA #$7B      * passage en mode 16>>
    119  5     638A B7   E7DC            STA $E7DC
    120
    121                           *****************************************>>
    122                           * Initialisation de la palette de couleur>>
    123                           *****************************************>>
    124  4     638D 108E 6559            LDY #TABPALETTE
    125  2     6391 4F                   CLRA
    126        6392               SETPALETTE
    127  5+1   6392 34   02              PSHS A
    128  2     6394 48                   ASLA
    129  5     6395 B7   E7DB            STA $E7DB
    130  5+3   6398 EC   A1              LDD ,Y++
    131  5     639A F7   E7DA            STB $E7DA
    132  5     639D B7   E7DA            STA $E7DA
    133  5+1   63A0 35   02              PULS A
    134  2     63A2 4C                   INCA
    135  5     63A3 108C 6579            CMPY #FINTABPALETTE
    136  3     63A7 26   E9              BNE    SETPALETTE
    137
    138                           *****************************************>>
    139                           * Initialisation des sprites
    140                           *****************************************>>
    141  3     63A9 8E   67E8            LDX #HERO_IDLE_R
    142  8     63AC BD   6708            JSR HERO_ANIMATION_LOAD
    143
    144                           *****************************************>>
    145                           * Boucle principale
    146                           *****************************************>>
    147                                  * Init routine effacement sprite
    148  5     63AF F6   6901            LDB HERO_ANIMATION_PAG            >>
    149  5     63B2 F7   6903            STB HERO_ANIMATION_PAG_DEL
    150  5     63B5 F7   E7E5            STB $E7E5                         >>
    151  7+3   63B8 AD   9F 6907         JSR [HERO_ANIMATION_DRW]          >>
    152  8     63BC BD   63FA            JSR SCRC
    153  5     63BF F6   6901            LDB HERO_ANIMATION_PAG            >>
    154  5     63C2 F7   6904            STB HERO_ANIMATION_PAG_DEL+1
    155  5     63C5 F7   E7E5            STB $E7E5                         >>
    156  7+3   63C8 AD   9F 6907         JSR [HERO_ANIMATION_DRW]          >>
    157  8     63CC BD   63FA            JSR SCRC
    158                            
    159        63CF               MAIN
    160                                  * Effacement et affichage des spri>>
    161  6     63CF FC   6903            LDD HERO_ANIMATION_PAG_DEL        >>
    162  5     63D2 F7   6903            STB HERO_ANIMATION_PAG_DEL
    163  5     63D5 B7   E7E5            STA $E7E5                         >>
    164  7+3   63D8 AD   9F 6905         JSR [HERO_ANIMATION_DEL]          >>
    165                            
    166                                  * Gestion des deplacements
    167  8     63DC BD   6579            JSR JOY_READ
    168  8     63DF BD   6593            JSR Hero_Move
    169  8     63E2 BD   66CF            JSR Compute_Position
    170  8     63E5 BD   6761            JSR HERO_ANIMATION_NEXT
    171                            
    172  5     63E8 F6   6901            LDB HERO_ANIMATION_PAG            >>
    173  5     63EB F7   6904            STB HERO_ANIMATION_PAG_DEL+1
    174  5     63EE F7   E7E5            STB $E7E5                         >>
    175  7+3   63F1 AD   9F 6907         JSR [HERO_ANIMATION_DRW]          >>
    176                            
    177  8     63F5 BD   63FA            JSR SCRC                          >>
    178  3     63F8 20   D5              BRA MAIN
    179
    180                           *****************************************>>
    181                           * Changement de page ESPACE ECRAN (affich>>
    182                           *      $E7DD determine la page affichee d>>
    183                           *      D7=0 D6=0 D5=0 D4=0 (#$0_) : page >>
    184                           *      D7=0 D6=1 D5=0 D4=0 (#$4_) : page >>
    185                           *      D7=1 D6=0 D5=0 D4=0 (#$8_) : page >>
    186                           *      D7=1 D6=1 D5=0 D4=0 (#$C_) : page >>
    187                           *   D3 D2 D1 D0  (#$_0 a #$_F) : couleur >>
    188                           *   Remarque : D5 et D4 utilisable unique>>
    189                           *
    190                           * Changement de page ESPACE CARTOUCHE (ec>>
    191                           *      $E7E6 determine la page affichee d>>
    192                           *   D5 : 1 = espace cartouche recouvert p>>
    193                           *   D4 : 0 = CAS1N valide : banques 0-15 >>
    194                           *      D5=1 D4=0 D3=0 D2=0 D1=0 D0=0 (#$6>>
    195                           *   ...
    196                           *      D5=1 D4=0 D3=1 D2=1 D1=1 D0=1 (#$6>>
    197                           *      D5=1 D4=1 D3=0 D2=0 D1=0 D0=0 (#$7>>
    198                           *   ...
    199                           *      D5=1 D4=1 D3=1 D2=1 D1=1 D0=1 (#$7>>
    200                           *****************************************>>
    201        63FA               SCRC
    202  8     63FA BD   641F            JSR VSYNC
    203
    204  5     63FD F6   6416            LDB SCRC0+1
    205  2     6400 C4   01              ANDB #$01
    206  5     6402 FB   6902            ADDB HERO_ANIMATION_PAG_REF
    207  5     6405 F7   6901            STB HERO_ANIMATION_PAG
    208                            
    209  5     6408 F6   6416            LDB SCRC0+1   * charge la valeur d>>
    210  2     640B C4   80              ANDB #$80     * permute #$00 ou #$>>
    211  2     640D CA   00              ORB #$00      * recharger la coule>>
    212  5     640F F7   E7DD            STB $E7DD     * changement page da>>
    213  7     6412 73   6416            COM SCRC0+1   * modification du co>>
    214        6415               SCRC0
    215  2     6415 C6   00              LDB #$00
    216  2     6417 C4   02              ANDB #$02     * permute #$60 ou #$>>
    217  2     6419 CA   60              ORB #$60      * espace cartouche r>>
    218  5     641B F7   E7E6            STB $E7E6     * changement page da>>
    219  5     641E 39                   RTS                  * E7E6 D5=1 p>>
    220                                                       * CAS1N : ban>>
    221
    222                           *****************************************>>
    223                           * Attente VBL
    224                           *****************************************>>
    225        641F               VSYNC
    226        641F               VSYNC_1
    227  7     641F 7D   E7E7            TST    $E7E7
    228  3     6422 2A   FB              BPL    VSYNC_1
    229        6424               VSYNC_2
    230  7     6424 7D   E7E7            TST    $E7E7
    231  3     6427 2B   FB              BMI    VSYNC_2
    232  5     6429 39                   RTS
    233
    234                           *****************************************>>
    235                           * Copie Memoire de la zone donnee vers ca>>
    236                           * Cycles en fonction de l'implementation
    237                           * 256 octets (-128 a 127) x 64  boucles (>>
    238                           * 128 octets (-64  a 63)  x 128 boucles (>>
    239                           * 32  octets (-16  a 15)  x 512 boucles (>>
    240                           *****************************************>>
    241                           *MEM_COPY_DATA_TO_CART
    242                           *   PULS X,U
    243                           *   STX       -128,Y
    244                           *   STU       -126,Y
    245                           *   PULS      D,X,U
    246                           *   STD       -124,Y
    247                           *   STX       -122,Y
    248                           *   STU       -120,Y
    249                           *   PULS      D,X,U
    250                           *   STD       -118,Y
    251                           *   STX       -116,Y
    252                           *   STU       -114,Y
    253                           *   PULS      D,X,U
    254                           *   STD       -112,Y
    255                           *   STX       -110,Y
    256                           *   STU       -108,Y
    257                           *   PULS      D,X,U
    258                           *   STD       -106,Y
    259                           *   STX       -104,Y
    260                           *   STU       -102,Y
    261                           *   PULS      D,X,U
    262                           *   STD       -100,Y
    263                           *   STX       -98,Y
    264                           *   STU       -96,Y
    265                           *   PULS      D,X,U
    266                           *   STD       -94,Y
    267                           *   STX       -92,Y
    268                           *   STU       -90,Y
    269                           *   PULS      D,X,U
    270                           *   STD       -88,Y
    271                           *   STX       -86,Y
    272                           *   STU       -84,Y
    273                           *   PULS      D,X,U
    274                           *   STD       -82,Y
    275                           *   STX       -80,Y
    276                           *   STU       -78,Y
    277                           *   PULS      D,X,U
    278                           *   STD       -76,Y
    279                           *   STX       -74,Y
    280                           *   STU       -72,Y
    281                           *   PULS      D,X,U
    282                           *   STD       -70,Y
    283                           *   STX       -68,Y
    284                           *   STU       -66,Y
    285                           *   PULS      D,X,U
    286                           *   STD       -64,Y
    287                           *   STX       -62,Y
    288                           *   STU       -60,Y
    289                           *   PULS      D,X,U
    290                           *   STD       -58,Y
    291                           *   STX       -56,Y
    292                           *   STU       -54,Y
    293                           *   PULS      D,X,U
    294                           *   STD       -52,Y
    295                           *   STX       -50,Y
    296                           *   STU       -48,Y
    297                           *   PULS      D,X,U
    298                           *   STD       -46,Y
    299                           *   STX       -44,Y
    300                           *   STU       -42,Y
    301                           *   PULS      D,X,U
    302                           *   STD       -40,Y
    303                           *   STX       -38,Y
    304                           *   STU       -36,Y
    305                           *   PULS      D,X,U
    306                           *   STD       -34,Y
    307                           *   STX       -32,Y
    308                           *   STU       -30,Y
    309                           *   PULS      D,X,U
    310                           *   STD       -28,Y
    311                           *   STX       -26,Y
    312                           *   STU       -24,Y
    313                           *   PULS      D,X,U
    314                           *   STD       -22,Y
    315                           *   STX       -20,Y
    316                           *   STU       -18,Y
    317                           *   PULS      D,X,U
    318                           *   STD       -16,Y
    319                           *   STX       -14,Y
    320                           *   STU       -12,Y
    321                           *   PULS      D,X,U
    322                           *   STD       -10,Y
    323                           *   STX       -8,Y
    324                           *   STU       -6,Y
    325                           *   PULS      D,X,U
    326                           *   STD       -4,Y
    327                           *   STX       -2,Y
    328                           *   STU       ,Y
    329                           *   PULS      D,X,U
    330                           *   STD       2,Y
    331                           *   STX       4,Y
    332                           *   STU       6,Y
    333                           *   PULS      D,X,U
    334                           *   STD       8,Y
    335                           *   STX       10,Y
    336                           *   STU       12,Y
    337                           *   PULS      D,X,U
    338                           *   STD       14,Y
    339                           *   STX       16,Y
    340                           *   STU       18,Y
    341                           *   PULS      D,X,U
    342                           *   STD       20,Y
    343                           *   STX       22,Y
    344                           *   STU       24,Y
    345                           *   PULS      D,X,U
    346                           *   STD       26,Y
    347                           *   STX       28,Y
    348                           *   STU       30,Y
    349                           *   PULS      D,X,U
    350                           *   STD       32,Y
    351                           *   STX       34,Y
    352                           *   STU       36,Y
    353                           *   PULS      D,X,U
    354                           *   STD       38,Y
    355                           *   STX       40,Y
    356                           *   STU       42,Y
    357                           *   PULS      D,X,U
    358                           *   STD       44,Y
    359                           *   STX       46,Y
    360                           *   STU       48,Y
    361                           *   PULS      D,X,U
    362                           *   STD       50,Y
    363                           *   STX       52,Y
    364                           *   STU       54,Y
    365                           *   PULS      D,X,U
    366                           *   STD       56,Y
    367                           *   STX       58,Y
    368                           *   STU       60,Y
    369                           *   PULS      D,X,U
    370                           *   STD       62,Y
    371                           *   STX       64,Y
    372                           *   STU       66,Y
    373                           *   PULS      D,X,U
    374                           *   STD       68,Y
    375                           *   STX       70,Y
    376                           *   STU       72,Y
    377                           *   PULS      D,X,U
    378                           *   STD       74,Y
    379                           *   STX       76,Y
    380                           *   STU       78,Y
    381                           *   PULS      D,X,U
    382                           *   STD       80,Y
    383                           *   STX       82,Y
    384                           *   STU       84,Y
    385                           *   PULS      D,X,U
    386                           *   STD       86,Y
    387                           *   STX       88,Y
    388                           *   STU       90,Y
    389                           *   PULS      D,X,U
    390                           *   STD       92,Y
    391                           *   STX       94,Y
    392                           *   STU       96,Y
    393                           *   PULS      D,X,U
    394                           *   STD       98,Y
    395                           *   STX       100,Y
    396                           *   STU       102,Y
    397                           *   PULS      D,X,U
    398                           *   STD       104,Y
    399                           *   STX       106,Y
    400                           *   STU       108,Y
    401                           *   PULS      D,X,U
    402                           *   STD       110,Y
    403                           *   STX       112,Y
    404                           *   STU       114,Y
    405                           *   PULS      D,X,U
    406                           *   STD       116,Y
    407                           *   STX       118,Y
    408                           *   STU       120,Y
    409                           *   PULS      D,X,U
    410                           *   STD       122,Y
    411                           *   STX       124,Y
    412                           *   STU       126,Y
    413                           *   LEAY 256,Y
    414                           *MEM_COPY_DATA_TO_CART_E
    415                           *   CMPY    #$0180
    416                           *   LBNE     MEM_COPY_DATA_TO_CART
    417                           *MEM_COPY_DATA_TO_CART_S
    418                           *   LDS     #$0000    * Rechargement du p>>
    419                           *   RTS
    420                            
    421        642A               MEM_COPY_DATA_TO_CART
    422  7     642A 10FF 651A        STS MEM_COPY_DATA_TO_CART_S+2  * sauve>>
    423  6     642E 1F   34          TFR U,S
    424        6430               MEM_COPY_DATA_TO_CART_LOOP
    425  5+6   6430 35   56          PULS       D,X,U
    426  5+1   6432 ED   A8 C0       STD -64,Y
    427  5+1   6435 AF   A8 C2       STX -62,Y
    428  5+1   6438 EF   A8 C4       STU -60,Y
    429  5+6   643B 35   56          PULS       D,X,U
    430  5+1   643D ED   A8 C6       STD -58,Y
    431  5+1   6440 AF   A8 C8       STX -56,Y
    432  5+1   6443 EF   A8 CA       STU -54,Y
    433  5+6   6446 35   56          PULS       D,X,U
    434  5+1   6448 ED   A8 CC       STD -52,Y
    435  5+1   644B AF   A8 CE       STX -50,Y
    436  5+1   644E EF   A8 D0       STU -48,Y
    437  5+6   6451 35   56          PULS       D,X,U
    438  5+1   6453 ED   A8 D2       STD -46,Y
    439  5+1   6456 AF   A8 D4       STX -44,Y
    440  5+1   6459 EF   A8 D6       STU -42,Y
    441  5+6   645C 35   56          PULS       D,X,U
    442  5+1   645E ED   A8 D8       STD -40,Y
    443  5+1   6461 AF   A8 DA       STX -38,Y
    444  5+1   6464 EF   A8 DC       STU -36,Y
    445  5+6   6467 35   56          PULS       D,X,U
    446  5+1   6469 ED   A8 DE       STD -34,Y
    447  5+1   646C AF   A8 E0       STX -32,Y
    448  5+1   646F EF   A8 E2       STU -30,Y
    449  5+6   6472 35   56          PULS       D,X,U
    450  5+1   6474 ED   A8 E4       STD -28,Y
    451  5+1   6477 AF   A8 E6       STX -26,Y
    452  5+1   647A EF   A8 E8       STU -24,Y
    453  5+6   647D 35   56          PULS       D,X,U
    454  5+1   647F ED   A8 EA       STD -22,Y
    455  5+1   6482 AF   A8 EC       STX -20,Y
    456  5+1   6485 EF   A8 EE       STU -18,Y
    457  5+6   6488 35   56          PULS       D,X,U
    458  5+1   648A ED   30          STD -16,Y
    459  5+1   648C AF   32          STX -14,Y
    460  5+1   648E EF   34          STU -12,Y
    461  5+6   6490 35   56          PULS       D,X,U
    462  5+1   6492 ED   36          STD -10,Y
    463  5+1   6494 AF   38          STX -8,Y
    464  5+1   6496 EF   3A          STU -6,Y
    465  5+6   6498 35   56          PULS       D,X,U
    466  5+1   649A ED   3C          STD -4,Y
    467  5+1   649C AF   3E          STX -2,Y
    468  5+0   649E EF   A4          STU ,Y
    469  5+6   64A0 35   56          PULS       D,X,U
    470  5+1   64A2 ED   22          STD 2,Y
    471  5+1   64A4 AF   24          STX 4,Y
    472  5+1   64A6 EF   26          STU 6,Y
    473  5+6   64A8 35   56          PULS       D,X,U
    474  5+1   64AA ED   28          STD 8,Y
    475  5+1   64AC AF   2A          STX 10,Y
    476  5+1   64AE EF   2C          STU 12,Y
    477  5+6   64B0 35   56          PULS       D,X,U
    478  5+1   64B2 ED   2E          STD 14,Y
    479  5+1   64B4 AF   A8 10       STX 16,Y
    480  5+1   64B7 EF   A8 12       STU 18,Y
    481  5+6   64BA 35   56          PULS       D,X,U
    482  5+1   64BC ED   A8 14       STD 20,Y
    483  5+1   64BF AF   A8 16       STX 22,Y
    484  5+1   64C2 EF   A8 18       STU 24,Y
    485  5+6   64C5 35   56          PULS       D,X,U
    486  5+1   64C7 ED   A8 1A       STD 26,Y
    487  5+1   64CA AF   A8 1C       STX 28,Y
    488  5+1   64CD EF   A8 1E       STU 30,Y
    489  5+6   64D0 35   56          PULS       D,X,U
    490  5+1   64D2 ED   A8 20       STD 32,Y
    491  5+1   64D5 AF   A8 22       STX 34,Y
    492  5+1   64D8 EF   A8 24       STU 36,Y
    493  5+6   64DB 35   56          PULS       D,X,U
    494  5+1   64DD ED   A8 26       STD 38,Y
    495  5+1   64E0 AF   A8 28       STX 40,Y
    496  5+1   64E3 EF   A8 2A       STU 42,Y
    497  5+6   64E6 35   56          PULS       D,X,U
    498  5+1   64E8 ED   A8 2C       STD 44,Y
    499  5+1   64EB AF   A8 2E       STX 46,Y
    500  5+1   64EE EF   A8 30       STU 48,Y
    501  5+6   64F1 35   56          PULS       D,X,U
    502  5+1   64F3 ED   A8 32       STD 50,Y
    503  5+1   64F6 AF   A8 34       STX 52,Y
    504  5+1   64F9 EF   A8 36       STU 54,Y
    505  5+6   64FC 35   56          PULS       D,X,U
    506  5+1   64FE ED   A8 38       STD 56,Y
    507  5+1   6501 AF   A8 3A       STX 58,Y
    508  5+1   6504 EF   A8 3C       STU 60,Y
    509  5+2   6507 35   06          PULS       D
    510  5+1   6509 ED   A8 3E       STD 62,Y
    511  4+4   650C 31   A9 0080     LEAY 128,Y
    512        6510               MEM_COPY_DATA_TO_CART_E
    513  5     6510 108C 00C0        CMPY    #$00C0
    514  6     6514 1026 FF18        LBNE    MEM_COPY_DATA_TO_CART_LOOP
    515        6518               MEM_COPY_DATA_TO_CART_S
    516  4     6518 10CE 0000        LDS     #$0000    * Rechargement du po>>
    517  5     651C 39               RTS
    518
    519                           *MEM_COPY_DATA_TO_CART
    520                           *   PULS    D,X,U
    521                           *   STD     -16,Y
    522                           *   STX     -14,Y
    523                           *   STU     -12,Y
    524                           *   PULS    D,X,U
    525                           *   STD     -10,Y
    526                           *   STX     -8,Y
    527                           *   STU     -6,Y
    528                           *   PULS    D,X,U
    529                           *   STD     -4,Y
    530                           *   STX     -2,Y
    531                           *   STU     ,Y
    532                           *   PULS    D,X,U
    533                           *   STD     2,Y
    534                           *   STX     4,Y
    535                           *   STU     6,Y
    536                           *   PULS    D,X
    537                           *   STD     8,Y
    538                           *   STX     10,Y
    539                           *   PULS    D,X
    540                           *   STD     12,Y
    541                           *   STX     14,Y
    542                           *   LEAY    32,Y
    543                           *MEM_COPY_DATA_TO_CART_E
    544                           *   CMPY    #$0030
    545                           *   BNE     MEM_COPY_DATA_TO_CART
    546                           *MEM_COPY_DATA_TO_CART_S
    547                           *   LDS     #$0000    * Rechargement du p>>
    548                           *   RTS
    549                           *****************************************>>
    550                           * Effacement memoire Cartouche (27000 cy)>>
    551                           *****************************************>>
    552        651D               CLR_CART
    553  5+3   651D 34   48           PSHS U,DP
    554  7     651F 10FF 6554         STS CLR_CART_3+2
    555  4     6523 10CE 4000         LDS #$4000
    556  3     6527 CE   0000         LDU #$0000
    557  4     652A 108E 0000         LDY #$0000
    558  3     652E 8E   0000         LDX #$0000
    559  3     6531 CC   0000         LDD #$0000
    560  6     6534 1F   8B           TFR A,DP
    561        6536               CLR_CART_2
    562  5+9   6536 34   7E           PSHS U,Y,X,DP,B,A
    563  5+9   6538 34   7E           PSHS U,Y,X,DP,B,A
    564  5+9   653A 34   7E           PSHS U,Y,X,DP,B,A
    565  5+9   653C 34   7E           PSHS U,Y,X,DP,B,A
    566  5+9   653E 34   7E           PSHS U,Y,X,DP,B,A
    567  5+9   6540 34   7E           PSHS U,Y,X,DP,B,A
    568  5+9   6542 34   7E           PSHS U,Y,X,DP,B,A
    569  5+9   6544 34   7E           PSHS U,Y,X,DP,B,A
    570  5+9   6546 34   7E           PSHS U,Y,X,DP,B,A
    571  5+9   6548 34   7E           PSHS U,Y,X,DP,B,A
    572  5     654A 118C 0004         CMPS #$0004
    573  3     654E 26   E6           BNE CLR_CART_2
    574  5+4   6550 34   60           PSHS U,Y
    575        6552               CLR_CART_3
    576  4     6552 10CE 0000         LDS #$0000
    577  5+3   6556 35   48           PULS DP,U
    578  5     6558 39                RTS
    579                            
    580                           *****************************************>>
    581                           * Affichage de l arriere plan 57900 cycle>>
    582                           *****************************************>>
    583                           *DRAW_RAM_DATA_TO_CART_160x200
    584                           *      PSHS U,DP            * sauvegarde >>
    585                           *      STS DRAW_RAM_DATA_TO_CART_160x200A>>
    586                           *
    587                           *      LDS #FINECRANA       * init pointe>>
    588                           *      LDU #$A000
    589                           *
    590                           *DRAW_RAM_DATA_TO_CART_160x200A
    591                           *      PULU A,B,DP,X,Y
    592                           *      PSHS Y,X,DP,B,A
    593                           *      PULU A,B,DP,X,Y
    594                           *      PSHS Y,X,DP,B,A
    595                           *      PULU A,B,DP,X,Y
    596                           *      PSHS Y,X,DP,B,A
    597                           *      PULU A,B,DP,X,Y
    598                           *      PSHS Y,X,DP,B,A
    599                           *      PULU A,B,DP,X,Y
    600                           *      PSHS Y,X,DP,B,A
    601                           *      PULU A,B,DP,X,Y
    602                           *      PSHS Y,X,DP,B,A
    603                           *      CMPS #DEBUTECRANA
    604                           *      BNE DRAW_RAM_DATA_TO_CART_160x200A>>
    605                           *      PULU A,B,DP,X,Y
    606                           *      PSHS Y,X,DP,B,A
    607                           *      PULU A,B,DP,X,Y
    608                           *      PSHS Y,X,DP,B,A
    609                           *      PULU B,DP,X,Y
    610                           *      PSHS Y,X,DP,B
    611                           *
    612                           *      LDS #FINECRANB       * init pointe>>
    613                           *      LDU #$C000
    614                           *
    615                           *DRAW_RAM_DATA_TO_CART_160x200B
    616                           *      PULU A,B,DP,X,Y
    617                           *      PSHS Y,X,DP,B,A
    618                           *      PULU A,B,DP,X,Y
    619                           *      PSHS Y,X,DP,B,A
    620                           *      PULU A,B,DP,X,Y
    621                           *      PSHS Y,X,DP,B,A
    622                           *      PULU A,B,DP,X,Y
    623                           *      PSHS Y,X,DP,B,A
    624                           *      PULU A,B,DP,X,Y
    625                           *      PSHS Y,X,DP,B,A
    626                           *      PULU A,B,DP,X,Y
    627                           *      PSHS Y,X,DP,B,A
    628                           *      CMPS #DEBUTECRANB
    629                           *      BNE DRAW_RAM_DATA_TO_CART_160x200B>>
    630                           *      PULU A,B,DP,X,Y
    631                           *      PSHS Y,X,DP,B,A
    632                           *      PULU A,B,DP,X,Y
    633                           *      PSHS Y,X,DP,B,A
    634                           *      PULU B,DP,X,Y
    635                           *      PSHS Y,X,DP,B
    636                           *DRAW_RAM_DATA_TO_CART_160x200A_E
    637                           *      LDS  #$0000 * rechargement des reg>>
    638                           *      PULS U,DP
    639                           *      RTS
    640
    641                           *****************************************>>
    642                           * Palette de 16 couleurs
    643                           *****************************************>>
    644        6559               TABPALETTE
    645        6559 0CCD                 FDB $0ccd     * index:0  R:244 V:2>>
    646        655B 0BA4                 FDB $0ba4     * index:1  R:164 V:2>>
    647        655D 035D                 FDB $035d     * index:2  R:244 V:1>>
    648        655F 0D81                 FDB $0d81     * index:3  R:108 V:2>>
    649        6561 013B                 FDB $013b     * index:4  R:228 V:1>>
    650        6563 0541                 FDB $0541     * index:5  R:100 V:1>>
    651        6565 0D30                 FDB $0d30     * index:6  R:43  V:1>>
    652        6567 0017                 FDB $0017     * index:7  R:196 V:1>>
    653        6569 000B                 FDB $000b     * index:8  R:228 V:2>>
    654        656B 0D10                 FDB $0d10     * index:9  R:4   V:1>>
    655        656D 0110                 FDB $0110     * index:10 R:28  V:9>>
    656        656F 0003                 FDB $0003     * index:11 R:148 V:2>>
    657        6571 0700                 FDB $0700     * index:12 R:4   V:5>>
    658        6573 0200                 FDB $0200     * index:13 R:4   V:2>>
    659        6575 0000                 FDB $0000     * index:14 R:68  V:2>>
    660        6577 0000                 FDB $0000     * index:15 R:4   V:2>>
    661        6579               FINTABPALETTE
    662
    663                           *****************************************>>
    664                           * Get joystick parameters
    665                           *****************************************>>
    666        6579               JOY_READ
    667  3     6579 8E   E7CF            ldx    #$e7cf
    668  4     657C 108E E7CD            ldy    #$e7cd
    669  3     6580 CC   400F            ldd    #$400f
    670  5     6583 F4   E7CC            andb   >$e7cc     * Read position
    671  5     6586 F7   6591            stb    JOY_DIR_STATUS
    672  4+0   6589 A4   A4              anda   ,y         * Read button
    673  2     658B 88   40              eora   #$40
    674  5     658D B7   6592            sta    JOY_BTN_STATUS
    675  5     6590 39                   RTS
    676        6591               JOY_DIR_STATUS
    677        6591 00                   FCB $00 * Position Pad
    678        6592               JOY_BTN_STATUS
    679        6592 00                   FCB $00 * 40 Bouton A enfonce
    680
    681                           *****************************************>>
    682                           * Subroutine to      make HERO walk/run
    683                           *****************************************>>
    684        6593               Hero_Move
    685  5     6593 B6   6591            LDA JOY_DIR_STATUS
    686  2     6596 81   0B              CMPA #JOY_G
    687  3     6598 26   02              BNE Hero_NotLeft
    688  3     659A 20   69              BRA Hero_MoveLeft
    689
    690        659C               Hero_NotLeft                   * XREF: He>>
    691  2     659C 81   07              CMPA #JOY_D
    692  3     659E 26   03              BNE Hero_NotLeftOrRight
    693  5     65A0 16   00A6            LBRA Hero_MoveRight
    694
    695        65A3               Hero_NotLeftOrRight            * XREF: He>>
    696  6     65A3 FC   68E9            LDD HERO_G_SPEED
    697  5     65A6 1083 0000            CMPD #$0000
    698  3     65AA 2D   2E              BLT Hero_NotLeftOrRight_00 * se de>>
    699  7     65AC B3   68FB            SUBD HERO_FRICTION     * se deplac>>
    700  3     65AF 24   12              BCC Hero_NotLeftOrRight_01 * si on>>
    701  3     65B1 CC   0000            LDD #$0000
    702  6     65B4 FD   68E9            STD HERO_G_SPEED
    703  6     65B7 FD   68ED            STD HERO_X_SPS
    704  3     65BA 8E   67E8            LDX #HERO_IDLE_R        * Charge a>>
    705  6     65BD BF   68FD            STX HERO_ANIMATION_ADR      * Sauv>>
    706  5     65C0 16   00C4            LBRA Hero_MoveUpdatePos
    707        65C3               Hero_NotLeftOrRight_01
    708  5     65C3 1083 0600            CMPD #HERO_JOG_SPD_LIMIT
    709  3     65C7 2C   0B              BGE Hero_NotLeftOrRight_02
    710  6     65C9 FD   68E9            STD HERO_G_SPEED
    711  3     65CC 8E   67A5            LDX #HERO_WALK_R        * Charge a>>
    712  6     65CF BF   68FD            STX HERO_ANIMATION_ADR      * Sauv>>
    713  3     65D2 20   03              BRA Hero_NotLeftOrRight_03
    714        65D4               Hero_NotLeftOrRight_02
    715  6     65D4 FD   68E9            STD HERO_G_SPEED
    716        65D7               Hero_NotLeftOrRight_03
    717  5     65D7 16   00AD            LBRA Hero_MoveUpdatePos
    718        65DA               Hero_NotLeftOrRight_00
    719  7     65DA F3   68FB            ADDD HERO_FRICTION     * se deplac>>
    720  3     65DD 24   0F              BCC Hero_NotLeftOrRight_11 * si on>>
    721  3     65DF CC   0000            LDD #$0000
    722  6     65E2 FD   68E9            STD HERO_G_SPEED
    723  3     65E5 8E   68DD            LDX #HERO_IDLE_L        * Charge a>>
    724  6     65E8 BF   68FD            STX HERO_ANIMATION_ADR      * Sauv>>
    725  5     65EB 16   0099            LBRA Hero_MoveUpdatePos
    726        65EE               Hero_NotLeftOrRight_11
    727  5     65EE 1083 0600            CMPD #HERO_JOG_SPD_LIMIT
    728  3     65F2 2F   0B              BLE Hero_NotLeftOrRight_12
    729  6     65F4 FD   68E9            STD HERO_G_SPEED
    730  3     65F7 8E   682D            LDX #HERO_WALK_L        * Charge a>>
    731  6     65FA BF   68FD            STX HERO_ANIMATION_ADR      * Sauv>>
    732  3     65FD 20   03              BRA Hero_NotLeftOrRight_13
    733        65FF               Hero_NotLeftOrRight_12
    734  6     65FF FD   68E9            STD HERO_G_SPEED
    735        6602               Hero_NotLeftOrRight_13
    736  5     6602 16   0082            LBRA Hero_MoveUpdatePos
    737
    738        6605               Hero_MoveLeft                      * XREF>>
    739  6     6605 FC   68E9            LDD HERO_G_SPEED            * Char>>
    740  5     6608 1083 0000            CMPD #$0000                 * Test>>
    741  3     660C 2F   11              BLE Hero_MoveLeft_00        * BRAN>>
    742  7     660E B3   68F9            SUBD HERO_DECELERATION      * orie>>
    743  3     6611 24   06              BCC Hero_MoveLeft_03        * BRAN>>
    744  3     6613 CC   0000            LDD #$0000
    745  7     6616 B3   68F9            SUBD HERO_DECELERATION      * si l>>
    746        6619               Hero_MoveLeft_03
    747  6     6619 FD   68E9            STD HERO_G_SPEED            * On s>>
    748  5     661C 16   0068            LBRA Hero_MoveUpdatePos           >>
    749        661F               Hero_MoveLeft_00                         >>
    750                           *      CMPD #$0000                       >>
    751                           *      BNE Hero_MoveLeft_02        * BRAN>>
    752                           *      LDD #$FEFF                        >>
    753                           *Hero_MoveLeft_02
    754  8     661F 10B3 68F5            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    755  3     6623 27   62              BEQ Hero_MoveUpdatePos      * vite>>
    756  7     6625 B3   68F7            SUBD HERO_ACCELERATION      * acce>>
    757  8     6628 10B3 68F5            CMPD HERO_NEG_TOP_SPEED     * Comp>>
    758  3     662C 2E   0F              BGT Hero_MoveLeft_01        * BRAN>>
    759  3     662E 8E   6870            LDX #HERO_RUN_L        * Charge an>>
    760  6     6631 BF   68FD            STX HERO_ANIMATION_ADR      * Sauv>>
    761  6     6634 FC   68F5            LDD HERO_NEG_TOP_SPEED      * Limi>>
    762  6     6637 FD   68E9            STD HERO_G_SPEED            * Enre>>
    763  5     663A 16   004A            LBRA Hero_MoveUpdatePos     * Mise>>
    764        663D               Hero_MoveLeft_01
    765  6     663D FD   68E9            STD HERO_G_SPEED            * Enre>>
    766  3     6640 8E   682D            LDX #HERO_WALK_L        * Charge a>>
    767  6     6643 BF   68FD            STX HERO_ANIMATION_ADR      * Sauv>>
    768  5     6646 16   003E            LBRA Hero_MoveUpdatePos
    769
    770        6649               Hero_MoveRight                  * XREF: H>>
    771  6     6649 FC   68E9            LDD HERO_G_SPEED        * Chargeme>>
    772  5     664C 1083 0000            CMPD #$0000                 * Test>>
    773  3     6650 2C   0E              BGE Hero_MoveRight_00       * BRAN>>
    774  7     6652 F3   68F9            ADDD HERO_DECELERATION      * orie>>
    775  3     6655 24   03              BCC Hero_MoveRight_03       * BRAN>>
    776  6     6657 FC   68F9            LDD HERO_DECELERATION   * si la vi>>
    777        665A               Hero_MoveRight_03
    778  6     665A FD   68E9            STD HERO_G_SPEED        * On stock>>
    779  5     665D 16   0027            LBRA Hero_MoveUpdatePos           >>
    780        6660               Hero_MoveRight_00                  * Orie>>
    781                           *      CMPD #$0000                       >>
    782                           *      BNE Hero_MoveRight_02       * BRAN>>
    783                           *      LDD #$0100                        >>
    784                           *Hero_MoveRight_02
    785  8     6660 10B3 68F3            CMPD HERO_TOP_SPEED         * Comp>>
    786  3     6664 27   21              BEQ Hero_MoveUpdatePos      * vite>>
    787  7     6666 F3   68F7            ADDD HERO_ACCELERATION      * acce>>
    788  8     6669 10B3 68F3            CMPD HERO_TOP_SPEED         * Comp>>
    789  3     666D 2D   0F              BLT Hero_MoveRight_01       * BRAN>>
    790  3     666F 8E   67F4            LDX #HERO_RUN_R                   >>
    791  6     6672 BF   68FD            STX HERO_ANIMATION_ADR      * Sauv>>
    792  6     6675 FC   68F3            LDD HERO_TOP_SPEED          * Limi>>
    793  6     6678 FD   68E9            STD HERO_G_SPEED            * Enre>>
    794  5     667B 16   0009            LBRA Hero_MoveUpdatePos           >>
    795        667E               Hero_MoveRight_01
    796  6     667E FD   68E9            STD HERO_G_SPEED            * Enre>>
    797  3     6681 8E   67A5            LDX #HERO_WALK_R        * Charge a>>
    798  6     6684 BF   68FD            STX HERO_ANIMATION_ADR      * Sauv>>
    799
    800        6687               Hero_MoveUpdatePos
    801  6     6687 FC   68E9            LDD HERO_G_SPEED            * Char>>
    802  6     668A FD   68EB            STD HERO_X_SPEED        * Stockage>>
    803  5     668D 1083 0000            CMPD #$0000                 * Test>>
    804  3     6691 2D   0E              BLT Hero_MoveUpdatePos_00   * BRAN>>
    805  7     6693 F3   68ED            ADDD HERO_X_SPS         * Ajout du>>
    806  5     6696 F7   68EE            STB HERO_X_SPS+1            * sauv>>
    807  6     6699 1F   89              TFR A,B                     * Divi>>
    808  5     669B FB   68E7            ADDB HERO_X_POS                   >>
    809  3     669E 20   18              BRA Hero_MoveUpdatePos_01
    810        66A0               Hero_MoveUpdatePos_V00
    811        66A0 00                   FCB $00
    812        66A1               Hero_MoveUpdatePos_00
    813  3     66A1 CC   0000            LDD #$0000
    814  7     66A4 B3   68EB            SUBD HERO_X_SPEED           * La v>>
    815  7     66A7 F3   68ED            ADDD HERO_X_SPS         * Ajout du>>
    816  5     66AA F7   68EE            STB HERO_X_SPS+1            * sauv>>
    817  6     66AD 1F   89              TFR A,B                     * Divi>>
    818  5     66AF F7   66A0            STB Hero_MoveUpdatePos_V00
    819  5     66B2 F6   68E7            LDB HERO_X_POS
    820  5     66B5 F0   66A0            SUBB Hero_MoveUpdatePos_V00 * Ajou>>
    821        66B8               Hero_MoveUpdatePos_01
    822                           *      CMPB #$50                         >>
    823                           *      BLE Hero_MoveUpdatePos_02   * Bute>>
    824                           *      LDB #$50                          >>
    825                           *Hero_MoveUpdatePos_02
    826                           *    CMPB #$0C                           >>
    827                           *      BGE Hero_MoveUpdatePos_03   * Bute>>
    828                           *      LDB #$0C                          >>
    829        66B8               Hero_MoveUpdatePos_03
    830  5     66B8 F7   68E7            STB HERO_X_POS
    831  2     66BB C6   00              LDB #$00
    832  5     66BD F7   68ED            STB HERO_X_SPS                    >>
    833  3     66C0 CC   0000            LDD #$0000                  * TODO>>
    834  6     66C3 FD   68EF            STD HERO_Y_SPEED
    835  6     66C6 1F   89              TFR A,B                     * divi>>
    836  5     66C8 FB   68E8            ADDB HERO_Y_POS
    837  5     66CB F7   68E8            STB HERO_Y_POS
    838  5     66CE 39                   RTS
    839
    840                           * TODO : Braking Animation
    841                           * Sonic enters his braking animation when>>
    842                           * In Sonic 1 and Sonic CD, he then stays >>
    843                           * In the other 3 games, Sonic returns to >>
    844
    845        66CF               Compute_Position
    846  5     66CF B6   68E7            LDA HERO_X_POS
    847  2     66D2 44                   LSRA
    848  3     66D3 25   17              BCS Compute_Position_01
    849  5     66D5 B7   6707            STA Compute_Position_02+1
    850  2     66D8 86   28              LDA #$28
    851  5     66DA F6   68E8            LDB HERO_Y_POS
    852  2     66DD 5A                   DECB
    853  11    66DE 3D                   MUL
    854  7     66DF F3   6706            ADDD Compute_Position_02
    855  6     66E2 FD   9F00            STD HERO_POS
    856  4     66E5 C3   2000            ADDD #$2000
    857  6     66E8 FD   9F02            STD HERO_POS+2
    858  5     66EB 39                   RTS
    859        66EC               Compute_Position_01
    860  5     66EC B7   6707            STA Compute_Position_02+1
    861  2     66EF 86   28              LDA #$28
    862  5     66F1 F6   68E8            LDB HERO_Y_POS
    863  2     66F4 5A                   DECB
    864  11    66F5 3D                   MUL
    865  7     66F6 F3   6706            ADDD Compute_Position_02
    866  4     66F9 C3   2000            ADDD #$2000
    867  6     66FC FD   9F00            STD HERO_POS
    868  4     66FF 83   1FFF            SUBD #$1FFF
    869  6     6702 FD   9F02            STD HERO_POS+2
    870  5     6705 39                   RTS
    871        6706               Compute_Position_02
    872        6706 0000                 FDB $0000
    873
    874                           *****************************************>>
    875                           * HERO Animations
    876                           * ---------------
    877                           * Note: Speed abs +0, rel +8, rel cap +10>>
    878                           *
    879                           * Chargement nouvelle animation
    880                           *    nouvelle frame = 109 a 119
    881                           *
    882                           * Chargement frame suivante
    883                           *    frame identique = 15
    884                           * ou frame suivante  = 116 a 126
    885                           *
    886                           * Chargement frame suivante avec branchem>>
    887                           *    nouvelle frame = 165 a 175
    888                           * ou frame suivante = 172 a 182
    889                           *
    890                           * Chargement frame suivante avec retour s>>
    891                           *    nouvelle frame = 167 a 177
    892                           * ou frame suivante = 174 a 184
    893                           *****************************************>>
    894
    895        6708               HERO_ANIMATION_LOAD                      >>
    896  6     6708 BF   68FD            STX HERO_ANIMATION_ADR
    897  6     670B BF   68FF            STX HERO_ANIMATION_RTN_ADR
    898  7     670E 7F   6909            CLR HERO_ANIMATION_IMC            >>
    899        6711               HERO_ANIMATION_LOAD_00
    900  5+1   6711 EC   1E              LDD -2,X                          >>
    901  2     6713 81   00              CMPA #$00                         >>
    902  3     6715 27   07              BEQ HERO_ANIMATION_LOAD_01
    903  5     6717 F0   68E9            SUBB HERO_G_SPEED                 >>
    904  3     671A 24   02              BCC HERO_ANIMATION_LOAD_01
    905  2     671C C6   01              LDB #$01                          >>
    906        671E               HERO_ANIMATION_LOAD_01
    907  5     671E F7   690B            STB HERO_ANIMATION_FRR            >>
    908  5     6721 B6   6909            LDA HERO_ANIMATION_IMC
    909  2     6724 C6   05              LDB #$05
    910  11    6726 3D                   MUL
    911  7     6727 F3   68FD            ADDD HERO_ANIMATION_ADR
    912  6     672A 1F   02              TFR D,Y
    913  4+0   672C E6   A4              LDB ,Y
    914  2     672E C1   1F              CMPB #$1F                         >>
    915  3     6730 22   11              BHI HERO_ANIMATION_LOAD_NOPAGE
    916  5     6732 F7   6901            STB HERO_ANIMATION_PAG            >>
    917  5     6735 F7   6902            STB HERO_ANIMATION_PAG_REF
    918  5+1   6738 AE   21              LDX 1,Y
    919  6     673A BF   6907            STX HERO_ANIMATION_DRW
    920  5+1   673D AE   23              LDX 3,Y
    921  6     673F BF   6905            STX HERO_ANIMATION_DEL
    922  5     6742 39                   RTS
    923        6743               HERO_ANIMATION_LOAD_NOPAGE
    924  2     6743 C1   FF              CMPB #$FF
    925  3     6745 26   0C              BNE HERO_ANIMATION_LOAD_FE
    926  5+1   6747 AE   23              LDX 3,Y
    927  6     6749 BF   6909            STX HERO_ANIMATION_IMC            >>
    928  5+1   674C AE   21              LDX 1,Y
    929  6     674E BF   68FD            STX HERO_ANIMATION_ADR
    930  3     6751 20   BE              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    931        6753               HERO_ANIMATION_LOAD_FE
    932  6     6753 BE   68FF            LDX HERO_ANIMATION_RTN_ADR  * RETU>>
    933  6     6756 BF   68FD            STX HERO_ANIMATION_ADR
    934  5     6759 F6   690A            LDB HERO_ANIMATION_RTN_IMC
    935  5     675C F7   6909            STB HERO_ANIMATION_IMC
    936  3     675F 20   B0              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    937
    938        6761               HERO_ANIMATION_NEXT
    939  7     6761 7A   690B            DEC HERO_ANIMATION_FRR
    940  3     6764 27   01              BEQ HERO_ANIMATION_NEXT_00  * BRAN>>
    941  5     6766 39                   RTS
    942        6767               HERO_ANIMATION_NEXT_00
    943  7     6767 7C   6909            INC HERO_ANIMATION_IMC
    944  6     676A BE   68FD            LDX HERO_ANIMATION_ADR
    945  3     676D 20   A2              BRA HERO_ANIMATION_LOAD_00  * Outp>>
    946                            
    947                           *   SAMPLE CODE ANIMATION
    948                           *      ---------------------
    949                           *      FDB $0018            * 00 Absolute>>
    950                           *HERO_IDLE_L
    951                           *      FCB $01                     * Page>>
    952                           *      FDB $A000            * Adresse drw>>
    953                           *      FDB $A000            * Adresse del>>
    954                           *
    955                           *      FCB $FF                     * FF S>>
    956                           *      FDB HERO_IDLE-C * adresse animatio>>
    957                           *      FDB $0301            * 03 image ci>>
    958                           *
    959                           *      FCB $FE                     * FE R>>
    960                           *
    961                           *      LDX #HERO_IDLE_R
    962                           *      JSR HERO_ANIMATION_LOAD
    963                           *
    964                           *      JSR HERO_ANIMATION_NEXT
    965
    966                           *****************************************>>
    967                           * ANIMATION Scripts
    968                           *****************************************>>
    969
    970
    971
    972        676F 0108                 FDB $0108
    973        6771               HERO_SKID_R
    974        6771 04                   FCB $04
    975        6772 D5AB                 FDB $D5AB
    976        6774 DC3C                 FDB $DC3C
    977        6776 06                   FCB $06
    978        6777 D455                 FDB $D455
    979        6779 DBA9                 FDB $DBA9
    980        677B 04                   FCB $04
    981        677C CA37                 FDB $CA37
    982        677E D179                 FDB $D179
    983        6780 0A                   FCB $0A
    984        6781 D414                 FDB $D414
    985        6783 DB9F                 FDB $DB9F
    986        6785 04                   FCB $04
    987        6786 BF4A                 FDB $BF4A
    988        6788 C638                 FDB $C638
    989        678A 04                   FCB $04
    990        678B B40C                 FDB $B40C
    991        678D BB2B                 FDB $BB2B
    992        678F 06                   FCB $06
    993        6790 C904                 FDB $C904
    994        6792 D02F                 FDB $D02F
    995        6794 04                   FCB $04
    996        6795 A8F4                 FDB $A8F4
    997        6797 AFFB                 FDB $AFFB
    998        6799 08                   FCB $08
    999        679A D42E                 FDB $D42E
   1000        679C DB91                 FDB $DB91
   1001        679E FF                   FCB $FF
   1002        679F 6771                 FDB HERO_SKID_R
   1003        67A1 0000                 FDB $0000
   1004
   1005        67A3 0008                 FDB $0008
   1006        67A5               HERO_WALK_R
   1007        67A5 04                   FCB $04
   1008        67A6 A000                 FDB $A000
   1009        67A8 A5B5                 FDB $A5B5
   1010        67AA 06                   FCB $06
   1011        67AB BF54                 FDB $BF54
   1012        67AD C580                 FDB $C580
   1013        67AF 08                   FCB $08
   1014        67B0 C8B9                 FDB $C8B9
   1015        67B2 D004                 FDB $D004
   1016        67B4 0A                   FCB $0A
   1017        67B5 C85C                 FDB $C85C
   1018        67B7 CFD0                 FDB $CFD0
   1019        67B9 0A                   FCB $0A
   1020        67BA BCDC                 FDB $BCDC
   1021        67BC C42B                 FDB $C42B
   1022        67BE 06                   FCB $06
   1023        67BF B43B                 FDB $B43B
   1024        67C1 BB43                 FDB $BB43
   1025        67C3 06                   FCB $06
   1026        67C4 AA5F                 FDB $AA5F
   1027        67C6 B0A4                 FDB $B0A4
   1028        67C8 06                   FCB $06
   1029        67C9 A000                 FDB $A000
   1030        67CB A69E                 FDB $A69E
   1031        67CD 08                   FCB $08
   1032        67CE BE9E                 FDB $BE9E
   1033        67D0 C514                 FDB $C514
   1034        67D2 0C                   FCB $0C
   1035        67D3 D35D                 FDB $D35D
   1036        67D5 DACE                 FDB $DACE
   1037        67D7 0C                   FCB $0C
   1038        67D8 C7CC                 FDB $C7CC
   1039        67DA CF29                 FDB $CF29
   1040        67DC 08                   FCB $08
   1041        67DD B46C                 FDB $B46C
   1042        67DF BAE8                 FDB $BAE8
   1043        67E1 FF                   FCB $FF
   1044        67E2 67A5                 FDB HERO_WALK_R
   1045        67E4 0000                 FDB $0000
   1046
   1047        67E6 0118                 FDB $0118
   1048        67E8               HERO_IDLE_R
   1049        67E8 08                   FCB $08
   1050        67E9 AA65                 FDB $AA65
   1051        67EB B0C3                 FDB $B0C3
   1052        67ED FF                   FCB $FF
   1053        67EE 67E8                 FDB HERO_IDLE_R
   1054        67F0 0000                 FDB $0000
   1055
   1056        67F2 0008                 FDB $0008
   1057        67F4               HERO_RUN_R
   1058        67F4 0C                   FCB $0C
   1059        67F5 BBD6                 FDB $BBD6
   1060        67F7 C36C                 FDB $C36C
   1061        67F9 08                   FCB $08
   1062        67FA A000                 FDB $A000
   1063        67FC A697                 FDB $A697
   1064        67FE 0A                   FCB $0A
   1065        67FF B2F9                 FDB $B2F9
   1066        6801 B93A                 FDB $B93A
   1067        6803 0A                   FCB $0A
   1068        6804 A944                 FDB $A944
   1069        6806 AF75                 FDB $AF75
   1070        6808 0E                   FCB $0E
   1071        6809 D42B                 FDB $D42B
   1072        680B DB4B                 FDB $DB4B
   1073        680D 12                   FCB $12
   1074        680E D308                 FDB $D308
   1075        6810 DAF3                 FDB $DAF3
   1076        6812 0A                   FCB $0A
   1077        6813 A000                 FDB $A000
   1078        6815 A5E4                 FDB $A5E4
   1079        6817 0C                   FCB $0C
   1080        6818 B28C                 FDB $B28C
   1081        681A B872                 FDB $B872
   1082        681C 0C                   FCB $0C
   1083        681D A8F4                 FDB $A8F4
   1084        681F AF13                 FDB $AF13
   1085        6821 0E                   FCB $0E
   1086        6822 C954                 FDB $C954
   1087        6824 D03C                 FDB $D03C
   1088        6826 FF                   FCB $FF
   1089        6827 67F4                 FDB HERO_RUN_R
   1090        6829 0000                 FDB $0000
   1091
   1092        682B 0008                 FDB $0008
   1093        682D               HERO_WALK_L
   1094        682D 0C                   FCB $0C
   1095        682E A000                 FDB $A000
   1096        6830 A5B5                 FDB $A5B5
   1097        6832 0E                   FCB $0E
   1098        6833 BFA4                 FDB $BFA4
   1099        6835 C5D0                 FDB $C5D0
   1100        6837 0E                   FCB $0E
   1101        6838 B440                 FDB $B440
   1102        683A BB82                 FDB $BB82
   1103        683C 10                   FCB $10
   1104        683D D410                 FDB $D410
   1105        683F DB84                 FDB $DB84
   1106        6841 10                   FCB $10
   1107        6842 C89F                 FDB $C89F
   1108        6844 CFE5                 FDB $CFE5
   1109        6846 12                   FCB $12
   1110        6847 C7EF                 FDB $C7EF
   1111        6849 CEF7                 FDB $CEF7
   1112        684B 0E                   FCB $0E
   1113        684C AA64                 FDB $AA64
   1114        684E B0A9                 FDB $B0A9
   1115        6850 0E                   FCB $0E
   1116        6851 A000                 FDB $A000
   1117        6853 A6A1                 FDB $A6A1
   1118        6855 10                   FCB $10
   1119        6856 BE84                 FDB $BE84
   1120        6858 C4FA                 FDB $C4FA
   1121        685A 12                   FCB $12
   1122        685B BC52                 FDB $BC52
   1123        685D C3BB                 FDB $C3BB
   1124        685F 14                   FCB $14
   1125        6860 D400                 FDB $D400
   1126        6862 DB5D                 FDB $DB5D
   1127        6864 10                   FCB $10
   1128        6865 B44D                 FDB $B44D
   1129        6867 BACC                 FDB $BACC
   1130        6869 FF                   FCB $FF
   1131        686A 682D                 FDB HERO_WALK_L
   1132        686C 0000                 FDB $0000
   1133
   1134        686E 0008                 FDB $0008
   1135        6870               HERO_RUN_L
   1136        6870 16                   FCB $16
   1137        6871 CF43                 FDB $CF43
   1138        6873 D6E2                 FDB $D6E2
   1139        6875 10                   FCB $10
   1140        6876 A9E3                 FDB $A9E3
   1141        6878 B07D                 FDB $B07D
   1142        687A 10                   FCB $10
   1143        687B A000                 FDB $A000
   1144        687D A641                 FDB $A641
   1145        687F 12                   FCB $12
   1146        6880 B293                 FDB $B293
   1147        6882 B8CA                 FDB $B8CA
   1148        6884 14                   FCB $14
   1149        6885 C8C9                 FDB $C8C9
   1150        6887 CFEF                 FDB $CFEF
   1151        6889 16                   FCB $16
   1152        688A C2D9                 FDB $C2D9
   1153        688C CAB8                 FDB $CAB8
   1154        688E 12                   FCB $12
   1155        688F A94A                 FDB $A94A
   1156        6891 AF31                 FDB $AF31
   1157        6893 12                   FCB $12
   1158        6894 A000                 FDB $A000
   1159        6896 A5E6                 FDB $A5E6
   1160        6898 14                   FCB $14
   1161        6899 BF2C                 FDB $BF2C
   1162        689B C54E                 FDB $C54E
   1163        689D 14                   FCB $14
   1164        689E B450                 FDB $B450
   1165        68A0 BB3B                 FDB $BB3B
   1166        68A2 FF                   FCB $FF
   1167        68A3 6870                 FDB HERO_RUN_L
   1168        68A5 0000                 FDB $0000
   1169
   1170        68A7 0108                 FDB $0108
   1171        68A9               HERO_SKID_L
   1172        68A9 14                   FCB $14
   1173        68AA AA07                 FDB $AA07
   1174        68AC B098                 FDB $B098
   1175        68AE 16                   FCB $16
   1176        68AF B74F                 FDB $B74F
   1177        68B1 BEA3                 FDB $BEA3
   1178        68B3 16                   FCB $16
   1179        68B4 ABE0                 FDB $ABE0
   1180        68B6 B31F                 FDB $B31F
   1181        68B8 16                   FCB $16
   1182        68B9 A000                 FDB $A000
   1183        68BB A78B                 FDB $A78B
   1184        68BD 18                   FCB $18
   1185        68BE CD61                 FDB $CD61
   1186        68C0 D452                 FDB $D452
   1187        68C2 18                   FCB $18
   1188        68C3 C223                 FDB $C223
   1189        68C5 C942                 FDB $C942
   1190        68C7 18                   FCB $18
   1191        68C8 B6CD                 FDB $B6CD
   1192        68CA BDFB                 FDB $BDFB
   1193        68CC 18                   FCB $18
   1194        68CD ABB0                 FDB $ABB0
   1195        68CF B2BA                 FDB $B2BA
   1196        68D1 18                   FCB $18
   1197        68D2 A000                 FDB $A000
   1198        68D4 A766                 FDB $A766
   1199        68D6 FF                   FCB $FF
   1200        68D7 68A9                 FDB HERO_SKID_L
   1201        68D9 0000                 FDB $0000
   1202
   1203        68DB 0118                 FDB $0118
   1204        68DD               HERO_IDLE_L
   1205        68DD 14                   FCB $14
   1206        68DE A000                 FDB $A000
   1207        68E0 A65E                 FDB $A65E
   1208        68E2 FF                   FCB $FF
   1209        68E3 68DD                 FDB HERO_IDLE_L
   1210        68E5 0000                 FDB $0000
   1211                            
   1212                           *****************************************>>
   1213                           * HERO Variables
   1214                           *****************************************>>
   1215                  0400     HERO_WALK_SPD_LIMIT EQU $0400
   1216                  0600     HERO_JOG_SPD_LIMIT  EQU $0600
   1217        68E7               HERO_X_POS
   1218        68E7 50                   FCB $50                     * Hori>>
   1219        68E8               HERO_Y_POS
   1220        68E8 C8                   FCB $C8                     * Vert>>
   1221        68E9               HERO_G_SPEED         * Ground Speed
   1222        68E9 0000                 FDB $0000            * First byte >>
   1223        68EB               HERO_X_SPEED
   1224        68EB 0000                 FDB $0000            * Horizontal >>
   1225        68ED               HERO_X_SPS
   1226        68ED 0000                 FDB $0000            * Subpixel X >>
   1227        68EF               HERO_Y_SPEED
   1228        68EF 0000                 FDB $0000            * Vertical Sp>>
   1229        68F1               HERO_Y_SPS
   1230        68F1 0000                 FDB $0000            * Subpixel Y >>
   1231        68F3               HERO_TOP_SPEED
   1232        68F3 0600                 FDB $0600        * vitesse maximum>>
   1233        68F5               HERO_NEG_TOP_SPEED
   1234        68F5 FA00                 FDB $FA00        * vitesse maximum>>
   1235        68F7               HERO_ACCELERATION
   1236        68F7 000C                 FDB $000C        * constante accel>>
   1237        68F9               HERO_DECELERATION
   1238        68F9 0080                 FDB $0080        * constante decel>>
   1239        68FB               HERO_FRICTION
   1240        68FB 000C                 FDB $000C        * constante de fr>>
   1241        68FD               HERO_ANIMATION_ADR
   1242        68FD 0000                 FDB $0000        * Animation coura>>
   1243        68FF               HERO_ANIMATION_RTN_ADR
   1244        68FF 0000                 FDB $0000        * Animation coura>>
   1245        6901               HERO_ANIMATION_PAG
   1246        6901 00                   FCB $00          * Animation coura>>
   1247        6902               HERO_ANIMATION_PAG_REF
   1248        6902 00                   FCB $00          * Animation coura>>
   1249        6903               HERO_ANIMATION_PAG_DEL
   1250        6903 0000                 FDB $0000        * Animation coura>>
   1251        6905               HERO_ANIMATION_DEL
   1252        6905 0000                 FDB $0000        * Animation coura>>
   1253        6907               HERO_ANIMATION_DRW
   1254        6907 0000                 FDB $0000        * Animation coura>>
   1255        6909               HERO_ANIMATION_IMC
   1256        6909 00                   FCB $00          * Animation coura>>
   1257        690A               HERO_ANIMATION_RTN_IMC
   1258        690A 00                   FCB $00          * Animation coura>>
   1259        690B               HERO_ANIMATION_FRR
   1260        690B 00                   FCB $00          * Animation coura>>

000000 Total Errors

000107 Total Symbols
     0x          Label 6300 BEGIN
     2x          Label 651D CLR_CART
     1x          Label 6536 CLR_CART_2
     1x          Label 6552 CLR_CART_3
     1x          Label 66CF Compute_Position
     1x          Label 66EC Compute_Position_01
     4x          Label 6706 Compute_Position_02
     2x          Label 6332 CPPAGE_LOOP
     0x          Equ   0014 DEBUTECRANA
     0x          Equ   2014 DEBUTECRANB
     1x          Equ   622C DK_dernier_bloc_a_ecrire
     1x          Equ   6213 DK_destination
     1x          Equ   6205 DK_lecture
     1x          Equ   620A DK_piste
     2x          Equ   620F DK_secteur
     1x          Equ   1F40 FINECRANA
     1x          Equ   3F40 FINECRANB
     1x          Label 6579 FINTABPALETTE
     2x          Label 68F7 HERO_ACCELERATION
    13x          Label 68FD HERO_ANIMATION_ADR
     2x          Label 6905 HERO_ANIMATION_DEL
     4x          Label 6907 HERO_ANIMATION_DRW
     2x          Label 690B HERO_ANIMATION_FRR
     5x          Label 6909 HERO_ANIMATION_IMC
     1x          Label 6708 HERO_ANIMATION_LOAD
     3x          Label 6711 HERO_ANIMATION_LOAD_00
     2x          Label 671E HERO_ANIMATION_LOAD_01
     1x          Label 6753 HERO_ANIMATION_LOAD_FE
     1x          Label 6743 HERO_ANIMATION_LOAD_NOPAGE
     1x          Label 6761 HERO_ANIMATION_NEXT
     1x          Label 6767 HERO_ANIMATION_NEXT_00
     5x          Label 6901 HERO_ANIMATION_PAG
     5x          Label 6903 HERO_ANIMATION_PAG_DEL
     2x          Label 6902 HERO_ANIMATION_PAG_REF
     2x          Label 68FF HERO_ANIMATION_RTN_ADR
     1x          Label 690A HERO_ANIMATION_RTN_IMC
     4x          Label 68F9 HERO_DECELERATION
     2x          Label 68FB HERO_FRICTION
    17x          Label 68E9 HERO_G_SPEED
     2x          Label 68DD HERO_IDLE_L
     3x          Label 67E8 HERO_IDLE_R
     2x          Equ   0600 HERO_JOG_SPD_LIMIT
     1x          Label 6593 Hero_Move
     1x          Label 6605 Hero_MoveLeft
     1x          Label 661F Hero_MoveLeft_00
     1x          Label 663D Hero_MoveLeft_01
     1x          Label 6619 Hero_MoveLeft_03
     1x          Label 6649 Hero_MoveRight
     1x          Label 6660 Hero_MoveRight_00
     1x          Label 667E Hero_MoveRight_01
     1x          Label 665A Hero_MoveRight_03
    11x          Label 6687 Hero_MoveUpdatePos
     1x          Label 66A1 Hero_MoveUpdatePos_00
     1x          Label 66B8 Hero_MoveUpdatePos_01
     0x          Label 66B8 Hero_MoveUpdatePos_03
     2x          Label 66A0 Hero_MoveUpdatePos_V00
     3x          Label 68F5 HERO_NEG_TOP_SPEED
     1x          Label 659C Hero_NotLeft
     1x          Label 65A3 Hero_NotLeftOrRight
     1x          Label 65DA Hero_NotLeftOrRight_00
     1x          Label 65C3 Hero_NotLeftOrRight_01
     1x          Label 65D4 Hero_NotLeftOrRight_02
     1x          Label 65D7 Hero_NotLeftOrRight_03
     1x          Label 65EE Hero_NotLeftOrRight_11
     1x          Label 65FF Hero_NotLeftOrRight_12
     1x          Label 6602 Hero_NotLeftOrRight_13
     6x          Equ   9F00 HERO_POS
     2x          Label 6870 HERO_RUN_L
     2x          Label 67F4 HERO_RUN_R
     1x          Label 68A9 HERO_SKID_L
     1x          Label 6771 HERO_SKID_R
     3x          Label 68F3 HERO_TOP_SPEED
     3x          Label 682D HERO_WALK_L
     3x          Label 67A5 HERO_WALK_R
     0x          Equ   0400 HERO_WALK_SPD_LIMIT
     4x          Label 68E7 HERO_X_POS
     2x          Label 68EB HERO_X_SPEED
     6x          Label 68ED HERO_X_SPS
     4x          Label 68E8 HERO_Y_POS
     1x          Label 68EF HERO_Y_SPEED
     0x          Label 68F1 HERO_Y_SPS
     0x          Label 636E INIT_VID
     0x          Equ   000D JOY_B
     0x          Equ   0005 JOY_BD
     0x          Equ   0009 JOY_BG
     1x          Label 6592 JOY_BTN_STATUS
     0x          Equ   000F JOY_C
     1x          Equ   0007 JOY_D
     2x          Label 6591 JOY_DIR_STATUS
     1x          Equ   000B JOY_G
     0x          Equ   000E JOY_H
     0x          Equ   0006 JOY_HD
     0x          Equ   000A JOY_HG
     1x          Label 6579 JOY_READ
     4x          Label 631F LDPAGE_LOOP
     1x          Label 63CF MAIN
     2x          Label 642A MEM_COPY_DATA_TO_CART
     2x          Label 6510 MEM_COPY_DATA_TO_CART_E
     1x          Label 6430 MEM_COPY_DATA_TO_CART_LOOP
     1x          Label 6518 MEM_COPY_DATA_TO_CART_S
     6x          Label 63FA SCRC
     3x          Label 6415 SCRC0
     1x          Label 6392 SETPALETTE
     1x          Label 6559 TABPALETTE
     1x          Label 641F VSYNC
     1x          Label 641F VSYNC_1
     1x          Label 6424 VSYNC_2

