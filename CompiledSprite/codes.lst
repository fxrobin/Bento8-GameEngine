/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : TEST1X10.asm
 * Fichier destination : TEST1X10.BIN
 * Contenu :
 *     Main     0:TEST1X10.asm 6333
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        A000                      ORG $A000
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17                  0000     DEBUTECRANA EQU $0000       * debut de la>>
     18                  1F40     FINECRANA EQU $1F40  * fin de la RAM A vi>>
     19                  2000     DEBUTECRANB EQU $2000       * debut de la>>
     20                  3F40     FINECRANB EQU $3F40  * fin de la RAM B vi>>
     21
     22        A000 0000          SSAVE FDB $0000
     23
     24                           *****************************************>>
     25                           * Debut du programme
     26                           *****************************************>>
     27  2     A002 1A   50              ORCC #$50     * a documenter (inte>>
     28                            
     29  2     A004 86   7B              LDA #$7B      * passage en mode 16>>
     30  5     A006 B7   E7DC            STA $E7DC
     31
     32                           *****************************************>>
     33                           * Initialisation de la palette de couleur>>
     34                           *****************************************>>
     35  4     A009 108E A25E            LDY #TABPALETTE
     36  2     A00D 4F                   CLRA
     37        A00E               SETPALETTE
     38  5+1   A00E 34   02              PSHS A
     39  2     A010 48                   ASLA
     40  5     A011 B7   E7DB            STA $E7DB
     41  5+3   A014 EC   A1              LDD ,Y++
     42  5     A016 F7   E7DA            STB $E7DA
     43  5     A019 B7   E7DA            STA $E7DA
     44  5+1   A01C 35   02              PULS A
     45  2     A01E 4C                   INCA
     46  5     A01F 108C A27E            CMPY #FINTABPALETTE
     47  3     A023 26   E9              BNE    SETPALETTE
     48                            
     49                           *****************************************>>
     50                           * Initialisation de la couleur de bordure>>
     51                           *****************************************>>
     52        A025               INITBORD
     53  2     A025 86   04              LDA    #$04   * couleur 4
     54  5     A027 B7   E7DD            STA    $E7DD
     55
     56                           *****************************************>>
     57                           * Initialisation de la routine de commuta>>
     58                           *****************************************>>
     59  5     A02A F6   6081            LDB $6081
     60  2     A02D CA   10              ORB #$10
     61  5     A02F F7   6081            STB $6081
     62  5     A032 F7   E7E7            STB $E7E7
     63
     64                           *****************************************>>
     65                           * Effacement ecran (les deux pages)
     66                           *****************************************>>
     67  8     A035 BD   A04C            JSR SCRC
     68  8     A038 BD   A063            JSR EFF
     69  8     A03B BD   A04C            JSR SCRC
     70  8     A03E BD   A063            JSR EFF
     71
     72                           *****************************************>>
     73                           * Boucle principale
     74                           *****************************************>>
     75        A041               MAIN
     76  8     A041 BD   A072            JSR DRAWBCKGRN
     77                                  *LDX >POS_TEST1X100000
     78                                  *LEAX -1,X
     79                                  *STX >POS_TEST1X100000
     80  8     A044 BD   A0B5            JSR DRAW_TEST1X100000
     81  8     A047 BD   A04C            JSR SCRC        * changement de pa>>
     82  3     A04A 20   F5              BRA MAIN
     83
     84                           *****************************************>>
     85                           * Changement de page ecran
     86                           *****************************************>>
     87        A04C               SCRC
     88  5     A04C F6   A05A            LDB SCRC0+1
     89  2     A04F C4   80              ANDB #$80          * BANK1 utilise>>
     90  2     A051 CA   0A              ORB #$0A           * contour ecran>>
     91  5     A053 F7   E7DD            STB $E7DD
     92  7     A056 73   A05A            COM SCRC0+1
     93        A059               SCRC0
     94  2     A059 C6   00              LDB #$00
     95  2     A05B C4   02              ANDB #$02          * page RAM no0 >>
     96  2     A05D CA   60              ORB #$60           * espace cartou>>
     97  5     A05F F7   E7E6            STB $E7E6
     98  5     A062 39                   RTS
     99
    100                           *****************************************>>
    101                           * Effacement de l ecran
    102                           *****************************************>>
    103        A063               EFF
    104  2     A063 86   AA              LDA #$AA  * couleur fond
    105  4     A065 108E 0000            LDY #$0000
    106        A069               EFF_RAM
    107  4+2   A069 A7   A0              STA ,Y+
    108  5     A06B 108C 3FFF            CMPY #$3FFF
    109  3     A06F 26   F8              BNE EFF_RAM
    110  5     A071 39                   RTS
    111
    112                           *****************************************>>
    113                           * Affichage de l arriere plan xxx cycles
    114                           *****************************************>>
    115        A072               DRAWBCKGRN
    116  5+3   A072 34   48              PSHS U,DP            * sauvegarde >>
    117  7     A074 10FF A000            STS >SSAVE
    118                            
    119  4     A078 10CE 1F40            LDS #FINECRANA       * init pointe>>
    120  3     A07C CE   A27E            LDU #TILEBCKGRNDA
    121  5+7   A07F 37   3E              PULU X,Y,DP,D
    122
    123        A081               DRWBCKGRNDA
    124  5+7   A081 34   3E              PSHS X,Y,DP,D
    125  5+7   A083 34   3E              PSHS X,Y,DP,D
    126  5+7   A085 34   3E              PSHS X,Y,DP,D
    127  5+7   A087 34   3E              PSHS X,Y,DP,D
    128  5+7   A089 34   3E              PSHS X,Y,DP,D
    129  5+5   A08B 34   38              PSHS X,Y,DP
    130  5     A08D 118C 0000            CMPS #DEBUTECRANA
    131  3     A091 26   EE              BNE DRWBCKGRNDA
    132                            
    133  4     A093 10CE 3F40            LDS #FINECRANB       * init pointe>>
    134  3     A097 CE   A286            LDU #TILEBCKGRNDB
    135  5+7   A09A 37   3E              PULU X,Y,DP,D
    136
    137        A09C               DRWBCKGRNDB
    138  5+7   A09C 34   3E              PSHS X,Y,DP,D
    139  5+7   A09E 34   3E              PSHS X,Y,DP,D
    140  5+7   A0A0 34   3E              PSHS X,Y,DP,D
    141  5+7   A0A2 34   3E              PSHS X,Y,DP,D
    142  5+7   A0A4 34   3E              PSHS X,Y,DP,D
    143  5+5   A0A6 34   38              PSHS X,Y,DP
    144  5     A0A8 118C 2000            CMPS #DEBUTECRANB
    145  3     A0AC 26   EE              BNE DRWBCKGRNDB
    146                            
    147  7     A0AE 10FE A000            LDS  >SSAVE          * rechargemen>>
    148  5+3   A0B2 35   48              PULS U,DP
    149  5     A0B4 39                   RTS
    150
    151                           *****************************************>>
    152                           * Affiche un computed sprite en xxx cycle>>
    153                           *****************************************>>
    154        A0B5               DRAW_TEST1X100000
    155  5+3   A0B5 34   48              PSHS U,DP
    156  7     A0B7 10FF A000            STS >SSAVE
    157
    158  7     A0BB 10FE A25C            LDS >POS_TEST1X100000
    159  3     A0BF CE   A21A            LDU #DATA_TEST1X100000_1
    160
    161  5+4   A0C2 37   26              PULU Y,B,A
    162  5+4   A0C4 34   26              PSHS Y,B,A
    163  4+1   A0C6 32   E8 DC           LEAS -36,S
    164  5+3   A0C9 37   0E              PULU DP,B,A
    165  5+3   A0CB 34   0E              PSHS DP,B,A
    166  4+1   A0CD 32   E8 DB           LEAS -37,S
    167  5+2   A0D0 37   0C              PULU DP,B
    168  5+3   A0D2 34   0E              PSHS DP,B,A
    169  4+1   A0D4 32   E8 DA           LEAS -38,S
    170  2     A0D7 86   0F              LDA  #$0F
    171  4+0   A0D9 A4   E4              ANDA ,S
    172  4+2   A0DB AB   C0              ADDA ,U+
    173  4+0   A0DD A7   E4              STA  ,S
    174  5+2   A0DF 37   06              PULU B,A
    175  5+2   A0E1 34   06              PSHS B,A
    176  4+1   A0E3 32   E8 DA           LEAS -38,S
    177  2     A0E6 86   0F              LDA  #$0F
    178  4+0   A0E8 A4   E4              ANDA ,S
    179  4+2   A0EA AB   C0              ADDA ,U+
    180  4+0   A0EC A7   E4              STA  ,S
    181  5+1   A0EE 37   02              PULU A
    182  5+2   A0F0 34   06              PSHS B,A
    183  4+1   A0F2 32   E8 DA           LEAS -38,S
    184  5+2   A0F5 37   06              PULU B,A
    185  5+2   A0F7 34   06              PSHS B,A
    186  4+1   A0F9 32   E8 DA           LEAS -38,S
    187  2     A0FC 86   0F              LDA  #$0F
    188  4+0   A0FE A4   E4              ANDA ,S
    189  4+2   A100 AB   C0              ADDA ,U+
    190  4+0   A102 A7   E4              STA  ,S
    191  4+1   A104 32   7D              LEAS -3,S
    192  5+2   A106 37   06              PULU B,A
    193  5+2   A108 34   06              PSHS B,A
    194  4+1   A10A 32   7F              LEAS -1,S
    195  2     A10C 86   F0              LDA  #$F0
    196  4+0   A10E A4   E4              ANDA ,S
    197  4+2   A110 AB   C0              ADDA ,U+
    198  4+0   A112 A7   E4              STA  ,S
    199  4+1   A114 32   E8 DC           LEAS -36,S
    200  5+3   A117 37   0E              PULU DP,B,A
    201  5+3   A119 34   0E              PSHS DP,B,A
    202  4+1   A11B 32   7F              LEAS -1,S
    203  2     A11D 86   F0              LDA  #$F0
    204  4+0   A11F A4   E4              ANDA ,S
    205  4+2   A121 AB   C0              ADDA ,U+
    206  4+0   A123 A7   E4              STA  ,S
    207  4+1   A125 32   E8 DB           LEAS -37,S
    208  5+1   A128 37   02              PULU A
    209  5+2   A12A 34   06              PSHS B,A
    210  4+1   A12C 32   7F              LEAS -1,S
    211  2     A12E 86   F0              LDA  #$F0
    212  4+0   A130 A4   E4              ANDA ,S
    213  4+2   A132 AB   C0              ADDA ,U+
    214  4+0   A134 A7   E4              STA  ,S
    215  4+1   A136 32   E8 DB           LEAS -37,S
    216  2     A139 86   0F              LDA  #$0F
    217  4+0   A13B A4   E4              ANDA ,S
    218  4+2   A13D AB   C0              ADDA ,U+
    219  4+0   A13F A7   E4              STA  ,S
    220  5+2   A141 37   06              PULU B,A
    221  5+2   A143 34   06              PSHS B,A
    222  4+1   A145 32   E8 DB           LEAS -37,S
    223  5+3   A148 34   0E              PSHS DP,B,A
    224  4+1   A14A 32   E8 DA           LEAS -38,S
    225  5+1   A14D 37   02              PULU A
    226  5+2   A14F 34   06              PSHS B,A
    227  4+1   A151 32   E8 DA           LEAS -38,S
    228  5+1   A154 37   02              PULU A
    229  5+2   A156 34   06              PSHS B,A
    230  4+1   A158 32   E8 DA           LEAS -38,S
    231  2     A15B 86   0F              LDA  #$0F
    232  4+0   A15D A4   E4              ANDA ,S
    233  4+2   A15F AB   C0              ADDA ,U+
    234  4+0   A161 A7   E4              STA  ,S
    235  5+1   A163 37   08              PULU DP
    236  5+2   A165 34   0C              PSHS DP,B
    237  4+1   A167 32   E8 D9           LEAS -39,S
    238  2     A16A 86   0F              LDA  #$0F
    239  4+0   A16C A4   E4              ANDA ,S
    240  4+2   A16E AB   C0              ADDA ,U+
    241  4+0   A170 A7   E4              STA  ,S
    242  4+1   A172 32   E8 B2           LEAS -78,S
    243
    244  7     A175 10FE A25C            LDS >POS_TEST1X100000
    245  4+4   A179 32   E9 2000         LEAS 8192,S
    246  3     A17D CE   A23C            LDU #DATA_TEST1X100000_2
    247
    248  5+4   A180 37   26              PULU Y,B,A
    249  5+4   A182 34   26              PSHS Y,B,A
    250  4+1   A184 32   E8 DB           LEAS -37,S
    251  2     A187 86   0F              LDA  #$0F
    252  4+0   A189 A4   E4              ANDA ,S
    253  4+2   A18B AB   C0              ADDA ,U+
    254  4+0   A18D A7   E4              STA  ,S
    255  5+2   A18F 37   0A              PULU DP,A
    256  5+3   A191 34   0E              PSHS DP,B,A
    257  4+1   A193 32   E8 DB           LEAS -37,S
    258  5+2   A196 37   0C              PULU DP,B
    259  5+3   A198 34   0E              PSHS DP,B,A
    260  4+1   A19A 32   E8 D8           LEAS -40,S
    261  5+1   A19D 37   02              PULU A
    262  5+2   A19F 34   0A              PSHS DP,A
    263  4+1   A1A1 32   7F              LEAS -1,S
    264  2     A1A3 86   F0              LDA  #$F0
    265  4+0   A1A5 A4   E4              ANDA ,S
    266  4+2   A1A7 AB   C0              ADDA ,U+
    267  4+0   A1A9 A7   E4              STA  ,S
    268  4+1   A1AB 32   E8 DB           LEAS -37,S
    269  5+2   A1AE 37   06              PULU B,A
    270  5+3   A1B0 34   0E              PSHS DP,B,A
    271  4+1   A1B2 32   E8 DB           LEAS -37,S
    272  5+3   A1B5 37   0E              PULU DP,B,A
    273  5+3   A1B7 34   0E              PSHS DP,B,A
    274  4+1   A1B9 32   E8 DB           LEAS -37,S
    275  5+3   A1BC 37   0E              PULU DP,B,A
    276  5+3   A1BE 34   0E              PSHS DP,B,A
    277  4+1   A1C0 32   E8 DB           LEAS -37,S
    278  5+3   A1C3 37   0E              PULU DP,B,A
    279  5+3   A1C5 34   0E              PSHS DP,B,A
    280  4+1   A1C7 32   E8 DB           LEAS -37,S
    281  5+1   A1CA 37   08              PULU DP
    282  5+3   A1CC 34   0E              PSHS DP,B,A
    283  4+1   A1CE 32   E8 DB           LEAS -37,S
    284  5+3   A1D1 34   0E              PSHS DP,B,A
    285  4+1   A1D3 32   E8 DB           LEAS -37,S
    286  5+1   A1D6 37   08              PULU DP
    287  5+3   A1D8 34   0E              PSHS DP,B,A
    288  4+1   A1DA 32   E8 DA           LEAS -38,S
    289  2     A1DD 86   0F              LDA  #$0F
    290  4+0   A1DF A4   E4              ANDA ,S
    291  4+2   A1E1 AB   C0              ADDA ,U+
    292  4+0   A1E3 A7   E4              STA  ,S
    293  5+2   A1E5 37   06              PULU B,A
    294  5+2   A1E7 34   06              PSHS B,A
    295  4+1   A1E9 32   E8 D8           LEAS -40,S
    296  5+2   A1EC 37   06              PULU B,A
    297  5+2   A1EE 34   06              PSHS B,A
    298  4+1   A1F0 32   7F              LEAS -1,S
    299  2     A1F2 86   F0              LDA  #$F0
    300  4+0   A1F4 A4   E4              ANDA ,S
    301  4+2   A1F6 AB   C0              ADDA ,U+
    302  4+0   A1F8 A7   E4              STA  ,S
    303  4+1   A1FA 32   E8 DB           LEAS -37,S
    304  5+1   A1FD 37   02              PULU A
    305  5+2   A1FF 34   06              PSHS B,A
    306  4+1   A201 32   E8 D9           LEAS -39,S
    307  5+1   A204 34   04              PSHS B
    308  4+1   A206 32   E8 D8           LEAS -40,S
    309  2     A209 86   F0              LDA  #$F0
    310  4+0   A20B A4   E4              ANDA ,S
    311  4+2   A20D AB   C0              ADDA ,U+
    312  4+0   A20F A7   E4              STA  ,S
    313  4+1   A211 32   7F              LEAS -1,S
    314
    315  7     A213 10FE A000            LDS  >SSAVE
    316  5+3   A217 35   48              PULS U,DP
    317  5     A219 39                   RTS
    318
    319        A21A               DATA_TEST1X100000_1
    320        A21A 0010                 FDB $0010
    321        A21C 0022                 FDB $0022
    322        A21E 1102                 FDB $1102
    323        A220 2222                 FDB $2222
    324        A222 2320                 FDB $2320
    325        A224 1120                 FDB $1120
    326        A226 2022                 FDB $2022
    327        A228 1442                 FDB $1442
    328        A22A 3021                 FDB $3021
    329        A22C 3402                 FDB $3402
    330        A22E 2433                 FDB $2433
    331        A230 3303                 FDB $3303
    332        A232 2402                 FDB $2402
    333        A234 3024                 FDB $3024
    334        A236 2221                 FDB $2221
    335        A238 2230                 FDB $2230
    336        A23A 2330                 FDB $2330
    337        A23C               DATA_TEST1X100000_2
    338        A23C 0100                 FDB $0100
    339        A23E 2222                 FDB $2222
    340        A240 3011                 FDB $3011
    341        A242 2211                 FDB $2211
    342        A244 0012                 FDB $0012
    343        A246 0122                 FDB $0122
    344        A248 2244                 FDB $2244
    345        A24A 4402                 FDB $4402
    346        A24C 2112                 FDB $2112
    347        A24E 2214                 FDB $2214
    348        A250 1132                 FDB $1132
    349        A252 2223                 FDB $2223
    350        A254 2021                 FDB $2021
    351        A256 1222                 FDB $1222
    352        A258 3302                 FDB $3302
    353        A25A 2203                 FDB $2203
    354        A25C               POS_TEST1X100000
    355        A25C 1F40                 FDB $1F40
    356
    357        A25E               TABPALETTE
    358        A25E 022F                 FDB $022f     * index:0  R:255 V:1>>
    359        A260 0FFF                 FDB $0fff     * index:1  R:255 V:2>>
    360        A262 00F0                 FDB $00f0     * index:2  R:0   V:2>>
    361        A264 00FF                 FDB $00ff     * index:3  R:255 V:2>>
    362        A266 0000                 FDB $0000     * index:4  R:0   V:0>>
    363        A268 0333                 FDB $0333     * index:5  R:144 V:1>>
    364        A26A 0111                 FDB $0111     * index:6  R:96  V:9>>
    365        A26C 0666                 FDB $0666     * index:7  R:192 V:1>>
    366        A26E 0333                 FDB $0333     * index:8  R:144 V:1>>
    367        A270 0111                 FDB $0111     * index:9  R:96  V:9>>
    368        A272 0666                 FDB $0666     * index:10 R:192 V:1>>
    369        A274 0333                 FDB $0333     * index:11 R:144 V:1>>
    370        A276 0111                 FDB $0111     * index:12 R:96  V:9>>
    371        A278 0666                 FDB $0666     * index:13 R:192 V:1>>
    372        A27A 0333                 FDB $0333     * index:14 R:144 V:1>>
    373        A27C 0111                 FDB $0111     * index:15 R:96  V:9>>
    374        A27E               FINTABPALETTE
    375                           *****************************************>>
    376                           * Tile arriere plan
    377                           *****************************************>>
    378        A27E               TILEBCKGRNDA
    379        A27E 5555                 FDB $5555
    380        A280 5555                 FDB $5555
    381        A282 5555                 FDB $5555
    382        A284 5555                 FDB $5555
    383
    384        A286               TILEBCKGRNDB
    385        A286 6666                 FDB $6666
    386        A288 6666                 FDB $6666
    387        A28A 6666                 FDB $6666
    388        A28C 6666                 FDB $6666

000000 Total Errors

000023 Total Symbols
     1x          Label A21A DATA_TEST1X100000_1
     1x          Label A23C DATA_TEST1X100000_2
     1x          Equ   0000 DEBUTECRANA
     1x          Equ   2000 DEBUTECRANB
     1x          Label A072 DRAWBCKGRN
     1x          Label A0B5 DRAW_TEST1X100000
     1x          Label A081 DRWBCKGRNDA
     1x          Label A09C DRWBCKGRNDB
     2x          Label A063 EFF
     1x          Label A069 EFF_RAM
     1x          Equ   1F40 FINECRANA
     1x          Equ   3F40 FINECRANB
     1x          Label A27E FINTABPALETTE
     0x          Label A025 INITBORD
     1x          Label A041 MAIN
     2x          Label A25C POS_TEST1X100000
     3x          Label A04C SCRC
     2x          Label A059 SCRC0
     1x          Label A00E SETPALETTE
     4x          Label A000 SSAVE
     1x          Label A25E TABPALETTE
     1x          Label A27E TILEBCKGRNDA
     1x          Label A286 TILEBCKGRNDB

