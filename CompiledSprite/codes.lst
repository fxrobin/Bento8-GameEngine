/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : TEST1X10.asm
 * Fichier destination : TEST1X10.BIN
 * Contenu :
 *     Main     0:TEST1X10.asm 5886
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
     12        A000                      ORG $A000
     13
     14                           *****************************************>>
     15                           * Constantes et variables
     16                           *****************************************>>
     17                  0000     DEBUTECRANA EQU $0000       * debut de la>>
     18                  1F40     FINECRANA EQU $1F40  * fin de la RAM A vi>>
     19                  2000     DEBUTECRANB EQU $2000       * debut de la>>
     20                  3F40     FINECRANB EQU $3F40  * fin de la RAM B vi>>
     21
     22        A000 0000          SSAVE FDB $0000
     23
     24                           *****************************************>>
     25                           * Debut du programme
     26                           *****************************************>>
     27  2     A002 1A   50              ORCC #$50     * a documenter (inte>>
     28                            
     29  2     A004 86   7B              LDA #$7B      * passage en mode 16>>
     30  5     A006 B7   E7DC            STA $E7DC
     31
     32                           *****************************************>>
     33                           * Initialisation de la palette de couleur>>
     34                           *****************************************>>
     35  4     A009 108E A23B            LDY #TABPALETTE
     36  2     A00D 4F                   CLRA
     37        A00E               SETPALETTE
     38  5+1   A00E 34   02              PSHS A
     39  2     A010 48                   ASLA
     40  5     A011 B7   E7DB            STA $E7DB
     41  5+3   A014 EC   A1              LDD ,Y++
     42  5     A016 F7   E7DA            STB $E7DA
     43  5     A019 B7   E7DA            STA $E7DA
     44  5+1   A01C 35   02              PULS A
     45  2     A01E 4C                   INCA
     46  5     A01F 108C A25B            CMPY #FINTABPALETTE
     47  3     A023 26   E9              BNE    SETPALETTE
     48                            
     49                           *****************************************>>
     50                           * Initialisation de la couleur de bordure>>
     51                           *****************************************>>
     52        A025               INITBORD
     53  2     A025 86   04              LDA    #$04   * couleur 4
     54  5     A027 B7   E7DD            STA    $E7DD
     55
     56                           *****************************************>>
     57                           * Initialisation de la routine de commuta>>
     58                           *****************************************>>
     59  5     A02A F6   6081            LDB $6081
     60  2     A02D CA   10              ORB #$10
     61  5     A02F F7   6081            STB $6081
     62  5     A032 F7   E7E7            STB $E7E7
     63
     64                           *****************************************>>
     65                           * Effacement ecran (les deux pages)
     66                           *****************************************>>
     67  8     A035 BD   A04C            JSR SCRC
     68  8     A038 BD   A063            JSR EFF
     69  8     A03B BD   A04C            JSR SCRC
     70  8     A03E BD   A063            JSR EFF
     71
     72                           *****************************************>>
     73                           * Boucle principale
     74                           *****************************************>>
     75        A041               MAIN
     76  8     A041 BD   A072            JSR DRAWBCKGRN
     77                                  *LDX >POS_TEST1X100000
     78                                  *LEAX -1,X
     79                                  *STX >POS_TEST1X100000
     80  8     A044 BD   A0B5            JSR DRAW_TEST1X100000
     81  8     A047 BD   A04C            JSR SCRC        * changement de pa>>
     82  3     A04A 20   F5              BRA MAIN
     83
     84                           *****************************************>>
     85                           * Changement de page ecran
     86                           *****************************************>>
     87        A04C               SCRC
     88  5     A04C F6   A05A            LDB SCRC0+1
     89  2     A04F C4   80              ANDB #$80          * BANK1 utilise>>
     90  2     A051 CA   0A              ORB #$0A           * contour ecran>>
     91  5     A053 F7   E7DD            STB $E7DD
     92  7     A056 73   A05A            COM SCRC0+1
     93        A059               SCRC0
     94  2     A059 C6   00              LDB #$00
     95  2     A05B C4   02              ANDB #$02          * page RAM no0 >>
     96  2     A05D CA   60              ORB #$60           * espace cartou>>
     97  5     A05F F7   E7E6            STB $E7E6
     98  5     A062 39                   RTS
     99
    100                           *****************************************>>
    101                           * Effacement de l ecran
    102                           *****************************************>>
    103        A063               EFF
    104  2     A063 86   AA              LDA #$AA  * couleur fond
    105  4     A065 108E 0000            LDY #$0000
    106        A069               EFF_RAM
    107  4+2   A069 A7   A0              STA ,Y+
    108  5     A06B 108C 3FFF            CMPY #$3FFF
    109  3     A06F 26   F8              BNE EFF_RAM
    110  5     A071 39                   RTS
    111
    112                           *****************************************>>
    113                           * Affichage de l arriere plan xxx cycles
    114                           *****************************************>>
    115        A072               DRAWBCKGRN
    116  5+3   A072 34   48              PSHS U,DP            * sauvegarde >>
    117  7     A074 10FF A000            STS >SSAVE
    118                            
    119  4     A078 10CE 1F40            LDS #FINECRANA       * init pointe>>
    120  3     A07C CE   A25B            LDU #TILEBCKGRNDA
    121  5+7   A07F 37   3E              PULU X,Y,DP,D
    122
    123        A081               DRWBCKGRNDA
    124  5+7   A081 34   3E              PSHS X,Y,DP,D
    125  5+7   A083 34   3E              PSHS X,Y,DP,D
    126  5+7   A085 34   3E              PSHS X,Y,DP,D
    127  5+7   A087 34   3E              PSHS X,Y,DP,D
    128  5+7   A089 34   3E              PSHS X,Y,DP,D
    129  5+5   A08B 34   38              PSHS X,Y,DP
    130  5     A08D 118C 0000            CMPS #DEBUTECRANA
    131  3     A091 26   EE              BNE DRWBCKGRNDA
    132                            
    133  4     A093 10CE 3F40            LDS #FINECRANB       * init pointe>>
    134  3     A097 CE   A263            LDU #TILEBCKGRNDB
    135  5+7   A09A 37   3E              PULU X,Y,DP,D
    136
    137        A09C               DRWBCKGRNDB
    138  5+7   A09C 34   3E              PSHS X,Y,DP,D
    139  5+7   A09E 34   3E              PSHS X,Y,DP,D
    140  5+7   A0A0 34   3E              PSHS X,Y,DP,D
    141  5+7   A0A2 34   3E              PSHS X,Y,DP,D
    142  5+7   A0A4 34   3E              PSHS X,Y,DP,D
    143  5+5   A0A6 34   38              PSHS X,Y,DP
    144  5     A0A8 118C 2000            CMPS #DEBUTECRANB
    145  3     A0AC 26   EE              BNE DRWBCKGRNDB
    146                            
    147  7     A0AE 10FE A000            LDS  >SSAVE          * rechargemen>>
    148  5+3   A0B2 35   48              PULS U,DP
    149  5     A0B4 39                   RTS
    150
    151                           *****************************************>>
    152                           * Affiche un computed sprite en xxx cycle>>
    153                           *****************************************>>
    154        A0B5               DRAW_TEST1X100000
    155  5+3   A0B5 34   48              PSHS U,DP
    156  7     A0B7 10FF A000            STS >SSAVE
    157
    158  7     A0BB 10FE A239            LDS >POS_TEST1X100000
    159  3     A0BF CE   A239            LDU #DATA_TEST1X100000_1
    160
    161  2     A0C2 86   00              LDA #$00
    162  2     A0C4 C6   10              LDB #$10
    163  3     A0C6 8E   0022            LDX #$0022
    164  5+4   A0C9 34   16              PSHS X,B,A
    165  4+1   A0CB 32   E8 DC           LEAS -36,S
    166  2     A0CE 86   11              LDA #$11
    167  3     A0D0 8E   0222            LDX #$0222
    168  5+3   A0D3 34   12              PSHS X,A
    169  4+1   A0D5 32   E8 DB           LEAS -37,S
    170  3     A0D8 8E   2223            LDX #$2223
    171  5+3   A0DB 34   12              PSHS X,A
    172  2     A0DD 86   0F              LDA  #$0F
    173  4+1   A0DF A4   E8 DA           ANDA -38,S
    174  2     A0E2 8B   20              ADDA #$20
    175  4+1   A0E4 A7   E8 DA           STA -38,S
    176  3     A0E7 8E   1120            LDX #$1120
    177  5+1   A0EA AF   E8 D8           STX -40,S
    178  2     A0ED 86   0F              LDA  #$0F
    179  4+1   A0EF A4   E8 B2           ANDA -78,S
    180  2     A0F2 8B   20              ADDA #$20
    181  4+1   A0F4 A7   E8 B2           STA -78,S
    182  3     A0F7 8E   2220            LDX #$2220
    183  5+1   A0FA AF   E8 B0           STX -80,S
    184  3     A0FD 8E   1442            LDX #$1442
    185  5+1   A100 AF   E8 88           STX -120,S
    186  4+4   A103 32   E9 FF62         LEAS -158,S
    187  2     A107 86   0F              LDA  #$0F
    188  4+1   A109 A4   60              ANDA 0,S
    189  2     A10B 8B   30              ADDA #$30
    190  4+1   A10D A7   60              STA 0,S
    191  3     A10F 8E   2134            LDX #$2134
    192  5+1   A112 AF   7E              STX -2,S
    193  2     A114 86   F0              LDA  #$F0
    194  4+1   A116 A4   7D              ANDA -3,S
    195  2     A118 8B   02              ADDA #$02
    196  4+1   A11A A7   7D              STA -3,S
    197  4+1   A11C 32   E8 D9           LEAS -39,S
    198  2     A11F 86   24              LDA #$24
    199  3     A121 8E   3333            LDX #$3333
    200  5+3   A124 34   12              PSHS X,A
    201  2     A126 86   F0              LDA  #$F0
    202  4+1   A128 A4   7F              ANDA -1,S
    203  2     A12A 8B   03              ADDA #$03
    204  4+1   A12C A7   7F              STA -1,S
    205  3     A12E 8E   2433            LDX #$2433
    206  5+1   A131 AF   E8 D8           STX -40,S
    207  2     A134 86   F0              LDA  #$F0
    208  4+1   A136 A4   E8 D7           ANDA -41,S
    209  2     A139 8B   02              ADDA #$02
    210  4+1   A13B A7   E8 D7           STA -41,S
    211  2     A13E 86   0F              LDA  #$0F
    212  4+1   A140 A4   E8 B2           ANDA -78,S
    213  2     A143 8B   30              ADDA #$30
    214  4+1   A145 A7   E8 B2           STA -78,S
    215  3     A148 8E   2422            LDX #$2422
    216  5+1   A14B AF   E8 B0           STX -80,S
    217  4+1   A14E 32   E8 8B           LEAS -117,S
    218  2     A151 86   24              LDA #$24
    219  3     A153 8E   2233            LDX #$2233
    220  5+3   A156 34   12              PSHS X,A
    221  3     A158 8E   2122            LDX #$2122
    222  5+1   A15B AF   E8 D8           STX -40,S
    223  3     A15E 8E   2222            LDX #$2222
    224  5+1   A161 AF   E8 B0           STX -80,S
    225  2     A164 86   0F              LDA  #$0F
    226  4+1   A166 A4   E8 8A           ANDA -118,S
    227  2     A169 8B   30              ADDA #$30
    228  4+1   A16B A7   E8 8A           STA -118,S
    229  3     A16E 8E   2223            LDX #$2223
    230  5+1   A171 AF   E8 88           STX -120,S
    231  4+4   A174 32   E9 FF61         LEAS -159,S
    232  2     A178 86   0F              LDA  #$0F
    233  4+1   A17A A4   60              ANDA 0,S
    234  2     A17C 8B   30              ADDA #$30
    235  4+1   A17E A7   60              STA 0,S
    236
    237  7     A180 10FE A239            LDS >POS_TEST1X100000
    238  4+4   A184 32   E9 2000         LEAS 8192,S
    239  3     A188 CE   A239            LDU #DATA_TEST1X100000_2
    240
    241  2     A18B 86   01              LDA #$01
    242  2     A18D C6   00              LDB #$00
    243  3     A18F 8E   2222            LDX #$2222
    244  5+4   A192 34   16              PSHS X,B,A
    245  2     A194 86   0F              LDA  #$0F
    246  4+1   A196 A4   E8 DB           ANDA -37,S
    247  2     A199 8B   30              ADDA #$30
    248  4+1   A19B A7   E8 DB           STA -37,S
    249  4+1   A19E 32   E8 DB           LEAS -37,S
    250  2     A1A1 86   11              LDA #$11
    251  3     A1A3 8E   0022            LDX #$0022
    252  5+3   A1A6 34   12              PSHS X,A
    253  4+1   A1A8 32   E8 DB           LEAS -37,S
    254  3     A1AB 8E   1100            LDX #$1100
    255  5+3   A1AE 34   12              PSHS X,A
    256  3     A1B0 8E   1200            LDX #$1200
    257  5+1   A1B3 AF   E8 D9           STX -39,S
    258  2     A1B6 86   F0              LDA  #$F0
    259  4+1   A1B8 A4   E8 D8           ANDA -40,S
    260  2     A1BB 8B   01              ADDA #$01
    261  4+1   A1BD A7   E8 D8           STA -40,S
    262  4+1   A1C0 32   E8 B3           LEAS -77,S
    263  2     A1C3 86   22              LDA #$22
    264  3     A1C5 8E   2200            LDX #$2200
    265  5+3   A1C8 34   12              PSHS X,A
    266  4+1   A1CA 32   E8 DB           LEAS -37,S
    267  2     A1CD 86   44              LDA #$44
    268  3     A1CF 8E   4402            LDX #$4402
    269  5+3   A1D2 34   12              PSHS X,A
    270  4+1   A1D4 32   E8 DB           LEAS -37,S
    271  2     A1D7 86   21              LDA #$21
    272  3     A1D9 8E   1222            LDX #$1222
    273  5+3   A1DC 34   12              PSHS X,A
    274  4+1   A1DE 32   E8 DB           LEAS -37,S
    275  2     A1E1 86   14              LDA #$14
    276  3     A1E3 8E   1132            LDX #$1132
    277  5+3   A1E6 34   12              PSHS X,A
    278  4+1   A1E8 32   E8 DB           LEAS -37,S
    279  3     A1EB 8E   1122            LDX #$1122
    280  5+3   A1EE 34   12              PSHS X,A
    281  4+1   A1F0 32   E8 DB           LEAS -37,S
    282  5+3   A1F3 34   12              PSHS X,A
    283  4+1   A1F5 32   E8 DB           LEAS -37,S
    284  3     A1F8 8E   1123            LDX #$1123
    285  5+3   A1FB 34   12              PSHS X,A
    286  2     A1FD 86   0F              LDA  #$0F
    287  4+1   A1FF A4   E8 DA           ANDA -38,S
    288  2     A202 8B   20              ADDA #$20
    289  4+1   A204 A7   E8 DA           STA -38,S
    290  3     A207 8E   2112            LDX #$2112
    291  5+1   A20A AF   E8 D8           STX -40,S
    292  3     A20D 8E   2233            LDX #$2233
    293  5+1   A210 AF   E8 B1           STX -79,S
    294  2     A213 86   F0              LDA  #$F0
    295  4+1   A215 A4   E8 B0           ANDA -80,S
    296  2     A218 8B   02              ADDA #$02
    297  4+1   A21A A7   E8 B0           STA -80,S
    298  5+1   A21D AF   E8 89           STX -119,S
    299  4+4   A220 32   E9 FF62         LEAS -158,S
    300  2     A224 86   33              LDA #$33
    301  4+1   A226 A7   7F              STA -1,S
    302  2     A228 86   F0              LDA  #$F0
    303  4+1   A22A A4   E8 D7           ANDA -41,S
    304  2     A22D 8B   03              ADDA #$03
    305  4+1   A22F A7   E8 D7           STA -41,S
    306
    307  7     A232 10FE A000            LDS  >SSAVE
    308  5+3   A236 35   48              PULS U,DP
    309  5     A238 39                   RTS
    310
    311        A239               DATA_TEST1X100000_1
    312        A239               DATA_TEST1X100000_2
    313        A239               POS_TEST1X100000
    314        A239 1F40                 FDB $1F40
    315
    316        A23B               TABPALETTE
    317        A23B 022F                 FDB $022f     * index:0  R:255 V:1>>
    318        A23D 0FFF                 FDB $0fff     * index:1  R:255 V:2>>
    319        A23F 00F0                 FDB $00f0     * index:2  R:0   V:2>>
    320        A241 00FF                 FDB $00ff     * index:3  R:255 V:2>>
    321        A243 0000                 FDB $0000     * index:4  R:0   V:0>>
    322        A245 0333                 FDB $0333     * index:5  R:144 V:1>>
    323        A247 0111                 FDB $0111     * index:6  R:96  V:9>>
    324        A249 0666                 FDB $0666     * index:7  R:192 V:1>>
    325        A24B 0333                 FDB $0333     * index:8  R:144 V:1>>
    326        A24D 0111                 FDB $0111     * index:9  R:96  V:9>>
    327        A24F 0666                 FDB $0666     * index:10 R:192 V:1>>
    328        A251 0333                 FDB $0333     * index:11 R:144 V:1>>
    329        A253 0111                 FDB $0111     * index:12 R:96  V:9>>
    330        A255 0666                 FDB $0666     * index:13 R:192 V:1>>
    331        A257 0333                 FDB $0333     * index:14 R:144 V:1>>
    332        A259 0111                 FDB $0111     * index:15 R:96  V:9>>
    333        A25B               FINTABPALETTE
    334                           *****************************************>>
    335                           * Tile arriere plan
    336                           *****************************************>>
    337        A25B               TILEBCKGRNDA
    338        A25B EEEE                 FDB $eeee
    339        A25D EEEE                 FDB $eeee
    340        A25F EEEE                 FDB $eeee
    341        A261 EEEE                 FDB $eeee
    342
    343        A263               TILEBCKGRNDB
    344        A263 FFFF                 FDB $ffff
    345        A265 FFFF                 FDB $ffff
    346        A267 FFFF                 FDB $ffff
    347        A269 FFFF                 FDB $ffff

000000 Total Errors

000023 Total Symbols
     1x          Label A239 DATA_TEST1X100000_1
     1x          Label A239 DATA_TEST1X100000_2
     1x          Equ   0000 DEBUTECRANA
     1x          Equ   2000 DEBUTECRANB
     1x          Label A072 DRAWBCKGRN
     1x          Label A0B5 DRAW_TEST1X100000
     1x          Label A081 DRWBCKGRNDA
     1x          Label A09C DRWBCKGRNDB
     2x          Label A063 EFF
     1x          Label A069 EFF_RAM
     1x          Equ   1F40 FINECRANA
     1x          Equ   3F40 FINECRANB
     1x          Label A25B FINTABPALETTE
     0x          Label A025 INITBORD
     1x          Label A041 MAIN
     2x          Label A239 POS_TEST1X100000
     3x          Label A04C SCRC
     2x          Label A059 SCRC0
     1x          Label A00E SETPALETTE
     4x          Label A000 SSAVE
     1x          Label A23B TABPALETTE
     1x          Label A25B TILEBCKGRNDA
     1x          Label A263 TILEBCKGRNDB

