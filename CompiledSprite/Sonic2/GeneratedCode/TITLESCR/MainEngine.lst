/*--------------------------------------------------------------*
 * Compilé avec C6809 v0.83                                     *
 *--------------------------------------------------------------*
 * Fichier source      : .\Sonic2\GeneratedCode\TITLESCR\MainEngine.asm
 * Fichier destination : .\Sonic2\GeneratedCode\TMP.BIN
 * Contenu :
 *     Main     0:MAIN.ASM     3665
 *     Include  0:CONSTANT.ASM 5233
 *     Include  0:WAITVBL.ASM  1795
 *     Include  0:READJPDS.ASM 1729
 *     Include  0:RUNOBJTS.ASM 1312
 *     Include  0:MRKOBJGN.ASM 481
 *     Include  0:DISPLSPR.ASM 2223
 *     Include  0:ANIMSPR.ASM  1976
 *     Include  0:OBJMOVE.ASM  752
 *     Include  0:OBJLOAD.ASM  1109
 *     Include  0:DELETOBJ.ASM 2696
 *     Include  0:CLEAROBJ.ASM 590
 *     Include  0:CHECKSPR.ASM 8680
 *     Include  0:ERASESPR.ASM 4510
 *     Include  0:UNSETDSP.ASM 2796
 *     Include  0:DRAWSPR.ASM  5445
 *     Include  0:BGBALLOC.ASM 1029
 *     Include  0:BGBFREE.ASM  1879
 *     Include  0:IMAGEIDX.ASM 2029
 *     Include  0:ANIMSCPT.ASM 538
 *     Include  0:OBJINDEX.ASM 6715
 *     Include  0:LOADACT.ASM  431
 *     Include  0:CLRCARTM.ASM 559
 *     Include  0:PALETTE.ASM  259
 *     Include  0:UPDTPAL.ASM  562
 *--------------------------------------------------------------*/

Macro Pass
Pass1
Pass2
    174                                   INCLUD CONSTANT
    175                           * --------------------------------------->>
    176                           * Constants
    177                           *
    178                           * Naming convention
    179                           * -----------------
    180                           * - lower case
    181                           * - underscore-separated names
    182                           *
    183                           * --------------------------------------->>
    184
    185                           * =======================================>>
    186                           * TO8 Registers
    187                           * =======================================>>
    188
    189                  6049     dk_lecteur                    equ $6049
    190                  604A     dk_piste                      equ $604A
    191                  604B     dk_pisteL                     equ $604B
    192                  604C     dk_secteur                    equ $604C
    193                  604F     dk_destination                equ $604F
    194
    195                           * =======================================>>
    196                           * Display Constants
    197                           * =======================================>>
    198
    199                  00A0     screen_width                  equ 160 ; s>>
    200                  001C     screen_top                    equ 28 ; in>>
    201                  00E4     screen_bottom                 equ 200+28 >>
    202                  0008     nb_priority_levels            equ 8   ; n>>
    203
    204                           * =======================================>>
    205                           * Physics Constants
    206                           * =======================================>>
    207
    208                  0038     gravity                       equ $38 ; G>>
    209
    210                           * =======================================>>
    211                           * Animation Constants
    212                           * =======================================>>
    213
    214                  00FF     _resetAnim                    equ $FF
    215                  00FE     _goBackNFrames                equ $FE
    216                  00FD     _goToAnimation                equ $FD
    217                  00FC     _nextRoutine                  equ $FC
    218                  00FB     _resetAnimAndSubRoutine       equ $FB
    219                  00FA     _nextSubRoutine               equ $FA
    220
    221                           * =======================================>>
    222                           * Images Constants
    223                           * =======================================>>
    224
    225                  0000     page_bckdraw_routine          equ 0
    226                  0001     bckdraw_routine               equ 1
    227                  0003     page_draw_routine             equ 3
    228                  0004     draw_routine                  equ 4
    229                  0006     page_erase_routine            equ 6
    230                  0007     erase_routine                 equ 7
    231                  0009     erase_nb_cell                 equ 9
    232                  000A     image_x1_offset_l             equ 10
    233                  000B     image_y1_offset_l             equ 11
    234                  000C     image_x_size_l                equ 12
    235                  000D     image_y_size_l                equ 13
    236                  000E     image_meta_size               equ 14 ; nu>>
    237
    238                           * =======================================>>
    239                           * Object Constants
    240                           * =======================================>>
    241
    242                  0002     nb_reserved_objects           equ 2
    243                  0012     nb_dynamic_objects            equ 18
    244                  0003     nb_level_objects              equ 3
    245                  0017     nb_objects                    equ 23 * ma>>
    246
    247                           * --------------------------------------->>
    248                           * Object Status Table offsets
    249                           * --------------------------------------->>
    250
    251                  0052     object_size                   equ 82 ; th>>
    252                  0052     next_object                   equ object_>>
    253
    254                  0000     id                            equ 0      >>
    255                  0001     subtype                       equ 1      >>
    256                  0002     render_flags                  equ 2
    257
    258                           * --- render_flags bitfield variables --->>
    259                  0001     render_xmirror_mask           equ $01 ; (>>
    260                  0002     render_ymirror_mask           equ $02 ; (>>
    261                  0004     render_playfieldcoord_mask    equ $04 ; (>>
    262                  0008     render_hide_mask              equ $08 ; (>>
    263                  0010     render_fixedoverlay_mask      equ $10 ; (>>
    264                  0020     render_todelete_mask          equ $20 ; (>>
    265                  0040     render_free2_mask             equ $40 ; (>>
    266                  0080     render_free3_mask             equ $80 ; (>>
    267                            
    268                  0003     priority                      equ 3      >>
    269                  0004     anim                          equ 4  ; an>>
    270                  0006     prev_anim                     equ 6  ; an>>
    271                  0008     anim_frame                    equ 8      >>
    272                  0009     anim_frame_duration           equ 9      >>
    273                  000A     mapping_frame                 equ 10 ; an>>
    274                  000C     x_pos                         equ 12 ; an>>
    275                  000E     x_sub                         equ 14     >>
    276                  000F     y_pos                         equ 15 ; an>>
    277                  0011     y_sub                         equ 17     >>
    278                  0012     xy_pixel                      equ 18     >>
    279                  0012     x_pixel                       equ 18     >>
    280                  0013     y_pixel                       equ 19     >>
    281                  0014     x_vel                         equ 20 ; an>>
    282                  0016     y_vel                         equ 22 ; an>>
    283                  0018     routine                       equ 24     >>
    284                  0019     routine_secondary             equ 25     >>
    285                  001A     status                        equ 26
    286
    287                           * --- status bitfield variables for objec>>
    288                  0001     status_x_orientation          equ   $01 ;>>
    289                  0002     status_y_orientation          equ   $02 ;>>
    290                  0004     status_bit2                   equ   $04 ;>>
    291                  0008     status_mainchar_standing      equ   $08 ;>>
    292                  0010     status_sidekick_standing      equ   $10 ;>>
    293                  0020     status_mainchar_pushing       equ   $20 ;>>
    294                  0040     status_sidekick_pushing       equ   $40 ;>>
    295                  0080     status_bit7                   equ   $80 ;>>
    296
    297                           * --- status bitfield variables for Main >>
    298                  0002     status_inair                  equ   $02 ;>>
    299                  0004     status_jumporroll             equ   $04 ;>>
    300                  0008     status_norgroundnorfall       equ   $08 ;>>
    301                  0010     status_jumpingafterrolling    equ   $10 ;>>
    302                  0020     status_pushing                equ   $20 ;>>
    303                  0040     status_underwater             equ   $40 ;>>
    304
    305                  001B     ext_variables                 equ 27 ; to>>
    306
    307                           * --------------------------------------->>
    308                           * reserved variables (engine)
    309
    310                  0029     rsv_render_flags              equ 41
    311
    312                           * --- rsv_render_flags bitfield variables>>
    313                  0001     rsv_render_checkrefresh_mask  equ $01 ; (>>
    314                  0002     rsv_render_erasesprite_mask   equ $02 ; (>>
    315                  0004     rsv_render_displaysprite_mask equ $04 ; (>>
    316                  0008     rsv_render_outofrange_mask    equ $08 ; (>>
    317
    318                  002A     rsv_prev_anim                 equ 42 ; an>>
    319                  002C     rsv_curr_mapping_frame        equ 44 ; an>>
    320                  002E     rsv_xy1_pixel                 equ 46     >>
    321                  002E     rsv_x1_pixel                  equ 46     >>
    322                  002F     rsv_y1_pixel                  equ 47     >>
    323                  0030     rsv_xy2_pixel                 equ 48     >>
    324                  0030     rsv_x2_pixel                  equ 48     >>
    325                  0031     rsv_y2_pixel                  equ 49     >>
    326
    327                           * --------------------------------------->>
    328                           * reserved variables (engine) - buffer sp>>
    329
    330                  0032     rsv_buffer_0                  equ 50 ; St>>
    331                  0032     rsv_priority_0                equ 50 ; in>>
    332                  0033     rsv_priority_prev_obj_0       equ 51 ; an>>
    333                  0035     rsv_priority_next_obj_0       equ 53 ; an>>
    334                  0037     rsv_prev_mapping_frame_0      equ 55 ; an>>
    335                  0039     rsv_bgdata_0                  equ 57 ; an>>
    336                  003B     rsv_prev_xy_pixel_0           equ 59 ;
    337                  003B     rsv_prev_x_pixel_0            equ 59 ; pr>>
    338                  003C     rsv_prev_y_pixel_0            equ 60 ; pr>>
    339                  003D     rsv_prev_xy1_pixel_0          equ 61 ;
    340                  003D     rsv_prev_x1_pixel_0           equ 61 ; pr>>
    341                  003E     rsv_prev_y1_pixel_0           equ 62 ; pr>>
    342                  003F     rsv_prev_xy2_pixel_0          equ 63 ;
    343                  003F     rsv_prev_x2_pixel_0           equ 63 ; pr>>
    344                  0040     rsv_prev_y2_pixel_0           equ 64 ; pr>>
    345                  0041     rsv_onscreen_0                equ 65 ; ha>>
    346
    347                  0042     rsv_buffer_1                  equ 66 ; St>>
    348                  0042     rsv_priority_1                equ 66 ; in>>
    349                  0043     rsv_priority_prev_obj_1       equ 67 ; an>>
    350                  0045     rsv_priority_next_obj_1       equ 69 ; an>>
    351                  0047     rsv_prev_mapping_frame_1      equ 71 ; an>>
    352                  0049     rsv_bgdata_1                  equ 73 ; an>>
    353                  004B     rsv_prev_xy_pixel_1           equ 75 ;
    354                  004B     rsv_prev_x_pixel_1            equ 75 ; pr>>
    355                  004C     rsv_prev_y_pixel_1            equ 76 ; pr>>
    356                  004D     rsv_prev_xy1_pixel_1          equ 77 ;
    357                  004D     rsv_prev_x1_pixel_1           equ 77 ; pr>>
    358                  004E     rsv_prev_y1_pixel_1           equ 78 ; pr>>
    359                  004F     rsv_prev_xy2_pixel_1          equ 79 ;
    360                  004F     rsv_prev_x2_pixel_1           equ 79 ; pr>>
    361                  0050     rsv_prev_y2_pixel_1           equ 80 ; pr>>
    362                  0051     rsv_onscreen_1                equ 81 ; ha>>
    363
    364                  0000     buf_priority                  equ 0  ; of>>
    365                  0001     buf_priority_prev_obj         equ 1  ;
    366                  0003     buf_priority_next_obj         equ 3  ;
    367                  0005     buf_prev_mapping_frame        equ 5  ;
    368                  0007     buf_bgdata                    equ 7  ;
    369                  0009     buf_prev_xy_pixel             equ 9  ;
    370                  0009     buf_prev_x_pixel              equ 9  ;
    371                  000A     buf_prev_y_pixel              equ 10 ;
    372                  000B     buf_prev_xy1_pixel            equ 11 ;
    373                  000B     buf_prev_x1_pixel             equ 11 ;
    374                  000C     buf_prev_y1_pixel             equ 12 ;
    375                  000D     buf_prev_xy2_pixel            equ 13 ;
    376                  000D     buf_prev_x2_pixel             equ 13 ;
    377                  000E     buf_prev_y2_pixel             equ 14 ;
    378                  000F     buf_onscreen                  equ 15 ;
    379
     10        6100                       org   $6100
     11
     12  8     6100 BD   7CC1             jsr   LoadAct
     13
     14                           * =======================================>>
     15                           * Main Loop
     16                           * =======================================>>
     17        6103               LevelMainLoop
     18  8     6103 BD   6D24             jsr   WaitVBL
     19  8     6106 BD   6D5F             jsr   ReadJoypads
     20  8     6109 BD   6D77             jsr   RunObjects
     21  8     610C BD   7001             jsr   CheckSpritesRefresh
     22  8     610F BD   72E3             jsr   EraseSprites
     23  8     6112 BD   743E             jsr   UnsetDisplayPriority
     24  8     6115 BD   751D             jsr   DrawSprites
     25  3     6118 20   E9               bra   LevelMainLoop
     26
     27                           * =======================================>>
     28                           * Global Data
     29                           *
     30                           * Naming convention
     31                           * -----------------
     32                           * - underscore-separated names
     33                           * - first letter of each word in upper ca>>
     34                           *
     35                           * Templates
     36                           * ---------
     37                           * - Glb_*        : global variable
     38                           * - Tbl_*        : data table
     39                           * - Lst_*        : list is a data table w>>
     40                           * - Obj_*        : address of an object i>>
     41                           *
     42                           * - *_Object_RAM : sub group of objects
     43                           * - *_end        : data end label
     44                           *
     45                           * =======================================>>
     46
     47                           * --------------------------------------->>
     48                           * Display
     49                           * --------------------------------------->>
     50                            
     51        611A 00            Glb_Cur_Wrk_Screen_Id         fcb   $00  >>
     52        611B 0000          Glb_Camera_X_Pos              fdb   $0000>>
     53        611D 0000          Glb_Camera_Y_Pos              fdb   $0000>>
     54        611F 0000          Glb_Sprite_Screen_Pos_PartA   fdb   $0000>>
     55        6121 0000          Glb_Sprite_Screen_Pos_PartB   fdb   $0000>>
     56
     57                           * --------------------------------------->>
     58                           * Background Backup Cells - BBC
     59                           * --------------------------------------->>
     60
     61                           * ----- Cell variables
     62                  0000     nb_cells                      equ   0
     63                  0001     cell_start                    equ   1
     64                  0003     cell_end                      equ   3
     65                  0005     next_entry                    equ   5
     66                  0007     entry_size                    equ   7
     67
     68                           * ----- Cells List
     69                  0082     nb_free_cells                 equ   130
     70                  0040     cell_size                     equ   64   >>
     71                  6000     cell_start_adr                equ   $6000>>
     72
     73        6123 6125          Lst_FreeCellFirstEntry_0      fdb   Lst_F>>
     74        6125 82            Lst_FreeCell_0                fcb   nb_fr>>
     75        6126 3F80                                        fdb   cell_>>
     76        6128 6000                                        fdb   cell_>>
     77        612A 0000                                        fdb   $0000>>
     78        612C                                             rmb   (entr>>
     79                            
     80        62F2 62F4          Lst_FreeCellFirstEntry_1      fdb   Lst_F>>
     81        62F4 82            Lst_FreeCell_1                fcb   nb_fr>>
     82        62F5 3F80                                        fdb   cell_>>
     83        62F7 6000                                        fdb   cell_>>
     84        62F9 0000                                        fdb   $0000>>
     85        62FB                                             rmb   (entr>>
     86                           * --------------------------------------->>
     87                           * Display Priority Structure - DPS
     88                           * --------------------------------------->>
     89
     90        64C1               DPS_buffer_0
     91        64C1               Tbl_Priority_First_Entry_0    rmb   2+(nb>>
     92        64D3               Tbl_Priority_Last_Entry_0     rmb   2+(nb>>
     93        64E5 64E7          Lst_Priority_Unset_0          fdb   Lst_P>>
     94        64E7                                             rmb   (nb_o>>
     95        6515               DPS_buffer_1
     96        6515               Tbl_Priority_First_Entry_1    rmb   2+(nb>>
     97        6527               Tbl_Priority_Last_Entry_1     rmb   2+(nb>>
     98        6539 653B          Lst_Priority_Unset_1          fdb   Lst_P>>
     99        653B                                             rmb   (nb_o>>
    100                            
    101                  0000     buf_Tbl_Priority_First_Entry  equ   0
    102                  0012     buf_Tbl_Priority_Last_Entry   equ   Tbl_P>>
    103                  0024     buf_Lst_Priority_Unset        equ   Lst_P>>
    104
    105                           * --------------------------------------->>
    106                           * Sub Priority Objects List - SOL
    107                           * --------------------------------------->>
    108
    109        6569               Tbl_Sub_Object_Erase          rmb   nb_ob>>
    110        6597               Tbl_Sub_Object_Draw           rmb   nb_ob>>
    111
    112                           * --------------------------------------->>
    113                           * Object Status Table - OST
    114                           * --------------------------------------->>
    115                            
    116        65C5               Object_RAM *@globals
    117        65C5               Reserved_Object_RAM
    118        65C5 0102          Obj_MainCharacter             fdb   $0102>>
    119        65C7                                             rmb   objec>>
    120        6617               Obj_Sidekick                  rmb   objec>>
    121        6669               Reserved_Object_RAM_End
    122
    123        6669               Dynamic_Object_RAM            rmb   nb_dy>>
    124        6C2D               Dynamic_Object_RAM_End
    125
    126        6C2D               LevelOnly_Object_RAM                     >>
    127        6C2D               Obj_TailsTails                rmb   objec>>
    128        6C7F               Obj_SonicDust                 rmb   objec>>
    129        6CD1               Obj_TailsDust                 rmb   objec>>
    130        6D23               LevelOnly_Object_RAM_End
    131        6D23               Object_RAM_End
    132
    133                           * --------------------------------------->>
    134                           * Lifecycle
    135                           * --------------------------------------->>
    136
    137        6D23               Glb_MainCharacter_Is_Dead     rmb   $1,0
    138
    139                           * =======================================>>
    140                           * Routines
    141                           * =======================================>>
    380                                   INCLUD WAITVBL
    381                           *****************************************>>
    382                           * Attente VBL
    383                           * Alternance de la page 2 et 3 entre affi>>
    384                           * Alternance de la RAMA et RAM B dans l'e>>
    385                           * --------------------------------------->>
    386                           *
    387                           * Page Affichee par l'automate Video
    388                           * ----------------------------------
    389                           *   $E7DD determine la page affichee a l'>>
    390                           *   bit7=0 bit6=0 bit5=0 bit4=0 (#$0_) : >>
    391                           *   bit7=0 bit6=1 bit5=0 bit4=0 (#$4_) : >>
    392                           *   bit7=1 bit6=0 bit5=0 bit4=0 (#$8_) : >>
    393                           *   bit7=1 bit6=1 bit5=0 bit4=0 (#$C_) : >>
    394                           *   bit3 bit2 bit1 bit0  (#$_0 a #$_F) : >>
    395                           *   Remarque : bit5 et bit4 utilisable un>>
    396                           *
    397                           * Page en espace cartouche (ecriture dans>>
    398                           * --------------------------------------->>
    399                           *   $E7E6 determine la page visible dans >>
    400                           *   bit7 toujours a 0
    401                           *   bit6=1 : ecriture autorisee
    402                           *   bit5=1 : espace cartouche recouvert p>>
    403                           *   bit4=0 : CAS1N valide : banques 0-15 >>
    404                           *   bit5=1 bit4=0 bit3=0 bit2=0 bit1=0 bi>>
    405                           *   ...
    406                           *   bit5=1 bit4=0 bit3=1 bit2=1 bit1=1 bi>>
    407                           *   bit5=1 bit4=1 bit3=0 bit2=0 bit1=0 bi>>
    408                           *   ...
    409                           *   bit5=1 bit4=1 bit3=1 bit2=1 bit1=1 bi>>
    410                           *
    411                           * Demi-Page 0 en espace ecran (4000 a 5FF>>
    412                           * --------------------------------------->>
    413                           *   $E7C3 determine la demi-page de la pa>>
    414                           *   bit0=0 : 8Ko RAMA
    415                           *   bit0=1 : 8ko RAMB
    416                           *
    417                           *****************************************>>
    418        6D24               WaitVBL
    419  7     6D24 7D   E7E7             tst   $E7E7              * le fai>>
    420  3     6D27 2A   FB               bpl   WaitVBL            * tant q>>
    421        6D29               WaitVBL_01
    422  7     6D29 7D   E7E7             tst   $E7E7              * le fai>>
    423  3     6D2C 2B   FB               bmi   WaitVBL_01         * tant q>>
    424                            
    425  6     6D2E FC   6D59             ldd   Vint_runcount
    426  4     6D31 C3   0001             addd  #1
    427  6     6D34 FD   6D59             std   Vint_runcount
    428                            
    429        6D37               SwapVideoPage
    430  5     6D37 F6   6D45             ldb   am_SwapVideoPage+1 * charge>>
    431  2     6D3A C4   40               andb  #$40               * altern>>
    432        6D3C               screen_border_color *@globals
    433  2     6D3C CA   80               orb   #$80               * bit7=1>>
    434  5     6D3E F7   E7DD             stb   $E7DD              * change>>
    435  7     6D41 73   6D45             com   am_SwapVideoPage+1 * altern>>
    436        6D44               am_SwapVideoPage
    437  2     6D44 C6   00               ldb   #$00
    438  2     6D46 C4   01               andb  #$01               * altern>>
    439  5     6D48 F7   611A             stb   Glb_Cur_Wrk_Screen_Id
    440  2     6D4B CA   62               orb   #$62               * bit6=1>>
    441  5     6D4D F7   E7E6             stb   $E7E6              * change>>
    442  5     6D50 F6   E7C3             ldb   $E7C3              * charge>>
    443  2     6D53 C8   01               eorb  #$01               * altern>>
    444  5     6D55 F7   E7C3             stb   $E7C3
    445  5     6D58 39                    rts
    446                            
    447        6D59               Vint_runcount rmb   $2,0 *@globals
    448
    449                                   INCLUD READJPDS
    450                           * --------------------------------------->>
    451                           * Controller Buttons
    452                           *
    453                  0001     c1_button_up_mask            equ   $01 *@>>
    454                  0002     c1_button_down_mask          equ   $02 *@>>
    455                  0004     c1_button_left_mask          equ   $04 *@>>
    456                  0008     c1_button_right_mask         equ   $08 *@>>
    457                  0010     c2_button_up_mask            equ   $10 *@>>
    458                  0020     c2_button_down_mask          equ   $20 *@>>
    459                  0040     c2_button_left_mask          equ   $40 *@>>
    460                  0080     c2_button_right_mask         equ   $80 *@>>
    461                  0040     c1_button_A_mask             equ   $40 *@>>
    462                  0080     c2_button_A_mask             equ   $80 *@>>
    463
    464        6D5B               Joypads
    465        6D5B               Joypads_Held
    466        6D5B 00            Dpad_Held                    fcb   $00 *@>>
    467        6D5C 00            Fire_Held                    fcb   $00 *@>>
    468        6D5D               Joypads_Press
    469        6D5D 00            Dpad_Press                   fcb   $00 *@>>
    470        6D5E 00            Fire_Press                   fcb   $00 *@>>
    471
    472                           *****************************************>>
    473                           * Get joystick parameters
    474                           *
    475                           * Direction des Joypads
    476                           * ---------------------
    477                           * Registre: $E7CC (8bits)
    478                           *
    479                           * Joypad2     Joypad1
    480                           * 1111        1111 (0: appuye | 1: relach>>
    481                           * ||||_Haut   ||||_Haut
    482                           * |||__Bas    |||__Bas
    483                           * ||___Gauche ||___Gauche
    484                           * |____Droite |____Droite
    485                           *
    486                           * Boutons des Joypads
    487                           * -------------------
    488                           * Registre: $E7CD (8bits)
    489                           *
    490                           * 11 000000 (0: appuye | 1: relache)
    491                           * ||[------] 6 bits convertisseur numeriq>>
    492                           * ||_Fire Joypad1
    493                           * |__Fire Joypad2
    494                           *
    495                           * Variables globales: Joypads_Held, Joypa>>
    496                           * --------------------------------------->>
    497                           * (16 bits)
    498                           * Joypad2     Joypad1
    499                           * 0000        0000 (0: relache | 1: appuy>>
    500                           * ||||_Haut   ||||_Haut                  >>
    501                           * |||__Bas    |||__Bas                   >>
    502                           * ||___Gauche ||___Gauche                >>
    503                           * |____Droite |____Droite
    504                           *
    505                           *****************************************>>
    506                            
    507                                                                  *;>>
    508                                                                  *;>>
    509                                                                  *;>>
    510                                                                  *;>>
    511                                                                  *
    512                                                                  *;>>
    513        6D5F               ReadJoypads                            *R>>
    514                                                                  * >>
    515                                                                  * >>
    516                                                                  * >>
    517                                                                  * >>
    518                                                                  *
    519                                                                  *;>>
    520                                                                  *J>>
    521                                                                  * >>
    522                                                                  * >>
    523                                                                  * >>
    524                                                                  * >>
    525                                                                  * >>
    526                                                                  * >>
    527                                                                  * >>
    528                                                                  * >>
    529                                                                  * >>
    530                                                                  * >>
    531                                                                  * >>
    532                                                                  * >>
    533                                                                  * >>
    534  6     6D5F FC   E7CC             ldd   $E7CC                    * >>
    535  2     6D62 43                    coma
    536  2     6D63 53                    comb
    537  5     6D64 B8   6D5B             eora  Dpad_Held                * >>
    538  5     6D67 B8   6D5B             eora  Dpad_Held
    539  6     6D6A FD   6D5B             std   Joypads_Held             * >>
    540  5     6D6D B4   6D5B             anda  Dpad_Held                * >>
    541  5     6D70 F4   6D5C             andb  Fire_Held
    542  6     6D73 FD   6D5D             std   Joypads_Press            * >>
    543  5     6D76 39                    rts                            * >>
    544                                                                  *;>>
    545
    546
    547                                   INCLUD RUNOBJTS
    548                           * --------------------------------------->>
    549                           * RunObjects
    550                           * ------------
    551                           * Subroutine to run objects code
    552                           *
    553                           * input REG : none
    554                           * --------------------------------------->>
    555                                                                    >>
    556                                                                    >>
    557                                                                    >>
    558                                                                    >>
    559                                                                    >>
    560                                                                    >>
    561                                                                    >>
    562        6D77               RunObjects                               >>
    563                                                                    >>
    564                                                                    >>
    565  3     6D77 CE   65C5             ldu   #Object_RAM                >>
    566                                                                    >>
    567                                                                    >>
    568                                                                    >>
    569                                                                    >>
    570                                                                    >>
    571                                                                    >>
    572                                                                    >>
    573        6D7A               RunObjects_01                            >>
    574                                                                    >>
    575                                                                    >>
    576                                                                    >>
    577                                                                    >>
    578  7     6D7A 7D   6D23             tst   Glb_MainCharacter_Is_Dead  >>
    579  3     6D7D 26   23               bne   RunObjectsWhenPlayerIsDead >>
    580                                                                    >>
    581                                                                    >>
    582                                                                    >>
    583                                                                    >>
    584                                                                    >>
    585                                                                    >>
    586                                                                    >>
    587                                                                    >>
    588                                                                    >>
    589                                                                    >>
    590        6D7F               RunObject                                >>
    591  2     6D7F 86   00               lda   #$00
    592  4+0   6D81 E6   C4               ldb   ,u                         >>
    593  3     6D83 27   13               beq   RunNextObject              >>
    594
    595  4     6D85 108E 79C1             ldy   #Obj_Index_Page
    596  4+4   6D89 A6   AB               lda   d,y                        >>
    597  5     6D8B B7   E7E5             sta   $E7E5                      >>
    598  2     6D8E 86   00               lda   #$00
    599  2     6D90 58                    aslb                             >>
    600  2     6D91 49                    rola                             >>
    601  4     6D92 108E 7AC1             ldy   #Obj_Index_Address         >>
    602  7+7   6D96 AD   BB               jsr   [d,y]                      >>
    603                                                                    >>
    604                                                                    >>
    605                                                                    >>
    606        6D98               RunNextObject                            >>
    607  4+1   6D98 33   C8 52            leau  next_object,u              >>
    608        6D9B               am_RunNextObject
    609  5     6D9B 1183 6D23             cmpu  #Object_RAM_End            >>
    610  3     6D9F 26   DE               bne   RunObject                  >>
    611        6DA1               RunObjects_End                           >>
    612  5     6DA1 39                    rts                              >>
    613                                                                    >>
    614                                                                    >>
    615                                                                    >>
    616                                                                    >>
    617        6DA2               RunObjectsWhenPlayerIsDead               >>
    618  3     6DA2 CE   65C5             ldu   #Reserved_Object_RAM
    619  3     6DA5 8E   6669             ldx   #Reserved_Object_RAM_End
    620  6     6DA8 BF   6D9D             stx   am_RunNextObject+2         >>
    621  7     6DAB 8D   D2               bsr   RunObject                  >>
    622                                                                    >>
    623                                                                    >>
    624  3     6DAD CE   6C2D             ldu   #LevelOnly_Object_RAM
    625  3     6DB0 8E   6D23             ldx   #LevelOnly_Object_RAM_End
    626  6     6DB3 BF   6D9D             stx   am_RunNextObject+2         >>
    627  7     6DB6 8D   C7               bsr   RunObject                  >>
    628                                                                    >>
    629  3     6DB8 8E   6D23             ldx   #Object_RAM_End            >>
    630  6     6DBB BF   6D9D             stx   am_RunNextObject+2
    631  5     6DBE 39                    rts
    632                                                                    >>
    633                                                                    >>
    634                                                                    >>
    635                                                                    >>
    636                                                                    >>
    637                                                                    >>
    638                                                                    >>
    639                                                                    >>
    640                                                                    >>
    641                                                                    >>
    642                                                                    >>
    643                                                                    >>
    644                                                                    >>
    645                            
    646                                                                    >>
    647                                                                    >>
    648                                                                    >>
    649                                                                    >>
    650
    651                                   INCLUD MRKOBJGN
    652                           * --------------------------------------->>
    653                           * MarkObjGone
    654                           * -----------
    655                           * Subroutine to destroy an object that is>>
    656                           * -- TODO --
    657                           * waiting for camera implementation
    658                           *
    659                           * input REG : none
    660                           * clear REG : none
    661                           * --------------------------------------->>
    662
    663                                                                  *;>>
    664                                                                  *;>>
    665                                                                  *;>>
    666                                                                  *
    667                                                                  *;>>
    668                                                                  *;>>
    669                                                                  *;>>
    670        6DBF               MarkObjGone *@globals                  *M>>
    671                                                                  * >>
    672                                                                  * >>
    673  3     6DBF 20   06               bra   DisplaySprite            * >>
    674                                                                  *+>>
    675                                                                  * >>
    676                                                                  * >>
    677                                                                  * >>
    678                                                                  * >>
    679                                                                  * >>
    680                                                                  * >>
    681                                                                  *
    682                                                                  *+>>
    683                                                                  * >>
    684                                                                  * >>
    685                                                                  * >>
    686                                                                  * >>
    687                                                                  *+>>
    688                                                                  * >>
    689
    690                                   INCLUD DISPLSPR
    691                           * --------------------------------------->>
    692                           * DisplaySprite
    693                           * -------------
    694                           * Subroutine to manage sprite priority.
    695                           * Object's priority is read and object is>>
    696                           * priority: 0 - unregistred
    697                           * priority: 1 - register non moving overl>>
    698                           * priority; 2-8 - register moving sprite >>
    699                           *
    700                           * Unlike original S2 code, sprite priorit>>
    701                           * it allows to keep an exact sprite order>>
    702                           *
    703                           * DisplaySprite
    704                           * input REG : [u] object pointer (OST)
    705                           *
    706                           * DisplaySprite_x
    707                           * input REG : [x] object pointer (OST)
    708                           * --------------------------------------->>
    709                            
    710        6DC1               DisplaySprite_x *@globals
    711  5+6   6DC1 34   56               pshs  d,x,u
    712  6     6DC3 1F   13               tfr   x,u
    713  3     6DC5 20   02               bra   DSP_Start
    714                            
    715        6DC7               DisplaySprite *@globals
    716  5+6   6DC7 34   56               pshs  d,x,u
    717                            
    718        6DC9               DSP_Start
    719  4+1   6DC9 A6   42               lda   render_flags,u
    720  2     6DCB 84   F7               anda  #:render_hide_mask         >>
    721  4+1   6DCD A7   42               sta   render_flags,u
    722
    723  5     6DCF B6   611A             lda   Glb_Cur_Wrk_Screen_Id      >>
    724  3     6DD2 26   09               bne   DSP_SetBuffer1
    725                            
    726        6DD4               DSP_SetBuffer0
    727  4+1   6DD4 30   C8 32            leax  rsv_buffer_0,u             >>
    728  4     6DD7 108E 64C1             ldy   #DPS_buffer_0              >>
    729  3     6DDB 20   07               bra   DSP_BufferPositionned
    730                            
    731        6DDD               DSP_SetBuffer1
    732  4+1   6DDD 30   C8 42            leax  rsv_buffer_1,u             >>
    733  4     6DE0 108E 6515             ldy   #DPS_buffer_1              >>
    734                            
    735        6DE4               DSP_BufferPositionned
    736  4+1   6DE4 A6   43               lda   priority,u                 >>
    737  4+1   6DE6 A1   00               cmpa  buf_priority,x
    738  3     6DE8 27   1C               beq   DSP_rts                    >>
    739  4+1   6DEA E6   00               ldb   buf_priority,x
    740  3     6DEC 26   3F               bne   DSP_ChangePriority
    741                            
    742        6DEE               DSP_InitPriority
    743  4+1   6DEE A7   00               sta   buf_priority,x             >>
    744  2     6DF0 48                    asla                             >>
    745                            
    746        6DF1               DSP_CheckLastEntry
    747  4+1   6DF1 31   A8 12            leay  buf_Tbl_Priority_Last_Entry>>
    748  6+1   6DF4 6D   A6               tst   a,y                        >>
    749  3     6DF6 26   10               bne   DSP_addToExistingNode      >>
    750                            
    751        6DF8               DSP_addFirstNode
    752  5+1   6DF8 EF   A6               stu   a,y                        >>
    753  4+1   6DFA 31   A8 EE            leay  buf_Tbl_Priority_First_Entr>>
    754  5+1   6DFD EF   A6               stu   a,y                        >>
    755  3     6DFF CC   0000             ldd   #0
    756  5+1   6E02 ED   01               std   buf_priority_prev_obj,x    >>
    757  5+1   6E04 ED   03               std   buf_priority_next_obj,x
    758                            
    759        6E06               DSP_rts
    760  5+8   6E06 35   D6               puls  d,x,u,pc                   >>
    761                            
    762        6E08               DSP_addToExistingNode
    763  5+1   6E08 AE   A6               ldx   a,y                        >>
    764  5     6E0A F6   611A             ldb   Glb_Cur_Wrk_Screen_Id
    765  3     6E0D 26   0E               bne   DSP_LinkBuffer1
    766  5+1   6E0F EF   88 35            stu   rsv_priority_next_obj_0,x  >>
    767  5+1   6E12 AF   C8 33            stx   rsv_priority_prev_obj_0,u  >>
    768  6+1   6E15 6F   C8 35            clr   rsv_priority_next_obj_0,u  >>
    769  6+1   6E18 6F   C8 36            clr   rsv_priority_next_obj_0+1,u>>
    770  3     6E1B 20   0C               bra   DSP_LinkCurWithPrev
    771        6E1D               DSP_LinkBuffer1
    772  5+1   6E1D EF   88 45            stu   rsv_priority_next_obj_1,x  >>
    773  5+1   6E20 AF   C8 43            stx   rsv_priority_prev_obj_1,u  >>
    774  6+1   6E23 6F   C8 45            clr   rsv_priority_next_obj_1,u  >>
    775  6+1   6E26 6F   C8 46            clr   rsv_priority_next_obj_1+1,u>>
    776                            
    777        6E29               DSP_LinkCurWithPrev
    778  5+1   6E29 EF   A6               stu   a,y                        >>
    779  5+8   6E2B 35   D6               puls  d,x,u,pc                   >>
    780                            
    781        6E2D               DSP_ChangePriority
    782  4+1   6E2D 31   A8 24            leay  buf_Lst_Priority_Unset,y
    783  5+3   6E30 EF   B4               stu   [,y]                       >>
    784  4+1   6E32 31   22               leay  2,y
    785  6+0   6E34 10AF A4               sty   ,y                         >>
    786  4+1   6E37 31   A8 DA            leay  -buf_Lst_Priority_Unset-2,y>>
    787  2     6E3A 81   00               cmpa  #0
    788  3     6E3C 26   B3               bne   DSP_CheckLastEntry         >>
    789  5+8   6E3E 35   D6               puls  d,x,u,pc                   >>
    790
    791                            
    792                                                                  *;>>
    793                                                                  *;>>
    794                                                                  *;>>
    795                                                                  *
    796                                                                  *;>>
    797                                                                  *
    798                                                                  *;>>
    799                                                                  *D>>
    800                                                                  * >>
    801                                                                  * >>
    802                                                                  * >>
    803                                                                  * >>
    804                                                                  * >>
    805                            
    806                                                                  * >>
    807                                                                  * >>
    808                                                                  * >>
    809                            
    810                                                                  * >>
    811                                                                  * >>
    812                                                                  *
    813                                                                  *r>>
    814                            
    815                                                                  * >>
    816                                                                  *;>>
    817
    818                                   INCLUD ANIMSPR
    819                           * --------------------------------------->>
    820                           * Subroutine to animate a sprite using an>>
    821                           *
    822                           *   this function also change render flag>>
    823                           *   the status byte;
    824                           *
    825                           * input REG : [u] pointeur sur l'objet
    826                           *
    827                           * --------------------------------------->>
    828
    829                  00FF     resetAnim              equ $FF
    830                  00FE     goBackNFrames          equ $FE ; followed>>
    831                  00FD     goToAnimation          equ $FD ; followed>>
    832                  00FC     nextRoutine            equ $FC
    833                  00FB     resetAnimAndSubRoutine equ $FB
    834                  00FA     nextSubRoutine         equ $FA
    835
    836                                                                    >>
    837                                                                    >>
    838                                                                    >>
    839                                                                    >>
    840                                                                    >>
    841                                                                    >>
    842                                                                    >>
    843        6E40               AnimateSprite * @globals                 >>
    844                                                                    >>
    845  5+1   6E40 AE   44               ldx   anim,u                     >>
    846  6+1   6E42 AC   46               cmpx  prev_anim,u                >>
    847  3     6E44 27   08               beq   Anim_Run                   >>
    848  5+1   6E46 AF   46               stx   prev_anim,u                >>
    849  2     6E48 C6   00                     ldb   #0
    850  4+1   6E4A E7   48               stb   anim_frame,u               >>
    851  4+1   6E4C E7   49               stb   anim_frame_duration,u      >>
    852                                                                    >>
    853        6E4E               Anim_Run                                 >>
    854  6+1   6E4E 6A   49               dec   anim_frame_duration,u      >>
    855  3     6E50 2A   23               bpl   Anim_Wait                  >>
    856                                   * no offset table                >>
    857                                   * anim is the address of anim    >>
    858  4+1   6E52 E6   1F               ldb   -1,x
    859  4+1   6E54 E7   49                     stb   anim_frame_duration,u>>
    860                                                                    >>
    861  4+1   6E56 E6   48               ldb   anim_frame,u               >>
    862  2     6E58 58                    aslb
    863  4+1   6E59 31   85               leay  b,x
    864  5+0   6E5B EC   A4               ldd   ,y                         >>
    865                                   * bmi   Anim_End_FF              >>
    866  2     6E5D 81   FA                     cmpa  #$FA                 >>
    867  3     6E5F 24   15                     bhs   Anim_End_FF          >>
    868                                                                    >>
    869        6E61               Anim_Next                                >>
    870                                      * ne pas utiliser             >>
    871  5+1   6E61 ED   4A               std   mapping_frame,u            >>
    872  4+1   6E63 E6   C8 1A            ldb   status,u                   >>
    873  2     6E66 C4   03               andb  #status_x_orientation+statu>>
    874  5     6E68 F7   6E70             stb   Anim_dyn+1
    875                                                                    >>
    876  4+1   6E6B A6   42               lda   render_flags,u             >>
    877  2     6E6D 84   FC               anda  #:(render_xmirror_mask+rend>>
    878        6E6F               Anim_dyn
    879  2     6E6F 8A   00               ora   #$00                       >>
    880                                                                    >>
    881  4+1   6E71 A7   42               sta   render_flags,u
    882  6+1   6E73 6C   48               inc   anim_frame,u               >>
    883                                                                    >>
    884        6E75               Anim_Wait                                >>
    885  5     6E75 39                    rts                              >>
    886                                                                    >>
    887                                                                    >>
    888        6E76               Anim_End_FF                              >>
    889  2     6E76 4C                    inca                             >>
    890  3     6E77 26   08               bne   Anim_End_FE                >>
    891  2     6E79 C6   00                     ldb   #0
    892  4+1   6E7B E7   48               stb   anim_frame,u               >>
    893  5+0   6E7D EC   84               ldd   ,x                         >>
    894  3     6E7F 20   E0               bra   Anim_Next                  >>
    895                                                                    >>
    896                                                                    >>
    897        6E81               Anim_End_FE                              >>
    898  2     6E81 4C                    inca                             >>
    899  3     6E82 26   0E               bne   Anim_End_FD                >>
    900  4+1   6E84 A6   48               lda   anim_frame,u
    901  5     6E86 F7   6E8A             stb   Anim_End_FE_dyn+1          >>
    902        6E89               Anim_End_FE_dyn
    903  2     6E89 80   00               suba  #$00                       >>
    904  4+1   6E8B A7   48               sta   anim_frame,u               >>
    905                                                                    >>
    906  2     6E8D 48                    asla
    907  5+1   6E8E EC   86               ldd   a,x                        >>
    908  3     6E90 20   CF               bra   Anim_Next                  >>
    909                                                                    >>
    910                                                                    >>
    911        6E92               Anim_End_FD                              >>
    912  2     6E92 4C                    inca                             >>
    913  3     6E93 26   05               bne   Anim_End_FC                >>
    914  5+1   6E95 EC   21               ldd   1,y                        >>
    915  5+1   6E97 ED   44               std   anim,u                     >>
    916  5     6E99 39                    rts                              >>
    917                                                                    >>
    918                                                                    >>
    919        6E9A               Anim_End_FC                              >>
    920  2     6E9A 4C                    inca                             >>
    921  3     6E9B 26   0D               bne   Anim_End_FB                >>
    922  6+1   6E9D 6C   C8 18            inc   routine,u
    923  6+1   6EA0 6C   C8 18            inc   routine,u                  >>
    924  2     6EA3 86   00               lda   #0
    925  4+1   6EA5 A7   49               sta   anim_frame_duration,u      >>
    926  6+1   6EA7 6C   48               inc   anim_frame,u               >>
    927  5     6EA9 39                    rts                              >>
    928                                                                    >>
    929                                                                    >>
    930        6EAA               Anim_End_FB                              >>
    931  2     6EAA 4C                    inca                             >>
    932  3     6EAB 26   08               bne   Anim_End_FA                >>
    933  2     6EAD 86   00               lda   #0
    934  4+1   6EAF A7   48               sta   anim_frame,u               >>
    935  4+1   6EB1 A7   C8 19            sta   routine_secondary,u        >>
    936  5     6EB4 39                    rts                              >>
    937                                                                    >>
    938                                                                    >>
    939        6EB5               Anim_End_FA                              >>
    940  2     6EB5 4C                    inca                             >>
    941  3     6EB6 26   06               bne   Anim_End                   >>
    942  6+1   6EB8 6C   C8 19            inc   routine_secondary,u        >>
    943  6+1   6EBB 6C   C8 19            inc   routine_secondary,u
    944        6EBE               Anim_End
    945  5     6EBE 39                    rts                              >>
    946                                                                    >>
    947                                                                    >>
    948                                                                    >>
    949                                                                    >>
    950                                                                    >>
    951                                                                    >>
    952                                                                    >>
    953                                                                    >>
    954                                                                    >>
    955                                                                    >>
    956
    957                                   INCLUD OBJMOVE
    958                           * --------------------------------------->>
    959                           * Subroutine translating object speed to >>
    960                           * This moves the object horizontally and >>
    961                           * but does not apply gravity to it
    962                           * --------------------------------------->>
    963
    964                                                                  *;>>
    965                                                                  *;>>
    966                                                                  *;>>
    967                                                                  *;>>
    968                                                                  *;>>
    969                                                                  *
    970                                                                  *;>>
    971                                                                  *
    972                                                                  *;>>
    973        6EBF               ObjectMove                             *O>>
    974                                                                  * >>
    975                                                                  * >>
    976                                                                  * >>
    977                                                                  * >>
    978                                                                  * >>
    979                                                                  * >>
    980  4+1   6EBF E6   C8 14            ldb   x_vel,u
    981  2     6EC2 1D                    sex                            ; >>
    982  5     6EC3 B7   6ED0             sta   am_ObjectMove_01+1
    983  5+1   6EC6 EC   C8 14            ldd   x_vel,u
    984  6+1   6EC9 E3   4D               addd  x_pos+1,u                ; >>
    985  5+1   6ECB ED   4D               std   x_pos+1,u                ; >>
    986  4+1   6ECD A6   4C               lda   x_pos,u
    987        6ECF               am_ObjectMove_01
    988  2     6ECF 89   00               adca  #$00                     ; >>
    989  4+1   6ED1 A7   4C               sta   x_pos,u                  ; >>
    990                            
    991                                                                  * >>
    992                                                                  * >>
    993                                                                  * >>
    994                                                                  * >>
    995                                                                  * >>
    996                                                                  * >>
    997  4+1   6ED3 E6   C8 16            ldb   y_vel,u
    998  2     6ED6 1D                    sex                            ; >>
    999  5     6ED7 B7   6EE6             sta   am_ObjectMove_02+1
   1000  5+1   6EDA EC   C8 16            ldd   y_vel,u
   1001  6+1   6EDD E3   C8 10            addd  y_pos+1,u                ; >>
   1002  5+1   6EE0 ED   C8 10            std   y_pos+1,u                ; >>
   1003  4+1   6EE3 A6   4F               lda   y_pos,u
   1004        6EE5               am_ObjectMove_02
   1005  2     6EE5 89   00               adca  #$00                     ; >>
   1006  4+1   6EE7 A7   4F               sta   y_pos,u                  ; >>
   1007  5     6EE9 39                    rts                            * >>
   1008                                                                  *;>>
   1009                                                                  *;>>
   1010
   1011                                   INCLUD OBJLOAD
   1012                           * --------------------------------------->>
   1013                           * Single object loading subroutine
   1014                           * Find an empty object array
   1015                           *
   1016                           * input  REG : [u] pointeur sur l'objet c>>
   1017                           * output REG : [x] pointeur sur l'objet l>>
   1018                           * --------------------------------------->>
   1019
   1020                                                                  *;>>
   1021                                                                  *;>>
   1022                                                                  *;>>
   1023                                                                  *;>>
   1024                                                                  *;>>
   1025                                                                  *
   1026                                                                  *;>>
   1027                                                                  *S>>
   1028                                                                  * >>
   1029                                                                  * >>
   1030                                                                  * >>
   1031                                                                  * >>
   1032                                                                  * >>
   1033                                                                  *
   1034                                                                  */>>
   1035                                                                  * >>
   1036                                                                  * >>
   1037                                                                  * >>
   1038                                                                  * >>
   1039                                                                  *
   1040                                                                  *r>>
   1041                                                                  * >>
   1042                                                                  *;>>
   1043                                                                  *;>>
   1044                                                                  *;>>
   1045                                                                  *;>>
   1046                                                                  *;>>
   1047                                                                  *
   1048                                                                  *;>>
   1049                                                                  *
   1050                                                                  *;>>
   1051        6EEA               SingleObjLoad2                         *S>>
   1052  6     6EEA 1F   31               tfr   u,x                      * >>
   1053  4+1   6EEC 30   88 52            leax  next_object,x            * >>
   1054  4     6EEF 8C   6C2D             cmpx  #Dynamic_Object_RAM_End  * >>
   1055  3     6EF2 27   0C               beq   SingleObjLoad2_02        * >>
   1056                                                                  * >>
   1057                                                                  * >>
   1058                                                                  * >>
   1059                                                                  * >>
   1060                                                                  * >>
   1061                                                                  * >>
   1062                                                                  * >>
   1063                                                                  * >>
   1064                                                                  *
   1065        6EF4               SingleObjLoad2_01                      *->>
   1066  6+0   6EF4 6D   84               tst   ,x                       * >>
   1067  3     6EF6 27   08               beq   SingleObjLoad2_02        * >>
   1068  4+1   6EF8 30   88 52            leax  next_object,x            * >>
   1069  4     6EFB 8C   6C2D             cmpx  #Dynamic_Object_RAM_End
   1070  3     6EFE 26   F4               bne   SingleObjLoad2_01        * >>
   1071                                                                  *
   1072        6F00               SingleObjLoad2_02                      *r>>
   1073  5     6F00 39                    rts                            * >>
   1074                                                                  *
   1075                                                                  * >>
   1076                                                                  *+>>
   1077                                                                  *.>>
   1078                                                                  *.>>
   1079                                                                  *
   1080                                                                  * >>
   1081                                                                  * >>
   1082                                                                  * >>
   1083                                                                  * >>
   1084                                                                  * >>
   1085                                                                  * >>
   1086                                                                  *
   1087                                                                  *.>>
   1088                                                                  *.>>
   1089                                                                  * >>
   1090                                                                  * >>
   1091                                                                  * >>
   1092                                                                  *;>>
   1093                                                                  *;>>
   1094                                                                  *;>>
   1095                                                                  *;>>
   1096                                                                  *;>>
   1097                                                                  *
   1098                                                                  *;>>
   1099                                                                  *
   1100                                                                  *;>>
   1101                                                                  *S>>
   1102                                                                  * >>
   1103                                                                  * >>
   1104                                                                  *
   1105                                                                  *->>
   1106                                                                  * >>
   1107                                                                  * >>
   1108                                                                  * >>
   1109                                                                  * >>
   1110                                                                  *
   1111                                                                  *r>>
   1112                                                                  * >>
   1113                                                                  *;>>
   1114
   1115
   1116                                   INCLUD DELETOBJ
   1117                           * --------------------------------------->>
   1118                           * DeleteObject
   1119                           * ------------
   1120                           * Subroutine to delete an object.
   1121                           * If the object is rendered as a sprite i>>
   1122                           * routine
   1123                           *
   1124                           * DeleteObject
   1125                           * input REG : [u] object pointer (OST)
   1126                           *
   1127                           * DeleteObject_x
   1128                           * input REG : [x] object pointer (OST)
   1129                           * --------------------------------------->>
   1130
   1131                                                                  *;>>
   1132                                                                  *;>>
   1133                                                                  *;>>
   1134                                                                  *
   1135                                                                  *;>>
   1136                                                                  *
   1137                                                                  *;>>
   1138        6F01               DeleteObject_x *@globals               *D>>
   1139  5+6   6F01 34   56               pshs  d,x,u                    * >>
   1140  6     6F03 1F   13               tfr   x,u                      *;>>
   1141  3     6F05 20   02               bra   DOB_Start
   1142                            
   1143        6F07               DeleteObject *@globals                 *D>>
   1144  5+6   6F07 34   56               pshs  d,x,u
   1145                            
   1146        6F09               DOB_Start
   1147  4+1   6F09 A6   C8 41            lda   rsv_onscreen_0,u
   1148  3     6F0C 27   27               beq   DOB_RemoveFromDPSB0        >>
   1149
   1150        6F0E               DOB_ToDeleteFlag0
   1151  4+1   6F0E A6   42               lda   render_flags,u
   1152  2     6F10 8A   20               ora   #render_todelete_mask
   1153  4+1   6F12 A7   42               sta   render_flags,u             >>
   1154                            
   1155        6F14               DOB_Unset0
   1156  6     6F14 BE   64E5             ldx   Lst_Priority_Unset_0       >>
   1157  5+0   6F17 EF   84               stu   ,x
   1158  4+1   6F19 30   02               leax  2,x
   1159  6     6F1B BF   64E5             stx   Lst_Priority_Unset_0
   1160                            
   1161        6F1E               DOB_TestOnscreen1
   1162  4+1   6F1E A6   C8 51            lda   rsv_onscreen_1,u
   1163  3     6F21 27   54               beq   DOB_RemoveFromDPSB1        >>
   1164                            
   1165        6F23               DOB_ToDeleteFlag1
   1166  4+1   6F23 A6   42               lda   render_flags,u
   1167  2     6F25 8A   20               ora   #render_todelete_mask
   1168  4+1   6F27 A7   42               sta   render_flags,u             >>
   1169                            
   1170        6F29               DOB_Unset1
   1171  6     6F29 BE   6539             ldx   Lst_Priority_Unset_1       >>
   1172  5+0   6F2C EF   84               stu   ,x
   1173  4+1   6F2E 30   02               leax  2,x
   1174  6     6F30 BF   6539             stx   Lst_Priority_Unset_1
   1175  5+8   6F33 35   D6               puls  d,x,u,pc                   >>
   1176
   1177        6F35               DOB_RemoveFromDPSB0
   1178  5+1   6F35 EC   C8 33            ldd   rsv_priority_prev_obj_0,u  >>
   1179  3     6F38 26   11               bne   DOB_ChainPrevB0
   1180                            
   1181  4+1   6F3A A6   C8 32            lda   rsv_priority_0,u
   1182  2     6F3D 48                    lsla
   1183  4     6F3E 108E 64C1             ldy   #Tbl_Priority_First_Entry_0>>
   1184  4+1   6F42 31   A6               leay  a,y
   1185  5+1   6F44 EC   C8 35            ldd   rsv_priority_next_obj_0,u
   1186  5+0   6F47 ED   A4               std   ,y
   1187  3     6F49 20   0A               bra   DOB_CheckPrioNextB0
   1188                            
   1189        6F4B               DOB_ChainPrevB0
   1190  5+1   6F4B EC   C8 35            ldd   rsv_priority_next_obj_0,u
   1191  6+1   6F4E 10AE C8 33            ldy   rsv_priority_prev_obj_0,u
   1192  5+1   6F52 ED   A8 35            std   rsv_priority_next_obj_0,y
   1193
   1194        6F55               DOB_CheckPrioNextB0
   1195  5+1   6F55 EC   C8 35            ldd   rsv_priority_next_obj_0,u
   1196  3     6F58 26   11               bne   DOB_ChainNextB0
   1197
   1198  4+1   6F5A A6   C8 32            lda   rsv_priority_0,u
   1199  2     6F5D 48                    lsla
   1200  4     6F5E 108E 64D3             ldy   #Tbl_Priority_Last_Entry_0
   1201  4+1   6F62 31   A6               leay  a,y
   1202  5+1   6F64 EC   C8 33            ldd   rsv_priority_prev_obj_0,u
   1203  5+0   6F67 ED   A4               std   ,y
   1204  3     6F69 20   B3               bra   DOB_TestOnscreen1
   1205                            
   1206        6F6B               DOB_ChainNextB0
   1207  5+1   6F6B EC   C8 33            ldd   rsv_priority_prev_obj_0,u
   1208  6+1   6F6E 10AE C8 35            ldy   rsv_priority_next_obj_0,u
   1209  5+1   6F72 ED   A8 33            std   rsv_priority_prev_obj_0,y
   1210  3     6F75 20   A7               bra   DOB_TestOnscreen1
   1211
   1212        6F77               DOB_RemoveFromDPSB1
   1213  5+1   6F77 EC   C8 43            ldd   rsv_priority_prev_obj_1,u
   1214  3     6F7A 26   11               bne   DOB_ChainPrevB1
   1215                            
   1216  4+1   6F7C A6   C8 42            lda   rsv_priority_1,u
   1217  2     6F7F 48                    lsla
   1218  4     6F80 108E 6515             ldy   #Tbl_Priority_First_Entry_1>>
   1219  4+1   6F84 31   A6               leay  a,y
   1220  5+1   6F86 EC   C8 45            ldd   rsv_priority_next_obj_1,u
   1221  5+0   6F89 ED   A4               std   ,y
   1222  3     6F8B 20   0A               bra   DOB_CheckPrioNextB1
   1223                            
   1224        6F8D               DOB_ChainPrevB1
   1225  5+1   6F8D EC   C8 45            ldd   rsv_priority_next_obj_1,u
   1226  6+1   6F90 10AE C8 43            ldy   rsv_priority_prev_obj_1,u
   1227  5+1   6F94 ED   A8 45            std   rsv_priority_next_obj_1,y
   1228
   1229        6F97               DOB_CheckPrioNextB1
   1230  5+1   6F97 EC   C8 45            ldd   rsv_priority_next_obj_1,u
   1231  3     6F9A 26   19               bne   DOB_ChainNextB1
   1232
   1233  4+1   6F9C A6   C8 42            lda   rsv_priority_1,u
   1234  2     6F9F 48                    lsla
   1235  4     6FA0 108E 6527             ldy   #Tbl_Priority_Last_Entry_1
   1236  4+1   6FA4 31   A6               leay  a,y
   1237  5+1   6FA6 EC   C8 43            ldd   rsv_priority_prev_obj_1,u
   1238  5+0   6FA9 ED   A4               std   ,y
   1239  4+1   6FAB A6   C8 41            lda   rsv_onscreen_0,u
   1240  3     6FAE 26   03               bne   DOB_rts                    >>
   1241  8     6FB0 BD   6FC9             jsr   ClearObj                   >>
   1242        6FB3               DOB_rts                                *
   1243  5+8   6FB3 35   D6               puls  d,x,u,pc
   1244                            
   1245        6FB5               DOB_ChainNextB1
   1246  5+1   6FB5 EC   C8 43            ldd   rsv_priority_prev_obj_1,u
   1247  6+1   6FB8 10AE C8 45            ldy   rsv_priority_next_obj_1,u
   1248  5+1   6FBC ED   A8 43            std   rsv_priority_prev_obj_1,y
   1249  4+1   6FBF A6   C8 41            lda   rsv_onscreen_0,u
   1250  3     6FC2 26   EF               bne   DOB_rts                    >>
   1251  8     6FC4 BD   6FC9             jsr   ClearObj                   >>
   1252  5+8   6FC7 35   D6               puls  d,x,u,pc
   1253
   1254                                                                  * >>
   1255                                                                  *
   1256                                                                  * >>
   1257                                                                  * >>
   1258                                                                  *->>
   1259                                                                  * >>
   1260                                                                  * >>
   1261                                                                  * >>
   1262                                                                  * >>
   1263                                                                  *
   1264                                                                  * >>
   1265                                                                  *;>>
   1266
   1267                                   INCLUD CLEAROBJ
   1268                           * --------------------------------------->>
   1269                           * ClearObj
   1270                           * --------
   1271                           * Subroutine to clear an object data in O>>
   1272                           *
   1273                           * input REG : [u] pointer on objet (OST)
   1274                           * clear REG : [d,y]
   1275                           * --------------------------------------->>
   1276
   1277        6FC9               ClearObj *@globals
   1278  7     6FC9 10FF 6FF5             sts   CLO_1+2
   1279  6     6FCD BF   6FF8             stx   CLO_2+1
   1280  3     6FD0 CC   0000             ldd   #$0000
   1281  3     6FD3 8E   0000             ldx   #$0000
   1282  4+0   6FD6 31   84               leay  ,x
   1283  4+0   6FD8 32   84               leas  ,x
   1284  4+1   6FDA 33   C8 52            leau  object_size,u
   1285  5+8   6FDD 36   76               pshu  d,x,y,s
   1286  5+8   6FDF 36   76               pshu  d,x,y,s
   1287  5+8   6FE1 36   76               pshu  d,x,y,s
   1288  5+8   6FE3 36   76               pshu  d,x,y,s
   1289  5+8   6FE5 36   76               pshu  d,x,y,s
   1290  5+8   6FE7 36   76               pshu  d,x,y,s
   1291  5+8   6FE9 36   76               pshu  d,x,y,s
   1292  5+8   6FEB 36   76               pshu  d,x,y,s
   1293  5+8   6FED 36   76               pshu  d,x,y,s
   1294  5+8   6FEF 36   76               pshu  d,x,y,s
   1295  5+6   6FF1 36   36               pshu  d,x,y      ; DEPENDENCY on >>
   1296        6FF3               CLO_1
   1297  4     6FF3 10CE 0000             lds   #$0000
   1298        6FF7               CLO_2
   1299  3     6FF7 8E   0000             ldx   #$0000
   1300  5     6FFA 39                    rts
   1301
   1302                                   INCLUD CHECKSPR
   1303                           * --------------------------------------->>
   1304                           * CheckSpritesRefresh
   1305                           * -------------------
   1306                           * Subroutine to determine if sprites are >>
   1307                           * Read Display Priority Structure (back t>>
   1308                           * priority: 0 - unregistred
   1309                           * priority: 1 - register non moving overl>>
   1310                           * priority; 2-8 - register moving sprite >>
   1311                           *
   1312                           * input REG : none
   1313                           * --------------------------------------->>
   1314
   1315        6FFB 0000          cur_priority            fdb   $00
   1316        6FFD 0000          cur_ptr_sub_obj_erase   fdb   $0000
   1317        6FFF 0000          cur_ptr_sub_obj_draw    fdb   $0000
   1318                            
   1319        7001               CheckSpritesRefresh
   1320
   1321        7001               CSR_Start
   1322  3     7001 CC   6569             ldd   #Tbl_Sub_Object_Erase
   1323  6     7004 FD   6FFD             std   cur_ptr_sub_obj_erase
   1324  3     7007 CC   6597             ldd   #Tbl_Sub_Object_Draw
   1325  6     700A FD   6FFF             std   cur_ptr_sub_obj_draw
   1326  5     700D B6   611A             lda   Glb_Cur_Wrk_Screen_Id      >>
   1327  3     7010 26   6E               bne   CSR_SetBuffer1
   1328                            
   1329        7012               CSR_SetBuffer0
   1330  2     7012 86   32               lda   #rsv_buffer_0              >>
   1331  5     7014 B7   70F0             sta   CSR_ProcessEachPriorityLeve>>
   1332        7017               CSR_P8B0
   1333  6     7017 FE   64D1             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1334  3     701A 27   08               beq   CSR_P7B0
   1335  2     701C 86   08               lda   #$08
   1336  5     701E B7   6FFB             sta   cur_priority
   1337  8     7021 BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1338        7024               CSR_P7B0
   1339  6     7024 FE   64CF             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1340  3     7027 27   08               beq   CSR_P6B0
   1341  2     7029 86   07               lda   #$07
   1342  5     702B B7   6FFB             sta   cur_priority
   1343  8     702E BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1344        7031               CSR_P6B0
   1345  6     7031 FE   64CD             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1346  3     7034 27   08               beq   CSR_P5B0
   1347  2     7036 86   06               lda   #$06
   1348  5     7038 B7   6FFB             sta   cur_priority
   1349  8     703B BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1350        703E               CSR_P5B0
   1351  6     703E FE   64CB             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1352  3     7041 27   08               beq   CSR_P4B0
   1353  2     7043 86   05               lda   #$05
   1354  5     7045 B7   6FFB             sta   cur_priority
   1355  8     7048 BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1356        704B               CSR_P4B0
   1357  6     704B FE   64C9             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1358  3     704E 27   08               beq   CSR_P3B0
   1359  2     7050 86   04               lda   #$04
   1360  5     7052 B7   6FFB             sta   cur_priority
   1361  8     7055 BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1362        7058               CSR_P3B0
   1363  6     7058 FE   64C7             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1364  3     705B 27   08               beq   CSR_P2B0
   1365  2     705D 86   03               lda   #$03
   1366  5     705F B7   6FFB             sta   cur_priority
   1367  8     7062 BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1368        7065               CSR_P2B0
   1369  6     7065 FE   64C5             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1370  3     7068 27   08               beq   CSR_P1B0
   1371  2     706A 86   02               lda   #$02
   1372  5     706C B7   6FFB             sta   cur_priority
   1373  8     706F BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1374        7072               CSR_P1B0
   1375  6     7072 FE   64C3             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1376  3     7075 27   08               beq   CSR_rtsB0
   1377  2     7077 86   01               lda   #$01
   1378  5     7079 B7   6FFB             sta   cur_priority
   1379  8     707C BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1380        707F               CSR_rtsB0
   1381  5     707F 39                    rts
   1382                            
   1383        7080               CSR_SetBuffer1
   1384  2     7080 86   42               lda   #rsv_buffer_1              >>
   1385  5     7082 B7   70F0             sta   CSR_ProcessEachPriorityLeve>>
   1386        7085               CSR_P8B1
   1387  6     7085 FE   6525             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1388  3     7088 27   08               beq   CSR_P7B1
   1389  2     708A 86   08               lda   #$08
   1390  5     708C B7   6FFB             sta   cur_priority
   1391  8     708F BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1392        7092               CSR_P7B1
   1393  6     7092 FE   6523             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1394  3     7095 27   08               beq   CSR_P6B1
   1395  2     7097 86   07               lda   #$07
   1396  5     7099 B7   6FFB             sta   cur_priority
   1397  8     709C BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1398        709F               CSR_P6B1
   1399  6     709F FE   6521             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1400  3     70A2 27   08               beq   CSR_P5B1
   1401  2     70A4 86   06               lda   #$06
   1402  5     70A6 B7   6FFB             sta   cur_priority
   1403  8     70A9 BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1404        70AC               CSR_P5B1
   1405  6     70AC FE   651F             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1406  3     70AF 27   08               beq   CSR_P4B1
   1407  2     70B1 86   05               lda   #$05
   1408  5     70B3 B7   6FFB             sta   cur_priority
   1409  8     70B6 BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1410        70B9               CSR_P4B1
   1411  6     70B9 FE   651D             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1412  3     70BC 27   08               beq   CSR_P3B1
   1413  2     70BE 86   04               lda   #$04
   1414  5     70C0 B7   6FFB             sta   cur_priority
   1415  8     70C3 BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1416        70C6               CSR_P3B1
   1417  6     70C6 FE   651B             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1418  3     70C9 27   08               beq   CSR_P2B1
   1419  2     70CB 86   03               lda   #$03
   1420  5     70CD B7   6FFB             sta   cur_priority
   1421  8     70D0 BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1422        70D3               CSR_P2B1
   1423  6     70D3 FE   6519             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1424  3     70D6 27   08               beq   CSR_P1B1
   1425  2     70D8 86   02               lda   #$02
   1426  5     70DA B7   6FFB             sta   cur_priority
   1427  8     70DD BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1428        70E0               CSR_P1B1
   1429  6     70E0 FE   6517             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1430  3     70E3 27   08               beq   CSR_rtsB1
   1431  2     70E5 86   01               lda   #$01
   1432  5     70E7 B7   6FFB             sta   cur_priority
   1433  8     70EA BD   70EE             jsr   CSR_ProcessEachPriorityLeve>>
   1434        70ED               CSR_rtsB1
   1435  5     70ED 39                    rts
   1436
   1437        70EE               CSR_ProcessEachPriorityLevel
   1438  4+1   70EE 30   C8 10            leax  16,u                       >>
   1439                            
   1440        70F1               CSR_CheckDelHide
   1441  4+1   70F1 A6   42               lda   render_flags,u
   1442  2     70F3 84   28               anda  #render_hide_mask!render_to>>
   1443  3     70F5 26   63               bne   CSR_DoNotDisplaySprite
   1444
   1445        70F7               CSR_CheckRefresh
   1446  4+1   70F7 A6   C8 29            lda   rsv_render_flags,u
   1447  2     70FA 84   01               anda  #rsv_render_checkrefresh_ma>>
   1448  6     70FC 1026 00BB             lbne  CSR_CheckErase
   1449
   1450        7100               CSR_UpdSpriteImageBasedOnMirror
   1451  4+1   7100 A6   C8 29            lda   rsv_render_flags,u
   1452  2     7103 8A   01               ora   #rsv_render_checkrefresh_ma>>
   1453  4+1   7105 A7   C8 29            sta   rsv_render_flags,u         >>
   1454                            
   1455  4+1   7108 A6   42               lda   render_flags,u             >>
   1456  2     710A 84   03               anda  #render_xmirror_mask!render>>
   1457  2     710C C6   0E               ldb   #image_meta_size
   1458  11    710E 3D                    mul
   1459  6+1   710F E3   4A               addd  mapping_frame,u
   1460  5+1   7111 ED   C8 2C            std   rsv_curr_mapping_frame,u
   1461                            
   1462        7114               CSR_CheckPlayFieldCoord
   1463  4+1   7114 A6   42               lda   render_flags,u
   1464  2     7116 84   04               anda  #render_playfieldcoord_mask>>
   1465  3     7118 27   69               beq   CSR_CheckVerticalPosition  >>
   1466                            
   1467  5+1   711A EC   4C               ldd   x_pos,u
   1468  7     711C B3   611B             subd  Glb_Camera_X_Pos
   1469  6+1   711F 10AE C8 2C            ldy   rsv_curr_mapping_frame,u
   1470                                   *addd  image_x_offset,y
   1471  6     7123 1029 008C             lbvs   CSR_SetOutOfRange         >>
   1472  6     7127 102B 0088             lbmi   CSR_SetOutOfRange         >>
   1473  4+1   712B E7   C8 12            stb   x_pixel,u
   1474                                   *addb  image_x_size_l,y
   1475  6     712E 1029 0081             lbvs   CSR_SetOutOfRange         >>
   1476  4+1   7132 E7   C8 30            stb   rsv_x2_pixel,u
   1477  2     7135 C1   A0               cmpb  #screen_width
   1478  6     7137 102E 0078             lbgt   CSR_SetOutOfRange         >>
   1479
   1480  5+1   713B EC   4F               ldd   y_pos,u
   1481  7     713D B3   611D             subd  Glb_Camera_Y_Pos
   1482                                   *addd  image_y1_offset,y
   1483  3     7140 29   71               bvs   CSR_SetOutOfRange          >>
   1484  3     7142 2B   6F               bmi   CSR_SetOutOfRange          >>
   1485  4+1   7144 E7   C8 13            stb   y_pixel,u
   1486                                   *addb  image_y_size_l,y
   1487  3     7147 29   6A               bvs   CSR_SetOutOfRange          >>
   1488  4+1   7149 E7   C8 31            stb   rsv_y2_pixel,u
   1489  2     714C C1   E4               cmpb  #screen_bottom
   1490  3     714E 22   63               bhi   CSR_SetOutOfRange          >>
   1491  4+1   7150 A6   C8 29            lda   rsv_render_flags,u
   1492  2     7153 84   F7               anda  #:rsv_render_outofrange_mas>>
   1493  4+1   7155 A7   C8 29            sta   rsv_render_flags,u
   1494  3     7158 20   61               bra   CSR_CheckErase
   1495                            
   1496        715A               CSR_DoNotDisplaySprite
   1497  4+1   715A A6   43               lda   priority,u
   1498  5     715C B1   6FFB             cmpa  cur_priority
   1499  3     715F 26   1B               bne   CSR_NextObject             >>
   1500                            
   1501  4+1   7161 A6   C8 29            lda   rsv_render_flags,u
   1502  2     7164 84   F9               anda  #:rsv_render_erasesprite_ma>>
   1503  4+1   7166 A7   C8 29            sta   rsv_render_flags,u
   1504                            
   1505  4+1   7169 E6   0F               ldb   buf_onscreen,x
   1506  3     716B 27   0F               beq   CSR_NextObject             >>
   1507                            
   1508  2     716D 8A   02               ora   #rsv_render_erasesprite_mas>>
   1509  4+1   716F A7   C8 29            sta   rsv_render_flags,u
   1510                            
   1511  7     7172 10BE 6FFD             ldy   cur_ptr_sub_obj_erase      >>
   1512  5+3   7176 EF   A1               stu   ,y++
   1513  7     7178 10BF 6FFD             sty   cur_ptr_sub_obj_erase
   1514                            
   1515        717C               CSR_NextObject
   1516  5+1   717C EE   03               ldu   buf_priority_next_obj,x
   1517  6     717E 1026 FF6C             lbne  CSR_ProcessEachPriorityLeve>>
   1518  5     7182 39                    rts
   1519
   1520        7183               CSR_CheckVerticalPosition
   1521  4+1   7183 E6   C8 13            ldb   y_pixel,u
   1522  6+1   7186 10AE C8 2C            ldy   rsv_curr_mapping_frame,u
   1523                            
   1524  4+1   718A EB   2B               addb  image_y1_offset_l,y
   1525  4+1   718C E7   C8 2F            stb   rsv_y1_pixel,u
   1526
   1527  2     718F C1   1C               cmpb  #screen_top
   1528  3     7191 25   20               bcs   CSR_SetOutOfRange
   1529                            
   1530  4+1   7193 EB   2D               addb  image_y_size_l,y
   1531  4+1   7195 E7   C8 31            stb   rsv_y2_pixel,u
   1532
   1533  2     7198 C1   E4               cmpb  #screen_bottom
   1534  3     719A 22   17               bhi   CSR_SetOutOfRange
   1535                            
   1536  4+1   719C E6   C8 12            ldb   x_pixel,u
   1537  4+1   719F EB   2A               addb  image_x1_offset_l,y
   1538  4+1   71A1 E7   C8 2E            stb   rsv_x1_pixel,u
   1539  4+1   71A4 EB   2C               addb  image_x_size_l,y
   1540  4+1   71A6 E7   C8 30            stb   rsv_x2_pixel,u
   1541                            
   1542  4+1   71A9 A6   C8 29            lda   rsv_render_flags,u
   1543  2     71AC 84   F7               anda  #:rsv_render_outofrange_mas>>
   1544  4+1   71AE A7   C8 29            sta   rsv_render_flags,u
   1545  3     71B1 20   08               bra   CSR_CheckErase
   1546                            
   1547        71B3               CSR_SetOutOfRange
   1548  4+1   71B3 A6   C8 29            lda   rsv_render_flags,u
   1549  2     71B6 8A   08               ora   #rsv_render_outofrange_mask>>
   1550  4+1   71B8 A7   C8 29            sta   rsv_render_flags,u
   1551
   1552        71BB               CSR_CheckErase
   1553  7     71BB 10FF 728E             sts   CSR_CheckDraw+2
   1554  4+1   71BF A6   00               lda   buf_priority,x
   1555  5     71C1 B1   6FFB             cmpa  cur_priority
   1556  6     71C4 1026 00C4             lbne  CSR_CheckDraw
   1557                            
   1558  7     71C8 10BE 6FFD             ldy   cur_ptr_sub_obj_erase
   1559                            
   1560  4+1   71CC A6   0F               lda   buf_onscreen,x
   1561  6     71CE 1027 00B2             lbeq   CSR_SetEraseFalse         >>
   1562  5+1   71D2 EC   C8 12            ldd   xy_pixel,u
   1563  7+1   71D5 10A3 09               cmpd  buf_prev_xy_pixel,x
   1564  3     71D8 26   10               bne   CSR_SetEraseTrue           >>
   1565  5+1   71DA EC   C8 2C            ldd   rsv_curr_mapping_frame,u
   1566  7+1   71DD 10A3 05               cmpd  buf_prev_mapping_frame,x
   1567  3     71E0 26   08               bne   CSR_SetEraseTrue           >>
   1568  4+1   71E2 A6   43               lda   priority,u
   1569  4+1   71E4 A1   00               cmpa  buf_priority,x
   1570  3     71E6 26   02               bne   CSR_SetEraseTrue           >>
   1571  3     71E8 20   11               bra   CSR_SubEraseSpriteSearchIni>>
   1572                            
   1573        71EA               CSR_SetEraseTrue
   1574  4+1   71EA A6   C8 29            lda   rsv_render_flags,u
   1575  2     71ED 8A   02               ora   #rsv_render_erasesprite_mas>>
   1576  4+1   71EF A7   C8 29            sta   rsv_render_flags,u
   1577                            
   1578  5+3   71F2 EF   A1               stu   ,y++
   1579  7     71F4 10BF 6FFD             sty   cur_ptr_sub_obj_erase
   1580                            
   1581  5     71F8 16   0091             lbra   CSR_CheckDraw
   1582                            
   1583        71FB               CSR_SubEraseSpriteSearchInit
   1584
   1585                                   * search a collision with a sprit>>
   1586                                   * the sprite under should have to>>
   1587                                   * in this case it forces the refr>>
   1588                                   * as a sub loop, this should be o>>
   1589                                   * there are two lists because a s>>
   1590                                   * and displayed at another positi>>
   1591
   1592  7     71FB 10FE 6FFD             lds   cur_ptr_sub_obj_erase
   1593  5     71FF B6   611A             lda   Glb_Cur_Wrk_Screen_Id      >>
   1594  3     7202 26   29               bne   CSR_SubEraseSearchB1
   1595                            
   1596        7204               CSR_SubEraseSearchB0
   1597  5     7204 118C 6569             cmps  #Tbl_Sub_Object_Erase
   1598  3     7208 27   4C               beq   CSR_SubDrawSpriteSearchInit>>
   1599  6+3   720A 10AE E3               ldy   ,--s
   1600                            
   1601        720D               CSR_SubEraseCheckCollisionB0
   1602  5+1   720D EC   A8 3D            ldd   rsv_prev_xy1_pixel_0,y     >>
   1603  4+1   7210 A1   C8 30            cmpa  rsv_x2_pixel,u             >>
   1604  3     7213 24   EF               bhs   CSR_SubEraseSearchB0
   1605  4+1   7215 E1   C8 31            cmpb  rsv_y2_pixel,u             >>
   1606  3     7218 24   EA               bhs   CSR_SubEraseSearchB0
   1607  5+1   721A EC   A8 3F            ldd   rsv_prev_xy2_pixel_0,y     >>
   1608  4+1   721D A1   C8 2E            cmpa  rsv_x1_pixel,u             >>
   1609  3     7220 23   E2               bls   CSR_SubEraseSearchB0
   1610  4+1   7222 E1   C8 2F            cmpb  rsv_y1_pixel,u             >>
   1611  3     7225 23   DD               bls   CSR_SubEraseSearchB0
   1612                            
   1613  7     7227 10BE 6FFD             ldy   cur_ptr_sub_obj_erase
   1614  3     722B 20   BD               bra   CSR_SetEraseTrue           >>
   1615
   1616        722D               CSR_SubEraseSearchB1
   1617  5     722D 118C 6569             cmps  #Tbl_Sub_Object_Erase
   1618  3     7231 27   23               beq   CSR_SubDrawSpriteSearchInit>>
   1619  6+3   7233 10AE E3               ldy   ,--s
   1620                            
   1621        7236               CSR_SubEraseCheckCollisionB1
   1622  5+1   7236 EC   A8 4D            ldd   rsv_prev_xy1_pixel_1,y     >>
   1623  4+1   7239 A1   C8 30            cmpa  rsv_x2_pixel,u             >>
   1624  3     723C 24   EF               bhs   CSR_SubEraseSearchB1
   1625  4+1   723E E1   C8 31            cmpb  rsv_y2_pixel,u             >>
   1626  3     7241 24   EA               bhs   CSR_SubEraseSearchB1
   1627  5+1   7243 EC   A8 4F            ldd   rsv_prev_xy2_pixel_1,y     >>
   1628  4+1   7246 A1   C8 2E            cmpa  rsv_x1_pixel,u             >>
   1629  3     7249 23   E2               bls   CSR_SubEraseSearchB1
   1630  4+1   724B E1   C8 2F            cmpb  rsv_y1_pixel,u             >>
   1631  3     724E 23   DD               bls   CSR_SubEraseSearchB1
   1632                            
   1633  7     7250 10BE 6FFD             ldy   cur_ptr_sub_obj_erase
   1634  3     7254 20   94               bra   CSR_SetEraseTrue           >>
   1635
   1636        7256               CSR_SubDrawSpriteSearchInit
   1637  7     7256 10FE 6FFF             lds   cur_ptr_sub_obj_draw
   1638                            
   1639        725A               CSR_SubDrawSearch
   1640  5     725A 118C 6597             cmps  #Tbl_Sub_Object_Draw
   1641  3     725E 27   24               beq   CSR_SetEraseFalse          >>
   1642  6+3   7260 10AE E3               ldy   ,--s
   1643
   1644        7263               CSR_SubDrawCheckCollision
   1645  5+1   7263 EC   A8 2E            ldd   rsv_xy1_pixel,y            >>
   1646  4+1   7266 A1   C8 30            cmpa  rsv_x2_pixel,u             >>
   1647  3     7269 24   EF               bhs   CSR_SubDrawSearch
   1648  4+1   726B E1   C8 31            cmpb  rsv_y2_pixel,u             >>
   1649  3     726E 24   EA               bhs   CSR_SubDrawSearch
   1650  5+1   7270 EC   A8 30            ldd   rsv_xy2_pixel,y            >>
   1651  4+1   7273 A1   C8 2E            cmpa  rsv_x1_pixel,u             >>
   1652  3     7276 23   E2               bls   CSR_SubDrawSearch
   1653  4+1   7278 E1   C8 2F            cmpb  rsv_y1_pixel,u             >>
   1654  3     727B 23   DD               bls   CSR_SubDrawSearch
   1655                            
   1656  7     727D 10BE 6FFD             ldy   cur_ptr_sub_obj_erase
   1657  5     7281 16   FF66             lbra  CSR_SetEraseTrue           >>
   1658
   1659        7284               CSR_SetEraseFalse
   1660  4+1   7284 A6   C8 29            lda   rsv_render_flags,u
   1661  2     7287 84   FD               anda  #:rsv_render_erasesprite_ma>>
   1662  4+1   7289 A7   C8 29            sta   rsv_render_flags,u
   1663                            
   1664        728C               CSR_CheckDraw
   1665  4     728C 10CE FFFF             lds   #$FFFF                     >>
   1666  4+1   7290 A6   43               lda   priority,u
   1667  5     7292 B1   6FFB             cmpa  cur_priority
   1668  6     7295 1026 FEE3             lbne  CSR_NextObject
   1669                            
   1670  7     7299 10BE 6FFF             ldy   cur_ptr_sub_obj_draw
   1671                            
   1672  4+1   729D A6   C8 29            lda   rsv_render_flags,u
   1673  2     72A0 84   08               anda  #rsv_render_outofrange_mask>>
   1674  3     72A2 26   30               bne   CSR_SetDrawFalse           >>
   1675  5+1   72A4 EC   C8 2C            ldd   rsv_curr_mapping_frame,u
   1676  3     72A7 27   2B               beq   CSR_SetDrawFalse           >>
   1677  4+1   72A9 A6   42               lda   render_flags,u
   1678  2     72AB 84   08               anda  #render_hide_mask
   1679  3     72AD 26   25               bne   CSR_SetDrawFalse           >>
   1680                            
   1681        72AF               CSR_SetDrawTrue
   1682  4+1   72AF A6   C8 29            lda   rsv_render_flags,u
   1683  2     72B2 8A   04               ora   #rsv_render_displaysprite_m>>
   1684  4+1   72B4 A7   C8 29            sta   rsv_render_flags,u
   1685                            
   1686  4+1   72B7 A6   C8 29            lda   rsv_render_flags,u
   1687  2     72BA 84   02               anda  #rsv_render_erasesprite_mas>>
   1688  2     72BC 44                    lsra                             >>
   1689  4+1   72BD A1   0F               cmpa  buf_onscreen,x
   1690  3     72BF 26   06               bne   CSR_SetHide
   1691                            
   1692  5+3   72C1 EF   A1               stu   ,y++
   1693  7     72C3 10BF 6FFF             sty   cur_ptr_sub_obj_draw       >>
   1694
   1695        72C7               CSR_SetHide
   1696  4+1   72C7 A6   42               lda   render_flags,u
   1697  2     72C9 8A   08               ora   #render_hide_mask          >>
   1698  4+1   72CB A7   42               sta   render_flags,u
   1699                            
   1700  5+1   72CD EE   03               ldu   buf_priority_next_obj,x
   1701  6     72CF 1026 FE1B             lbne   CSR_ProcessEachPriorityLev>>
   1702  5     72D3 39                    rts
   1703
   1704        72D4               CSR_SetDrawFalse
   1705  4+1   72D4 A6   C8 29            lda   rsv_render_flags,u
   1706  2     72D7 84   FB               anda  #:rsv_render_displaysprite_>>
   1707  4+1   72D9 A7   C8 29            sta   rsv_render_flags,u
   1708                            
   1709  5+1   72DC EE   03               ldu   buf_priority_next_obj,x
   1710  6     72DE 1026 FE0C             lbne   CSR_ProcessEachPriorityLev>>
   1711  5     72E2 39                    rts
   1712
   1713
   1714                                   INCLUD ERASESPR
   1715                           * --------------------------------------->>
   1716                           * EraseSprites
   1717                           * ------------
   1718                           * Subroutine to erase sprites on screen
   1719                           * Read Display Priority Structure (front >>
   1720                           * priority: 0 - unregistred
   1721                           * priority: 1 - register non moving overl>>
   1722                           * priority; 2-8 - register moving sprite >>
   1723                           *
   1724                           * input REG : none
   1725                           * --------------------------------------->>
   1726                            
   1727        72E3               EraseSprites
   1728
   1729        72E3               ESP_Start
   1730  5     72E3 B6   611A             lda   Glb_Cur_Wrk_Screen_Id      >>
   1731  3     72E6 26   69               bne   ESP_P1B1
   1732
   1733        72E8               ESP_P1B0
   1734  6     72E8 FE   64D5             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1735  3     72EB 27   08               beq   ESP_P2B0
   1736  2     72ED 86   01               lda   #$01
   1737  5     72EF B7   73BE             sta   ESP_CheckPriorityB0+1
   1738  8     72F2 BD   73BA             jsr   ESP_ProcessEachPriorityLeve>>
   1739        72F5               ESP_P2B0
   1740  6     72F5 FE   64D7             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1741  3     72F8 27   08               beq   ESP_P3B0
   1742  2     72FA 86   02               lda   #$02
   1743  5     72FC B7   73BE             sta   ESP_CheckPriorityB0+1
   1744  8     72FF BD   73BA             jsr   ESP_ProcessEachPriorityLeve>>
   1745        7302               ESP_P3B0
   1746  6     7302 FE   64D9             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1747  3     7305 27   08               beq   ESP_P4B0
   1748  2     7307 86   03               lda   #$03
   1749  5     7309 B7   73BE             sta   ESP_CheckPriorityB0+1
   1750  8     730C BD   73BA             jsr   ESP_ProcessEachPriorityLeve>>
   1751        730F               ESP_P4B0
   1752  6     730F FE   64DB             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1753  3     7312 27   08               beq   ESP_P5B0
   1754  2     7314 86   04               lda   #$04
   1755  5     7316 B7   73BE             sta   ESP_CheckPriorityB0+1
   1756  8     7319 BD   73BA             jsr   ESP_ProcessEachPriorityLeve>>
   1757        731C               ESP_P5B0
   1758  6     731C FE   64DD             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1759  3     731F 27   08               beq   ESP_P6B0
   1760  2     7321 86   05               lda   #$05
   1761  5     7323 B7   73BE             sta   ESP_CheckPriorityB0+1
   1762  8     7326 BD   73BA             jsr   ESP_ProcessEachPriorityLeve>>
   1763        7329               ESP_P6B0
   1764  6     7329 FE   64DF             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1765  3     732C 27   08               beq   ESP_P7B0
   1766  2     732E 86   06               lda   #$06
   1767  5     7330 B7   73BE             sta   ESP_CheckPriorityB0+1
   1768  8     7333 BD   73BA             jsr   ESP_ProcessEachPriorityLeve>>
   1769        7336               ESP_P7B0
   1770  6     7336 FE   64E1             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1771  3     7339 27   08               beq   ESP_P8B0
   1772  2     733B 86   07               lda   #$07
   1773  5     733D B7   73BE             sta   ESP_CheckPriorityB0+1
   1774  8     7340 BD   73BA             jsr   ESP_ProcessEachPriorityLeve>>
   1775        7343               ESP_P8B0
   1776  6     7343 FE   64E3             ldu   DPS_buffer_0+buf_Tbl_Priori>>
   1777  3     7346 27   08               beq   ESP_rtsB0
   1778  2     7348 86   08               lda   #$08
   1779  5     734A B7   73BE             sta   ESP_CheckPriorityB0+1
   1780  8     734D BD   73BA             jsr   ESP_ProcessEachPriorityLeve>>
   1781        7350               ESP_rtsB0
   1782  5     7350 39                    rts
   1783                            
   1784        7351               ESP_P1B1
   1785  6     7351 FE   6529             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1786  3     7354 27   08               beq   ESP_P2B1
   1787  2     7356 86   01               lda   #$01
   1788  5     7358 B7   7400             sta   ESP_CheckPriorityB1+1
   1789  8     735B BD   73FC             jsr   ESP_ProcessEachPriorityLeve>>
   1790        735E               ESP_P2B1
   1791  6     735E FE   652B             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1792  3     7361 27   08               beq   ESP_P3B1
   1793  2     7363 86   02               lda   #$02
   1794  5     7365 B7   7400             sta   ESP_CheckPriorityB1+1
   1795  8     7368 BD   73FC             jsr   ESP_ProcessEachPriorityLeve>>
   1796        736B               ESP_P3B1
   1797  6     736B FE   652D             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1798  3     736E 27   08               beq   ESP_P4B1
   1799  2     7370 86   03               lda   #$03
   1800  5     7372 B7   7400             sta   ESP_CheckPriorityB1+1
   1801  8     7375 BD   73FC             jsr   ESP_ProcessEachPriorityLeve>>
   1802        7378               ESP_P4B1
   1803  6     7378 FE   652F             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1804  3     737B 27   08               beq   ESP_P5B1
   1805  2     737D 86   04               lda   #$04
   1806  5     737F B7   7400             sta   ESP_CheckPriorityB1+1
   1807  8     7382 BD   73FC             jsr   ESP_ProcessEachPriorityLeve>>
   1808        7385               ESP_P5B1
   1809  6     7385 FE   6531             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1810  3     7388 27   08               beq   ESP_P6B1
   1811  2     738A 86   05               lda   #$05
   1812  5     738C B7   7400             sta   ESP_CheckPriorityB1+1
   1813  8     738F BD   73FC             jsr   ESP_ProcessEachPriorityLeve>>
   1814        7392               ESP_P6B1
   1815  6     7392 FE   6533             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1816  3     7395 27   08               beq   ESP_P7B1
   1817  2     7397 86   06               lda   #$06
   1818  5     7399 B7   7400             sta   ESP_CheckPriorityB1+1
   1819  8     739C BD   73FC             jsr   ESP_ProcessEachPriorityLeve>>
   1820        739F               ESP_P7B1
   1821  6     739F FE   6535             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1822  3     73A2 27   08               beq   ESP_P8B1
   1823  2     73A4 86   07               lda   #$07
   1824  5     73A6 B7   7400             sta   ESP_CheckPriorityB1+1
   1825  8     73A9 BD   73FC             jsr   ESP_ProcessEachPriorityLeve>>
   1826        73AC               ESP_P8B1
   1827  6     73AC FE   6537             ldu   DPS_buffer_1+buf_Tbl_Priori>>
   1828  3     73AF 27   08               beq   ESP_rtsB1
   1829  2     73B1 86   08               lda   #$08
   1830  5     73B3 B7   7400             sta   ESP_CheckPriorityB1+1
   1831  8     73B6 BD   73FC             jsr   ESP_ProcessEachPriorityLeve>>
   1832        73B9               ESP_rtsB1
   1833  5     73B9 39                    rts
   1834
   1835                           * *******
   1836                           * BUFFER0
   1837                           * *******
   1838
   1839        73BA               ESP_ProcessEachPriorityLevelB0
   1840  4+1   73BA A6   C8 32            lda   rsv_priority_0,u
   1841                            
   1842        73BD               ESP_CheckPriorityB0
   1843  2     73BD 81   00               cmpa  #0                         >>
   1844  3     73BF 26   35               bne   ESP_NextObjectB0           >>
   1845                            
   1846        73C1               ESP_UnsetCheckRefreshB0
   1847  4+1   73C1 A6   C8 29            lda   rsv_render_flags,u
   1848  2     73C4 84   FE               anda  #:rsv_render_checkrefresh_m>>
   1849  4+1   73C6 A7   C8 29            sta   rsv_render_flags,u
   1850                            
   1851        73C9               ESP_CheckEraseB0
   1852  2     73C9 84   02               anda  #rsv_render_erasesprite_mas>>
   1853  3     73CB 27   29               beq   ESP_NextObjectB0
   1854  4+1   73CD A6   42               lda   render_flags,u
   1855  2     73CF 84   10               anda  #render_fixedoverlay_mask
   1856  3     73D1 26   20               bne   ESP_UnsetOnScreenFlagB0
   1857                            
   1858        73D3               ESP_CallEraseRoutineB0
   1859  6     73D3 FF   73E7             stu   ESP_CallEraseRoutineB0_00+1>>
   1860  5+1   73D6 AE   C8 37            ldx   rsv_prev_mapping_frame_0,u >>
   1861  4+1   73D9 A6   06               lda   page_erase_routine,x
   1862  5     73DB B7   E7E5             sta   $E7E5                      >>
   1863  5+1   73DE EE   C8 39            ldu   rsv_bgdata_0,u             >>
   1864  7+4   73E1 AD   98 07            jsr   [erase_routine,x]          >>
   1865  4+0   73E4 31   C4               leay  ,u                         >>
   1866        73E6               ESP_CallEraseRoutineB0_00
   1867  3     73E6 CE   0000             ldu   #$0000                     >>
   1868  5+1   73E9 EC   C8 39            ldd   rsv_bgdata_0,u             >>
   1869  2     73EC C4   C0               andb  #256-cell_size             >>
   1870  6     73EE 1F   01               tfr   d,x                        >>
   1871                            
   1872        73F0               ESP_FreeEraseBufferB0
   1873  8     73F0 BD   7732             jsr   BgBufferFree               >>
   1874                            
   1875        73F3               ESP_UnsetOnScreenFlagB0
   1876  6+1   73F3 6F   C8 41            clr   rsv_onscreen_0,u           >>
   1877
   1878        73F6               ESP_NextObjectB0
   1879  5+1   73F6 EE   C8 33            ldu   rsv_priority_prev_obj_0,u
   1880  3     73F9 26   BF               bne   ESP_ProcessEachPriorityLeve>>
   1881  5     73FB 39                    rts
   1882
   1883                           * *******
   1884                           * BUFFER1
   1885                           * *******
   1886                            
   1887        73FC               ESP_ProcessEachPriorityLevelB1
   1888  4+1   73FC A6   C8 42            lda   rsv_priority_1,u
   1889                            
   1890        73FF               ESP_CheckPriorityB1
   1891  2     73FF 81   00               cmpa  #0                         >>
   1892  3     7401 26   35               bne   ESP_NextObjectB1           >>
   1893                            
   1894        7403               ESP_UnsetCheckRefreshB1
   1895  4+1   7403 A6   C8 29            lda   rsv_render_flags,u
   1896  2     7406 84   FE               anda  #:rsv_render_checkrefresh_m>>
   1897  4+1   7408 A7   C8 29            sta   rsv_render_flags,u
   1898                            
   1899        740B               ESP_CheckEraseB1
   1900  2     740B 84   02               anda  #rsv_render_erasesprite_mas>>
   1901  3     740D 27   29               beq   ESP_NextObjectB1
   1902  4+1   740F A6   42               lda   render_flags,u
   1903  2     7411 84   10               anda  #render_fixedoverlay_mask
   1904  3     7413 26   20               bne   ESP_UnsetOnScreenFlagB1
   1905                            
   1906        7415               ESP_CallEraseRoutineB1
   1907  6     7415 FF   7429             stu   ESP_CallEraseRoutineB1_00+1>>
   1908  5+1   7418 AE   C8 47            ldx   rsv_prev_mapping_frame_1,u >>
   1909  4+1   741B A6   06               lda   page_erase_routine,x
   1910  5     741D B7   E7E5             sta   $E7E5                      >>
   1911  5+1   7420 EE   C8 49            ldu   rsv_bgdata_1,u             >>
   1912  7+4   7423 AD   98 07            jsr   [erase_routine,x]          >>
   1913  4+0   7426 31   C4               leay  ,u                         >>
   1914        7428               ESP_CallEraseRoutineB1_00
   1915  3     7428 CE   0000             ldu   #$0000                     >>
   1916  5+1   742B EC   C8 49            ldd   rsv_bgdata_1,u             >>
   1917  2     742E C4   C0               andb  #256-cell_size             >>
   1918  6     7430 1F   01               tfr   d,x                        >>
   1919                            
   1920        7432               ESP_FreeEraseBufferB1
   1921  8     7432 BD   7732             jsr   BgBufferFree               >>
   1922                            
   1923        7435               ESP_UnsetOnScreenFlagB1
   1924  6+1   7435 6F   C8 51            clr   rsv_onscreen_1,u           >>
   1925                            
   1926        7438               ESP_NextObjectB1
   1927  5+1   7438 EE   C8 43            ldu   rsv_priority_prev_obj_1,u
   1928  3     743B 26   BF               bne   ESP_ProcessEachPriorityLeve>>
   1929  5     743D 39                    rts
   1930
   1931                                   INCLUD UNSETDSP
   1932                           * --------------------------------------->>
   1933                           * UnsetDisplayPriority
   1934                           * --------------------
   1935                           * Subroutine to unset sprites in Display >>
   1936                           * Read Lst_Priority_Unset_0/1
   1937                           *
   1938                           * input REG : none
   1939                           * --------------------------------------->>
   1940                            
   1941        743E               UnsetDisplayPriority
   1942
   1943        743E               UDP_Start
   1944  5     743E B6   611A             lda   Glb_Cur_Wrk_Screen_Id      >>
   1945  3     7441 26   6D               bne   UDP_B1
   1946                            
   1947        7443               UDP_B0
   1948  3     7443 8E   64E7             ldx   #Lst_Priority_Unset_0+2
   1949                            
   1950        7446               UDP_CheckEndB0
   1951  7     7446 BC   64E5             cmpx  Lst_Priority_Unset_0       >>
   1952  3     7449 26   07               bne   UDP_CheckPrioPrevB0
   1953                            
   1954        744B               UDP_InitListB0
   1955  3     744B 8E   64E7             ldx   #Lst_Priority_Unset_0+2
   1956  6     744E BF   64E5             stx   Lst_Priority_Unset_0       >>
   1957  5     7451 39                    rts
   1958                            
   1959        7452               UDP_CheckPrioPrevB0
   1960  5+3   7452 EE   81               ldu   ,x++
   1961  5+1   7454 EC   C8 33            ldd   rsv_priority_prev_obj_0,u
   1962  3     7457 26   11               bne   UDP_ChainPrevB0
   1963                            
   1964  4+1   7459 A6   C8 32            lda   rsv_priority_0,u
   1965  2     745C 48                    lsla
   1966  4     745D 108E 64C1             ldy   #Tbl_Priority_First_Entry_0>>
   1967  4+1   7461 31   A6               leay  a,y
   1968  5+1   7463 EC   C8 35            ldd   rsv_priority_next_obj_0,u
   1969  5+0   7466 ED   A4               std   ,y
   1970  3     7468 20   0A               bra   UDP_CheckPrioNextB0
   1971                            
   1972        746A               UDP_ChainPrevB0
   1973  5+1   746A EC   C8 35            ldd   rsv_priority_next_obj_0,u
   1974  6+1   746D 10AE C8 33            ldy   rsv_priority_prev_obj_0,u
   1975  5+1   7471 ED   A8 35            std   rsv_priority_next_obj_0,y
   1976
   1977        7474               UDP_CheckPrioNextB0
   1978  5+1   7474 EC   C8 35            ldd   rsv_priority_next_obj_0,u
   1979  3     7477 26   11               bne   UDP_ChainNextB0
   1980
   1981  4+1   7479 A6   C8 32            lda   rsv_priority_0,u
   1982  2     747C 48                    lsla
   1983  4     747D 108E 64D3             ldy   #Tbl_Priority_Last_Entry_0
   1984  4+1   7481 31   A6               leay  a,y
   1985  5+1   7483 EC   C8 33            ldd   rsv_priority_prev_obj_0,u
   1986  5+0   7486 ED   A4               std   ,y
   1987  3     7488 20   0A               bra   UDP_CheckDeleteB0
   1988                            
   1989        748A               UDP_ChainNextB0
   1990  5+1   748A EC   C8 33            ldd   rsv_priority_prev_obj_0,u
   1991  6+1   748D 10AE C8 35            ldy   rsv_priority_next_obj_0,u
   1992  5+1   7491 ED   A8 33            std   rsv_priority_prev_obj_0,y
   1993                            
   1994        7494               UDP_CheckDeleteB0
   1995  4+1   7494 A6   42               lda   render_flags,u
   1996  2     7496 84   20               anda  #render_todelete_mask
   1997  3     7498 27   0F               beq   UDP_SetNewPrioB0
   1998  4+1   749A A6   C8 41            lda   rsv_onscreen_0,u
   1999  3     749D 26   0A               bne   UDP_SetNewPrioB0
   2000  4+1   749F A6   C8 51            lda   rsv_onscreen_1,u
   2001  3     74A2 26   05               bne   UDP_SetNewPrioB0
   2002  8     74A4 BD   6FC9             jsr   ClearObj
   2003  3     74A7 20   9D               bra   UDP_CheckEndB0
   2004                            
   2005        74A9               UDP_SetNewPrioB0
   2006  4+1   74A9 A6   43               lda   priority,u
   2007  4+1   74AB A7   C8 32            sta   rsv_priority_0,u
   2008  3     74AE 20   96               bra   UDP_CheckEndB0
   2009
   2010        74B0               UDP_B1
   2011  3     74B0 8E   653B             ldx   #Lst_Priority_Unset_1+2
   2012                            
   2013        74B3               UDP_CheckEndB1
   2014  7     74B3 BC   6539             cmpx  Lst_Priority_Unset_1       >>
   2015  3     74B6 26   07               bne   UDP_CheckPrioPrevB1
   2016                            
   2017        74B8               UDP_InitListB1
   2018  3     74B8 8E   653B             ldx   #Lst_Priority_Unset_1+2
   2019  6     74BB BF   6539             stx   Lst_Priority_Unset_1       >>
   2020  5     74BE 39                    rts
   2021                            
   2022        74BF               UDP_CheckPrioPrevB1
   2023  5+3   74BF EE   81               ldu   ,x++
   2024  5+1   74C1 EC   C8 43            ldd   rsv_priority_prev_obj_1,u
   2025  3     74C4 26   11               bne   UDP_ChainPrevB1
   2026                            
   2027  4+1   74C6 A6   C8 42            lda   rsv_priority_1,u
   2028  2     74C9 48                    lsla
   2029  4     74CA 108E 6515             ldy   #Tbl_Priority_First_Entry_1>>
   2030  4+1   74CE 31   A6               leay  a,y
   2031  5+1   74D0 EC   C8 45            ldd   rsv_priority_next_obj_1,u
   2032  5+0   74D3 ED   A4               std   ,y
   2033  3     74D5 20   0A               bra   UDP_CheckPrioNextB1
   2034                            
   2035        74D7               UDP_ChainPrevB1
   2036  5+1   74D7 EC   C8 45            ldd   rsv_priority_next_obj_1,u
   2037  6+1   74DA 10AE C8 43            ldy   rsv_priority_prev_obj_1,u
   2038  5+1   74DE ED   A8 45            std   rsv_priority_next_obj_1,y
   2039
   2040        74E1               UDP_CheckPrioNextB1
   2041  5+1   74E1 EC   C8 45            ldd   rsv_priority_next_obj_1,u
   2042  3     74E4 26   11               bne   UDP_ChainNextB1
   2043
   2044  4+1   74E6 A6   C8 42            lda   rsv_priority_1,u
   2045  2     74E9 48                    lsla
   2046  4     74EA 108E 6527             ldy   #Tbl_Priority_Last_Entry_1
   2047  4+1   74EE 31   A6               leay  a,y
   2048  5+1   74F0 EC   C8 43            ldd   rsv_priority_prev_obj_1,u
   2049  5+0   74F3 ED   A4               std   ,y
   2050  3     74F5 20   0A               bra   UDP_CheckDeleteB1
   2051                            
   2052        74F7               UDP_ChainNextB1
   2053  5+1   74F7 EC   C8 43            ldd   rsv_priority_prev_obj_1,u
   2054  6+1   74FA 10AE C8 45            ldy   rsv_priority_next_obj_1,u
   2055  5+1   74FE ED   A8 43            std   rsv_priority_prev_obj_1,y
   2056                            
   2057        7501               UDP_CheckDeleteB1
   2058  4+1   7501 A6   42               lda   render_flags,u
   2059  2     7503 84   20               anda  #render_todelete_mask
   2060  3     7505 27   0F               beq   UDP_SetNewPrioB1
   2061  4+1   7507 A6   C8 41            lda   rsv_onscreen_0,u
   2062  3     750A 26   0A               bne   UDP_SetNewPrioB1
   2063  4+1   750C A6   C8 51            lda   rsv_onscreen_1,u
   2064  3     750F 26   05               bne   UDP_SetNewPrioB1
   2065  8     7511 BD   6FC9             jsr   ClearObj
   2066  3     7514 20   9D               bra   UDP_CheckEndB1
   2067                            
   2068        7516               UDP_SetNewPrioB1
   2069  4+1   7516 A6   43               lda   priority,u
   2070  4+1   7518 A7   C8 42            sta   rsv_priority_1,u
   2071  3     751B 20   96               bra   UDP_CheckEndB1
   2072
   2073                                   INCLUD DRAWSPR
   2074                           * --------------------------------------->>
   2075                           * DrawSprites
   2076                           * ------------
   2077                           * Subroutine to draw sprites on screen
   2078                           * Read Display Priority Structure (back t>>
   2079                           * priority: 0 - unregistred
   2080                           * priority: 1 - register non moving overl>>
   2081                           * priority; 2-8 - register moving sprite >>
   2082                           *
   2083                           * input REG : none
   2084                           * --------------------------------------->>
   2085                            
   2086        751D               DrawSprites
   2087
   2088        751D               DRS_Start
   2089  5     751D B6   611A             lda   Glb_Cur_Wrk_Screen_Id      >>
   2090  3     7520 26   41               bne   DRS_P8B1
   2091                            
   2092        7522               DRS_P8B0
   2093  6     7522 BE   64D1             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2094  3     7525 27   03               beq   DRS_P7B0
   2095  8     7527 BD   75A4             jsr   DRS_ProcessEachPriorityLeve>>
   2096        752A               DRS_P7B0
   2097  6     752A BE   64CF             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2098  3     752D 27   03               beq   DRS_P6B0
   2099  8     752F BD   75A4             jsr   DRS_ProcessEachPriorityLeve>>
   2100        7532               DRS_P6B0
   2101  6     7532 BE   64CD             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2102  3     7535 27   03               beq   DRS_P5B0
   2103  8     7537 BD   75A4             jsr   DRS_ProcessEachPriorityLeve>>
   2104        753A               DRS_P5B0
   2105  6     753A BE   64CB             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2106  3     753D 27   03               beq   DRS_P4B0
   2107  8     753F BD   75A4             jsr   DRS_ProcessEachPriorityLeve>>
   2108        7542               DRS_P4B0
   2109  6     7542 BE   64C9             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2110  3     7545 27   03               beq   DRS_P3B0
   2111  8     7547 BD   75A4             jsr   DRS_ProcessEachPriorityLeve>>
   2112        754A               DRS_P3B0
   2113  6     754A BE   64C7             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2114  3     754D 27   03               beq   DRS_P2B0
   2115  8     754F BD   75A4             jsr   DRS_ProcessEachPriorityLeve>>
   2116        7552               DRS_P2B0
   2117  6     7552 BE   64C5             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2118  3     7555 27   03               beq   DRS_P1B0
   2119  8     7557 BD   75A4             jsr   DRS_ProcessEachPriorityLeve>>
   2120        755A               DRS_P1B0
   2121  6     755A BE   64C3             ldx   DPS_buffer_0+buf_Tbl_Priori>>
   2122  3     755D 27   03               beq   DRS_rtsB0
   2123  8     755F BD   75A4             jsr   DRS_ProcessEachPriorityLeve>>
   2124        7562               DRS_rtsB0
   2125  5     7562 39                    rts
   2126                            
   2127        7563               DRS_P8B1
   2128  6     7563 BE   6525             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2129  3     7566 27   03               beq   DRS_P7B1
   2130  8     7568 BD   7658             jsr   DRS_ProcessEachPriorityLeve>>
   2131        756B               DRS_P7B1
   2132  6     756B BE   6523             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2133  3     756E 27   03               beq   DRS_P6B1
   2134  8     7570 BD   7658             jsr   DRS_ProcessEachPriorityLeve>>
   2135        7573               DRS_P6B1
   2136  6     7573 BE   6521             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2137  3     7576 27   03               beq   DRS_P5B1
   2138  8     7578 BD   7658             jsr   DRS_ProcessEachPriorityLeve>>
   2139        757B               DRS_P5B1
   2140  6     757B BE   651F             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2141  3     757E 27   03               beq   DRS_P4B1
   2142  8     7580 BD   7658             jsr   DRS_ProcessEachPriorityLeve>>
   2143        7583               DRS_P4B1
   2144  6     7583 BE   651D             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2145  3     7586 27   03               beq   DRS_P3B1
   2146  8     7588 BD   7658             jsr   DRS_ProcessEachPriorityLeve>>
   2147        758B               DRS_P3B1
   2148  6     758B BE   651B             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2149  3     758E 27   03               beq   DRS_P2B1
   2150  8     7590 BD   7658             jsr   DRS_ProcessEachPriorityLeve>>
   2151        7593               DRS_P2B1
   2152  6     7593 BE   6519             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2153  3     7596 27   03               beq   DRS_P1B1
   2154  8     7598 BD   7658             jsr   DRS_ProcessEachPriorityLeve>>
   2155        759B               DRS_P1B1
   2156  6     759B BE   6517             ldx   DPS_buffer_1+buf_Tbl_Priori>>
   2157  3     759E 27   03               beq   DRS_rtsB1
   2158  8     75A0 BD   7658             jsr   DRS_ProcessEachPriorityLeve>>
   2159        75A3               DRS_rtsB1
   2160  5     75A3 39                    rts
   2161
   2162        75A4               DRS_ProcessEachPriorityLevelB0
   2163  4+1   75A4 A6   88 29            lda   rsv_render_flags,x
   2164  2     75A7 84   04               anda  #rsv_render_displaysprite_m>>
   2165  3     75A9 27   54               beq   DRS_NextObjectB0
   2166  4+1   75AB A6   88 41            lda   rsv_onscreen_0,x
   2167  3     75AE 26   4F               bne   DRS_NextObjectB0
   2168  4+1   75B0 A6   02               lda   render_flags,x
   2169  2     75B2 84   10               anda  #render_fixedoverlay_mask
   2170  3     75B4 26   51               bne   DRS_DrawWithoutBackupB0
   2171  5+1   75B6 EE   88 2C            ldu   rsv_curr_mapping_frame,x
   2172  4+1   75B9 A6   49               lda   erase_nb_cell,u
   2173  8     75BB BD   76DF             jsr   BgBufferAlloc              >>
   2174  5     75BE 108C 0000             cmpy  #$0000                     >>
   2175  3     75C2 27   3B               beq   DRS_NextObjectB0           >>
   2176  5+1   75C4 EC   88 12            ldd   xy_pixel,x                 >>
   2177  5+1   75C7 ED   88 3B            std   rsv_prev_xy_pixel_0,x      >>
   2178  8     75CA BD   762B             jsr   DRS_XYToAddress
   2179  5+1   75CD EE   88 2C            ldu   rsv_curr_mapping_frame,x   >>
   2180  5+1   75D0 EF   88 37            stu   rsv_prev_mapping_frame_0,x >>
   2181  4+1   75D3 A6   40               lda   page_bckdraw_routine,u
   2182  5     75D5 B7   E7E5             sta   $E7E5                      >>
   2183  6     75D8 BF   75E9             stx   DRS_dyn3B0+1               >>
   2184  5+1   75DB AE   41               ldx   bckdraw_routine,u
   2185  4+0   75DD 33   A4               leau  ,y                         >>
   2186  4     75DF 108E 6121             ldy   #Glb_Sprite_Screen_Pos_Part>>
   2187  6     75E3 FC   611F             ldd   Glb_Sprite_Screen_Pos_PartA>>
   2188  7+0   75E6 AD   84               jsr   ,x                         >>
   2189        75E8               DRS_dyn3B0
   2190  3     75E8 8E   0000             ldx   #$0000                     >>
   2191  5+1   75EB EF   88 39            stu   rsv_bgdata_0,x             >>
   2192  5+1   75EE EC   88 2E            ldd   rsv_xy1_pixel,x            >>
   2193  5+1   75F1 ED   88 3D            std   rsv_prev_xy1_pixel_0,x     >>
   2194  5+1   75F4 EC   88 30            ldd   rsv_xy2_pixel,x            >>
   2195  5+1   75F7 ED   88 3F            std   rsv_prev_xy2_pixel_0,x     >>
   2196  2     75FA 86   01               lda   #$01
   2197  4+1   75FC A7   88 41            sta   rsv_onscreen_0,x           >>
   2198        75FF               DRS_NextObjectB0
   2199  5+1   75FF AE   88 35            ldx   rsv_priority_next_obj_0,x
   2200  6     7602 1026 FF9E             lbne  DRS_ProcessEachPriorityLeve>>
   2201  5     7606 39                    rts
   2202                            
   2203        7607               DRS_DrawWithoutBackupB0
   2204  5+1   7607 EC   88 12            ldd   xy_pixel,x                 >>
   2205  5+1   760A ED   88 3B            std   rsv_prev_xy_pixel_0,x      >>
   2206  8     760D BD   762B             jsr   DRS_XYToAddress
   2207  5+1   7610 EE   88 2C            ldu   rsv_curr_mapping_frame,x   >>
   2208  5+1   7613 EF   88 37            stu   rsv_prev_mapping_frame_0,x >>
   2209  4+1   7616 A6   43               lda   page_draw_routine,u
   2210  5     7618 B7   E7E5             sta   $E7E5                      >>
   2211  6     761B BF   75E9             stx   DRS_dyn3B0+1               >>
   2212  5+1   761E AE   44               ldx   draw_routine,u
   2213  4     7620 108E 6121             ldy   #Glb_Sprite_Screen_Pos_Part>>
   2214  6     7624 FC   611F             ldd   Glb_Sprite_Screen_Pos_PartA>>
   2215  7+0   7627 AD   84               jsr   ,x                         >>
   2216  3     7629 20   BD               bra   DRS_dyn3B0
   2217
   2218                           *****************************************>>
   2219                           * x_pixel and y_pixel coordinate system
   2220                           * x coordinates:
   2221                           *    - off-screen left 00-2F (0-47)
   2222                           *    - on screen 30-CF (48-207)
   2223                           *    - off-screen right D0-FF (208-255)
   2224                           *
   2225                           * y coordinates:
   2226                           *    - off-screen top 00-1B (0-27)
   2227                           *    - on screen 1C-E3 (28-227)
   2228                           *    - off-screen bottom E4-FF (228-255)
   2229                           *****************************************>>
   2230
   2231        762B               DRS_XYToAddress
   2232  2     762B 80   30               suba  #$30
   2233  2     762D C0   1C               subb  #$1C
   2234  2     762F 44                    lsra                             >>
   2235  2     7630 44                    lsra                             >>
   2236  3     7631 25   12               bcs   DRS_XYToAddressRAMBFirst   >>
   2237        7633               DRS_XYToAddressRAMAFirst
   2238  5     7633 B7   763B             sta   DRS_dyn1+2
   2239  2     7636 86   28               lda   #$28                       >>
   2240  11    7638 3D                    mul
   2241        7639               DRS_dyn1
   2242  4     7639 C3   0000             addd  #$0000                     >>
   2243  6     763C FD   611F             std   Glb_Sprite_Screen_Pos_PartA>>
   2244  2     763F 8A   20               ora   #$20                       >>
   2245  6     7641 FD   6121             std   Glb_Sprite_Screen_Pos_PartB>>
   2246  5     7644 39                    rts
   2247        7645               DRS_XYToAddressRAMBFirst
   2248  5     7645 B7   764D             sta   DRS_dyn2+2
   2249  2     7648 86   28               lda   #$28                       >>
   2250  11    764A 3D                    mul
   2251        764B               DRS_dyn2
   2252  4     764B C3   2000             addd  #$2000                     >>
   2253  6     764E FD   611F             std   Glb_Sprite_Screen_Pos_PartA>>
   2254  4     7651 83   1FFF             subd  #$1FFF
   2255  6     7654 FD   6121             std   Glb_Sprite_Screen_Pos_PartB>>
   2256  5     7657 39                    rts
   2257                            
   2258        7658               DRS_ProcessEachPriorityLevelB1
   2259  4+1   7658 A6   88 29            lda   rsv_render_flags,x
   2260  2     765B 84   04               anda  #rsv_render_displaysprite_m>>
   2261  3     765D 27   54               beq   DRS_NextObjectB1
   2262  4+1   765F A6   88 51            lda   rsv_onscreen_1,x
   2263  3     7662 26   4F               bne   DRS_NextObjectB1
   2264  4+1   7664 A6   02               lda   render_flags,x
   2265  2     7666 84   10               anda  #render_fixedoverlay_mask
   2266  3     7668 26   51               bne   DRS_DrawWithoutBackupB1
   2267  5+1   766A EE   88 2C            ldu   rsv_curr_mapping_frame,x
   2268  4+1   766D A6   49               lda   erase_nb_cell,u
   2269  8     766F BD   76DF             jsr   BgBufferAlloc              >>
   2270  5     7672 108C 0000             cmpy  #$0000                     >>
   2271  3     7676 27   3B               beq   DRS_NextObjectB1           >>
   2272  5+1   7678 EC   88 12            ldd   xy_pixel,x                 >>
   2273  5+1   767B ED   88 4B            std   rsv_prev_xy_pixel_1,x      >>
   2274  8     767E BD   762B             jsr   DRS_XYToAddress
   2275  5+1   7681 EE   88 2C            ldu   rsv_curr_mapping_frame,x   >>
   2276  5+1   7684 EF   88 47            stu   rsv_prev_mapping_frame_1,x >>
   2277  4+1   7687 A6   40               lda   page_bckdraw_routine,u
   2278  5     7689 B7   E7E5             sta   $E7E5                      >>
   2279  6     768C BF   769D             stx   DRS_dyn3B1+1               >>
   2280  5+1   768F AE   41               ldx   bckdraw_routine,u
   2281  4+0   7691 33   A4               leau  ,y                         >>
   2282  4     7693 108E 6121             ldy   #Glb_Sprite_Screen_Pos_Part>>
   2283  6     7697 FC   611F             ldd   Glb_Sprite_Screen_Pos_PartA>>
   2284  7+0   769A AD   84               jsr   ,x                         >>
   2285        769C               DRS_dyn3B1
   2286  3     769C 8E   0000             ldx   #$0000                     >>
   2287  5+1   769F EF   88 49            stu   rsv_bgdata_1,x             >>
   2288  5+1   76A2 EC   88 2E            ldd   rsv_xy1_pixel,x            >>
   2289  5+1   76A5 ED   88 4D            std   rsv_prev_xy1_pixel_1,x     >>
   2290  5+1   76A8 EC   88 30            ldd   rsv_xy2_pixel,x            >>
   2291  5+1   76AB ED   88 4F            std   rsv_prev_xy2_pixel_1,x     >>
   2292  2     76AE 86   01               lda   #$01
   2293  4+1   76B0 A7   88 51            sta   rsv_onscreen_1,x           >>
   2294        76B3               DRS_NextObjectB1
   2295  5+1   76B3 AE   88 45            ldx   rsv_priority_next_obj_1,x
   2296  6     76B6 1026 FF9E             lbne  DRS_ProcessEachPriorityLeve>>
   2297  5     76BA 39                    rts
   2298                            
   2299        76BB               DRS_DrawWithoutBackupB1
   2300  5+1   76BB EC   88 12            ldd   xy_pixel,x                 >>
   2301  5+1   76BE ED   88 4B            std   rsv_prev_xy_pixel_1,x      >>
   2302  8     76C1 BD   762B             jsr   DRS_XYToAddress
   2303  5+1   76C4 EE   88 2C            ldu   rsv_curr_mapping_frame,x   >>
   2304  5+1   76C7 EF   88 47            stu   rsv_prev_mapping_frame_1,x >>
   2305  4+1   76CA A6   43               lda   page_draw_routine,u
   2306  5     76CC B7   E7E5             sta   $E7E5                      >>
   2307  6     76CF BF   769D             stx   DRS_dyn3B1+1               >>
   2308  5+1   76D2 AE   44               ldx   draw_routine,u
   2309  4     76D4 108E 6121             ldy   #Glb_Sprite_Screen_Pos_Part>>
   2310  6     76D8 FC   611F             ldd   Glb_Sprite_Screen_Pos_PartA>>
   2311  7+0   76DB AD   84               jsr   ,x                         >>
   2312  3     76DD 20   BD               bra   DRS_dyn3B1
   2313
   2314                                   INCLUD BGBALLOC
   2315                           * --------------------------------------->>
   2316                           * BgBufferAlloc
   2317                           * -------------
   2318                           * Subroutine to allocate memory into back>>
   2319                           *
   2320                           * input  REG : [a] number of requested ce>>
   2321                           * output REG : [y] cell_end or 0000 if no>>
   2322                           * --------------------------------------->>
   2323
   2324        76DF               BgBufferAlloc
   2325  5+3   76DF 34   14               pshs  b,x
   2326  5     76E1 F6   611A             ldb   Glb_Cur_Wrk_Screen_Id      >>
   2327  3     76E4 26   09               bne   BBA1                       >>
   2328                            
   2329        76E6               BBA0
   2330  3     76E6 8E   6123             ldx   #Lst_FreeCellFirstEntry_0  >>
   2331  7     76E9 10BE 6123             ldy   Lst_FreeCellFirstEntry_0   >>
   2332  3     76ED 20   07               bra   BBA_Next
   2333                            
   2334        76EF               BBA1
   2335  3     76EF 8E   62F2             ldx   #Lst_FreeCellFirstEntry_1  >>
   2336  7     76F2 10BE 62F2             ldy   Lst_FreeCellFirstEntry_1   >>
   2337                            
   2338        76F6               BBA_Next
   2339  3     76F6 27   38               beq   BBA_rts                    >>
   2340  4+1   76F8 A1   20               cmpa  nb_cells,y                 >>
   2341  3     76FA 27   09               beq   BBA_FitCell                >>
   2342  3     76FC 23   12               bls   BBA_DivideCell             >>
   2343  4+1   76FE 30   25               leax  next_entry,y               >>
   2344  6+1   7700 10AE 25               ldy   next_entry,y               >>
   2345  3     7703 20   F1               bra   BBA_Next
   2346                            
   2347        7705               BBA_FitCell
   2348  5+1   7705 EC   25               ldd   next_entry,y
   2349  5+0   7707 ED   84               std   ,x                         >>
   2350  6+1   7709 6F   20               clr   nb_cells,y                 >>
   2351  6+1   770B 10AE 23               ldy   cell_end,y                 >>
   2352  3     770E 20   20               bra   BBA_rts
   2353                            
   2354        7710               BBA_DivideCell
   2355  5     7710 B7   7716             sta   BBA_dyn+1
   2356  4+1   7713 E6   20               ldb   nb_cells,y
   2357        7715               BBA_dyn
   2358  2     7715 C0   00               subb  #$00                       >>
   2359  4+1   7717 E7   20               stb   nb_cells,y                 >>
   2360                            
   2361  2     7719 C6   40               ldb   #cell_size
   2362  11    771B 3D                    mul
   2363  2     771C 88   FF               eora  #$FF                       >>
   2364  2     771E C8   FF               eorb  #$FF                       >>
   2365  4     7720 C3   0001             addd  #$01
   2366  5+1   7723 AE   23               ldx   cell_end,y
   2367  6     7725 BF   772E             stx   cell_end_return+2
   2368  4+4   7728 30   8B               leax  d,x                        >>
   2369  5+1   772A AF   23               stx   cell_end,y                 >>
   2370        772C               cell_end_return
   2371  4     772C 108E 0000             ldy   #$0000
   2372        7730               BBA_rts
   2373  5+5   7730 35   94               puls  b,x,pc
   2374
   2375                                   INCLUD BGBFREE
   2376                           * --------------------------------------->>
   2377                           * BgBufferFree
   2378                           * ------------
   2379                           * Subroutine to free memory from backgrou>>
   2380                           *
   2381                           * input  REG : [x] cell_start
   2382                           *              [y] cell_end
   2383                           * output REG : none
   2384                           * --------------------------------------->>
   2385
   2386        7732               BgBufferFree
   2387  5+4   7732 34   46               pshs  d,u
   2388  3     7734 CC   0000             ldd   #$0000
   2389  6     7737 FD   7794             std   BBF_SetNewEntryNextentry+1 >>
   2390  5     773A F6   611A             ldb   Glb_Cur_Wrk_Screen_Id      >>
   2391  3     773D 26   16               bne   BBF1                       >>
   2392                            
   2393        773F               BBF0
   2394  5+1   773F EE   C8 37            ldu   rsv_prev_mapping_frame_0,u >>
   2395  4+1   7742 A6   49               lda   erase_nb_cell,u            >>
   2396  3     7744 CE   6123             ldu   #Lst_FreeCellFirstEntry_0
   2397  6     7747 FF   7799             stu   BBF_SetNewEntryPrevLink+1  >>
   2398  3     774A CE   6125             ldu   #Lst_FreeCell_0            >>
   2399  6     774D FF   7782             stu   BBF_AddNewEntryAtEnd+1     >>
   2400  6     7750 FE   6123             ldu   Lst_FreeCellFirstEntry_0   >>
   2401  3     7753 20   14               bra   BBF_Next
   2402                            
   2403        7755               BBF1
   2404  5+1   7755 EE   C8 47            ldu   rsv_prev_mapping_frame_1,u
   2405  4+1   7758 A6   49               lda   erase_nb_cell,u
   2406  3     775A CE   62F2             ldu   #Lst_FreeCellFirstEntry_1
   2407  6     775D FF   7799             stu   BBF_SetNewEntryPrevLink+1
   2408  3     7760 CE   62F4             ldu   #Lst_FreeCell_1
   2409  6     7763 FF   7782             stu   BBF_AddNewEntryAtEnd+1
   2410  6     7766 FE   62F2             ldu   Lst_FreeCellFirstEntry_1
   2411                            
   2412        7769               BBF_Next
   2413  3     7769 27   16               beq   BBF_AddNewEntryAtEnd       >>
   2414  7+1   776B 10AC 41               cmpy  cell_start,u               >>
   2415  3     776E 27   2D               beq   BBF_ExpandAtStart          >>
   2416  3     7770 22   4C               bhi   BBF_ExpandAtEnd            >>
   2417  5+1   7772 EE   45               ldu   next_entry,u               >>
   2418  6     7774 1F   30               tfr   u,d
   2419  4     7776 C3   0005             addd  #next_entry                >>
   2420  6     7779 FD   7799             std   BBF_SetNewEntryPrevLink+1
   2421  3     777C 20   EB               bra   BBF_Next
   2422
   2423        777E               BBF_AddNewEntry
   2424  6     777E FF   7794             stu   BBF_SetNewEntryNextentry+1
   2425        7781               BBF_AddNewEntryAtEnd
   2426  3     7781 CE   0000             ldu   #$0000                     >>
   2427        7784               BBF_FindFreeSlot
   2428  4+1   7784 E6   40               ldb   nb_cells,u                 >>
   2429  3     7786 27   04               beq   BBF_SetNewEntry            >>
   2430  4+1   7788 33   47               leau  entry_size,u               >>
   2431  3     778A 20   F8               bra   BBF_FindFreeSlot           >>
   2432        778C               BBF_SetNewEntry
   2433  4+1   778C A7   40               sta   nb_cells,u                 >>
   2434  5+1   778E AF   41               stx   cell_start,u               >>
   2435  6+1   7790 10AF 43               sty   cell_end,u                 >>
   2436        7793               BBF_SetNewEntryNextentry
   2437  3     7793 8E   0000             ldx   #$0000                     >>
   2438  5+1   7796 AF   45               stx   next_entry,u               >>
   2439        7798               BBF_SetNewEntryPrevLink
   2440  6     7798 FF   FFFF             stu   $FFFF                      >>
   2441  3     779B 20   2C               bra   BBF_rts
   2442
   2443        779D               BBF_ExpandAtStart
   2444  5+1   779D AF   41               stx   cell_start,u
   2445  4+1   779F AB   40               adda  nb_cells,u
   2446  4+1   77A1 A7   40               sta   nb_cells,u
   2447  6+1   77A3 10AE 45               ldy   next_entry,u
   2448  3     77A6 27   21               beq   BBF_rts
   2449        77A8               BBF_Join
   2450  6+1   77A8 AC   23               cmpx  cell_end,y
   2451  3     77AA 26   1D               bne   BBF_rts
   2452  5+1   77AC EC   21               ldd   cell_start,y
   2453  5+1   77AE ED   41               std   cell_start,u
   2454  4+1   77B0 A6   20               lda   nb_cells,y
   2455  4+1   77B2 AB   40               adda  nb_cells,u
   2456  4+1   77B4 A7   40               sta   nb_cells,u
   2457  6+1   77B6 6F   20               clr   nb_cells,y                 >>
   2458  5+1   77B8 EC   25               ldd   next_entry,y
   2459  5+1   77BA ED   45               std   next_entry,u               >>
   2460  3     77BC 20   0B               bra   BBF_rts
   2461
   2462        77BE               BBF_ExpandAtEnd
   2463  6+1   77BE AC   43               cmpx  cell_end,u
   2464  3     77C0 26   BC               bne   BBF_AddNewEntry
   2465  6+1   77C2 10AF 43               sty   cell_end,u
   2466  4+1   77C5 AB   40               adda  nb_cells,u
   2467  4+1   77C7 A7   40               sta   nb_cells,u
   2468                            
   2469        77C9               BBF_rts
   2470  5+6   77C9 35   C6               puls  d,u,pc
   2471
    158                            
    159                           * =======================================>>
    160                           * Level Specific Generated Data
    161                           * IMG and ANI should be in first position>>
    162                           * =======================================>>
   2472                                   INCLUD IMAGEIDX
   2473                           * Generated Code
   2474
   2475        77CB               Img_star_4 *@globals
   2476        77CB 05 DD A9 00           fcb   $05,$DD,$A9,$00,$00,$00,$05>>
               77CF 00 00 05 DD
               77D3 18 01 FB F5
               77D7 0A 16
   2477        77D9               Img_star_3 *@globals
   2478        77D9 05 DC 18 00           fcb   $05,$DC,$18,$00,$00,$00,$05>>
               77DD 00 00 05 DB
               77E1 BE 01 FD F9
               77E5 06 0E
   2479        77E7               Img_sonicHand *@globals
   2480        77E7 06 D9 E5 00           fcb   $06,$D9,$E5,$00,$00,$00,$05>>
               77EB 00 00 05 D9
               77EF F2 05 04 01
               77F3 0E 2A
   2481        77F5               Img_star_2 *@globals
   2482        77F5 05 D9 83 00           fcb   $05,$D9,$83,$00,$00,$00,$05>>
               77F9 00 00 05 D9
               77FD 59 01 FF FD
               7801 02 06
   2483        7803               Img_star_1 *@globals
   2484        7803 05 D9 08 00           fcb   $05,$D9,$08,$00,$00,$00,$05>>
               7807 00 00 05 D8
               780B E8 01 FF FE
               780F 02 04
   2485        7811               Img_emblemBack08 *@globals
   2486        7811 00 00 00 05           fcb   $00,$00,$00,$05,$D4,$C9,$00>>
               7815 D4 C9 00 00
               7819 00 00 10 DD
               781D 1F 27
   2487        781F               Img_emblemBack07 *@globals
   2488        781F 00 00 00 05           fcb   $00,$00,$00,$05,$D1,$3E,$00>>
               7823 D1 3E 00 00
               7827 00 00 10 BD
               782B 1F 1F
   2489        782D               Img_emblemBack09 *@globals
   2490        782D 00 00 00 05           fcb   $00,$00,$00,$05,$CD,$C7,$00>>
               7831 CD C7 00 00
               7835 00 00 30 B3
               7839 0F 38
   2491        783B               Img_emblemBack04 *@globals
   2492        783B 00 00 00 05           fcb   $00,$00,$00,$05,$CC,$31,$00>>
               783F CC 31 00 00
               7843 00 00 EE B3
               7847 24 09
   2493        7849               Img_emblemBack03 *@globals
   2494        7849 00 00 00 05           fcb   $00,$00,$00,$05,$C8,$9A,$00>>
               784D C8 9A 00 00
               7851 00 00 D0 DD
               7855 1F 26
   2495        7857               Img_emblemBack06 *@globals
   2496        7857 00 00 00 05           fcb   $00,$00,$00,$05,$C6,$D0,$00>>
               785B C6 D0 00 00
               785F 00 00 F0 DD
               7863 1F 1C
   2497        7865               Img_emblemBack05 *@globals
   2498        7865 00 00 00 05           fcb   $00,$00,$00,$05,$C3,$03,$00>>
               7869 C3 03 00 00
               786D 00 00 F0 BD
               7871 1F 1F
   2499        7873               Img_tails_5 *@globals
   2500        7873 07 C8 FC 00           fcb   $07,$C8,$FC,$00,$00,$00,$05>>
               7877 00 00 05 BE
               787B 8F 10 03 0D
               787F 2B 3F
   2501        7881               Img_tails_4 *@globals
   2502        7881 07 BA BF 00           fcb   $07,$BA,$BF,$00,$00,$00,$05>>
               7885 00 00 05 BA
               7889 52 10 03 12
               788D 2C 3A
   2503        788F               Img_tails_3 *@globals
   2504        788F 07 AC 63 00           fcb   $07,$AC,$63,$00,$00,$00,$05>>
               7893 00 00 05 B5
               7897 EB 0F 04 11
               789B 2B 3C
   2505        789D               Img_tails_2 *@globals
   2506        789D 07 A0 00 00           fcb   $07,$A0,$00,$00,$00,$00,$05>>
               78A1 00 00 05 B2
               78A5 3E 0F 02 16
               78A9 2B 37
   2507        78AB               Img_tails_1 *@globals
   2508        78AB 06 CE 73 00           fcb   $06,$CE,$73,$00,$00,$00,$05>>
               78AF 00 00 05 AE
               78B3 D4 0D 0C 11
               78B7 1B 3F
   2509        78B9               Img_tailsHand *@globals
   2510        78B9 05 AD 42 00           fcb   $05,$AD,$42,$00,$00,$00,$05>>
               78BD 00 00 05 AC
               78C1 A4 01 04 06
               78C5 07 12
   2511        78C7               Img_sonic_1 *@globals
   2512        78C7 08 CF 2B 00           fcb   $08,$CF,$2B,$00,$00,$00,$06>>
               78CB 00 00 06 CA
               78CF 48 13 02 0E
               78D3 23 42
   2513        78D5               Img_sonic_2 *@globals
   2514        78D5 08 BE A3 00           fcb   $08,$BE,$A3,$00,$00,$00,$06>>
               78D9 00 00 06 C5
               78DD 9F 17 03 0D
               78E1 24 53
   2515        78E3               Img_emblemBack02 *@globals
   2516        78E3 00 00 00 05           fcb   $00,$00,$00,$05,$A9,$10,$00>>
               78E7 A9 10 00 00
               78EB 00 00 D0 BD
               78EF 1F 1F
   2517        78F1               Img_emblemBack01 *@globals
   2518        78F1 00 00 00 05           fcb   $00,$00,$00,$05,$A5,$A1,$00>>
               78F5 A5 A1 00 00
               78F9 00 00 C0 B3
               78FD 0F 37
   2519        78FF               Img_sonic_5 *@globals
   2520        78FF 08 AF 8E 00           fcb   $08,$AF,$8E,$00,$00,$00,$06>>
               7903 00 00 06 C1
               7907 5C 14 0C 0A
               790B 23 49
   2521        790D               Img_sonic_3 *@globals
   2522        790D 08 A0 00 00           fcb   $08,$A0,$00,$00,$00,$00,$06>>
               7911 00 00 06 BC
               7915 FC 14 0B 0D
               7919 24 46
   2523        791B               Img_sonic_4 *@globals
   2524        791B 09 A0 00 00           fcb   $09,$A0,$00,$00,$00,$00,$06>>
               791F 00 00 06 B8
               7923 CB 14 0C 0A
               7927 23 49
   2525        7929               Img_emblemFront07 *@globals
   2526        7929 00 00 00 05           fcb   $00,$00,$00,$05,$A3,$99,$00>>
               792D A3 99 00 00
               7931 00 00 F7 3D
               7935 12 12
   2527        7937               Img_emblemFront08 *@globals
   2528        7937 00 00 00 06           fcb   $00,$00,$00,$06,$B4,$2D,$00>>
               793B B4 2D 00 00
               793F 00 00 10 1D
               7943 26 25
   2529        7945               Img_emblemFront05 *@globals
   2530        7945 00 00 00 06           fcb   $00,$00,$00,$06,$AF,$9E,$00>>
               7949 AF 9E 00 00
               794D 00 00 C9 1D
               7951 26 25
   2531        7953               Img_emblemFront06 *@globals
   2532        7953 00 00 00 06           fcb   $00,$00,$00,$06,$AB,$6E,$00>>
               7957 AB 6E 00 00
               795B 00 00 F0 1D
               795F 1F 1F
   2533        7961               Img_emblemFront03 *@globals
   2534        7961 00 00 00 06           fcb   $00,$00,$00,$06,$A7,$7B,$00>>
               7965 A7 7B 00 00
               7969 00 00 F0 FD
               796D 1F 1F
   2535        796F               Img_emblemFront04 *@globals
   2536        796F 00 00 00 05           fcb   $00,$00,$00,$05,$A0,$AC,$00>>
               7973 A0 AC 00 00
               7977 00 00 10 FD
               797B 1B 1F
   2537        797D               Img_emblemFront01 *@globals
   2538        797D 00 00 00 05           fcb   $00,$00,$00,$05,$A0,$00,$00>>
               7981 A0 00 00 00
               7985 00 00 E1 F9
               7989 3D 03
   2539        798B               Img_emblemFront02 *@globals
   2540        798B 00 00 00 06           fcb   $00,$00,$00,$06,$A4,$A3,$00>>
               798F A4 A3 00 00
               7993 00 00 D5 FD
               7997 1A 1F
   2541
   2542                                   INCLUD ANIMSCPT
   2543                           * Generated Code
   2544
   2545        7999 03                    fcb   3
   2546        799A               Ani_smallStar *@globals
   2547        799A 77F5                  fdb   Img_star_2
   2548        799C 7803                  fdb   Img_star_1
   2549        799E FF                    fcb   _resetAnim
   2550        799F 01                    fcb   1
   2551        79A0               Ani_largeStar *@globals
   2552        79A0 7803                  fdb   Img_star_1
   2553        79A2 77F5                  fdb   Img_star_2
   2554        79A4 77D9                  fdb   Img_star_3
   2555        79A6 77F5                  fdb   Img_star_2
   2556        79A8 7803                  fdb   Img_star_1
   2557        79AA FA                    fcb   _nextSubRoutine
   2558        79AB 01                    fcb   1
   2559        79AC               Ani_tails *@globals
   2560        79AC 78AB                  fdb   Img_tails_1
   2561        79AE 789D                  fdb   Img_tails_2
   2562        79B0 788F                  fdb   Img_tails_3
   2563        79B2 7881                  fdb   Img_tails_4
   2564        79B4 7873                  fdb   Img_tails_5
   2565        79B6 FA                    fcb   _nextSubRoutine
   2566        79B7 01                    fcb   1
   2567        79B8               Ani_sonic *@globals
   2568        79B8 78C7                  fdb   Img_sonic_1
   2569        79BA 78D5                  fdb   Img_sonic_2
   2570        79BC 790D                  fdb   Img_sonic_3
   2571        79BE 791B                  fdb   Img_sonic_4
   2572        79C0 FA                    fcb   _nextSubRoutine
   2573
   2574                                   INCLUD OBJINDEX
   2575                           * Generated Code
   2576
   2577        79C1               Obj_Index_Page
   2578        79C1 00                    fcb   $00
   2579        79C2 05                    fcb   $05
   2580        79C3 06                    fcb   $06
   2581        79C4 00                    fcb   $00
   2582        79C5 00                    fcb   $00
   2583        79C6 00                    fcb   $00
   2584        79C7 00                    fcb   $00
   2585        79C8 00                    fcb   $00
   2586        79C9 00                    fcb   $00
   2587        79CA 00                    fcb   $00
   2588        79CB 00                    fcb   $00
   2589        79CC 00                    fcb   $00
   2590        79CD 00                    fcb   $00
   2591        79CE 00                    fcb   $00
   2592        79CF 00                    fcb   $00
   2593        79D0 00                    fcb   $00
   2594        79D1 00                    fcb   $00
   2595        79D2 00                    fcb   $00
   2596        79D3 00                    fcb   $00
   2597        79D4 00                    fcb   $00
   2598        79D5 00                    fcb   $00
   2599        79D6 00                    fcb   $00
   2600        79D7 00                    fcb   $00
   2601        79D8 00                    fcb   $00
   2602        79D9 00                    fcb   $00
   2603        79DA 00                    fcb   $00
   2604        79DB 00                    fcb   $00
   2605        79DC 00                    fcb   $00
   2606        79DD 00                    fcb   $00
   2607        79DE 00                    fcb   $00
   2608        79DF 00                    fcb   $00
   2609        79E0 00                    fcb   $00
   2610        79E1 00                    fcb   $00
   2611        79E2 00                    fcb   $00
   2612        79E3 00                    fcb   $00
   2613        79E4 00                    fcb   $00
   2614        79E5 00                    fcb   $00
   2615        79E6 00                    fcb   $00
   2616        79E7 00                    fcb   $00
   2617        79E8 00                    fcb   $00
   2618        79E9 00                    fcb   $00
   2619        79EA 00                    fcb   $00
   2620        79EB 00                    fcb   $00
   2621        79EC 00                    fcb   $00
   2622        79ED 00                    fcb   $00
   2623        79EE 00                    fcb   $00
   2624        79EF 00                    fcb   $00
   2625        79F0 00                    fcb   $00
   2626        79F1 00                    fcb   $00
   2627        79F2 00                    fcb   $00
   2628        79F3 00                    fcb   $00
   2629        79F4 00                    fcb   $00
   2630        79F5 00                    fcb   $00
   2631        79F6 00                    fcb   $00
   2632        79F7 00                    fcb   $00
   2633        79F8 00                    fcb   $00
   2634        79F9 00                    fcb   $00
   2635        79FA 00                    fcb   $00
   2636        79FB 00                    fcb   $00
   2637        79FC 00                    fcb   $00
   2638        79FD 00                    fcb   $00
   2639        79FE 00                    fcb   $00
   2640        79FF 00                    fcb   $00
   2641        7A00 00                    fcb   $00
   2642        7A01 00                    fcb   $00
   2643        7A02 00                    fcb   $00
   2644        7A03 00                    fcb   $00
   2645        7A04 00                    fcb   $00
   2646        7A05 00                    fcb   $00
   2647        7A06 00                    fcb   $00
   2648        7A07 00                    fcb   $00
   2649        7A08 00                    fcb   $00
   2650        7A09 00                    fcb   $00
   2651        7A0A 00                    fcb   $00
   2652        7A0B 00                    fcb   $00
   2653        7A0C 00                    fcb   $00
   2654        7A0D 00                    fcb   $00
   2655        7A0E 00                    fcb   $00
   2656        7A0F 00                    fcb   $00
   2657        7A10 00                    fcb   $00
   2658        7A11 00                    fcb   $00
   2659        7A12 00                    fcb   $00
   2660        7A13 00                    fcb   $00
   2661        7A14 00                    fcb   $00
   2662        7A15 00                    fcb   $00
   2663        7A16 00                    fcb   $00
   2664        7A17 00                    fcb   $00
   2665        7A18 00                    fcb   $00
   2666        7A19 00                    fcb   $00
   2667        7A1A 00                    fcb   $00
   2668        7A1B 00                    fcb   $00
   2669        7A1C 00                    fcb   $00
   2670        7A1D 00                    fcb   $00
   2671        7A1E 00                    fcb   $00
   2672        7A1F 00                    fcb   $00
   2673        7A20 00                    fcb   $00
   2674        7A21 00                    fcb   $00
   2675        7A22 00                    fcb   $00
   2676        7A23 00                    fcb   $00
   2677        7A24 00                    fcb   $00
   2678        7A25 00                    fcb   $00
   2679        7A26 00                    fcb   $00
   2680        7A27 00                    fcb   $00
   2681        7A28 00                    fcb   $00
   2682        7A29 00                    fcb   $00
   2683        7A2A 00                    fcb   $00
   2684        7A2B 00                    fcb   $00
   2685        7A2C 00                    fcb   $00
   2686        7A2D 00                    fcb   $00
   2687        7A2E 00                    fcb   $00
   2688        7A2F 00                    fcb   $00
   2689        7A30 00                    fcb   $00
   2690        7A31 00                    fcb   $00
   2691        7A32 00                    fcb   $00
   2692        7A33 00                    fcb   $00
   2693        7A34 00                    fcb   $00
   2694        7A35 00                    fcb   $00
   2695        7A36 00                    fcb   $00
   2696        7A37 00                    fcb   $00
   2697        7A38 00                    fcb   $00
   2698        7A39 00                    fcb   $00
   2699        7A3A 00                    fcb   $00
   2700        7A3B 00                    fcb   $00
   2701        7A3C 00                    fcb   $00
   2702        7A3D 00                    fcb   $00
   2703        7A3E 00                    fcb   $00
   2704        7A3F 00                    fcb   $00
   2705        7A40 00                    fcb   $00
   2706        7A41 00                    fcb   $00
   2707        7A42 00                    fcb   $00
   2708        7A43 00                    fcb   $00
   2709        7A44 00                    fcb   $00
   2710        7A45 00                    fcb   $00
   2711        7A46 00                    fcb   $00
   2712        7A47 00                    fcb   $00
   2713        7A48 00                    fcb   $00
   2714        7A49 00                    fcb   $00
   2715        7A4A 00                    fcb   $00
   2716        7A4B 00                    fcb   $00
   2717        7A4C 00                    fcb   $00
   2718        7A4D 00                    fcb   $00
   2719        7A4E 00                    fcb   $00
   2720        7A4F 00                    fcb   $00
   2721        7A50 00                    fcb   $00
   2722        7A51 00                    fcb   $00
   2723        7A52 00                    fcb   $00
   2724        7A53 00                    fcb   $00
   2725        7A54 00                    fcb   $00
   2726        7A55 00                    fcb   $00
   2727        7A56 00                    fcb   $00
   2728        7A57 00                    fcb   $00
   2729        7A58 00                    fcb   $00
   2730        7A59 00                    fcb   $00
   2731        7A5A 00                    fcb   $00
   2732        7A5B 00                    fcb   $00
   2733        7A5C 00                    fcb   $00
   2734        7A5D 00                    fcb   $00
   2735        7A5E 00                    fcb   $00
   2736        7A5F 00                    fcb   $00
   2737        7A60 00                    fcb   $00
   2738        7A61 00                    fcb   $00
   2739        7A62 00                    fcb   $00
   2740        7A63 00                    fcb   $00
   2741        7A64 00                    fcb   $00
   2742        7A65 00                    fcb   $00
   2743        7A66 00                    fcb   $00
   2744        7A67 00                    fcb   $00
   2745        7A68 00                    fcb   $00
   2746        7A69 00                    fcb   $00
   2747        7A6A 00                    fcb   $00
   2748        7A6B 00                    fcb   $00
   2749        7A6C 00                    fcb   $00
   2750        7A6D 00                    fcb   $00
   2751        7A6E 00                    fcb   $00
   2752        7A6F 00                    fcb   $00
   2753        7A70 00                    fcb   $00
   2754        7A71 00                    fcb   $00
   2755        7A72 00                    fcb   $00
   2756        7A73 00                    fcb   $00
   2757        7A74 00                    fcb   $00
   2758        7A75 00                    fcb   $00
   2759        7A76 00                    fcb   $00
   2760        7A77 00                    fcb   $00
   2761        7A78 00                    fcb   $00
   2762        7A79 00                    fcb   $00
   2763        7A7A 00                    fcb   $00
   2764        7A7B 00                    fcb   $00
   2765        7A7C 00                    fcb   $00
   2766        7A7D 00                    fcb   $00
   2767        7A7E 00                    fcb   $00
   2768        7A7F 00                    fcb   $00
   2769        7A80 00                    fcb   $00
   2770        7A81 00                    fcb   $00
   2771        7A82 00                    fcb   $00
   2772        7A83 00                    fcb   $00
   2773        7A84 00                    fcb   $00
   2774        7A85 00                    fcb   $00
   2775        7A86 00                    fcb   $00
   2776        7A87 00                    fcb   $00
   2777        7A88 00                    fcb   $00
   2778        7A89 00                    fcb   $00
   2779        7A8A 00                    fcb   $00
   2780        7A8B 00                    fcb   $00
   2781        7A8C 00                    fcb   $00
   2782        7A8D 00                    fcb   $00
   2783        7A8E 00                    fcb   $00
   2784        7A8F 00                    fcb   $00
   2785        7A90 00                    fcb   $00
   2786        7A91 00                    fcb   $00
   2787        7A92 00                    fcb   $00
   2788        7A93 00                    fcb   $00
   2789        7A94 00                    fcb   $00
   2790        7A95 00                    fcb   $00
   2791        7A96 00                    fcb   $00
   2792        7A97 00                    fcb   $00
   2793        7A98 00                    fcb   $00
   2794        7A99 00                    fcb   $00
   2795        7A9A 00                    fcb   $00
   2796        7A9B 00                    fcb   $00
   2797        7A9C 00                    fcb   $00
   2798        7A9D 00                    fcb   $00
   2799        7A9E 00                    fcb   $00
   2800        7A9F 00                    fcb   $00
   2801        7AA0 00                    fcb   $00
   2802        7AA1 00                    fcb   $00
   2803        7AA2 00                    fcb   $00
   2804        7AA3 00                    fcb   $00
   2805        7AA4 00                    fcb   $00
   2806        7AA5 00                    fcb   $00
   2807        7AA6 00                    fcb   $00
   2808        7AA7 00                    fcb   $00
   2809        7AA8 00                    fcb   $00
   2810        7AA9 00                    fcb   $00
   2811        7AAA 00                    fcb   $00
   2812        7AAB 00                    fcb   $00
   2813        7AAC 00                    fcb   $00
   2814        7AAD 00                    fcb   $00
   2815        7AAE 00                    fcb   $00
   2816        7AAF 00                    fcb   $00
   2817        7AB0 00                    fcb   $00
   2818        7AB1 00                    fcb   $00
   2819        7AB2 00                    fcb   $00
   2820        7AB3 00                    fcb   $00
   2821        7AB4 00                    fcb   $00
   2822        7AB5 00                    fcb   $00
   2823        7AB6 00                    fcb   $00
   2824        7AB7 00                    fcb   $00
   2825        7AB8 00                    fcb   $00
   2826        7AB9 00                    fcb   $00
   2827        7ABA 00                    fcb   $00
   2828        7ABB 00                    fcb   $00
   2829        7ABC 00                    fcb   $00
   2830        7ABD 00                    fcb   $00
   2831        7ABE 00                    fcb   $00
   2832        7ABF 00                    fcb   $00
   2833        7AC0 00                    fcb   $00
   2834        7AC1               Obj_Index_Address
   2835        7AC1 00 00                 fcb   $00,$00
   2836        7AC3 DF 5A                 fcb   $DF,$5A
   2837        7AC5 A0 00                 fcb   $A0,$00
   2838        7AC7 00 00                 fcb   $00,$00
   2839        7AC9 00 00                 fcb   $00,$00
   2840        7ACB 00 00                 fcb   $00,$00
   2841        7ACD 00 00                 fcb   $00,$00
   2842        7ACF 00 00                 fcb   $00,$00
   2843        7AD1 00 00                 fcb   $00,$00
   2844        7AD3 00 00                 fcb   $00,$00
   2845        7AD5 00 00                 fcb   $00,$00
   2846        7AD7 00 00                 fcb   $00,$00
   2847        7AD9 00 00                 fcb   $00,$00
   2848        7ADB 00 00                 fcb   $00,$00
   2849        7ADD 00 00                 fcb   $00,$00
   2850        7ADF 00 00                 fcb   $00,$00
   2851        7AE1 00 00                 fcb   $00,$00
   2852        7AE3 00 00                 fcb   $00,$00
   2853        7AE5 00 00                 fcb   $00,$00
   2854        7AE7 00 00                 fcb   $00,$00
   2855        7AE9 00 00                 fcb   $00,$00
   2856        7AEB 00 00                 fcb   $00,$00
   2857        7AED 00 00                 fcb   $00,$00
   2858        7AEF 00 00                 fcb   $00,$00
   2859        7AF1 00 00                 fcb   $00,$00
   2860        7AF3 00 00                 fcb   $00,$00
   2861        7AF5 00 00                 fcb   $00,$00
   2862        7AF7 00 00                 fcb   $00,$00
   2863        7AF9 00 00                 fcb   $00,$00
   2864        7AFB 00 00                 fcb   $00,$00
   2865        7AFD 00 00                 fcb   $00,$00
   2866        7AFF 00 00                 fcb   $00,$00
   2867        7B01 00 00                 fcb   $00,$00
   2868        7B03 00 00                 fcb   $00,$00
   2869        7B05 00 00                 fcb   $00,$00
   2870        7B07 00 00                 fcb   $00,$00
   2871        7B09 00 00                 fcb   $00,$00
   2872        7B0B 00 00                 fcb   $00,$00
   2873        7B0D 00 00                 fcb   $00,$00
   2874        7B0F 00 00                 fcb   $00,$00
   2875        7B11 00 00                 fcb   $00,$00
   2876        7B13 00 00                 fcb   $00,$00
   2877        7B15 00 00                 fcb   $00,$00
   2878        7B17 00 00                 fcb   $00,$00
   2879        7B19 00 00                 fcb   $00,$00
   2880        7B1B 00 00                 fcb   $00,$00
   2881        7B1D 00 00                 fcb   $00,$00
   2882        7B1F 00 00                 fcb   $00,$00
   2883        7B21 00 00                 fcb   $00,$00
   2884        7B23 00 00                 fcb   $00,$00
   2885        7B25 00 00                 fcb   $00,$00
   2886        7B27 00 00                 fcb   $00,$00
   2887        7B29 00 00                 fcb   $00,$00
   2888        7B2B 00 00                 fcb   $00,$00
   2889        7B2D 00 00                 fcb   $00,$00
   2890        7B2F 00 00                 fcb   $00,$00
   2891        7B31 00 00                 fcb   $00,$00
   2892        7B33 00 00                 fcb   $00,$00
   2893        7B35 00 00                 fcb   $00,$00
   2894        7B37 00 00                 fcb   $00,$00
   2895        7B39 00 00                 fcb   $00,$00
   2896        7B3B 00 00                 fcb   $00,$00
   2897        7B3D 00 00                 fcb   $00,$00
   2898        7B3F 00 00                 fcb   $00,$00
   2899        7B41 00 00                 fcb   $00,$00
   2900        7B43 00 00                 fcb   $00,$00
   2901        7B45 00 00                 fcb   $00,$00
   2902        7B47 00 00                 fcb   $00,$00
   2903        7B49 00 00                 fcb   $00,$00
   2904        7B4B 00 00                 fcb   $00,$00
   2905        7B4D 00 00                 fcb   $00,$00
   2906        7B4F 00 00                 fcb   $00,$00
   2907        7B51 00 00                 fcb   $00,$00
   2908        7B53 00 00                 fcb   $00,$00
   2909        7B55 00 00                 fcb   $00,$00
   2910        7B57 00 00                 fcb   $00,$00
   2911        7B59 00 00                 fcb   $00,$00
   2912        7B5B 00 00                 fcb   $00,$00
   2913        7B5D 00 00                 fcb   $00,$00
   2914        7B5F 00 00                 fcb   $00,$00
   2915        7B61 00 00                 fcb   $00,$00
   2916        7B63 00 00                 fcb   $00,$00
   2917        7B65 00 00                 fcb   $00,$00
   2918        7B67 00 00                 fcb   $00,$00
   2919        7B69 00 00                 fcb   $00,$00
   2920        7B6B 00 00                 fcb   $00,$00
   2921        7B6D 00 00                 fcb   $00,$00
   2922        7B6F 00 00                 fcb   $00,$00
   2923        7B71 00 00                 fcb   $00,$00
   2924        7B73 00 00                 fcb   $00,$00
   2925        7B75 00 00                 fcb   $00,$00
   2926        7B77 00 00                 fcb   $00,$00
   2927        7B79 00 00                 fcb   $00,$00
   2928        7B7B 00 00                 fcb   $00,$00
   2929        7B7D 00 00                 fcb   $00,$00
   2930        7B7F 00 00                 fcb   $00,$00
   2931        7B81 00 00                 fcb   $00,$00
   2932        7B83 00 00                 fcb   $00,$00
   2933        7B85 00 00                 fcb   $00,$00
   2934        7B87 00 00                 fcb   $00,$00
   2935        7B89 00 00                 fcb   $00,$00
   2936        7B8B 00 00                 fcb   $00,$00
   2937        7B8D 00 00                 fcb   $00,$00
   2938        7B8F 00 00                 fcb   $00,$00
   2939        7B91 00 00                 fcb   $00,$00
   2940        7B93 00 00                 fcb   $00,$00
   2941        7B95 00 00                 fcb   $00,$00
   2942        7B97 00 00                 fcb   $00,$00
   2943        7B99 00 00                 fcb   $00,$00
   2944        7B9B 00 00                 fcb   $00,$00
   2945        7B9D 00 00                 fcb   $00,$00
   2946        7B9F 00 00                 fcb   $00,$00
   2947        7BA1 00 00                 fcb   $00,$00
   2948        7BA3 00 00                 fcb   $00,$00
   2949        7BA5 00 00                 fcb   $00,$00
   2950        7BA7 00 00                 fcb   $00,$00
   2951        7BA9 00 00                 fcb   $00,$00
   2952        7BAB 00 00                 fcb   $00,$00
   2953        7BAD 00 00                 fcb   $00,$00
   2954        7BAF 00 00                 fcb   $00,$00
   2955        7BB1 00 00                 fcb   $00,$00
   2956        7BB3 00 00                 fcb   $00,$00
   2957        7BB5 00 00                 fcb   $00,$00
   2958        7BB7 00 00                 fcb   $00,$00
   2959        7BB9 00 00                 fcb   $00,$00
   2960        7BBB 00 00                 fcb   $00,$00
   2961        7BBD 00 00                 fcb   $00,$00
   2962        7BBF 00 00                 fcb   $00,$00
   2963        7BC1 00 00                 fcb   $00,$00
   2964        7BC3 00 00                 fcb   $00,$00
   2965        7BC5 00 00                 fcb   $00,$00
   2966        7BC7 00 00                 fcb   $00,$00
   2967        7BC9 00 00                 fcb   $00,$00
   2968        7BCB 00 00                 fcb   $00,$00
   2969        7BCD 00 00                 fcb   $00,$00
   2970        7BCF 00 00                 fcb   $00,$00
   2971        7BD1 00 00                 fcb   $00,$00
   2972        7BD3 00 00                 fcb   $00,$00
   2973        7BD5 00 00                 fcb   $00,$00
   2974        7BD7 00 00                 fcb   $00,$00
   2975        7BD9 00 00                 fcb   $00,$00
   2976        7BDB 00 00                 fcb   $00,$00
   2977        7BDD 00 00                 fcb   $00,$00
   2978        7BDF 00 00                 fcb   $00,$00
   2979        7BE1 00 00                 fcb   $00,$00
   2980        7BE3 00 00                 fcb   $00,$00
   2981        7BE5 00 00                 fcb   $00,$00
   2982        7BE7 00 00                 fcb   $00,$00
   2983        7BE9 00 00                 fcb   $00,$00
   2984        7BEB 00 00                 fcb   $00,$00
   2985        7BED 00 00                 fcb   $00,$00
   2986        7BEF 00 00                 fcb   $00,$00
   2987        7BF1 00 00                 fcb   $00,$00
   2988        7BF3 00 00                 fcb   $00,$00
   2989        7BF5 00 00                 fcb   $00,$00
   2990        7BF7 00 00                 fcb   $00,$00
   2991        7BF9 00 00                 fcb   $00,$00
   2992        7BFB 00 00                 fcb   $00,$00
   2993        7BFD 00 00                 fcb   $00,$00
   2994        7BFF 00 00                 fcb   $00,$00
   2995        7C01 00 00                 fcb   $00,$00
   2996        7C03 00 00                 fcb   $00,$00
   2997        7C05 00 00                 fcb   $00,$00
   2998        7C07 00 00                 fcb   $00,$00
   2999        7C09 00 00                 fcb   $00,$00
   3000        7C0B 00 00                 fcb   $00,$00
   3001        7C0D 00 00                 fcb   $00,$00
   3002        7C0F 00 00                 fcb   $00,$00
   3003        7C11 00 00                 fcb   $00,$00
   3004        7C13 00 00                 fcb   $00,$00
   3005        7C15 00 00                 fcb   $00,$00
   3006        7C17 00 00                 fcb   $00,$00
   3007        7C19 00 00                 fcb   $00,$00
   3008        7C1B 00 00                 fcb   $00,$00
   3009        7C1D 00 00                 fcb   $00,$00
   3010        7C1F 00 00                 fcb   $00,$00
   3011        7C21 00 00                 fcb   $00,$00
   3012        7C23 00 00                 fcb   $00,$00
   3013        7C25 00 00                 fcb   $00,$00
   3014        7C27 00 00                 fcb   $00,$00
   3015        7C29 00 00                 fcb   $00,$00
   3016        7C2B 00 00                 fcb   $00,$00
   3017        7C2D 00 00                 fcb   $00,$00
   3018        7C2F 00 00                 fcb   $00,$00
   3019        7C31 00 00                 fcb   $00,$00
   3020        7C33 00 00                 fcb   $00,$00
   3021        7C35 00 00                 fcb   $00,$00
   3022        7C37 00 00                 fcb   $00,$00
   3023        7C39 00 00                 fcb   $00,$00
   3024        7C3B 00 00                 fcb   $00,$00
   3025        7C3D 00 00                 fcb   $00,$00
   3026        7C3F 00 00                 fcb   $00,$00
   3027        7C41 00 00                 fcb   $00,$00
   3028        7C43 00 00                 fcb   $00,$00
   3029        7C45 00 00                 fcb   $00,$00
   3030        7C47 00 00                 fcb   $00,$00
   3031        7C49 00 00                 fcb   $00,$00
   3032        7C4B 00 00                 fcb   $00,$00
   3033        7C4D 00 00                 fcb   $00,$00
   3034        7C4F 00 00                 fcb   $00,$00
   3035        7C51 00 00                 fcb   $00,$00
   3036        7C53 00 00                 fcb   $00,$00
   3037        7C55 00 00                 fcb   $00,$00
   3038        7C57 00 00                 fcb   $00,$00
   3039        7C59 00 00                 fcb   $00,$00
   3040        7C5B 00 00                 fcb   $00,$00
   3041        7C5D 00 00                 fcb   $00,$00
   3042        7C5F 00 00                 fcb   $00,$00
   3043        7C61 00 00                 fcb   $00,$00
   3044        7C63 00 00                 fcb   $00,$00
   3045        7C65 00 00                 fcb   $00,$00
   3046        7C67 00 00                 fcb   $00,$00
   3047        7C69 00 00                 fcb   $00,$00
   3048        7C6B 00 00                 fcb   $00,$00
   3049        7C6D 00 00                 fcb   $00,$00
   3050        7C6F 00 00                 fcb   $00,$00
   3051        7C71 00 00                 fcb   $00,$00
   3052        7C73 00 00                 fcb   $00,$00
   3053        7C75 00 00                 fcb   $00,$00
   3054        7C77 00 00                 fcb   $00,$00
   3055        7C79 00 00                 fcb   $00,$00
   3056        7C7B 00 00                 fcb   $00,$00
   3057        7C7D 00 00                 fcb   $00,$00
   3058        7C7F 00 00                 fcb   $00,$00
   3059        7C81 00 00                 fcb   $00,$00
   3060        7C83 00 00                 fcb   $00,$00
   3061        7C85 00 00                 fcb   $00,$00
   3062        7C87 00 00                 fcb   $00,$00
   3063        7C89 00 00                 fcb   $00,$00
   3064        7C8B 00 00                 fcb   $00,$00
   3065        7C8D 00 00                 fcb   $00,$00
   3066        7C8F 00 00                 fcb   $00,$00
   3067        7C91 00 00                 fcb   $00,$00
   3068        7C93 00 00                 fcb   $00,$00
   3069        7C95 00 00                 fcb   $00,$00
   3070        7C97 00 00                 fcb   $00,$00
   3071        7C99 00 00                 fcb   $00,$00
   3072        7C9B 00 00                 fcb   $00,$00
   3073        7C9D 00 00                 fcb   $00,$00
   3074        7C9F 00 00                 fcb   $00,$00
   3075        7CA1 00 00                 fcb   $00,$00
   3076        7CA3 00 00                 fcb   $00,$00
   3077        7CA5 00 00                 fcb   $00,$00
   3078        7CA7 00 00                 fcb   $00,$00
   3079        7CA9 00 00                 fcb   $00,$00
   3080        7CAB 00 00                 fcb   $00,$00
   3081        7CAD 00 00                 fcb   $00,$00
   3082        7CAF 00 00                 fcb   $00,$00
   3083        7CB1 00 00                 fcb   $00,$00
   3084        7CB3 00 00                 fcb   $00,$00
   3085        7CB5 00 00                 fcb   $00,$00
   3086        7CB7 00 00                 fcb   $00,$00
   3087        7CB9 00 00                 fcb   $00,$00
   3088        7CBB 00 00                 fcb   $00,$00
   3089        7CBD 00 00                 fcb   $00,$00
   3090        7CBF 00 00                 fcb   $00,$00
   3091
   3092                                   INCLUD LOADACT
   3093                           * Generated Code
   3094
   3095        7CC1               LoadAct
   3096  3     7CC1 CC   7D55             ldd   #Black_palette
   3097  6     7CC4 FD   7D53             std   Ptr_palette
   3098  8     7CC7 BD   7D95             jsr   UpdatePalette
   3099  3     7CCA 8E   1111             ldx   #$1111                   * >>
   3100  2     7CCD C6   62               ldb   #$62                     * >>
   3101  5     7CCF F7   E7E6             stb   $E7E6                    * >>
   3102  8     7CD2 BD   7CFE             jsr   ClearCartMem
   3103  5     7CD5 B6   E7DD             lda   $E7DD                    * >>
   3104  2     7CD8 84   F0               anda  #$F0
   3105  2     7CDA 8B   01               adda  #$01                     * >>
   3106  5     7CDC B7   E7DD             sta   $E7DD
   3107  2     7CDF 84   0F               anda  #$0F
   3108  2     7CE1 8B   80               adda  #$80
   3109  5     7CE3 B7   6D3D             sta   screen_border_color+1    * >>
   3110  8     7CE6 BD   6D24             jsr   WaitVBL
   3111  3     7CE9 8E   1111             ldx   #$1111                   * >>
   3112  2     7CEC C6   63               ldb   #$63                     * >>
   3113  5     7CEE F7   E7E6             stb   $E7E6                    * >>
   3114  8     7CF1 BD   7CFE             jsr   ClearCartMem
   3115  3     7CF4 CC   7D32             ldd   #Pal_TitleScreen
   3116  6     7CF7 FD   7D53             std   Ptr_palette
   3117  8     7CFA BD   7D95             jsr   UpdatePalette
   3118  5     7CFD 39                    rts
   3119
    167                            
    168
   3120                                   INCLUD CLRCARTM
   3121                           *****************************************>>
   3122                           * Clear memory in cardtridge area
   3123                           *****************************************>>
   3124
   3125        7CFE               ClearCartMem
   3126  5+3   7CFE 34   48               pshs  u,dp
   3127  7     7D00 10FF 7D2E             sts   ClearCartMem_3+2
   3128  4     7D04 10CE 4000             lds   #$4000
   3129  4+0   7D08 33   84               leau  ,x
   3130  4+0   7D0A 31   84               leay  ,x
   3131  6     7D0C 1F   10               tfr   x,d
   3132  6     7D0E 1F   8B               tfr   a,dp
   3133        7D10               ClearCartMem_2
   3134  5+9   7D10 34   7E               pshs  u,y,x,dp,b,a
   3135  5+9   7D12 34   7E               pshs  u,y,x,dp,b,a
   3136  5+9   7D14 34   7E               pshs  u,y,x,dp,b,a
   3137  5+9   7D16 34   7E               pshs  u,y,x,dp,b,a
   3138  5+9   7D18 34   7E               pshs  u,y,x,dp,b,a
   3139  5+9   7D1A 34   7E               pshs  u,y,x,dp,b,a
   3140  5+9   7D1C 34   7E               pshs  u,y,x,dp,b,a
   3141  5+9   7D1E 34   7E               pshs  u,y,x,dp,b,a
   3142  5+9   7D20 34   7E               pshs  u,y,x,dp,b,a
   3143  5+9   7D22 34   7E               pshs  u,y,x,dp,b,a
   3144  5     7D24 118C 0004             cmps  #$0004
   3145  3     7D28 26   E6               bne   ClearCartMem_2
   3146  5+4   7D2A 34   60               pshs  u,y
   3147        7D2C               ClearCartMem_3
   3148  4     7D2C 10CE 0000             lds   #$0000
   3149  5+5   7D30 35   C8               puls  dp,u,pc
   3150
   3151
   3152                                   INCLUD PALETTE
   3153                           * Generated Code
   3154
   3155        7D32               Pal_TitleScreen * @globals
   3156        7D32 0FFF                  fdb   $0fff
   3157        7D34 0000                  fdb   $0000
   3158        7D36 0008                  fdb   $0008
   3159        7D38 0002                  fdb   $0002
   3160        7D3A 035D                  fdb   $035d
   3161        7D3C 0016                  fdb   $0016
   3162        7D3E 004F                  fdb   $004f
   3163        7D40 0027                  fdb   $0027
   3164        7D42 00FF                  fdb   $00ff
   3165        7D44 00F3                  fdb   $00f3
   3166        7D46 0FF8                  fdb   $0ff8
   3167        7D48 0C75                  fdb   $0c75
   3168        7D4A 0E53                  fdb   $0e53
   3169        7D4C 0522                  fdb   $0522
   3170        7D4E 0E00                  fdb   $0e00
   3171        7D50 0001                  fdb   $0001
   3172
   3173
   3174                                   INCLUD UPDTPAL
   3175                           *****************************************>>
   3176                           * Mise a jour de la palette
   3177                           *****************************************>>
   3178                           * TODO ajout systeme de refresh pour ne p>>
   3179                           * ou integrer le refresh palette en debut>>
   3180                           * palette doit etre refresh avant le trac>>
   3181
   3182        7D52 00            cpt            fcb   $00
   3183        7D53 7D55          Ptr_palette    fdb   Black_palette  *@glo>>
   3184        7D55               Black_palette  rmb   $20,0          *@glo>>
   3185        7D75               White_palette  rmb   $20,$FF        *@glo>>
   3186
   3187        7D95               UpdatePalette
   3188  6     7D95 BE   7D53            ldx   Ptr_palette
   3189  7     7D98 7F   7D52            clr   cpt                      * c>>
   3190  5     7D9B B6   7D52             lda   cpt                        >>
   3191        7D9E               SetColor
   3192  2     7D9E 48                   asla                              >>
   3193  5     7D9F B7   E7DB            sta   $E7DB                       >>
   3194  5+3   7DA2 EC   81              ldd   ,x++                        >>
   3195  5     7DA4 F7   E7DA            stb   $E7DA                       >>
   3196  5     7DA7 B7   E7DA            sta   $E7DA                    * s>>
   3197  7     7DAA 7C   7D52            inc   cpt                         >>
   3198  5     7DAD B6   7D52            lda   cpt
   3199  2     7DB0 81   10              cmpa  #$10                     * t>>
   3200  3     7DB2 26   EA              bne   SetColor                 * o>>
   3201  5     7DB4 39                    rts
    172
    173

000000 Total Errors

000487 Total Symbols
     1x          Label 6ECF am_ObjectMove_01
     1x          Label 6EE5 am_ObjectMove_02
     3x          Label 6D9B am_RunNextObject
     2x          Label 6D44 am_SwapVideoPage
     2x          Equ   0004 anim
     0x          Label 6E40 AnimateSprite
     1x          Label 6E6F Anim_dyn
     1x          Label 6EBE Anim_End
     1x          Label 6EB5 Anim_End_FA
     1x          Label 6EAA Anim_End_FB
     1x          Label 6E9A Anim_End_FC
     1x          Label 6E92 Anim_End_FD
     1x          Label 6E81 Anim_End_FE
     1x          Label 6E89 Anim_End_FE_dyn
     1x          Label 6E76 Anim_End_FF
     8x          Equ   0008 anim_frame
     4x          Equ   0009 anim_frame_duration
     2x          Label 6E61 Anim_Next
     1x          Label 6E4E Anim_Run
     1x          Label 6E75 Anim_Wait
     0x          Label 79A0 Ani_largeStar
     0x          Label 799A Ani_smallStar
     0x          Label 79B8 Ani_sonic
     0x          Label 79AC Ani_tails
     0x          Label 76E6 BBA0
     1x          Label 76EF BBA1
     1x          Label 7710 BBA_DivideCell
     1x          Label 7715 BBA_dyn
     1x          Label 7705 BBA_FitCell
     2x          Label 76F6 BBA_Next
     2x          Label 7730 BBA_rts
     0x          Label 773F BBF0
     1x          Label 7755 BBF1
     1x          Label 777E BBF_AddNewEntry
     3x          Label 7781 BBF_AddNewEntryAtEnd
     1x          Label 77BE BBF_ExpandAtEnd
     1x          Label 779D BBF_ExpandAtStart
     1x          Label 7784 BBF_FindFreeSlot
     0x          Label 77A8 BBF_Join
     2x          Label 7769 BBF_Next
     4x          Label 77C9 BBF_rts
     1x          Label 778C BBF_SetNewEntry
     2x          Label 7793 BBF_SetNewEntryNextentry
     3x          Label 7798 BBF_SetNewEntryPrevLink
     2x          Equ   0001 bckdraw_routine
     2x          Label 76DF BgBufferAlloc
     2x          Label 7732 BgBufferFree
     2x          Label 7D55 Black_palette
     0x          Equ   0007 buf_bgdata
     2x          Equ   0024 buf_Lst_Priority_Unset
     3x          Equ   000F buf_onscreen
     1x          Equ   0005 buf_prev_mapping_frame
     0x          Equ   000B buf_prev_x1_pixel
     0x          Equ   000D buf_prev_x2_pixel
     0x          Equ   000B buf_prev_xy1_pixel
     0x          Equ   000D buf_prev_xy2_pixel
     1x          Equ   0009 buf_prev_xy_pixel
     0x          Equ   0009 buf_prev_x_pixel
     0x          Equ   000C buf_prev_y1_pixel
     0x          Equ   000E buf_prev_y2_pixel
     0x          Equ   000A buf_prev_y_pixel
     5x          Equ   0000 buf_priority
     4x          Equ   0003 buf_priority_next_obj
     1x          Equ   0001 buf_priority_prev_obj
    33x          Equ   0000 buf_Tbl_Priority_First_Entry
    18x          Equ   0012 buf_Tbl_Priority_Last_Entry
     0x          Equ   0040 c1_button_A_mask
     0x          Equ   0002 c1_button_down_mask
     0x          Equ   0004 c1_button_left_mask
     0x          Equ   0008 c1_button_right_mask
     0x          Equ   0001 c1_button_up_mask
     0x          Equ   0080 c2_button_A_mask
     0x          Equ   0020 c2_button_down_mask
     0x          Equ   0040 c2_button_left_mask
     0x          Equ   0080 c2_button_right_mask
     0x          Equ   0010 c2_button_up_mask
     7x          Equ   0003 cell_end
     1x          Label 772C cell_end_return
     5x          Equ   0040 cell_size
     5x          Equ   0001 cell_start
     4x          Equ   6000 cell_start_adr
     1x          Label 7001 CheckSpritesRefresh
     2x          Label 7CFE ClearCartMem
     1x          Label 7D10 ClearCartMem_2
     1x          Label 7D2C ClearCartMem_3
     4x          Label 6FC9 ClearObj
     1x          Label 6FF3 CLO_1
     1x          Label 6FF7 CLO_2
     4x          Label 7D52 cpt
     0x          Label 70F1 CSR_CheckDelHide
     3x          Label 728C CSR_CheckDraw
     3x          Label 71BB CSR_CheckErase
     0x          Label 7114 CSR_CheckPlayFieldCoord
     0x          Label 70F7 CSR_CheckRefresh
     1x          Label 7183 CSR_CheckVerticalPosition
     1x          Label 715A CSR_DoNotDisplaySprite
     3x          Label 717C CSR_NextObject
     1x          Label 7072 CSR_P1B0
     1x          Label 70E0 CSR_P1B1
     1x          Label 7065 CSR_P2B0
     1x          Label 70D3 CSR_P2B1
     1x          Label 7058 CSR_P3B0
     1x          Label 70C6 CSR_P3B1
     1x          Label 704B CSR_P4B0
     1x          Label 70B9 CSR_P4B1
     1x          Label 703E CSR_P5B0
     1x          Label 70AC CSR_P5B1
     1x          Label 7031 CSR_P6B0
     1x          Label 709F CSR_P6B1
     1x          Label 7024 CSR_P7B0
     1x          Label 7092 CSR_P7B1
     0x          Label 7017 CSR_P8B0
     0x          Label 7085 CSR_P8B1
    21x          Label 70EE CSR_ProcessEachPriorityLevel
     1x          Label 707F CSR_rtsB0
     1x          Label 70ED CSR_rtsB1
     0x          Label 7012 CSR_SetBuffer0
     1x          Label 7080 CSR_SetBuffer1
     3x          Label 72D4 CSR_SetDrawFalse
     0x          Label 72AF CSR_SetDrawTrue
     2x          Label 7284 CSR_SetEraseFalse
     6x          Label 71EA CSR_SetEraseTrue
     1x          Label 72C7 CSR_SetHide
    10x          Label 71B3 CSR_SetOutOfRange
     0x          Label 7001 CSR_Start
     0x          Label 7263 CSR_SubDrawCheckCollision
     4x          Label 725A CSR_SubDrawSearch
     2x          Label 7256 CSR_SubDrawSpriteSearchInit
     0x          Label 720D CSR_SubEraseCheckCollisionB0
     0x          Label 7236 CSR_SubEraseCheckCollisionB1
     4x          Label 7204 CSR_SubEraseSearchB0
     5x          Label 722D CSR_SubEraseSearchB1
     1x          Label 71FB CSR_SubEraseSpriteSearchInit
     0x          Label 7100 CSR_UpdSpriteImageBasedOnMirror
    19x          Label 6FFB cur_priority
     4x          Label 6FFF cur_ptr_sub_obj_draw
     9x          Label 6FFD cur_ptr_sub_obj_erase
     0x          Label 6F07 DeleteObject
     0x          Label 6F01 DeleteObject_x
     1x          Label 6DC7 DisplaySprite
     0x          Label 6DC1 DisplaySprite_x
     0x          Equ   604F dk_destination
     0x          Equ   6049 dk_lecteur
     0x          Equ   604A dk_piste
     0x          Equ   604B dk_pisteL
     0x          Equ   604C dk_secteur
     1x          Label 6F6B DOB_ChainNextB0
     1x          Label 6FB5 DOB_ChainNextB1
     1x          Label 6F4B DOB_ChainPrevB0
     1x          Label 6F8D DOB_ChainPrevB1
     1x          Label 6F55 DOB_CheckPrioNextB0
     1x          Label 6F97 DOB_CheckPrioNextB1
     1x          Label 6F35 DOB_RemoveFromDPSB0
     1x          Label 6F77 DOB_RemoveFromDPSB1
     2x          Label 6FB3 DOB_rts
     1x          Label 6F09 DOB_Start
     2x          Label 6F1E DOB_TestOnscreen1
     0x          Label 6F0E DOB_ToDeleteFlag0
     0x          Label 6F23 DOB_ToDeleteFlag1
     0x          Label 6F14 DOB_Unset0
     0x          Label 6F29 DOB_Unset1
     3x          Label 6D5B Dpad_Held
     0x          Label 6D5D Dpad_Press
    27x          Label 64C1 DPS_buffer_0
    25x          Label 6515 DPS_buffer_1
     1x          Label 751D DrawSprites
     2x          Equ   0004 draw_routine
     1x          Label 7607 DRS_DrawWithoutBackupB0
     1x          Label 76BB DRS_DrawWithoutBackupB1
     1x          Label 7639 DRS_dyn1
     1x          Label 764B DRS_dyn2
     3x          Label 75E8 DRS_dyn3B0
     3x          Label 769C DRS_dyn3B1
     3x          Label 75FF DRS_NextObjectB0
     3x          Label 76B3 DRS_NextObjectB1
     1x          Label 755A DRS_P1B0
     1x          Label 759B DRS_P1B1
     1x          Label 7552 DRS_P2B0
     1x          Label 7593 DRS_P2B1
     1x          Label 754A DRS_P3B0
     1x          Label 758B DRS_P3B1
     1x          Label 7542 DRS_P4B0
     1x          Label 7583 DRS_P4B1
     1x          Label 753A DRS_P5B0
     1x          Label 757B DRS_P5B1
     1x          Label 7532 DRS_P6B0
     1x          Label 7573 DRS_P6B1
     1x          Label 752A DRS_P7B0
     1x          Label 756B DRS_P7B1
     0x          Label 7522 DRS_P8B0
     1x          Label 7563 DRS_P8B1
     9x          Label 75A4 DRS_ProcessEachPriorityLevelB0
     9x          Label 7658 DRS_ProcessEachPriorityLevelB1
     1x          Label 7562 DRS_rtsB0
     1x          Label 75A3 DRS_rtsB1
     0x          Label 751D DRS_Start
     4x          Label 762B DRS_XYToAddress
     0x          Label 7633 DRS_XYToAddressRAMAFirst
     1x          Label 7645 DRS_XYToAddressRAMBFirst
     0x          Label 6DF8 DSP_addFirstNode
     1x          Label 6E08 DSP_addToExistingNode
     1x          Label 6DE4 DSP_BufferPositionned
     1x          Label 6E2D DSP_ChangePriority
     1x          Label 6DF1 DSP_CheckLastEntry
     0x          Label 6DEE DSP_InitPriority
     1x          Label 6E1D DSP_LinkBuffer1
     1x          Label 6E29 DSP_LinkCurWithPrev
     1x          Label 6E06 DSP_rts
     0x          Label 6DD4 DSP_SetBuffer0
     1x          Label 6DDD DSP_SetBuffer1
     1x          Label 6DC9 DSP_Start
     0x          Label 6669 Dynamic_Object_RAM
     2x          Label 6C2D Dynamic_Object_RAM_End
     3x          Equ   0007 entry_size
     1x          Label 72E3 EraseSprites
     4x          Equ   0009 erase_nb_cell
     2x          Equ   0007 erase_routine
     0x          Label 73D3 ESP_CallEraseRoutineB0
     1x          Label 73E6 ESP_CallEraseRoutineB0_00
     0x          Label 7415 ESP_CallEraseRoutineB1
     1x          Label 7428 ESP_CallEraseRoutineB1_00
     0x          Label 73C9 ESP_CheckEraseB0
     0x          Label 740B ESP_CheckEraseB1
     8x          Label 73BD ESP_CheckPriorityB0
     8x          Label 73FF ESP_CheckPriorityB1
     0x          Label 73F0 ESP_FreeEraseBufferB0
     0x          Label 7432 ESP_FreeEraseBufferB1
     2x          Label 73F6 ESP_NextObjectB0
     2x          Label 7438 ESP_NextObjectB1
     0x          Label 72E8 ESP_P1B0
     1x          Label 7351 ESP_P1B1
     1x          Label 72F5 ESP_P2B0
     1x          Label 735E ESP_P2B1
     1x          Label 7302 ESP_P3B0
     1x          Label 736B ESP_P3B1
     1x          Label 730F ESP_P4B0
     1x          Label 7378 ESP_P4B1
     1x          Label 731C ESP_P5B0
     1x          Label 7385 ESP_P5B1
     1x          Label 7329 ESP_P6B0
     1x          Label 7392 ESP_P6B1
     1x          Label 7336 ESP_P7B0
     1x          Label 739F ESP_P7B1
     1x          Label 7343 ESP_P8B0
     1x          Label 73AC ESP_P8B1
     9x          Label 73BA ESP_ProcessEachPriorityLevelB0
     9x          Label 73FC ESP_ProcessEachPriorityLevelB1
     1x          Label 7350 ESP_rtsB0
     1x          Label 73B9 ESP_rtsB1
     0x          Label 72E3 ESP_Start
     0x          Label 73C1 ESP_UnsetCheckRefreshB0
     0x          Label 7403 ESP_UnsetCheckRefreshB1
     1x          Label 73F3 ESP_UnsetOnScreenFlagB0
     1x          Label 7435 ESP_UnsetOnScreenFlagB1
     0x          Equ   001B ext_variables
     1x          Label 6D5C Fire_Held
     0x          Label 6D5E Fire_Press
     1x          Label 611B Glb_Camera_X_Pos
     1x          Label 611D Glb_Camera_Y_Pos
    10x          Label 611A Glb_Cur_Wrk_Screen_Id
     1x          Label 6D23 Glb_MainCharacter_Is_Dead
     6x          Label 611F Glb_Sprite_Screen_Pos_PartA
     6x          Label 6121 Glb_Sprite_Screen_Pos_PartB
     0x          Equ   00FE goBackNFrames
     0x          Equ   00FD goToAnimation
     0x          Equ   0038 gravity
     0x          Equ   0000 id
     1x          Equ   000E image_meta_size
     1x          Equ   000A image_x1_offset_l
     1x          Equ   000C image_x_size_l
     1x          Equ   000B image_y1_offset_l
     1x          Equ   000D image_y_size_l
     0x          Label 78F1 Img_emblemBack01
     0x          Label 78E3 Img_emblemBack02
     0x          Label 7849 Img_emblemBack03
     0x          Label 783B Img_emblemBack04
     0x          Label 7865 Img_emblemBack05
     0x          Label 7857 Img_emblemBack06
     0x          Label 781F Img_emblemBack07
     0x          Label 7811 Img_emblemBack08
     0x          Label 782D Img_emblemBack09
     0x          Label 797D Img_emblemFront01
     0x          Label 798B Img_emblemFront02
     0x          Label 7961 Img_emblemFront03
     0x          Label 796F Img_emblemFront04
     0x          Label 7945 Img_emblemFront05
     0x          Label 7953 Img_emblemFront06
     0x          Label 7929 Img_emblemFront07
     0x          Label 7937 Img_emblemFront08
     0x          Label 77E7 Img_sonicHand
     1x          Label 78C7 Img_sonic_1
     1x          Label 78D5 Img_sonic_2
     1x          Label 790D Img_sonic_3
     1x          Label 791B Img_sonic_4
     0x          Label 78FF Img_sonic_5
     3x          Label 7803 Img_star_1
     3x          Label 77F5 Img_star_2
     1x          Label 77D9 Img_star_3
     0x          Label 77CB Img_star_4
     0x          Label 78B9 Img_tailsHand
     1x          Label 78AB Img_tails_1
     1x          Label 789D Img_tails_2
     1x          Label 788F Img_tails_3
     1x          Label 7881 Img_tails_4
     1x          Label 7873 Img_tails_5
     0x          Label 6D5B Joypads
     1x          Label 6D5B Joypads_Held
     1x          Label 6D5D Joypads_Press
     1x          Label 6103 LevelMainLoop
     1x          Label 6C2D LevelOnly_Object_RAM
     1x          Label 6D23 LevelOnly_Object_RAM_End
     1x          Label 7CC1 LoadAct
     4x          Label 6123 Lst_FreeCellFirstEntry_0
     4x          Label 62F2 Lst_FreeCellFirstEntry_1
     2x          Label 6125 Lst_FreeCell_0
     2x          Label 62F4 Lst_FreeCell_1
     8x          Label 64E5 Lst_Priority_Unset_0
     7x          Label 6539 Lst_Priority_Unset_1
     2x          Equ   000A mapping_frame
     0x          Label 6DBF MarkObjGone
    14x          Equ   0000 nb_cells
     1x          Equ   0012 nb_dynamic_objects
     6x          Equ   0082 nb_free_cells
     0x          Equ   0003 nb_level_objects
     4x          Equ   0017 nb_objects
     4x          Equ   0008 nb_priority_levels
     0x          Equ   0002 nb_reserved_objects
     0x          Equ   00FC nextRoutine
     0x          Equ   00FA nextSubRoutine
     9x          Equ   0005 next_entry
     3x          Equ   0052 next_object
     0x          Label 6EBF ObjectMove
     1x          Label 65C5 Object_RAM
     2x          Label 6D23 Object_RAM_End
     8x          Equ   0052 object_size
     1x          Label 7AC1 Obj_Index_Address
     1x          Label 79C1 Obj_Index_Page
     0x          Label 65C5 Obj_MainCharacter
     0x          Label 6617 Obj_Sidekick
     0x          Label 6C7F Obj_SonicDust
     0x          Label 6CD1 Obj_TailsDust
     0x          Label 6C2D Obj_TailsTails
     2x          Equ   0000 page_bckdraw_routine
     2x          Equ   0003 page_draw_routine
     2x          Equ   0006 page_erase_routine
     1x          Label 7D32 Pal_TitleScreen
     2x          Equ   0006 prev_anim
     6x          Equ   0003 priority
     3x          Label 7D53 Ptr_palette
     1x          Label 6D5F ReadJoypads
     4x          Equ   0010 render_fixedoverlay_mask
    20x          Equ   0002 render_flags
     0x          Equ   0040 render_free2_mask
     0x          Equ   0080 render_free3_mask
     4x          Equ   0008 render_hide_mask
     1x          Equ   0004 render_playfieldcoord_mask
     5x          Equ   0020 render_todelete_mask
     2x          Equ   0001 render_xmirror_mask
     2x          Equ   0002 render_ymirror_mask
     1x          Label 65C5 Reserved_Object_RAM
     1x          Label 6669 Reserved_Object_RAM_End
     0x          Equ   00FF resetAnim
     0x          Equ   00FB resetAnimAndSubRoutine
     2x          Equ   0018 routine
     3x          Equ   0019 routine_secondary
     3x          Equ   0039 rsv_bgdata_0
     3x          Equ   0049 rsv_bgdata_1
     2x          Equ   0032 rsv_buffer_0
     2x          Equ   0042 rsv_buffer_1
    11x          Equ   002C rsv_curr_mapping_frame
     8x          Equ   0041 rsv_onscreen_0
     6x          Equ   0051 rsv_onscreen_1
     0x          Equ   002A rsv_prev_anim
     4x          Equ   0037 rsv_prev_mapping_frame_0
     4x          Equ   0047 rsv_prev_mapping_frame_1
     0x          Equ   003D rsv_prev_x1_pixel_0
     0x          Equ   004D rsv_prev_x1_pixel_1
     0x          Equ   003F rsv_prev_x2_pixel_0
     0x          Equ   004F rsv_prev_x2_pixel_1
     2x          Equ   003D rsv_prev_xy1_pixel_0
     2x          Equ   004D rsv_prev_xy1_pixel_1
     2x          Equ   003F rsv_prev_xy2_pixel_0
     2x          Equ   004F rsv_prev_xy2_pixel_1
     2x          Equ   003B rsv_prev_xy_pixel_0
     2x          Equ   004B rsv_prev_xy_pixel_1
     0x          Equ   003B rsv_prev_x_pixel_0
     0x          Equ   004B rsv_prev_x_pixel_1
     0x          Equ   003E rsv_prev_y1_pixel_0
     0x          Equ   004E rsv_prev_y1_pixel_1
     0x          Equ   0040 rsv_prev_y2_pixel_0
     0x          Equ   0050 rsv_prev_y2_pixel_1
     0x          Equ   003C rsv_prev_y_pixel_0
     0x          Equ   004C rsv_prev_y_pixel_1
     6x          Equ   0032 rsv_priority_0
     6x          Equ   0042 rsv_priority_1
    14x          Equ   0035 rsv_priority_next_obj_0
    14x          Equ   0045 rsv_priority_next_obj_1
    12x          Equ   0033 rsv_priority_prev_obj_0
    12x          Equ   0043 rsv_priority_prev_obj_1
     4x          Equ   0001 rsv_render_checkrefresh_mask
     5x          Equ   0004 rsv_render_displaysprite_mask
     7x          Equ   0002 rsv_render_erasesprite_mask
    28x          Equ   0029 rsv_render_flags
     4x          Equ   0008 rsv_render_outofrange_mask
     4x          Equ   002E rsv_x1_pixel
     5x          Equ   0030 rsv_x2_pixel
     3x          Equ   002E rsv_xy1_pixel
     3x          Equ   0030 rsv_xy2_pixel
     4x          Equ   002F rsv_y1_pixel
     5x          Equ   0031 rsv_y2_pixel
     1x          Label 6D98 RunNextObject
     3x          Label 6D7F RunObject
     1x          Label 6D77 RunObjects
     1x          Label 6DA2 RunObjectsWhenPlayerIsDead
     0x          Label 6D7A RunObjects_01
     0x          Label 6DA1 RunObjects_End
     1x          Label 6D3C screen_border_color
     2x          Equ   00E4 screen_bottom
     1x          Equ   001C screen_top
     1x          Equ   00A0 screen_width
     1x          Label 7D9E SetColor
     0x          Label 6EEA SingleObjLoad2
     1x          Label 6EF4 SingleObjLoad2_01
     2x          Label 6F00 SingleObjLoad2_02
     1x          Equ   001A status
     0x          Equ   0004 status_bit2
     0x          Equ   0080 status_bit7
     0x          Equ   0002 status_inair
     0x          Equ   0010 status_jumpingafterrolling
     0x          Equ   0004 status_jumporroll
     0x          Equ   0020 status_mainchar_pushing
     0x          Equ   0008 status_mainchar_standing
     0x          Equ   0008 status_norgroundnorfall
     0x          Equ   0020 status_pushing
     0x          Equ   0040 status_sidekick_pushing
     0x          Equ   0010 status_sidekick_standing
     0x          Equ   0040 status_underwater
     1x          Equ   0001 status_x_orientation
     1x          Equ   0002 status_y_orientation
     0x          Equ   0001 subtype
     0x          Label 6D37 SwapVideoPage
     2x          Label 64C1 Tbl_Priority_First_Entry_0
     2x          Label 6515 Tbl_Priority_First_Entry_1
     3x          Label 64D3 Tbl_Priority_Last_Entry_0
     2x          Label 6527 Tbl_Priority_Last_Entry_1
     2x          Label 6597 Tbl_Sub_Object_Draw
     3x          Label 6569 Tbl_Sub_Object_Erase
     0x          Label 7443 UDP_B0
     1x          Label 74B0 UDP_B1
     1x          Label 748A UDP_ChainNextB0
     1x          Label 74F7 UDP_ChainNextB1
     1x          Label 746A UDP_ChainPrevB0
     1x          Label 74D7 UDP_ChainPrevB1
     1x          Label 7494 UDP_CheckDeleteB0
     1x          Label 7501 UDP_CheckDeleteB1
     2x          Label 7446 UDP_CheckEndB0
     2x          Label 74B3 UDP_CheckEndB1
     1x          Label 7474 UDP_CheckPrioNextB0
     1x          Label 74E1 UDP_CheckPrioNextB1
     1x          Label 7452 UDP_CheckPrioPrevB0
     1x          Label 74BF UDP_CheckPrioPrevB1
     0x          Label 744B UDP_InitListB0
     0x          Label 74B8 UDP_InitListB1
     3x          Label 74A9 UDP_SetNewPrioB0
     3x          Label 7516 UDP_SetNewPrioB1
     0x          Label 743E UDP_Start
     1x          Label 743E UnsetDisplayPriority
     2x          Label 7D95 UpdatePalette
     2x          Label 6D59 Vint_runcount
     3x          Label 6D24 WaitVBL
     1x          Label 6D29 WaitVBL_01
     0x          Label 7D75 White_palette
     5x          Equ   0012 xy_pixel
     2x          Equ   0012 x_pixel
     5x          Equ   000C x_pos
     0x          Equ   000E x_sub
     2x          Equ   0014 x_vel
     2x          Equ   0013 y_pixel
     5x          Equ   000F y_pos
     0x          Equ   0011 y_sub
     2x          Equ   0016 y_vel
     0x          Equ   00FE _goBackNFrames
     0x          Equ   00FD _goToAnimation
     0x          Equ   00FC _nextRoutine
     3x          Equ   00FA _nextSubRoutine
     1x          Equ   00FF _resetAnim
     0x          Equ   00FB _resetAnimAndSubRoutine

