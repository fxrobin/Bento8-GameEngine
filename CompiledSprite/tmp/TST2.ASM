(main)IMG.ASM
	ORG $A000
DRAW_TST2
	PSHS U,DP
	STS SSAV_TST2+2

	LDS $9F00
	STS ERASE_POS_TST2_1+2
	LDU #ERASE_DATA_TST2_2
	LEAS 42,S

	LDD -40,S
	PSHU D

	LDA -38,S
	PSHU A

	ANDA #$0F
	ORA #$a0
	STA -38,S

	LDD #$ccdd
	STD -40,S

	PULS A,X
	PSHU A,X,S

	LDA #$cd
	LDX #$ccaa
	PSHS A,X


	LDS $9F00+2
	STS ERASE_POS_TST2_2+2
	LDU #ERASE_DATA_TST2_END

	LEAS 41,S

	LDA -38,S
	PSHU A

	LDD -40,S
	PSHU D

	ANDA #$F0
	ORA #$0c
	LDB #$dc
	STD -40,S

	LDA #$cd
	STA -38,S

	PULS A,X
	PSHU A,X,S

	LDA #$cc
	LDX #$ccda
	PSHS A,X

SSAV_TST2
	LDS #$0000
	PULS DP,U,PC * Ajout du PC au PULS pour economiser le RTS (Gain: 3c 1o)

ERASE_TST2
	PSHS U,DP
	STS ERASE_SSAV_TST2+2

ERASE_POS_TST2_1
	LDS #$0000
	LDU #ERASE_DATA_TST2_1

ERASE_CODE_TST2_1
	PULU B,X,S
	PSHS B,X

	PULU A,X
	STA -38,S
	STX -40,S

ERASE_POS_TST2_2
	LDS #$0000
	LDU #ERASE_DATA_TST2_2

ERASE_CODE_TST2_2
	PULU B,X,S
	PSHS B,X

	PULU D
	STD -40,S

	PULU A
	STA -38,S

ERASE_SSAV_TST2
	LDS #$0000
	PULS DP,U,PC * Ajout du PC au PULS pour economiser le RTS (Gain: 3c 1o)

ERASE_DATA_TST2_1
	FDB $0000
	FDB $0000
	FDB $0000
	FDB $0000
ERASE_DATA_TST2_2
	FDB $0000
	FDB $0000
	FDB $0000
	FDB $0000
ERASE_DATA_TST2_END
