(main)IMG.ASM
	ORG $A000
DRAW_TST0
	PSHS U,DP
	STS SSAV_TST0+2

	LDS $9F00
	STS ERASE_POS_TST0_1+2
	LDU #ERASE_DATA_TST0_2

	LDS $9F00+2
	STS ERASE_POS_TST0_2+2
	LDU #ERASE_DATA_TST0_END

	LEAS 1,S

	LDA 3,S
	PSHU A

	ANDA #$0F
	ORA #$c0
	STA 3,S

	PULS A,X
	PSHU A,X,S

	LDA #$dd
	LDX #$ccca
	PSHS A,X

	LEAS 40,S

	LDA 3,S
	PSHU A

	ANDA #$0F
	ORA #$c0
	STA 3,S

	PULS A,X
	PSHU A,X,S

	LDA #$dd
	LDX #$ccca
	PSHS A,X

SSAV_TST0
	LDS #$0000
	PULS DP,U,PC * Ajout du PC au PULS pour economiser le RTS (Gain: 3c 1o)

ERASE_TST0
	PSHS U,DP
	STS ERASE_SSAV_TST0+2

ERASE_POS_TST0_1
	LDS #$0000
	LDU #ERASE_DATA_TST0_1

ERASE_CODE_TST0_1
ERASE_POS_TST0_2
	LDS #$0000
	LDU #ERASE_DATA_TST0_2

ERASE_CODE_TST0_2
	PULU B,X,S
	PSHS B,X

	PULU A
	STA 3,S

	PULU B,X,S
	PSHS B,X

	PULU A
	STA 3,S

ERASE_SSAV_TST0
	LDS #$0000
	PULS DP,U,PC * Ajout du PC au PULS pour economiser le RTS (Gain: 3c 1o)

ERASE_DATA_TST0_1
ERASE_DATA_TST0_2
	FDB $0000
	FDB $0000
	FDB $0000
	FDB $0000
	FDB $0000
	FDB $0000
ERASE_DATA_TST0_END
